!function(t) {
  for (var e = 0, i = ["webkit", "moz"], n = t.requestAnimationFrame, r = t.cancelAnimationFrame, s = i.length; --s >= 0 && !n; )
    n = t[i[s] + "RequestAnimationFrame"],
      r = t[i[s] + "CancelAnimationFrame"];
  n && r || (n = function(t) {
    var i = +new Date
      , n = Math.max(e + 16, i);
    return setTimeout(function() {
      t(e = n)
    }, n - i)
  }
    ,
    r = clearTimeout),
    t.requestAnimationFrame = n,
    t.cancelAnimationFrame = r
}(window),
  function(t, e) {
    function i(t) {
      var e = t.length
        , i = ce.type(t);
      return ce.isWindow(t) ? !1 : 1 === t.nodeType && e ? !0 : "array" === i || "function" !== i && (0 === e || "number" == typeof e && e > 0 && e - 1 in t)
    }
    function n(t) {
      var e = Re[t] = {};
      return ce.each(t.match(pe) || [], function(t, i) {
        e[i] = !0
      }),
        e
    }
    function r(t, i, n, r) {
      if (ce.acceptData(t)) {
        var s, o, a = ce.expando, l = t.nodeType, h = l ? ce.cache : t, c = l ? t[a] : t[a] && a;
        if (c && h[c] && (r || h[c].data) || n !== e || "string" != typeof i)
          return c || (c = l ? t[a] = ee.pop() || ce.guid++ : a),
          h[c] || (h[c] = l ? {} : {
            toJSON: ce.noop
          }),
          ("object" == typeof i || "function" == typeof i) && (r ? h[c] = ce.extend(h[c], i) : h[c].data = ce.extend(h[c].data, i)),
            o = h[c],
          r || (o.data || (o.data = {}),
            o = o.data),
          n !== e && (o[ce.camelCase(i)] = n),
            "string" == typeof i ? (s = o[i],
            null == s && (s = o[ce.camelCase(i)])) : s = o,
            s
      }
    }
    function s(t, e, i) {
      if (ce.acceptData(t)) {
        var n, r, s = t.nodeType, o = s ? ce.cache : t, l = s ? t[ce.expando] : ce.expando;
        if (o[l]) {
          if (e && (n = i ? o[l] : o[l].data)) {
            ce.isArray(e) ? e = e.concat(ce.map(e, ce.camelCase)) : e in n ? e = [e] : (e = ce.camelCase(e),
              e = e in n ? [e] : e.split(" ")),
              r = e.length;
            for (; r--; )
              delete n[e[r]];
            if (i ? !a(n) : !ce.isEmptyObject(n))
              return
          }
          (i || (delete o[l].data,
            a(o[l]))) && (s ? ce.cleanData([t], !0) : ce.support.deleteExpando || o != o.window ? delete o[l] : o[l] = null)
        }
      }
    }
    function o(t, i, n) {
      if (n === e && 1 === t.nodeType) {
        var r = "data-" + i.replace(He, "-$1").toLowerCase();
        if (n = t.getAttribute(r),
          "string" == typeof n) {
          try {
            n = "true" === n ? !0 : "false" === n ? !1 : "null" === n ? null : +n + "" === n ? +n : Se.test(n) ? ce.parseJSON(n) : n
          } catch (s) {}
          ce.data(t, i, n)
        } else
          n = e
      }
      return n
    }
    function a(t) {
      var e;
      for (e in t)
        if (("data" !== e || !ce.isEmptyObject(t[e])) && "toJSON" !== e)
          return !1;
      return !0
    }
    function l() {
      return !0
    }
    function h() {
      return !1
    }
    function c() {
      try {
        return K.activeElement
      } catch (t) {}
    }
    function u(t, e) {
      do
        t = t[e];
      while (t && 1 !== t.nodeType);return t
    }
    function p(t, e, i) {
      if (ce.isFunction(e))
        return ce.grep(t, function(t, n) {
          return !!e.call(t, n, t) !== i
        });
      if (e.nodeType)
        return ce.grep(t, function(t) {
          return t === e !== i
        });
      if ("string" == typeof e) {
        if (Ue.test(e))
          return ce.filter(e, t, i);
        e = ce.filter(e, t)
      }
      return ce.grep(t, function(t) {
        return ce.inArray(t, e) >= 0 !== i
      })
    }
    function d(t) {
      var e = Xe.split("|")
        , i = t.createDocumentFragment();
      if (i.createElement)
        for (; e.length; )
          i.createElement(e.pop());
      return i
    }
    function f(t, e) {
      return ce.nodeName(t, "table") && ce.nodeName(1 === e.nodeType ? e : e.firstChild, "tr") ? t.getElementsByTagName("tbody")[0] || t.appendChild(t.ownerDocument.createElement("tbody")) : t
    }
    function m(t) {
      return t.type = (null !== ce.find.attr(t, "type")) + "/" + t.type,
        t
    }
    function g(t) {
      var e = ri.exec(t.type);
      return e ? t.type = e[1] : t.removeAttribute("type"),
        t
    }
    function v(t, e) {
      for (var i, n = 0; null != (i = t[n]); n++)
        ce._data(i, "globalEval", !e || ce._data(e[n], "globalEval"))
    }
    function y(t, e) {
      if (1 === e.nodeType && ce.hasData(t)) {
        var i, n, r, s = ce._data(t), o = ce._data(e, s), a = s.events;
        if (a) {
          delete o.handle,
            o.events = {};
          for (i in a)
            for (n = 0,
                   r = a[i].length; r > n; n++)
              ce.event.add(e, i, a[i][n])
        }
        o.data && (o.data = ce.extend({}, o.data))
      }
    }
    function E(t, e) {
      var i, n, r;
      if (1 === e.nodeType) {
        if (i = e.nodeName.toLowerCase(),
          !ce.support.noCloneEvent && e[ce.expando]) {
          r = ce._data(e);
          for (n in r.events)
            ce.removeEvent(e, n, r.handle);
          e.removeAttribute(ce.expando)
        }
        "script" === i && e.text !== t.text ? (m(e).text = t.text,
          g(e)) : "object" === i ? (e.parentNode && (e.outerHTML = t.outerHTML),
        ce.support.html5Clone && t.innerHTML && !ce.trim(e.innerHTML) && (e.innerHTML = t.innerHTML)) : "input" === i && ei.test(t.type) ? (e.defaultChecked = e.checked = t.checked,
        e.value !== t.value && (e.value = t.value)) : "option" === i ? e.defaultSelected = e.selected = t.defaultSelected : ("input" === i || "textarea" === i) && (e.defaultValue = t.defaultValue)
      }
    }
    function T(t, i) {
      var n, r, s = 0, o = typeof t.getElementsByTagName !== q ? t.getElementsByTagName(i || "*") : typeof t.querySelectorAll !== q ? t.querySelectorAll(i || "*") : e;
      if (!o)
        for (o = [],
               n = t.childNodes || t; null != (r = n[s]); s++)
          !i || ce.nodeName(r, i) ? o.push(r) : ce.merge(o, T(r, i));
      return i === e || i && ce.nodeName(t, i) ? ce.merge([t], o) : o
    }
    function x(t) {
      ei.test(t.type) && (t.defaultChecked = t.checked)
    }
    function b(t, e) {
      if (e in t)
        return e;
      for (var i = e.charAt(0).toUpperCase() + e.slice(1), n = e, r = _i.length; r--; )
        if (e = _i[r] + i,
          e in t)
          return e;
      return n
    }
    function w(t, e) {
      return t = e || t,
      "none" === ce.css(t, "display") || !ce.contains(t.ownerDocument, t)
    }
    function _(t, e) {
      for (var i, n, r, s = [], o = 0, a = t.length; a > o; o++)
        n = t[o],
        n.style && (s[o] = ce._data(n, "olddisplay"),
          i = n.style.display,
          e ? (s[o] || "none" !== i || (n.style.display = ""),
          "" === n.style.display && w(n) && (s[o] = ce._data(n, "olddisplay", M(n.nodeName)))) : s[o] || (r = w(n),
          (i && "none" !== i || !r) && ce._data(n, "olddisplay", r ? i : ce.css(n, "display"))));
      for (o = 0; a > o; o++)
        n = t[o],
        n.style && (e && "none" !== n.style.display && "" !== n.style.display || (n.style.display = e ? s[o] || "" : "none"));
      return t
    }
    function R(t, e, i) {
      var n = vi.exec(e);
      return n ? Math.max(0, n[1] - (i || 0)) + (n[2] || "px") : e
    }
    function S(t, e, i, n, r) {
      for (var s = i === (n ? "border" : "content") ? 4 : "width" === e ? 1 : 0, o = 0; 4 > s; s += 2)
        "margin" === i && (o += ce.css(t, i + wi[s], !0, r)),
          n ? ("content" === i && (o -= ce.css(t, "padding" + wi[s], !0, r)),
          "margin" !== i && (o -= ce.css(t, "border" + wi[s] + "Width", !0, r))) : (o += ce.css(t, "padding" + wi[s], !0, r),
          "padding" !== i && (o += ce.css(t, "border" + wi[s] + "Width", !0, r)));
      return o
    }
    function H(t, e, i) {
      var n = !0
        , r = "width" === e ? t.offsetWidth : t.offsetHeight
        , s = ci(t)
        , o = ce.support.boxSizing && "border-box" === ce.css(t, "boxSizing", !1, s);
      if (0 >= r || null == r) {
        if (r = ui(t, e, s),
          (0 > r || null == r) && (r = t.style[e]),
            yi.test(r))
          return r;
        n = o && (ce.support.boxSizingReliable || r === t.style[e]),
          r = parseFloat(r) || 0
      }
      return r + S(t, e, i || (o ? "border" : "content"), n, s) + "px"
    }
    function M(t) {
      var e = K
        , i = Ti[t];
      return i || (i = C(t, e),
      "none" !== i && i || (hi = (hi || ce("<iframe frameborder='0' width='0' height='0'/>").css("cssText", "display:block !important")).appendTo(e.documentElement),
        e = (hi[0].contentWindow || hi[0].contentDocument).document,
        e.write("<!doctype html><html><body>"),
        e.close(),
        i = C(t, e),
        hi.detach()),
        Ti[t] = i),
        i
    }
    function C(t, e) {
      var i = ce(e.createElement(t)).appendTo(e.body)
        , n = ce.css(i[0], "display");
      return i.remove(),
        n
    }
    function P(t, e, i, n) {
      var r;
      if (ce.isArray(e))
        ce.each(e, function(e, r) {
          i || Si.test(t) ? n(t, r) : P(t + "[" + ("object" == typeof r ? e : "") + "]", r, i, n)
        });
      else if (i || "object" !== ce.type(e))
        n(t, e);
      else
        for (r in e)
          P(t + "[" + r + "]", e[r], i, n)
    }
    function A(t) {
      return function(e, i) {
        "string" != typeof e && (i = e,
          e = "*");
        var n, r = 0, s = e.toLowerCase().match(pe) || [];
        if (ce.isFunction(i))
          for (; n = s[r++]; )
            "+" === n[0] ? (n = n.slice(1) || "*",
              (t[n] = t[n] || []).unshift(i)) : (t[n] = t[n] || []).push(i)
      }
    }
    function L(t, i, n, r) {
      function s(l) {
        var h;
        return o[l] = !0,
          ce.each(t[l] || [], function(t, l) {
            var c = l(i, n, r);
            return "string" != typeof c || a || o[c] ? a ? !(h = c) : e : (i.dataTypes.unshift(c),
              s(c),
              !1)
          }),
          h
      }
      var o = {}
        , a = t === Gi;
      return s(i.dataTypes[0]) || !o["*"] && s("*")
    }
    function D(t, i) {
      var n, r, s = ce.ajaxSettings.flatOptions || {};
      for (r in i)
        i[r] !== e && ((s[r] ? t : n || (n = {}))[r] = i[r]);
      return n && ce.extend(!0, t, n),
        t
    }
    function k(t, i, n) {
      for (var r, s, o, a, l = t.contents, h = t.dataTypes; "*" === h[0]; )
        h.shift(),
        s === e && (s = t.mimeType || i.getResponseHeader("Content-Type"));
      if (s)
        for (a in l)
          if (l[a] && l[a].test(s)) {
            h.unshift(a);
            break
          }
      if (h[0]in n)
        o = h[0];
      else {
        for (a in n) {
          if (!h[0] || t.converters[a + " " + h[0]]) {
            o = a;
            break
          }
          r || (r = a)
        }
        o = o || r
      }
      return o ? (o !== h[0] && h.unshift(o),
        n[o]) : e
    }
    function I(t, e, i, n) {
      var r, s, o, a, l, h = {}, c = t.dataTypes.slice();
      if (c[1])
        for (o in t.converters)
          h[o.toLowerCase()] = t.converters[o];
      for (s = c.shift(); s; )
        if (t.responseFields[s] && (i[t.responseFields[s]] = e),
          !l && n && t.dataFilter && (e = t.dataFilter(e, t.dataType)),
            l = s,
            s = c.shift())
          if ("*" === s)
            s = l;
          else if ("*" !== l && l !== s) {
            if (o = h[l + " " + s] || h["* " + s],
                !o)
              for (r in h)
                if (a = r.split(" "),
                  a[1] === s && (o = h[l + " " + a[0]] || h["* " + a[0]])) {
                  o === !0 ? o = h[r] : h[r] !== !0 && (s = a[0],
                    c.unshift(a[1]));
                  break
                }
            if (o !== !0)
              if (o && t["throws"])
                e = o(e);
              else
                try {
                  e = o(e)
                } catch (u) {
                  return {
                    state: "parsererror",
                    error: o ? u : "No conversion from " + l + " to " + s
                  }
                }
          }
      return {
        state: "success",
        data: e
      }
    }
    function O() {
      try {
        return new t.XMLHttpRequest
      } catch (e) {}
    }
    function z() {
      try {
        return new t.ActiveXObject("Microsoft.XMLHTTP")
      } catch (e) {}
    }
    function F() {
      return setTimeout(function() {
        Zi = e
      }),
        Zi = ce.now()
    }
    function N(t, e, i) {
      for (var n, r = (sn[e] || []).concat(sn["*"]), s = 0, o = r.length; o > s; s++)
        if (n = r[s].call(i, e, t))
          return n
    }
    function B(t, e, i) {
      var n, r, s = 0, o = rn.length, a = ce.Deferred().always(function() {
        delete l.elem
      }), l = function() {
        if (r)
          return !1;
        for (var e = Zi || F(), i = Math.max(0, h.startTime + h.duration - e), n = i / h.duration || 0, s = 1 - n, o = 0, l = h.tweens.length; l > o; o++)
          h.tweens[o].run(s);
        return a.notifyWith(t, [h, s, i]),
          1 > s && l ? i : (a.resolveWith(t, [h]),
            !1)
      }, h = a.promise({
        elem: t,
        props: ce.extend({}, e),
        opts: ce.extend(!0, {
          specialEasing: {}
        }, i),
        originalProperties: e,
        originalOptions: i,
        startTime: Zi || F(),
        duration: i.duration,
        tweens: [],
        createTween: function(e, i) {
          var n = ce.Tween(t, h.opts, e, i, h.opts.specialEasing[e] || h.opts.easing);
          return h.tweens.push(n),
            n
        },
        stop: function(e) {
          var i = 0
            , n = e ? h.tweens.length : 0;
          if (r)
            return this;
          for (r = !0; n > i; i++)
            h.tweens[i].run(1);
          return e ? a.resolveWith(t, [h, e]) : a.rejectWith(t, [h, e]),
            this
        }
      }), c = h.props;
      for (V(c, h.opts.specialEasing); o > s; s++)
        if (n = rn[s].call(h, t, c, h.opts))
          return n;
      return ce.map(c, N, h),
      ce.isFunction(h.opts.start) && h.opts.start.call(t, h),
        ce.fx.timer(ce.extend(l, {
          elem: t,
          anim: h,
          queue: h.opts.queue
        })),
        h.progress(h.opts.progress).done(h.opts.done, h.opts.complete).fail(h.opts.fail).always(h.opts.always)
    }
    function V(t, e) {
      var i, n, r, s, o;
      for (i in t)
        if (n = ce.camelCase(i),
            r = e[n],
            s = t[i],
          ce.isArray(s) && (r = s[1],
            s = t[i] = s[0]),
          i !== n && (t[n] = s,
            delete t[i]),
            o = ce.cssHooks[n],
          o && "expand"in o) {
          s = o.expand(s),
            delete t[n];
          for (i in s)
            i in t || (t[i] = s[i],
              e[i] = r)
        } else
          e[n] = r
    }
    function U(t, e, i) {
      var n, r, s, o, a, l, h = this, c = {}, u = t.style, p = t.nodeType && w(t), d = ce._data(t, "fxshow");
      i.queue || (a = ce._queueHooks(t, "fx"),
      null == a.unqueued && (a.unqueued = 0,
          l = a.empty.fire,
          a.empty.fire = function() {
            a.unqueued || l()
          }
      ),
        a.unqueued++,
        h.always(function() {
          h.always(function() {
            a.unqueued--,
            ce.queue(t, "fx").length || a.empty.fire()
          })
        })),
      1 === t.nodeType && ("height"in e || "width"in e) && (i.overflow = [u.overflow, u.overflowX, u.overflowY],
      "inline" === ce.css(t, "display") && "none" === ce.css(t, "float") && (ce.support.inlineBlockNeedsLayout && "inline" !== M(t.nodeName) ? u.zoom = 1 : u.display = "inline-block")),
      i.overflow && (u.overflow = "hidden",
      ce.support.shrinkWrapBlocks || h.always(function() {
        u.overflow = i.overflow[0],
          u.overflowX = i.overflow[1],
          u.overflowY = i.overflow[2]
      }));
      for (n in e)
        if (r = e[n],
            tn.exec(r)) {
          if (delete e[n],
              s = s || "toggle" === r,
            r === (p ? "hide" : "show"))
            continue;
          c[n] = d && d[n] || ce.style(t, n)
        }
      if (!ce.isEmptyObject(c)) {
        d ? "hidden"in d && (p = d.hidden) : d = ce._data(t, "fxshow", {}),
        s && (d.hidden = !p),
          p ? ce(t).show() : h.done(function() {
            ce(t).hide()
          }),
          h.done(function() {
            var e;
            ce._removeData(t, "fxshow");
            for (e in c)
              ce.style(t, e, c[e])
          });
        for (n in c)
          o = N(p ? d[n] : 0, n, h),
          n in d || (d[n] = o.start,
          p && (o.end = o.start,
            o.start = "width" === n || "height" === n ? 1 : 0))
      }
    }
    function G(t, e, i, n, r) {
      return new G.prototype.init(t,e,i,n,r)
    }
    function W(t, e) {
      var i, n = {
        height: t
      }, r = 0;
      for (e = e ? 1 : 0; 4 > r; r += 2 - e)
        i = wi[r],
          n["margin" + i] = n["padding" + i] = t;
      return e && (n.opacity = n.width = t),
        n
    }
    function j(t) {
      return ce.isWindow(t) ? t : 9 === t.nodeType ? t.defaultView || t.parentWindow : !1
    }
    var X, Y, q = typeof e, $ = t.location, K = t.document, Q = K.documentElement, Z = t.jQuery, J = t.$, te = {}, ee = [], ie = "1.10.2", ne = ee.concat, re = ee.push, se = ee.slice, oe = ee.indexOf, ae = te.toString, le = te.hasOwnProperty, he = ie.trim, ce = function(t, e) {
      return new ce.fn.init(t,e,Y)
    }, ue = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, pe = /\S+/g, de = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, fe = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, me = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, ge = /^[\],:{}\s]*$/, ve = /(?:^|:|,)(?:\s*\[)+/g, ye = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g, Ee = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g, Te = /^-ms-/, xe = /-([\da-z])/gi, be = function(t, e) {
      return e.toUpperCase()
    }, we = function(t) {
      (K.addEventListener || "load" === t.type || "complete" === K.readyState) && (_e(),
        ce.ready())
    }, _e = function() {
      K.addEventListener ? (K.removeEventListener("DOMContentLoaded", we, !1),
        t.removeEventListener("load", we, !1)) : (K.detachEvent("onreadystatechange", we),
        t.detachEvent("onload", we))
    };
    ce.fn = ce.prototype = {
      jquery: ie,
      constructor: ce,
      init: function(t, i, n) {
        var r, s;
        if (!t)
          return this;
        if ("string" == typeof t) {
          if (r = "<" === t.charAt(0) && ">" === t.charAt(t.length - 1) && t.length >= 3 ? [null, t, null] : fe.exec(t),
            !r || !r[1] && i)
            return !i || i.jquery ? (i || n).find(t) : this.constructor(i).find(t);
          if (r[1]) {
            if (i = i instanceof ce ? i[0] : i,
                ce.merge(this, ce.parseHTML(r[1], i && i.nodeType ? i.ownerDocument || i : K, !0)),
              me.test(r[1]) && ce.isPlainObject(i))
              for (r in i)
                ce.isFunction(this[r]) ? this[r](i[r]) : this.attr(r, i[r]);
            return this
          }
          if (s = K.getElementById(r[2]),
            s && s.parentNode) {
            if (s.id !== r[2])
              return n.find(t);
            this.length = 1,
              this[0] = s
          }
          return this.context = K,
            this.selector = t,
            this
        }
        return t.nodeType ? (this.context = this[0] = t,
          this.length = 1,
          this) : ce.isFunction(t) ? n.ready(t) : (t.selector !== e && (this.selector = t.selector,
          this.context = t.context),
          ce.makeArray(t, this))
      },
      selector: "",
      length: 0,
      toArray: function() {
        return se.call(this)
      },
      get: function(t) {
        return null == t ? this.toArray() : 0 > t ? this[this.length + t] : this[t]
      },
      pushStack: function(t) {
        var e = ce.merge(this.constructor(), t);
        return e.prevObject = this,
          e.context = this.context,
          e
      },
      each: function(t, e) {
        return ce.each(this, t, e)
      },
      ready: function(t) {
        return ce.ready.promise().done(t),
          this
      },
      slice: function() {
        return this.pushStack(se.apply(this, arguments))
      },
      first: function() {
        return this.eq(0)
      },
      last: function() {
        return this.eq(-1)
      },
      eq: function(t) {
        var e = this.length
          , i = +t + (0 > t ? e : 0);
        return this.pushStack(i >= 0 && e > i ? [this[i]] : [])
      },
      map: function(t) {
        return this.pushStack(ce.map(this, function(e, i) {
          return t.call(e, i, e)
        }))
      },
      end: function() {
        return this.prevObject || this.constructor(null)
      },
      push: re,
      sort: [].sort,
      splice: [].splice
    },
      ce.fn.init.prototype = ce.fn,
      ce.extend = ce.fn.extend = function() {
        var t, i, n, r, s, o, a = arguments[0] || {}, l = 1, h = arguments.length, c = !1;
        for ("boolean" == typeof a && (c = a,
          a = arguments[1] || {},
          l = 2),
             "object" == typeof a || ce.isFunction(a) || (a = {}),
             h === l && (a = this,
               --l); h > l; l++)
          if (null != (s = arguments[l]))
            for (r in s)
              t = a[r],
                n = s[r],
              a !== n && (c && n && (ce.isPlainObject(n) || (i = ce.isArray(n))) ? (i ? (i = !1,
                o = t && ce.isArray(t) ? t : []) : o = t && ce.isPlainObject(t) ? t : {},
                a[r] = ce.extend(c, o, n)) : n !== e && (a[r] = n));
        return a
      }
      ,
      ce.extend({
        expando: "jQuery" + (ie + Math.random()).replace(/\D/g, ""),
        noConflict: function(e) {
          return t.$ === ce && (t.$ = J),
          e && t.jQuery === ce && (t.jQuery = Z),
            ce
        },
        isReady: !1,
        readyWait: 1,
        holdReady: function(t) {
          t ? ce.readyWait++ : ce.ready(!0)
        },
        ready: function(t) {
          if (t === !0 ? !--ce.readyWait : !ce.isReady) {
            if (!K.body)
              return setTimeout(ce.ready);
            ce.isReady = !0,
            t !== !0 && --ce.readyWait > 0 || (X.resolveWith(K, [ce]),
            ce.fn.trigger && ce(K).trigger("ready").off("ready"))
          }
        },
        isFunction: function(t) {
          return "function" === ce.type(t)
        },
        isArray: Array.isArray || function(t) {
          return "array" === ce.type(t)
        }
        ,
        isWindow: function(t) {
          return null != t && t == t.window
        },
        isNumeric: function(t) {
          return !isNaN(parseFloat(t)) && isFinite(t)
        },
        type: function(t) {
          return null == t ? t + "" : "object" == typeof t || "function" == typeof t ? te[ae.call(t)] || "object" : typeof t
        },
        isPlainObject: function(t) {
          var i;
          if (!t || "object" !== ce.type(t) || t.nodeType || ce.isWindow(t))
            return !1;
          try {
            if (t.constructor && !le.call(t, "constructor") && !le.call(t.constructor.prototype, "isPrototypeOf"))
              return !1
          } catch (n) {
            return !1
          }
          if (ce.support.ownLast)
            for (i in t)
              return le.call(t, i);
          for (i in t)
            ;
          return i === e || le.call(t, i)
        },
        isEmptyObject: function(t) {
          var e;
          for (e in t)
            return !1;
          return !0
        },
        error: function(t) {
          throw Error(t)
        },
        parseHTML: function(t, e, i) {
          if (!t || "string" != typeof t)
            return null;
          "boolean" == typeof e && (i = e,
            e = !1),
            e = e || K;
          var n = me.exec(t)
            , r = !i && [];
          return n ? [e.createElement(n[1])] : (n = ce.buildFragment([t], e, r),
          r && ce(r).remove(),
            ce.merge([], n.childNodes))
        },
        parseJSON: function(i) {
          return t.JSON && t.JSON.parse ? t.JSON.parse(i) : null === i ? i : "string" == typeof i && (i = ce.trim(i),
          i && ge.test(i.replace(ye, "@").replace(Ee, "]").replace(ve, ""))) ? Function("return " + i)() : (ce.error("Invalid JSON: " + i),
            e)
        },
        parseXML: function(i) {
          var n, r;
          if (!i || "string" != typeof i)
            return null;
          try {
            t.DOMParser ? (r = new DOMParser,
              n = r.parseFromString(i, "text/xml")) : (n = new ActiveXObject("Microsoft.XMLDOM"),
              n.async = "false",
              n.loadXML(i))
          } catch (s) {
            n = e
          }
          return n && n.documentElement && !n.getElementsByTagName("parsererror").length || ce.error("Invalid XML: " + i),
            n
        },
        noop: function() {},
        globalEval: function(e) {
          e && ce.trim(e) && (t.execScript || function(e) {
              t.eval.call(t, e)
            }
          )(e)
        },
        camelCase: function(t) {
          return t.replace(Te, "ms-").replace(xe, be)
        },
        nodeName: function(t, e) {
          return t.nodeName && t.nodeName.toLowerCase() === e.toLowerCase()
        },
        each: function(t, e, n) {
          var r, s = 0, o = t.length, a = i(t);
          if (n) {
            if (a)
              for (; o > s && (r = e.apply(t[s], n),
              r !== !1); s++)
                ;
            else
              for (s in t)
                if (r = e.apply(t[s], n),
                  r === !1)
                  break
          } else if (a)
            for (; o > s && (r = e.call(t[s], s, t[s]),
            r !== !1); s++)
              ;
          else
            for (s in t)
              if (r = e.call(t[s], s, t[s]),
                r === !1)
                break;
          return t
        },
        trim: he && !he.call("\ufeff\xa0") ? function(t) {
            return null == t ? "" : he.call(t)
          }
          : function(t) {
            return null == t ? "" : (t + "").replace(de, "")
          }
        ,
        makeArray: function(t, e) {
          var n = e || [];
          return null != t && (i(Object(t)) ? ce.merge(n, "string" == typeof t ? [t] : t) : re.call(n, t)),
            n
        },
        inArray: function(t, e, i) {
          var n;
          if (e) {
            if (oe)
              return oe.call(e, t, i);
            for (n = e.length,
                   i = i ? 0 > i ? Math.max(0, n + i) : i : 0; n > i; i++)
              if (i in e && e[i] === t)
                return i
          }
          return -1
        },
        merge: function(t, i) {
          var n = i.length
            , r = t.length
            , s = 0;
          if ("number" == typeof n)
            for (; n > s; s++)
              t[r++] = i[s];
          else
            for (; i[s] !== e; )
              t[r++] = i[s++];
          return t.length = r,
            t
        },
        grep: function(t, e, i) {
          var n, r = [], s = 0, o = t.length;
          for (i = !!i; o > s; s++)
            n = !!e(t[s], s),
            i !== n && r.push(t[s]);
          return r
        },
        map: function(t, e, n) {
          var r, s = 0, o = t.length, a = i(t), l = [];
          if (a)
            for (; o > s; s++)
              r = e(t[s], s, n),
              null != r && (l[l.length] = r);
          else
            for (s in t)
              r = e(t[s], s, n),
              null != r && (l[l.length] = r);
          return ne.apply([], l)
        },
        guid: 1,
        proxy: function(t, i) {
          var n, r, s;
          return "string" == typeof i && (s = t[i],
            i = t,
            t = s),
            ce.isFunction(t) ? (n = se.call(arguments, 2),
              r = function() {
                return t.apply(i || this, n.concat(se.call(arguments)))
              }
              ,
              r.guid = t.guid = t.guid || ce.guid++,
              r) : e
        },
        access: function(t, i, n, r, s, o, a) {
          var l = 0
            , h = t.length
            , c = null == n;
          if ("object" === ce.type(n)) {
            s = !0;
            for (l in n)
              ce.access(t, i, l, n[l], !0, o, a)
          } else if (r !== e && (s = !0,
            ce.isFunction(r) || (a = !0),
            c && (a ? (i.call(t, r),
              i = null) : (c = i,
                i = function(t, e, i) {
                  return c.call(ce(t), i)
                }
            )),
              i))
            for (; h > l; l++)
              i(t[l], n, a ? r : r.call(t[l], l, i(t[l], n)));
          return s ? t : c ? i.call(t) : h ? i(t[0], n) : o
        },
        now: function() {
          return (new Date).getTime()
        },
        swap: function(t, e, i, n) {
          var r, s, o = {};
          for (s in e)
            o[s] = t.style[s],
              t.style[s] = e[s];
          r = i.apply(t, n || []);
          for (s in e)
            t.style[s] = o[s];
          return r
        }
      }),
      ce.ready.promise = function(e) {
        if (!X)
          if (X = ce.Deferred(),
            "complete" === K.readyState)
            setTimeout(ce.ready);
          else if (K.addEventListener)
            K.addEventListener("DOMContentLoaded", we, !1),
              t.addEventListener("load", we, !1);
          else {
            K.attachEvent("onreadystatechange", we),
              t.attachEvent("onload", we);
            var i = !1;
            try {
              i = null == t.frameElement && K.documentElement
            } catch (n) {}
            i && i.doScroll && function r() {
              if (!ce.isReady) {
                try {
                  i.doScroll("left")
                } catch (t) {
                  return setTimeout(r, 50)
                }
                _e(),
                  ce.ready()
              }
            }()
          }
        return X.promise(e)
      }
      ,
      ce.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(t, e) {
        te["[object " + e + "]"] = e.toLowerCase()
      }),
      Y = ce(K),
      function(t, e) {
        function i(t, e, i, n) {
          var r, s, o, a, l, h, c, u, f, m;
          if ((e ? e.ownerDocument || e : B) !== L && A(e),
              e = e || L,
              i = i || [],
            !t || "string" != typeof t)
            return i;
          if (1 !== (a = e.nodeType) && 9 !== a)
            return [];
          if (k && !n) {
            if (r = Ee.exec(t))
              if (o = r[1]) {
                if (9 === a) {
                  if (s = e.getElementById(o),
                    !s || !s.parentNode)
                    return i;
                  if (s.id === o)
                    return i.push(s),
                      i
                } else if (e.ownerDocument && (s = e.ownerDocument.getElementById(o)) && F(e, s) && s.id === o)
                  return i.push(s),
                    i
              } else {
                if (r[2])
                  return te.apply(i, e.getElementsByTagName(t)),
                    i;
                if ((o = r[3]) && w.getElementsByClassName && e.getElementsByClassName)
                  return te.apply(i, e.getElementsByClassName(o)),
                    i
              }
            if (w.qsa && (!I || !I.test(t))) {
              if (u = c = N,
                  f = e,
                  m = 9 === a && t,
                1 === a && "object" !== e.nodeName.toLowerCase()) {
                for (h = p(t),
                       (c = e.getAttribute("id")) ? u = c.replace(be, "\\$&") : e.setAttribute("id", u),
                       u = "[id='" + u + "'] ",
                       l = h.length; l--; )
                  h[l] = u + d(h[l]);
                f = de.test(t) && e.parentNode || e,
                  m = h.join(",")
              }
              if (m)
                try {
                  return te.apply(i, f.querySelectorAll(m)),
                    i
                } catch (g) {} finally {
                  c || e.removeAttribute("id")
                }
            }
          }
          return x(t.replace(he, "$1"), e, i, n)
        }
        function n() {
          function t(i, n) {
            return e.push(i += " ") > R.cacheLength && delete t[e.shift()],
              t[i] = n
          }
          var e = [];
          return t
        }
        function r(t) {
          return t[N] = !0,
            t
        }
        function s(t) {
          var e = L.createElement("div");
          try {
            return !!t(e)
          } catch (i) {
            return !1
          } finally {
            e.parentNode && e.parentNode.removeChild(e),
              e = null
          }
        }
        function o(t, e) {
          for (var i = t.split("|"), n = t.length; n--; )
            R.attrHandle[i[n]] = e
        }
        function a(t, e) {
          var i = e && t
            , n = i && 1 === t.nodeType && 1 === e.nodeType && (~e.sourceIndex || $) - (~t.sourceIndex || $);
          if (n)
            return n;
          if (i)
            for (; i = i.nextSibling; )
              if (i === e)
                return -1;
          return t ? 1 : -1
        }
        function l(t) {
          return function(e) {
            var i = e.nodeName.toLowerCase();
            return "input" === i && e.type === t
          }
        }
        function h(t) {
          return function(e) {
            var i = e.nodeName.toLowerCase();
            return ("input" === i || "button" === i) && e.type === t
          }
        }
        function c(t) {
          return r(function(e) {
            return e = +e,
              r(function(i, n) {
                for (var r, s = t([], i.length, e), o = s.length; o--; )
                  i[r = s[o]] && (i[r] = !(n[r] = i[r]))
              })
          })
        }
        function u() {}
        function p(t, e) {
          var n, r, s, o, a, l, h, c = W[t + " "];
          if (c)
            return e ? 0 : c.slice(0);
          for (a = t,
                 l = [],
                 h = R.preFilter; a; ) {
            (!n || (r = ue.exec(a))) && (r && (a = a.slice(r[0].length) || a),
              l.push(s = [])),
              n = !1,
            (r = pe.exec(a)) && (n = r.shift(),
              s.push({
                value: n,
                type: r[0].replace(he, " ")
              }),
              a = a.slice(n.length));
            for (o in R.filter)
              !(r = ve[o].exec(a)) || h[o] && !(r = h[o](r)) || (n = r.shift(),
                s.push({
                  value: n,
                  type: o,
                  matches: r
                }),
                a = a.slice(n.length));
            if (!n)
              break
          }
          return e ? a.length : a ? i.error(t) : W(t, l).slice(0)
        }
        function d(t) {
          for (var e = 0, i = t.length, n = ""; i > e; e++)
            n += t[e].value;
          return n
        }
        function f(t, e, i) {
          var n = e.dir
            , r = i && "parentNode" === n
            , s = U++;
          return e.first ? function(e, i, s) {
              for (; e = e[n]; )
                if (1 === e.nodeType || r)
                  return t(e, i, s)
            }
            : function(e, i, o) {
              var a, l, h, c = V + " " + s;
              if (o) {
                for (; e = e[n]; )
                  if ((1 === e.nodeType || r) && t(e, i, o))
                    return !0
              } else
                for (; e = e[n]; )
                  if (1 === e.nodeType || r)
                    if (h = e[N] || (e[N] = {}),
                      (l = h[n]) && l[0] === c) {
                      if ((a = l[1]) === !0 || a === _)
                        return a === !0
                    } else if (l = h[n] = [c],
                        l[1] = t(e, i, o) || _,
                      l[1] === !0)
                      return !0
            }
        }
        function m(t) {
          return t.length > 1 ? function(e, i, n) {
              for (var r = t.length; r--; )
                if (!t[r](e, i, n))
                  return !1;
              return !0
            }
            : t[0]
        }
        function g(t, e, i, n, r) {
          for (var s, o = [], a = 0, l = t.length, h = null != e; l > a; a++)
            (s = t[a]) && (!i || i(s, n, r)) && (o.push(s),
            h && e.push(a));
          return o
        }
        function v(t, e, i, n, s, o) {
          return n && !n[N] && (n = v(n)),
          s && !s[N] && (s = v(s, o)),
            r(function(r, o, a, l) {
              var h, c, u, p = [], d = [], f = o.length, m = r || T(e || "*", a.nodeType ? [a] : a, []), v = !t || !r && e ? m : g(m, p, t, a, l), y = i ? s || (r ? t : f || n) ? [] : o : v;
              if (i && i(v, y, a, l),
                  n)
                for (h = g(y, d),
                       n(h, [], a, l),
                       c = h.length; c--; )
                  (u = h[c]) && (y[d[c]] = !(v[d[c]] = u));
              if (r) {
                if (s || t) {
                  if (s) {
                    for (h = [],
                           c = y.length; c--; )
                      (u = y[c]) && h.push(v[c] = u);
                    s(null, y = [], h, l)
                  }
                  for (c = y.length; c--; )
                    (u = y[c]) && (h = s ? ie.call(r, u) : p[c]) > -1 && (r[h] = !(o[h] = u))
                }
              } else
                y = g(y === o ? y.splice(f, y.length) : y),
                  s ? s(null, o, y, l) : te.apply(o, y)
            })
        }
        function y(t) {
          for (var e, i, n, r = t.length, s = R.relative[t[0].type], o = s || R.relative[" "], a = s ? 1 : 0, l = f(function(t) {
            return t === e
          }, o, !0), h = f(function(t) {
            return ie.call(e, t) > -1
          }, o, !0), c = [function(t, i, n) {
            return !s && (n || i !== C) || ((e = i).nodeType ? l(t, i, n) : h(t, i, n))
          }
          ]; r > a; a++)
            if (i = R.relative[t[a].type])
              c = [f(m(c), i)];
            else {
              if (i = R.filter[t[a].type].apply(null, t[a].matches),
                  i[N]) {
                for (n = ++a; r > n && !R.relative[t[n].type]; n++)
                  ;
                return v(a > 1 && m(c), a > 1 && d(t.slice(0, a - 1).concat({
                  value: " " === t[a - 2].type ? "*" : ""
                })).replace(he, "$1"), i, n > a && y(t.slice(a, n)), r > n && y(t = t.slice(n)), r > n && d(t))
              }
              c.push(i)
            }
          return m(c)
        }
        function E(t, e) {
          var n = 0
            , s = e.length > 0
            , o = t.length > 0
            , a = function(r, a, l, h, c) {
            var u, p, d, f = [], m = 0, v = "0", y = r && [], E = null != c, T = C, x = r || o && R.find.TAG("*", c && a.parentNode || a), b = V += null == T ? 1 : Math.random() || .1;
            for (E && (C = a !== L && a,
              _ = n); null != (u = x[v]); v++) {
              if (o && u) {
                for (p = 0; d = t[p++]; )
                  if (d(u, a, l)) {
                    h.push(u);
                    break
                  }
                E && (V = b,
                  _ = ++n)
              }
              s && ((u = !d && u) && m--,
              r && y.push(u))
            }
            if (m += v,
              s && v !== m) {
              for (p = 0; d = e[p++]; )
                d(y, f, a, l);
              if (r) {
                if (m > 0)
                  for (; v--; )
                    y[v] || f[v] || (f[v] = Z.call(h));
                f = g(f)
              }
              te.apply(h, f),
              E && !r && f.length > 0 && m + e.length > 1 && i.uniqueSort(h)
            }
            return E && (V = b,
              C = T),
              y
          };
          return s ? r(a) : a
        }
        function T(t, e, n) {
          for (var r = 0, s = e.length; s > r; r++)
            i(t, e[r], n);
          return n
        }
        function x(t, e, i, n) {
          var r, s, o, a, l, h = p(t);
          if (!n && 1 === h.length) {
            if (s = h[0] = h[0].slice(0),
              s.length > 2 && "ID" === (o = s[0]).type && w.getById && 9 === e.nodeType && k && R.relative[s[1].type]) {
              if (e = (R.find.ID(o.matches[0].replace(we, _e), e) || [])[0],
                  !e)
                return i;
              t = t.slice(s.shift().value.length)
            }
            for (r = ve.needsContext.test(t) ? 0 : s.length; r-- && (o = s[r],
              !R.relative[a = o.type]); )
              if ((l = R.find[a]) && (n = l(o.matches[0].replace(we, _e), de.test(s[0].type) && e.parentNode || e))) {
                if (s.splice(r, 1),
                    t = n.length && d(s),
                    !t)
                  return te.apply(i, n),
                    i;
                break
              }
          }
          return M(t, h)(n, e, !k, i, de.test(t)),
            i
        }
        var b, w, _, R, S, H, M, C, P, A, L, D, k, I, O, z, F, N = "sizzle" + -new Date, B = t.document, V = 0, U = 0, G = n(), W = n(), j = n(), X = !1, Y = function(t, e) {
          return t === e ? (X = !0,
            0) : 0
        }, q = typeof e, $ = 1 << 31, K = {}.hasOwnProperty, Q = [], Z = Q.pop, J = Q.push, te = Q.push, ee = Q.slice, ie = Q.indexOf || function(t) {
          for (var e = 0, i = this.length; i > e; e++)
            if (this[e] === t)
              return e;
          return -1
        }
          , ne = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", re = "[\\x20\\t\\r\\n\\f]", se = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", oe = se.replace("w", "w#"), ae = "\\[" + re + "*(" + se + ")" + re + "*(?:([*^$|!~]?=)" + re + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + oe + ")|)|)" + re + "*\\]", le = ":(" + se + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + ae.replace(3, 8) + ")*)|.*)\\)|)", he = RegExp("^" + re + "+|((?:^|[^\\\\])(?:\\\\.)*)" + re + "+$", "g"), ue = RegExp("^" + re + "*," + re + "*"), pe = RegExp("^" + re + "*([>+~]|" + re + ")" + re + "*"), de = RegExp(re + "*[+~]"), fe = RegExp("=" + re + "*([^\\]'\"]*)" + re + "*\\]", "g"), me = RegExp(le), ge = RegExp("^" + oe + "$"), ve = {
          ID: RegExp("^#(" + se + ")"),
          CLASS: RegExp("^\\.(" + se + ")"),
          TAG: RegExp("^(" + se.replace("w", "w*") + ")"),
          ATTR: RegExp("^" + ae),
          PSEUDO: RegExp("^" + le),
          CHILD: RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + re + "*(even|odd|(([+-]|)(\\d*)n|)" + re + "*(?:([+-]|)" + re + "*(\\d+)|))" + re + "*\\)|)", "i"),
          bool: RegExp("^(?:" + ne + ")$", "i"),
          needsContext: RegExp("^" + re + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + re + "*((?:-\\d)?\\d*)" + re + "*\\)|)(?=[^-]|$)", "i")
        }, ye = /^[^{]+\{\s*\[native \w/, Ee = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, Te = /^(?:input|select|textarea|button)$/i, xe = /^h\d$/i, be = /'|\\/g, we = RegExp("\\\\([\\da-f]{1,6}" + re + "?|(" + re + ")|.)", "ig"), _e = function(t, e, i) {
          var n = "0x" + e - 65536;
          return n !== n || i ? e : 0 > n ? String.fromCharCode(n + 65536) : String.fromCharCode(55296 | n >> 10, 56320 | 1023 & n)
        };
        try {
          te.apply(Q = ee.call(B.childNodes), B.childNodes),
            Q[B.childNodes.length].nodeType
        } catch (Re) {
          te = {
            apply: Q.length ? function(t, e) {
                J.apply(t, ee.call(e))
              }
              : function(t, e) {
                for (var i = t.length, n = 0; t[i++] = e[n++]; )
                  ;
                t.length = i - 1
              }
          }
        }
        H = i.isXML = function(t) {
          var e = t && (t.ownerDocument || t).documentElement;
          return e ? "HTML" !== e.nodeName : !1
        }
          ,
          w = i.support = {},
          A = i.setDocument = function(t) {
            var i = t ? t.ownerDocument || t : B
              , n = i.defaultView;
            return i !== L && 9 === i.nodeType && i.documentElement ? (L = i,
              D = i.documentElement,
              k = !H(i),
            n && n.attachEvent && n !== n.top && n.attachEvent("onbeforeunload", function() {
              A()
            }),
              w.attributes = s(function(t) {
                return t.className = "i",
                  !t.getAttribute("className")
              }),
              w.getElementsByTagName = s(function(t) {
                return t.appendChild(i.createComment("")),
                  !t.getElementsByTagName("*").length
              }),
              w.getElementsByClassName = s(function(t) {
                return t.innerHTML = "<div class='a'></div><div class='a i'></div>",
                  t.firstChild.className = "i",
                2 === t.getElementsByClassName("i").length
              }),
              w.getById = s(function(t) {
                return D.appendChild(t).id = N,
                !i.getElementsByName || !i.getElementsByName(N).length
              }),
              w.getById ? (R.find.ID = function(t, e) {
                  if (typeof e.getElementById !== q && k) {
                    var i = e.getElementById(t);
                    return i && i.parentNode ? [i] : []
                  }
                }
                  ,
                  R.filter.ID = function(t) {
                    var e = t.replace(we, _e);
                    return function(t) {
                      return t.getAttribute("id") === e
                    }
                  }
              ) : (delete R.find.ID,
                  R.filter.ID = function(t) {
                    var e = t.replace(we, _e);
                    return function(t) {
                      var i = typeof t.getAttributeNode !== q && t.getAttributeNode("id");
                      return i && i.value === e
                    }
                  }
              ),
              R.find.TAG = w.getElementsByTagName ? function(t, i) {
                  return typeof i.getElementsByTagName !== q ? i.getElementsByTagName(t) : e
                }
                : function(t, e) {
                  var i, n = [], r = 0, s = e.getElementsByTagName(t);
                  if ("*" === t) {
                    for (; i = s[r++]; )
                      1 === i.nodeType && n.push(i);
                    return n
                  }
                  return s
                }
              ,
              R.find.CLASS = w.getElementsByClassName && function(t, i) {
                return typeof i.getElementsByClassName !== q && k ? i.getElementsByClassName(t) : e
              }
              ,
              O = [],
              I = [],
            (w.qsa = ye.test(i.querySelectorAll)) && (s(function(t) {
              t.innerHTML = "<select><option selected=''></option></select>",
              t.querySelectorAll("[selected]").length || I.push("\\[" + re + "*(?:value|" + ne + ")"),
              t.querySelectorAll(":checked").length || I.push(":checked")
            }),
              s(function(t) {
                var e = i.createElement("input");
                e.setAttribute("type", "hidden"),
                  t.appendChild(e).setAttribute("t", ""),
                t.querySelectorAll("[t^='']").length && I.push("[*^$]=" + re + "*(?:''|\"\")"),
                t.querySelectorAll(":enabled").length || I.push(":enabled", ":disabled"),
                  t.querySelectorAll("*,:x"),
                  I.push(",.*:")
              })),
            (w.matchesSelector = ye.test(z = D.webkitMatchesSelector || D.mozMatchesSelector || D.oMatchesSelector || D.msMatchesSelector)) && s(function(t) {
              w.disconnectedMatch = z.call(t, "div"),
                z.call(t, "[s!='']:x"),
                O.push("!=", le)
            }),
              I = I.length && RegExp(I.join("|")),
              O = O.length && RegExp(O.join("|")),
              F = ye.test(D.contains) || D.compareDocumentPosition ? function(t, e) {
                  var i = 9 === t.nodeType ? t.documentElement : t
                    , n = e && e.parentNode;
                  return t === n || !(!n || 1 !== n.nodeType || !(i.contains ? i.contains(n) : t.compareDocumentPosition && 16 & t.compareDocumentPosition(n)))
                }
                : function(t, e) {
                  if (e)
                    for (; e = e.parentNode; )
                      if (e === t)
                        return !0;
                  return !1
                }
              ,
              Y = D.compareDocumentPosition ? function(t, e) {
                  if (t === e)
                    return X = !0,
                      0;
                  var n = e.compareDocumentPosition && t.compareDocumentPosition && t.compareDocumentPosition(e);
                  return n ? 1 & n || !w.sortDetached && e.compareDocumentPosition(t) === n ? t === i || F(B, t) ? -1 : e === i || F(B, e) ? 1 : P ? ie.call(P, t) - ie.call(P, e) : 0 : 4 & n ? -1 : 1 : t.compareDocumentPosition ? -1 : 1
                }
                : function(t, e) {
                  var n, r = 0, s = t.parentNode, o = e.parentNode, l = [t], h = [e];
                  if (t === e)
                    return X = !0,
                      0;
                  if (!s || !o)
                    return t === i ? -1 : e === i ? 1 : s ? -1 : o ? 1 : P ? ie.call(P, t) - ie.call(P, e) : 0;
                  if (s === o)
                    return a(t, e);
                  for (n = t; n = n.parentNode; )
                    l.unshift(n);
                  for (n = e; n = n.parentNode; )
                    h.unshift(n);
                  for (; l[r] === h[r]; )
                    r++;
                  return r ? a(l[r], h[r]) : l[r] === B ? -1 : h[r] === B ? 1 : 0
                }
              ,
              i) : L
          }
          ,
          i.matches = function(t, e) {
            return i(t, null, null, e)
          }
          ,
          i.matchesSelector = function(t, e) {
            if ((t.ownerDocument || t) !== L && A(t),
                e = e.replace(fe, "='$1']"),
                !(!w.matchesSelector || !k || O && O.test(e) || I && I.test(e)))
              try {
                var n = z.call(t, e);
                if (n || w.disconnectedMatch || t.document && 11 !== t.document.nodeType)
                  return n
              } catch (r) {}
            return i(e, L, null, [t]).length > 0
          }
          ,
          i.contains = function(t, e) {
            return (t.ownerDocument || t) !== L && A(t),
              F(t, e)
          }
          ,
          i.attr = function(t, i) {
            (t.ownerDocument || t) !== L && A(t);
            var n = R.attrHandle[i.toLowerCase()]
              , r = n && K.call(R.attrHandle, i.toLowerCase()) ? n(t, i, !k) : e;
            return r === e ? w.attributes || !k ? t.getAttribute(i) : (r = t.getAttributeNode(i)) && r.specified ? r.value : null : r
          }
          ,
          i.error = function(t) {
            throw Error("Syntax error, unrecognized expression: " + t)
          }
          ,
          i.uniqueSort = function(t) {
            var e, i = [], n = 0, r = 0;
            if (X = !w.detectDuplicates,
                P = !w.sortStable && t.slice(0),
                t.sort(Y),
                X) {
              for (; e = t[r++]; )
                e === t[r] && (n = i.push(r));
              for (; n--; )
                t.splice(i[n], 1)
            }
            return t
          }
          ,
          S = i.getText = function(t) {
            var e, i = "", n = 0, r = t.nodeType;
            if (r) {
              if (1 === r || 9 === r || 11 === r) {
                if ("string" == typeof t.textContent)
                  return t.textContent;
                for (t = t.firstChild; t; t = t.nextSibling)
                  i += S(t)
              } else if (3 === r || 4 === r)
                return t.nodeValue
            } else
              for (; e = t[n]; n++)
                i += S(e);
            return i
          }
          ,
          R = i.selectors = {
            cacheLength: 50,
            createPseudo: r,
            match: ve,
            attrHandle: {},
            find: {},
            relative: {
              ">": {
                dir: "parentNode",
                first: !0
              },
              " ": {
                dir: "parentNode"
              },
              "+": {
                dir: "previousSibling",
                first: !0
              },
              "~": {
                dir: "previousSibling"
              }
            },
            preFilter: {
              ATTR: function(t) {
                return t[1] = t[1].replace(we, _e),
                  t[3] = (t[4] || t[5] || "").replace(we, _e),
                "~=" === t[2] && (t[3] = " " + t[3] + " "),
                  t.slice(0, 4)
              },
              CHILD: function(t) {
                return t[1] = t[1].toLowerCase(),
                  "nth" === t[1].slice(0, 3) ? (t[3] || i.error(t[0]),
                    t[4] = +(t[4] ? t[5] + (t[6] || 1) : 2 * ("even" === t[3] || "odd" === t[3])),
                    t[5] = +(t[7] + t[8] || "odd" === t[3])) : t[3] && i.error(t[0]),
                  t
              },
              PSEUDO: function(t) {
                var i, n = !t[5] && t[2];
                return ve.CHILD.test(t[0]) ? null : (t[3] && t[4] !== e ? t[2] = t[4] : n && me.test(n) && (i = p(n, !0)) && (i = n.indexOf(")", n.length - i) - n.length) && (t[0] = t[0].slice(0, i),
                  t[2] = n.slice(0, i)),
                  t.slice(0, 3))
              }
            },
            filter: {
              TAG: function(t) {
                var e = t.replace(we, _e).toLowerCase();
                return "*" === t ? function() {
                    return !0
                  }
                  : function(t) {
                    return t.nodeName && t.nodeName.toLowerCase() === e
                  }
              },
              CLASS: function(t) {
                var e = G[t + " "];
                return e || (e = RegExp("(^|" + re + ")" + t + "(" + re + "|$)")) && G(t, function(t) {
                  return e.test("string" == typeof t.className && t.className || typeof t.getAttribute !== q && t.getAttribute("class") || "")
                })
              },
              ATTR: function(t, e, n) {
                return function(r) {
                  var s = i.attr(r, t);
                  return null == s ? "!=" === e : e ? (s += "",
                    "=" === e ? s === n : "!=" === e ? s !== n : "^=" === e ? n && 0 === s.indexOf(n) : "*=" === e ? n && s.indexOf(n) > -1 : "$=" === e ? n && s.slice(-n.length) === n : "~=" === e ? (" " + s + " ").indexOf(n) > -1 : "|=" === e ? s === n || s.slice(0, n.length + 1) === n + "-" : !1) : !0
                }
              },
              CHILD: function(t, e, i, n, r) {
                var s = "nth" !== t.slice(0, 3)
                  , o = "last" !== t.slice(-4)
                  , a = "of-type" === e;
                return 1 === n && 0 === r ? function(t) {
                    return !!t.parentNode
                  }
                  : function(e, i, l) {
                    var h, c, u, p, d, f, m = s !== o ? "nextSibling" : "previousSibling", g = e.parentNode, v = a && e.nodeName.toLowerCase(), y = !l && !a;
                    if (g) {
                      if (s) {
                        for (; m; ) {
                          for (u = e; u = u[m]; )
                            if (a ? u.nodeName.toLowerCase() === v : 1 === u.nodeType)
                              return !1;
                          f = m = "only" === t && !f && "nextSibling"
                        }
                        return !0
                      }
                      if (f = [o ? g.firstChild : g.lastChild],
                        o && y) {
                        for (c = g[N] || (g[N] = {}),
                               h = c[t] || [],
                               d = h[0] === V && h[1],
                               p = h[0] === V && h[2],
                               u = d && g.childNodes[d]; u = ++d && u && u[m] || (p = d = 0) || f.pop(); )
                          if (1 === u.nodeType && ++p && u === e) {
                            c[t] = [V, d, p];
                            break
                          }
                      } else if (y && (h = (e[N] || (e[N] = {}))[t]) && h[0] === V)
                        p = h[1];
                      else
                        for (; (u = ++d && u && u[m] || (p = d = 0) || f.pop()) && ((a ? u.nodeName.toLowerCase() !== v : 1 !== u.nodeType) || !++p || (y && ((u[N] || (u[N] = {}))[t] = [V, p]),
                        u !== e)); )
                          ;
                      return p -= r,
                      p === n || 0 === p % n && p / n >= 0
                    }
                  }
              },
              PSEUDO: function(t, e) {
                var n, s = R.pseudos[t] || R.setFilters[t.toLowerCase()] || i.error("unsupported pseudo: " + t);
                return s[N] ? s(e) : s.length > 1 ? (n = [t, t, "", e],
                    R.setFilters.hasOwnProperty(t.toLowerCase()) ? r(function(t, i) {
                      for (var n, r = s(t, e), o = r.length; o--; )
                        n = ie.call(t, r[o]),
                          t[n] = !(i[n] = r[o])
                    }) : function(t) {
                      return s(t, 0, n)
                    }
                ) : s
              }
            },
            pseudos: {
              not: r(function(t) {
                var e = []
                  , i = []
                  , n = M(t.replace(he, "$1"));
                return n[N] ? r(function(t, e, i, r) {
                  for (var s, o = n(t, null, r, []), a = t.length; a--; )
                    (s = o[a]) && (t[a] = !(e[a] = s))
                }) : function(t, r, s) {
                  return e[0] = t,
                    n(e, null, s, i),
                    !i.pop()
                }
              }),
              has: r(function(t) {
                return function(e) {
                  return i(t, e).length > 0
                }
              }),
              contains: r(function(t) {
                return function(e) {
                  return (e.textContent || e.innerText || S(e)).indexOf(t) > -1
                }
              }),
              lang: r(function(t) {
                return ge.test(t || "") || i.error("unsupported lang: " + t),
                  t = t.replace(we, _e).toLowerCase(),
                  function(e) {
                    var i;
                    do
                      if (i = k ? e.lang : e.getAttribute("xml:lang") || e.getAttribute("lang"))
                        return i = i.toLowerCase(),
                        i === t || 0 === i.indexOf(t + "-");
                    while ((e = e.parentNode) && 1 === e.nodeType);return !1
                  }
              }),
              target: function(e) {
                var i = t.location && t.location.hash;
                return i && i.slice(1) === e.id
              },
              root: function(t) {
                return t === D
              },
              focus: function(t) {
                return t === L.activeElement && (!L.hasFocus || L.hasFocus()) && !!(t.type || t.href || ~t.tabIndex)
              },
              enabled: function(t) {
                return t.disabled === !1
              },
              disabled: function(t) {
                return t.disabled === !0
              },
              checked: function(t) {
                var e = t.nodeName.toLowerCase();
                return "input" === e && !!t.checked || "option" === e && !!t.selected
              },
              selected: function(t) {
                return t.parentNode && t.parentNode.selectedIndex,
                t.selected === !0
              },
              empty: function(t) {
                for (t = t.firstChild; t; t = t.nextSibling)
                  if (t.nodeName > "@" || 3 === t.nodeType || 4 === t.nodeType)
                    return !1;
                return !0
              },
              parent: function(t) {
                return !R.pseudos.empty(t)
              },
              header: function(t) {
                return xe.test(t.nodeName)
              },
              input: function(t) {
                return Te.test(t.nodeName)
              },
              button: function(t) {
                var e = t.nodeName.toLowerCase();
                return "input" === e && "button" === t.type || "button" === e
              },
              text: function(t) {
                var e;
                return "input" === t.nodeName.toLowerCase() && "text" === t.type && (null == (e = t.getAttribute("type")) || e.toLowerCase() === t.type)
              },
              first: c(function() {
                return [0]
              }),
              last: c(function(t, e) {
                return [e - 1]
              }),
              eq: c(function(t, e, i) {
                return [0 > i ? i + e : i]
              }),
              even: c(function(t, e) {
                for (var i = 0; e > i; i += 2)
                  t.push(i);
                return t
              }),
              odd: c(function(t, e) {
                for (var i = 1; e > i; i += 2)
                  t.push(i);
                return t
              }),
              lt: c(function(t, e, i) {
                for (var n = 0 > i ? i + e : i; --n >= 0; )
                  t.push(n);
                return t
              }),
              gt: c(function(t, e, i) {
                for (var n = 0 > i ? i + e : i; e > ++n; )
                  t.push(n);
                return t
              })
            }
          },
          R.pseudos.nth = R.pseudos.eq;
        for (b in {
          radio: !0,
          checkbox: !0,
          file: !0,
          password: !0,
          image: !0
        })
          R.pseudos[b] = l(b);
        for (b in {
          submit: !0,
          reset: !0
        })
          R.pseudos[b] = h(b);
        u.prototype = R.filters = R.pseudos,
          R.setFilters = new u,
          M = i.compile = function(t, e) {
            var i, n = [], r = [], s = j[t + " "];
            if (!s) {
              for (e || (e = p(t)),
                     i = e.length; i--; )
                s = y(e[i]),
                  s[N] ? n.push(s) : r.push(s);
              s = j(t, E(r, n))
            }
            return s
          }
          ,
          w.sortStable = N.split("").sort(Y).join("") === N,
          w.detectDuplicates = X,
          A(),
          w.sortDetached = s(function(t) {
            return 1 & t.compareDocumentPosition(L.createElement("div"))
          }),
        s(function(t) {
          return t.innerHTML = "<a href='#'></a>",
          "#" === t.firstChild.getAttribute("href")
        }) || o("type|href|height|width", function(t, i, n) {
          return n ? e : t.getAttribute(i, "type" === i.toLowerCase() ? 1 : 2)
        }),
        w.attributes && s(function(t) {
          return t.innerHTML = "<input/>",
            t.firstChild.setAttribute("value", ""),
          "" === t.firstChild.getAttribute("value")
        }) || o("value", function(t, i, n) {
          return n || "input" !== t.nodeName.toLowerCase() ? e : t.defaultValue
        }),
        s(function(t) {
          return null == t.getAttribute("disabled")
        }) || o(ne, function(t, i, n) {
          var r;
          return n ? e : (r = t.getAttributeNode(i)) && r.specified ? r.value : t[i] === !0 ? i.toLowerCase() : null
        }),
          ce.find = i,
          ce.expr = i.selectors,
          ce.expr[":"] = ce.expr.pseudos,
          ce.unique = i.uniqueSort,
          ce.text = i.getText,
          ce.isXMLDoc = i.isXML,
          ce.contains = i.contains
      }(t);
    var Re = {};
    ce.Callbacks = function(t) {
      t = "string" == typeof t ? Re[t] || n(t) : ce.extend({}, t);
      var i, r, s, o, a, l, h = [], c = !t.once && [], u = function(e) {
        for (r = t.memory && e,
               s = !0,
               a = l || 0,
               l = 0,
               o = h.length,
               i = !0; h && o > a; a++)
          if (h[a].apply(e[0], e[1]) === !1 && t.stopOnFalse) {
            r = !1;
            break
          }
        i = !1,
        h && (c ? c.length && u(c.shift()) : r ? h = [] : p.disable())
      }, p = {
        add: function() {
          if (h) {
            var e = h.length;
            !function n(e) {
              ce.each(e, function(e, i) {
                var r = ce.type(i);
                "function" === r ? t.unique && p.has(i) || h.push(i) : i && i.length && "string" !== r && n(i)
              })
            }(arguments),
              i ? o = h.length : r && (l = e,
                u(r))
          }
          return this
        },
        remove: function() {
          return h && ce.each(arguments, function(t, e) {
            for (var n; (n = ce.inArray(e, h, n)) > -1; )
              h.splice(n, 1),
              i && (o >= n && o--,
              a >= n && a--)
          }),
            this
        },
        has: function(t) {
          return t ? ce.inArray(t, h) > -1 : !(!h || !h.length)
        },
        empty: function() {
          return h = [],
            o = 0,
            this
        },
        disable: function() {
          return h = c = r = e,
            this
        },
        disabled: function() {
          return !h
        },
        lock: function() {
          return c = e,
          r || p.disable(),
            this
        },
        locked: function() {
          return !c
        },
        fireWith: function(t, e) {
          return !h || s && !c || (e = e || [],
            e = [t, e.slice ? e.slice() : e],
            i ? c.push(e) : u(e)),
            this
        },
        fire: function() {
          return p.fireWith(this, arguments),
            this
        },
        fired: function() {
          return !!s
        }
      };
      return p
    }
      ,
      ce.extend({
        Deferred: function(t) {
          var e = [["resolve", "done", ce.Callbacks("once memory"), "resolved"], ["reject", "fail", ce.Callbacks("once memory"), "rejected"], ["notify", "progress", ce.Callbacks("memory")]]
            , i = "pending"
            , n = {
            state: function() {
              return i
            },
            always: function() {
              return r.done(arguments).fail(arguments),
                this
            },
            then: function() {
              var t = arguments;
              return ce.Deferred(function(i) {
                ce.each(e, function(e, s) {
                  var o = s[0]
                    , a = ce.isFunction(t[e]) && t[e];
                  r[s[1]](function() {
                    var t = a && a.apply(this, arguments);
                    t && ce.isFunction(t.promise) ? t.promise().done(i.resolve).fail(i.reject).progress(i.notify) : i[o + "With"](this === n ? i.promise() : this, a ? [t] : arguments)
                  })
                }),
                  t = null
              }).promise()
            },
            promise: function(t) {
              return null != t ? ce.extend(t, n) : n
            }
          }
            , r = {};
          return n.pipe = n.then,
            ce.each(e, function(t, s) {
              var o = s[2]
                , a = s[3];
              n[s[1]] = o.add,
              a && o.add(function() {
                i = a
              }, e[1 ^ t][2].disable, e[2][2].lock),
                r[s[0]] = function() {
                  return r[s[0] + "With"](this === r ? n : this, arguments),
                    this
                }
                ,
                r[s[0] + "With"] = o.fireWith
            }),
            n.promise(r),
          t && t.call(r, r),
            r
        },
        when: function(t) {
          var e, i, n, r = 0, s = se.call(arguments), o = s.length, a = 1 !== o || t && ce.isFunction(t.promise) ? o : 0, l = 1 === a ? t : ce.Deferred(), h = function(t, i, n) {
            return function(r) {
              i[t] = this,
                n[t] = arguments.length > 1 ? se.call(arguments) : r,
                n === e ? l.notifyWith(i, n) : --a || l.resolveWith(i, n)
            }
          };
          if (o > 1)
            for (e = Array(o),
                   i = Array(o),
                   n = Array(o); o > r; r++)
              s[r] && ce.isFunction(s[r].promise) ? s[r].promise().done(h(r, n, s)).fail(l.reject).progress(h(r, i, e)) : --a;
          return a || l.resolveWith(n, s),
            l.promise()
        }
      }),
      ce.support = function(e) {
        var i, n, r, s, o, a, l, h, c, u = K.createElement("div");
        if (u.setAttribute("className", "t"),
            u.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
            i = u.getElementsByTagName("*") || [],
            n = u.getElementsByTagName("a")[0],
          !n || !n.style || !i.length)
          return e;
        s = K.createElement("select"),
          a = s.appendChild(K.createElement("option")),
          r = u.getElementsByTagName("input")[0],
          n.style.cssText = "top:1px;float:left;opacity:.5",
          e.getSetAttribute = "t" !== u.className,
          e.leadingWhitespace = 3 === u.firstChild.nodeType,
          e.tbody = !u.getElementsByTagName("tbody").length,
          e.htmlSerialize = !!u.getElementsByTagName("link").length,
          e.style = /top/.test(n.getAttribute("style")),
          e.hrefNormalized = "/a" === n.getAttribute("href"),
          e.opacity = /^0.5/.test(n.style.opacity),
          e.cssFloat = !!n.style.cssFloat,
          e.checkOn = !!r.value,
          e.optSelected = a.selected,
          e.enctype = !!K.createElement("form").enctype,
          e.html5Clone = "<:nav></:nav>" !== K.createElement("nav").cloneNode(!0).outerHTML,
          e.inlineBlockNeedsLayout = !1,
          e.shrinkWrapBlocks = !1,
          e.pixelPosition = !1,
          e.deleteExpando = !0,
          e.noCloneEvent = !0,
          e.reliableMarginRight = !0,
          e.boxSizingReliable = !0,
          r.checked = !0,
          e.noCloneChecked = r.cloneNode(!0).checked,
          s.disabled = !0,
          e.optDisabled = !a.disabled;
        try {
          delete u.test
        } catch (p) {
          e.deleteExpando = !1
        }
        r = K.createElement("input"),
          r.setAttribute("value", ""),
          e.input = "" === r.getAttribute("value"),
          r.value = "t",
          r.setAttribute("type", "radio"),
          e.radioValue = "t" === r.value,
          r.setAttribute("checked", "t"),
          r.setAttribute("name", "t"),
          o = K.createDocumentFragment(),
          o.appendChild(r),
          e.appendChecked = r.checked,
          e.checkClone = o.cloneNode(!0).cloneNode(!0).lastChild.checked,
        u.attachEvent && (u.attachEvent("onclick", function() {
          e.noCloneEvent = !1
        }),
          u.cloneNode(!0).click());
        for (c in {
          submit: !0,
          change: !0,
          focusin: !0
        })
          u.setAttribute(l = "on" + c, "t"),
            e[c + "Bubbles"] = l in t || u.attributes[l].expando === !1;
        u.style.backgroundClip = "content-box",
          u.cloneNode(!0).style.backgroundClip = "",
          e.clearCloneStyle = "content-box" === u.style.backgroundClip;
        for (c in ce(e))
          break;
        return e.ownLast = "0" !== c,
          ce(function() {
            var i, n, r, s = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;", o = K.getElementsByTagName("body")[0];
            o && (i = K.createElement("div"),
              i.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",
              o.appendChild(i).appendChild(u),
              u.innerHTML = "<table><tr><td></td><td>t</td></tr></table>",
              r = u.getElementsByTagName("td"),
              r[0].style.cssText = "padding:0;margin:0;border:0;display:none",
              h = 0 === r[0].offsetHeight,
              r[0].style.display = "",
              r[1].style.display = "none",
              e.reliableHiddenOffsets = h && 0 === r[0].offsetHeight,
              u.innerHTML = "",
              u.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
              ce.swap(o, null != o.style.zoom ? {
                zoom: 1
              } : {}, function() {
                e.boxSizing = 4 === u.offsetWidth
              }),
            t.getComputedStyle && (e.pixelPosition = "1%" !== (t.getComputedStyle(u, null) || {}).top,
              e.boxSizingReliable = "4px" === (t.getComputedStyle(u, null) || {
                width: "4px"
              }).width,
              n = u.appendChild(K.createElement("div")),
              n.style.cssText = u.style.cssText = s,
              n.style.marginRight = n.style.width = "0",
              u.style.width = "1px",
              e.reliableMarginRight = !parseFloat((t.getComputedStyle(n, null) || {}).marginRight)),
            typeof u.style.zoom !== q && (u.innerHTML = "",
              u.style.cssText = s + "width:1px;padding:1px;display:inline;zoom:1",
              e.inlineBlockNeedsLayout = 3 === u.offsetWidth,
              u.style.display = "block",
              u.innerHTML = "<div></div>",
              u.firstChild.style.width = "5px",
              e.shrinkWrapBlocks = 3 !== u.offsetWidth,
            e.inlineBlockNeedsLayout && (o.style.zoom = 1)),
              o.removeChild(i),
              i = u = r = n = null)
          }),
          i = s = o = a = n = r = null,
          e
      }({});
    var Se = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/
      , He = /([A-Z])/g;
    ce.extend({
      cache: {},
      noData: {
        applet: !0,
        embed: !0,
        object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
      },
      hasData: function(t) {
        return t = t.nodeType ? ce.cache[t[ce.expando]] : t[ce.expando],
        !!t && !a(t)
      },
      data: function(t, e, i) {
        return r(t, e, i)
      },
      removeData: function(t, e) {
        return s(t, e)
      },
      _data: function(t, e, i) {
        return r(t, e, i, !0)
      },
      _removeData: function(t, e) {
        return s(t, e, !0)
      },
      acceptData: function(t) {
        if (t.nodeType && 1 !== t.nodeType && 9 !== t.nodeType)
          return !1;
        var e = t.nodeName && ce.noData[t.nodeName.toLowerCase()];
        return !e || e !== !0 && t.getAttribute("classid") === e
      }
    }),
      ce.fn.extend({
        data: function(t, i) {
          var n, r, s = null, a = 0, l = this[0];
          if (t === e) {
            if (this.length && (s = ce.data(l),
              1 === l.nodeType && !ce._data(l, "parsedAttrs"))) {
              for (n = l.attributes; n.length > a; a++)
                r = n[a].name,
                0 === r.indexOf("data-") && (r = ce.camelCase(r.slice(5)),
                  o(l, r, s[r]));
              ce._data(l, "parsedAttrs", !0)
            }
            return s
          }
          return "object" == typeof t ? this.each(function() {
            ce.data(this, t)
          }) : arguments.length > 1 ? this.each(function() {
            ce.data(this, t, i)
          }) : l ? o(l, t, ce.data(l, t)) : null
        },
        removeData: function(t) {
          return this.each(function() {
            ce.removeData(this, t)
          })
        }
      }),
      ce.extend({
        queue: function(t, i, n) {
          var r;
          return t ? (i = (i || "fx") + "queue",
            r = ce._data(t, i),
          n && (!r || ce.isArray(n) ? r = ce._data(t, i, ce.makeArray(n)) : r.push(n)),
          r || []) : e
        },
        dequeue: function(t, e) {
          e = e || "fx";
          var i = ce.queue(t, e)
            , n = i.length
            , r = i.shift()
            , s = ce._queueHooks(t, e)
            , o = function() {
            ce.dequeue(t, e)
          };
          "inprogress" === r && (r = i.shift(),
            n--),
          r && ("fx" === e && i.unshift("inprogress"),
            delete s.stop,
            r.call(t, o, s)),
          !n && s && s.empty.fire()
        },
        _queueHooks: function(t, e) {
          var i = e + "queueHooks";
          return ce._data(t, i) || ce._data(t, i, {
            empty: ce.Callbacks("once memory").add(function() {
              ce._removeData(t, e + "queue"),
                ce._removeData(t, i)
            })
          })
        }
      }),
      ce.fn.extend({
        queue: function(t, i) {
          var n = 2;
          return "string" != typeof t && (i = t,
            t = "fx",
            n--),
            n > arguments.length ? ce.queue(this[0], t) : i === e ? this : this.each(function() {
              var e = ce.queue(this, t, i);
              ce._queueHooks(this, t),
              "fx" === t && "inprogress" !== e[0] && ce.dequeue(this, t)
            })
        },
        dequeue: function(t) {
          return this.each(function() {
            ce.dequeue(this, t)
          })
        },
        delay: function(t, e) {
          return t = ce.fx ? ce.fx.speeds[t] || t : t,
            e = e || "fx",
            this.queue(e, function(e, i) {
              var n = setTimeout(e, t);
              i.stop = function() {
                clearTimeout(n)
              }
            })
        },
        clearQueue: function(t) {
          return this.queue(t || "fx", [])
        },
        promise: function(t, i) {
          var n, r = 1, s = ce.Deferred(), o = this, a = this.length, l = function() {
            --r || s.resolveWith(o, [o])
          };
          for ("string" != typeof t && (i = t,
            t = e),
                 t = t || "fx"; a--; )
            n = ce._data(o[a], t + "queueHooks"),
            n && n.empty && (r++,
              n.empty.add(l));
          return l(),
            s.promise(i)
        }
      });
    var Me, Ce, Pe = /[\t\r\n\f]/g, Ae = /\r/g, Le = /^(?:input|select|textarea|button|object)$/i, De = /^(?:a|area)$/i, ke = /^(?:checked|selected)$/i, Ie = ce.support.getSetAttribute, Oe = ce.support.input;
    ce.fn.extend({
      attr: function(t, e) {
        return ce.access(this, ce.attr, t, e, arguments.length > 1)
      },
      removeAttr: function(t) {
        return this.each(function() {
          ce.removeAttr(this, t)
        })
      },
      prop: function(t, e) {
        return ce.access(this, ce.prop, t, e, arguments.length > 1)
      },
      removeProp: function(t) {
        return t = ce.propFix[t] || t,
          this.each(function() {
            try {
              this[t] = e,
                delete this[t]
            } catch (i) {}
          })
      },
      addClass: function(t) {
        var e, i, n, r, s, o = 0, a = this.length, l = "string" == typeof t && t;
        if (ce.isFunction(t))
          return this.each(function(e) {
            ce(this).addClass(t.call(this, e, this.className))
          });
        if (l)
          for (e = (t || "").match(pe) || []; a > o; o++)
            if (i = this[o],
                n = 1 === i.nodeType && (i.className ? (" " + i.className + " ").replace(Pe, " ") : " ")) {
              for (s = 0; r = e[s++]; )
                0 > n.indexOf(" " + r + " ") && (n += r + " ");
              i.className = ce.trim(n)
            }
        return this
      },
      removeClass: function(t) {
        var e, i, n, r, s, o = 0, a = this.length, l = 0 === arguments.length || "string" == typeof t && t;
        if (ce.isFunction(t))
          return this.each(function(e) {
            ce(this).removeClass(t.call(this, e, this.className))
          });
        if (l)
          for (e = (t || "").match(pe) || []; a > o; o++)
            if (i = this[o],
                n = 1 === i.nodeType && (i.className ? (" " + i.className + " ").replace(Pe, " ") : "")) {
              for (s = 0; r = e[s++]; )
                for (; n.indexOf(" " + r + " ") >= 0; )
                  n = n.replace(" " + r + " ", " ");
              i.className = t ? ce.trim(n) : ""
            }
        return this
      },
      toggleClass: function(t, e) {
        var i = typeof t;
        return "boolean" == typeof e && "string" === i ? e ? this.addClass(t) : this.removeClass(t) : this.each(ce.isFunction(t) ? function(i) {
            ce(this).toggleClass(t.call(this, i, this.className, e), e)
          }
          : function() {
            if ("string" === i)
              for (var e, n = 0, r = ce(this), s = t.match(pe) || []; e = s[n++]; )
                r.hasClass(e) ? r.removeClass(e) : r.addClass(e);
            else
              (i === q || "boolean" === i) && (this.className && ce._data(this, "__className__", this.className),
                this.className = this.className || t === !1 ? "" : ce._data(this, "__className__") || "")
          }
        )
      },
      hasClass: function(t) {
        for (var e = " " + t + " ", i = 0, n = this.length; n > i; i++)
          if (1 === this[i].nodeType && (" " + this[i].className + " ").replace(Pe, " ").indexOf(e) >= 0)
            return !0;
        return !1
      },
      val: function(t) {
        var i, n, r, s = this[0];
        return arguments.length ? (r = ce.isFunction(t),
          this.each(function(i) {
            var s;
            1 === this.nodeType && (s = r ? t.call(this, i, ce(this).val()) : t,
              null == s ? s = "" : "number" == typeof s ? s += "" : ce.isArray(s) && (s = ce.map(s, function(t) {
                return null == t ? "" : t + ""
              })),
              n = ce.valHooks[this.type] || ce.valHooks[this.nodeName.toLowerCase()],
            n && "set"in n && n.set(this, s, "value") !== e || (this.value = s))
          })) : s ? (n = ce.valHooks[s.type] || ce.valHooks[s.nodeName.toLowerCase()],
          n && "get"in n && (i = n.get(s, "value")) !== e ? i : (i = s.value,
            "string" == typeof i ? i.replace(Ae, "") : null == i ? "" : i)) : void 0
      }
    }),
      ce.extend({
        valHooks: {
          option: {
            get: function(t) {
              var e = ce.find.attr(t, "value");
              return null != e ? e : t.text
            }
          },
          select: {
            get: function(t) {
              for (var e, i, n = t.options, r = t.selectedIndex, s = "select-one" === t.type || 0 > r, o = s ? null : [], a = s ? r + 1 : n.length, l = 0 > r ? a : s ? r : 0; a > l; l++)
                if (i = n[l],
                    !(!i.selected && l !== r || (ce.support.optDisabled ? i.disabled : null !== i.getAttribute("disabled")) || i.parentNode.disabled && ce.nodeName(i.parentNode, "optgroup"))) {
                  if (e = ce(i).val(),
                      s)
                    return e;
                  o.push(e)
                }
              return o
            },
            set: function(t, e) {
              for (var i, n, r = t.options, s = ce.makeArray(e), o = r.length; o--; )
                n = r[o],
                (n.selected = ce.inArray(ce(n).val(), s) >= 0) && (i = !0);
              return i || (t.selectedIndex = -1),
                s
            }
          }
        },
        attr: function(t, i, n) {
          var r, s, o = t.nodeType;
          return t && 3 !== o && 8 !== o && 2 !== o ? typeof t.getAttribute === q ? ce.prop(t, i, n) : (1 === o && ce.isXMLDoc(t) || (i = i.toLowerCase(),
            r = ce.attrHooks[i] || (ce.expr.match.bool.test(i) ? Ce : Me)),
            n === e ? r && "get"in r && null !== (s = r.get(t, i)) ? s : (s = ce.find.attr(t, i),
              null == s ? e : s) : null !== n ? r && "set"in r && (s = r.set(t, n, i)) !== e ? s : (t.setAttribute(i, n + ""),
              n) : (ce.removeAttr(t, i),
              e)) : void 0
        },
        removeAttr: function(t, e) {
          var i, n, r = 0, s = e && e.match(pe);
          if (s && 1 === t.nodeType)
            for (; i = s[r++]; )
              n = ce.propFix[i] || i,
                ce.expr.match.bool.test(i) ? Oe && Ie || !ke.test(i) ? t[n] = !1 : t[ce.camelCase("default-" + i)] = t[n] = !1 : ce.attr(t, i, ""),
                t.removeAttribute(Ie ? i : n)
        },
        attrHooks: {
          type: {
            set: function(t, e) {
              if (!ce.support.radioValue && "radio" === e && ce.nodeName(t, "input")) {
                var i = t.value;
                return t.setAttribute("type", e),
                i && (t.value = i),
                  e
              }
            }
          }
        },
        propFix: {
          "for": "htmlFor",
          "class": "className"
        },
        prop: function(t, i, n) {
          var r, s, o, a = t.nodeType;
          return t && 3 !== a && 8 !== a && 2 !== a ? (o = 1 !== a || !ce.isXMLDoc(t),
          o && (i = ce.propFix[i] || i,
            s = ce.propHooks[i]),
            n !== e ? s && "set"in s && (r = s.set(t, n, i)) !== e ? r : t[i] = n : s && "get"in s && null !== (r = s.get(t, i)) ? r : t[i]) : void 0
        },
        propHooks: {
          tabIndex: {
            get: function(t) {
              var e = ce.find.attr(t, "tabindex");
              return e ? parseInt(e, 10) : Le.test(t.nodeName) || De.test(t.nodeName) && t.href ? 0 : -1
            }
          }
        }
      }),
      Ce = {
        set: function(t, e, i) {
          return e === !1 ? ce.removeAttr(t, i) : Oe && Ie || !ke.test(i) ? t.setAttribute(!Ie && ce.propFix[i] || i, i) : t[ce.camelCase("default-" + i)] = t[i] = !0,
            i
        }
      },
      ce.each(ce.expr.match.bool.source.match(/\w+/g), function(t, i) {
        var n = ce.expr.attrHandle[i] || ce.find.attr;
        ce.expr.attrHandle[i] = Oe && Ie || !ke.test(i) ? function(t, i, r) {
            var s = ce.expr.attrHandle[i]
              , o = r ? e : (ce.expr.attrHandle[i] = e) != n(t, i, r) ? i.toLowerCase() : null;
            return ce.expr.attrHandle[i] = s,
              o
          }
          : function(t, i, n) {
            return n ? e : t[ce.camelCase("default-" + i)] ? i.toLowerCase() : null
          }
      }),
    Oe && Ie || (ce.attrHooks.value = {
      set: function(t, i, n) {
        return ce.nodeName(t, "input") ? (t.defaultValue = i,
          e) : Me && Me.set(t, i, n)
      }
    }),
    Ie || (Me = {
      set: function(t, i, n) {
        var r = t.getAttributeNode(n);
        return r || t.setAttributeNode(r = t.ownerDocument.createAttribute(n)),
          r.value = i += "",
          "value" === n || i === t.getAttribute(n) ? i : e
      }
    },
      ce.expr.attrHandle.id = ce.expr.attrHandle.name = ce.expr.attrHandle.coords = function(t, i, n) {
        var r;
        return n ? e : (r = t.getAttributeNode(i)) && "" !== r.value ? r.value : null
      }
      ,
      ce.valHooks.button = {
        get: function(t, i) {
          var n = t.getAttributeNode(i);
          return n && n.specified ? n.value : e
        },
        set: Me.set
      },
      ce.attrHooks.contenteditable = {
        set: function(t, e, i) {
          Me.set(t, "" === e ? !1 : e, i)
        }
      },
      ce.each(["width", "height"], function(t, i) {
        ce.attrHooks[i] = {
          set: function(t, n) {
            return "" === n ? (t.setAttribute(i, "auto"),
              n) : e
          }
        }
      })),
    ce.support.hrefNormalized || ce.each(["href", "src"], function(t, e) {
      ce.propHooks[e] = {
        get: function(t) {
          return t.getAttribute(e, 4)
        }
      }
    }),
    ce.support.style || (ce.attrHooks.style = {
      get: function(t) {
        return t.style.cssText || e
      },
      set: function(t, e) {
        return t.style.cssText = e + ""
      }
    }),
    ce.support.optSelected || (ce.propHooks.selected = {
      get: function(t) {
        var e = t.parentNode;
        return e && (e.selectedIndex,
        e.parentNode && e.parentNode.selectedIndex),
          null
      }
    }),
      ce.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
        ce.propFix[this.toLowerCase()] = this
      }),
    ce.support.enctype || (ce.propFix.enctype = "encoding"),
      ce.each(["radio", "checkbox"], function() {
        ce.valHooks[this] = {
          set: function(t, i) {
            return ce.isArray(i) ? t.checked = ce.inArray(ce(t).val(), i) >= 0 : e
          }
        },
        ce.support.checkOn || (ce.valHooks[this].get = function(t) {
            return null === t.getAttribute("value") ? "on" : t.value
          }
        )
      });
    var ze = /^(?:input|select|textarea)$/i
      , Fe = /^key/
      , Ne = /^(?:mouse|contextmenu)|click/
      , Be = /^(?:focusinfocus|focusoutblur)$/
      , Ve = /^([^.]*)(?:\.(.+)|)$/;
    ce.event = {
      global: {},
      add: function(t, i, n, r, s) {
        var o, a, l, h, c, u, p, d, f, m, g, v = ce._data(t);
        if (v) {
          for (n.handler && (h = n,
            n = h.handler,
            s = h.selector),
               n.guid || (n.guid = ce.guid++),
               (a = v.events) || (a = v.events = {}),
               (u = v.handle) || (u = v.handle = function(t) {
                 return typeof ce === q || t && ce.event.triggered === t.type ? e : ce.event.dispatch.apply(u.elem, arguments)
               }
                 ,
                 u.elem = t),
                 i = (i || "").match(pe) || [""],
                 l = i.length; l--; )
            o = Ve.exec(i[l]) || [],
              f = g = o[1],
              m = (o[2] || "").split(".").sort(),
            f && (c = ce.event.special[f] || {},
              f = (s ? c.delegateType : c.bindType) || f,
              c = ce.event.special[f] || {},
              p = ce.extend({
                type: f,
                origType: g,
                data: r,
                handler: n,
                guid: n.guid,
                selector: s,
                needsContext: s && ce.expr.match.needsContext.test(s),
                namespace: m.join(".")
              }, h),
            (d = a[f]) || (d = a[f] = [],
              d.delegateCount = 0,
            c.setup && c.setup.call(t, r, m, u) !== !1 || (t.addEventListener ? t.addEventListener(f, u, !1) : t.attachEvent && t.attachEvent("on" + f, u))),
            c.add && (c.add.call(t, p),
            p.handler.guid || (p.handler.guid = n.guid)),
              s ? d.splice(d.delegateCount++, 0, p) : d.push(p),
              ce.event.global[f] = !0);
          t = null
        }
      },
      remove: function(t, e, i, n, r) {
        var s, o, a, l, h, c, u, p, d, f, m, g = ce.hasData(t) && ce._data(t);
        if (g && (c = g.events)) {
          for (e = (e || "").match(pe) || [""],
                 h = e.length; h--; )
            if (a = Ve.exec(e[h]) || [],
                d = m = a[1],
                f = (a[2] || "").split(".").sort(),
                d) {
              for (u = ce.event.special[d] || {},
                     d = (n ? u.delegateType : u.bindType) || d,
                     p = c[d] || [],
                     a = a[2] && RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"),
                     l = s = p.length; s--; )
                o = p[s],
                !r && m !== o.origType || i && i.guid !== o.guid || a && !a.test(o.namespace) || n && n !== o.selector && ("**" !== n || !o.selector) || (p.splice(s, 1),
                o.selector && p.delegateCount--,
                u.remove && u.remove.call(t, o));
              l && !p.length && (u.teardown && u.teardown.call(t, f, g.handle) !== !1 || ce.removeEvent(t, d, g.handle),
                delete c[d])
            } else
              for (d in c)
                ce.event.remove(t, d + e[h], i, n, !0);
          ce.isEmptyObject(c) && (delete g.handle,
            ce._removeData(t, "events"))
        }
      },
      trigger: function(i, n, r, s) {
        var o, a, l, h, c, u, p, d = [r || K], f = le.call(i, "type") ? i.type : i, m = le.call(i, "namespace") ? i.namespace.split(".") : [];
        if (l = u = r = r || K,
          3 !== r.nodeType && 8 !== r.nodeType && !Be.test(f + ce.event.triggered) && (f.indexOf(".") >= 0 && (m = f.split("."),
            f = m.shift(),
            m.sort()),
            a = 0 > f.indexOf(":") && "on" + f,
            i = i[ce.expando] ? i : new ce.Event(f,"object" == typeof i && i),
            i.isTrigger = s ? 2 : 3,
            i.namespace = m.join("."),
            i.namespace_re = i.namespace ? RegExp("(^|\\.)" + m.join("\\.(?:.*\\.|)") + "(\\.|$)") : null,
            i.result = e,
          i.target || (i.target = r),
            n = null == n ? [i] : ce.makeArray(n, [i]),
            c = ce.event.special[f] || {},
          s || !c.trigger || c.trigger.apply(r, n) !== !1)) {
          if (!s && !c.noBubble && !ce.isWindow(r)) {
            for (h = c.delegateType || f,
                 Be.test(h + f) || (l = l.parentNode); l; l = l.parentNode)
              d.push(l),
                u = l;
            u === (r.ownerDocument || K) && d.push(u.defaultView || u.parentWindow || t)
          }
          for (p = 0; (l = d[p++]) && !i.isPropagationStopped(); )
            i.type = p > 1 ? h : c.bindType || f,
              o = (ce._data(l, "events") || {})[i.type] && ce._data(l, "handle"),
            o && o.apply(l, n),
              o = a && l[a],
            o && ce.acceptData(l) && o.apply && o.apply(l, n) === !1 && i.preventDefault();
          if (i.type = f,
            !s && !i.isDefaultPrevented() && (!c._default || c._default.apply(d.pop(), n) === !1) && ce.acceptData(r) && a && r[f] && !ce.isWindow(r)) {
            u = r[a],
            u && (r[a] = null),
              ce.event.triggered = f;
            try {
              r[f]()
            } catch (g) {}
            ce.event.triggered = e,
            u && (r[a] = u)
          }
          return i.result
        }
      },
      dispatch: function(t) {
        t = ce.event.fix(t);
        var i, n, r, s, o, a = [], l = se.call(arguments), h = (ce._data(this, "events") || {})[t.type] || [], c = ce.event.special[t.type] || {};
        if (l[0] = t,
            t.delegateTarget = this,
          !c.preDispatch || c.preDispatch.call(this, t) !== !1) {
          for (a = ce.event.handlers.call(this, t, h),
                 i = 0; (s = a[i++]) && !t.isPropagationStopped(); )
            for (t.currentTarget = s.elem,
                   o = 0; (r = s.handlers[o++]) && !t.isImmediatePropagationStopped(); )
              (!t.namespace_re || t.namespace_re.test(r.namespace)) && (t.handleObj = r,
                t.data = r.data,
                n = ((ce.event.special[r.origType] || {}).handle || r.handler).apply(s.elem, l),
              n !== e && (t.result = n) === !1 && (t.preventDefault(),
                t.stopPropagation()));
          return c.postDispatch && c.postDispatch.call(this, t),
            t.result
        }
      },
      handlers: function(t, i) {
        var n, r, s, o, a = [], l = i.delegateCount, h = t.target;
        if (l && h.nodeType && (!t.button || "click" !== t.type))
          for (; h != this; h = h.parentNode || this)
            if (1 === h.nodeType && (h.disabled !== !0 || "click" !== t.type)) {
              for (s = [],
                     o = 0; l > o; o++)
                r = i[o],
                  n = r.selector + " ",
                s[n] === e && (s[n] = r.needsContext ? ce(n, this).index(h) >= 0 : ce.find(n, this, null, [h]).length),
                s[n] && s.push(r);
              s.length && a.push({
                elem: h,
                handlers: s
              })
            }
        return i.length > l && a.push({
          elem: this,
          handlers: i.slice(l)
        }),
          a
      },
      fix: function(t) {
        if (t[ce.expando])
          return t;
        var e, i, n, r = t.type, s = t, o = this.fixHooks[r];
        for (o || (this.fixHooks[r] = o = Ne.test(r) ? this.mouseHooks : Fe.test(r) ? this.keyHooks : {}),
               n = o.props ? this.props.concat(o.props) : this.props,
               t = new ce.Event(s),
               e = n.length; e--; )
          i = n[e],
            t[i] = s[i];
        return t.target || (t.target = s.srcElement || K),
        3 === t.target.nodeType && (t.target = t.target.parentNode),
          t.metaKey = !!t.metaKey,
          o.filter ? o.filter(t, s) : t
      },
      props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
      fixHooks: {},
      keyHooks: {
        props: "char charCode key keyCode".split(" "),
        filter: function(t, e) {
          return null == t.which && (t.which = null != e.charCode ? e.charCode : e.keyCode),
            t
        }
      },
      mouseHooks: {
        props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
        filter: function(t, i) {
          var n, r, s, o = i.button, a = i.fromElement;
          return null == t.pageX && null != i.clientX && (r = t.target.ownerDocument || K,
            s = r.documentElement,
            n = r.body,
            t.pageX = i.clientX + (s && s.scrollLeft || n && n.scrollLeft || 0) - (s && s.clientLeft || n && n.clientLeft || 0),
            t.pageY = i.clientY + (s && s.scrollTop || n && n.scrollTop || 0) - (s && s.clientTop || n && n.clientTop || 0)),
          !t.relatedTarget && a && (t.relatedTarget = a === t.target ? i.toElement : a),
          t.which || o === e || (t.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0),
            t
        }
      },
      special: {
        load: {
          noBubble: !0
        },
        focus: {
          trigger: function() {
            if (this !== c() && this.focus)
              try {
                return this.focus(),
                  !1
              } catch (t) {}
          },
          delegateType: "focusin"
        },
        blur: {
          trigger: function() {
            return this === c() && this.blur ? (this.blur(),
              !1) : e
          },
          delegateType: "focusout"
        },
        click: {
          trigger: function() {
            return ce.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(),
              !1) : e
          },
          _default: function(t) {
            return ce.nodeName(t.target, "a")
          }
        },
        beforeunload: {
          postDispatch: function(t) {
            t.result !== e && (t.originalEvent.returnValue = t.result)
          }
        }
      },
      simulate: function(t, e, i, n) {
        var r = ce.extend(new ce.Event, i, {
          type: t,
          isSimulated: !0,
          originalEvent: {}
        });
        n ? ce.event.trigger(r, null, e) : ce.event.dispatch.call(e, r),
        r.isDefaultPrevented() && i.preventDefault()
      }
    },
      ce.removeEvent = K.removeEventListener ? function(t, e, i) {
          t.removeEventListener && t.removeEventListener(e, i, !1)
        }
        : function(t, e, i) {
          var n = "on" + e;
          t.detachEvent && (typeof t[n] === q && (t[n] = null),
            t.detachEvent(n, i))
        }
      ,
      ce.Event = function(t, i) {
        return this instanceof ce.Event ? (t && t.type ? (this.originalEvent = t,
          this.type = t.type,
          this.isDefaultPrevented = t.defaultPrevented || t.returnValue === !1 || t.getPreventDefault && t.getPreventDefault() ? l : h) : this.type = t,
        i && ce.extend(this, i),
          this.timeStamp = t && t.timeStamp || ce.now(),
          this[ce.expando] = !0,
          e) : new ce.Event(t,i)
      }
      ,
      ce.Event.prototype = {
        isDefaultPrevented: h,
        isPropagationStopped: h,
        isImmediatePropagationStopped: h,
        preventDefault: function() {
          var t = this.originalEvent;
          this.isDefaultPrevented = l,
          t && (t.preventDefault ? t.preventDefault() : t.returnValue = !1)
        },
        stopPropagation: function() {
          var t = this.originalEvent;
          this.isPropagationStopped = l,
          t && (t.stopPropagation && t.stopPropagation(),
            t.cancelBubble = !0)
        },
        stopImmediatePropagation: function() {
          this.isImmediatePropagationStopped = l,
            this.stopPropagation()
        }
      },
      ce.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout"
      }, function(t, e) {
        ce.event.special[t] = {
          delegateType: e,
          bindType: e,
          handle: function(t) {
            var i, n = this, r = t.relatedTarget, s = t.handleObj;
            return (!r || r !== n && !ce.contains(n, r)) && (t.type = s.origType,
              i = s.handler.apply(this, arguments),
              t.type = e),
              i
          }
        }
      }),
    ce.support.submitBubbles || (ce.event.special.submit = {
      setup: function() {
        return ce.nodeName(this, "form") ? !1 : (ce.event.add(this, "click._submit keypress._submit", function(t) {
          var i = t.target
            , n = ce.nodeName(i, "input") || ce.nodeName(i, "button") ? i.form : e;
          n && !ce._data(n, "submitBubbles") && (ce.event.add(n, "submit._submit", function(t) {
            t._submit_bubble = !0
          }),
            ce._data(n, "submitBubbles", !0))
        }),
          e)
      },
      postDispatch: function(t) {
        t._submit_bubble && (delete t._submit_bubble,
        this.parentNode && !t.isTrigger && ce.event.simulate("submit", this.parentNode, t, !0))
      },
      teardown: function() {
        return ce.nodeName(this, "form") ? !1 : (ce.event.remove(this, "._submit"),
          e)
      }
    }),
    ce.support.changeBubbles || (ce.event.special.change = {
      setup: function() {
        return ze.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (ce.event.add(this, "propertychange._change", function(t) {
          "checked" === t.originalEvent.propertyName && (this._just_changed = !0)
        }),
          ce.event.add(this, "click._change", function(t) {
            this._just_changed && !t.isTrigger && (this._just_changed = !1),
              ce.event.simulate("change", this, t, !0)
          })),
          !1) : (ce.event.add(this, "beforeactivate._change", function(t) {
          var e = t.target;
          ze.test(e.nodeName) && !ce._data(e, "changeBubbles") && (ce.event.add(e, "change._change", function(t) {
            !this.parentNode || t.isSimulated || t.isTrigger || ce.event.simulate("change", this.parentNode, t, !0)
          }),
            ce._data(e, "changeBubbles", !0))
        }),
          e)
      },
      handle: function(t) {
        var i = t.target;
        return this !== i || t.isSimulated || t.isTrigger || "radio" !== i.type && "checkbox" !== i.type ? t.handleObj.handler.apply(this, arguments) : e
      },
      teardown: function() {
        return ce.event.remove(this, "._change"),
          !ze.test(this.nodeName)
      }
    }),
    ce.support.focusinBubbles || ce.each({
      focus: "focusin",
      blur: "focusout"
    }, function(t, e) {
      var i = 0
        , n = function(t) {
        ce.event.simulate(e, t.target, ce.event.fix(t), !0)
      };
      ce.event.special[e] = {
        setup: function() {
          0 === i++ && K.addEventListener(t, n, !0)
        },
        teardown: function() {
          0 === --i && K.removeEventListener(t, n, !0)
        }
      }
    }),
      ce.fn.extend({
        on: function(t, i, n, r, s) {
          var o, a;
          if ("object" == typeof t) {
            "string" != typeof i && (n = n || i,
              i = e);
            for (o in t)
              this.on(o, i, n, t[o], s);
            return this
          }
          if (null == n && null == r ? (r = i,
              n = i = e) : null == r && ("string" == typeof i ? (r = n,
              n = e) : (r = n,
              n = i,
              i = e)),
            r === !1)
            r = h;
          else if (!r)
            return this;
          return 1 === s && (a = r,
            r = function(t) {
              return ce().off(t),
                a.apply(this, arguments)
            }
            ,
            r.guid = a.guid || (a.guid = ce.guid++)),
            this.each(function() {
              ce.event.add(this, t, r, n, i)
            })
        },
        one: function(t, e, i, n) {
          return this.on(t, e, i, n, 1)
        },
        off: function(t, i, n) {
          var r, s;
          if (t && t.preventDefault && t.handleObj)
            return r = t.handleObj,
              ce(t.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler),
              this;
          if ("object" == typeof t) {
            for (s in t)
              this.off(s, i, t[s]);
            return this
          }
          return (i === !1 || "function" == typeof i) && (n = i,
            i = e),
          n === !1 && (n = h),
            this.each(function() {
              ce.event.remove(this, t, n, i)
            })
        },
        trigger: function(t, e) {
          return this.each(function() {
            ce.event.trigger(t, e, this)
          })
        },
        triggerHandler: function(t, i) {
          var n = this[0];
          return n ? ce.event.trigger(t, i, n, !0) : e
        }
      });
    var Ue = /^.[^:#\[\.,]*$/
      , Ge = /^(?:parents|prev(?:Until|All))/
      , We = ce.expr.match.needsContext
      , je = {
      children: !0,
      contents: !0,
      next: !0,
      prev: !0
    };
    ce.fn.extend({
      find: function(t) {
        var e, i = [], n = this, r = n.length;
        if ("string" != typeof t)
          return this.pushStack(ce(t).filter(function() {
            for (e = 0; r > e; e++)
              if (ce.contains(n[e], this))
                return !0
          }));
        for (e = 0; r > e; e++)
          ce.find(t, n[e], i);
        return i = this.pushStack(r > 1 ? ce.unique(i) : i),
          i.selector = this.selector ? this.selector + " " + t : t,
          i
      },
      has: function(t) {
        var e, i = ce(t, this), n = i.length;
        return this.filter(function() {
          for (e = 0; n > e; e++)
            if (ce.contains(this, i[e]))
              return !0
        })
      },
      not: function(t) {
        return this.pushStack(p(this, t || [], !0))
      },
      filter: function(t) {
        return this.pushStack(p(this, t || [], !1))
      },
      is: function(t) {
        return !!p(this, "string" == typeof t && We.test(t) ? ce(t) : t || [], !1).length
      },
      closest: function(t, e) {
        for (var i, n = 0, r = this.length, s = [], o = We.test(t) || "string" != typeof t ? ce(t, e || this.context) : 0; r > n; n++)
          for (i = this[n]; i && i !== e; i = i.parentNode)
            if (11 > i.nodeType && (o ? o.index(i) > -1 : 1 === i.nodeType && ce.find.matchesSelector(i, t))) {
              i = s.push(i);
              break
            }
        return this.pushStack(s.length > 1 ? ce.unique(s) : s)
      },
      index: function(t) {
        return t ? "string" == typeof t ? ce.inArray(this[0], ce(t)) : ce.inArray(t.jquery ? t[0] : t, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
      },
      add: function(t, e) {
        var i = "string" == typeof t ? ce(t, e) : ce.makeArray(t && t.nodeType ? [t] : t)
          , n = ce.merge(this.get(), i);
        return this.pushStack(ce.unique(n))
      },
      addBack: function(t) {
        return this.add(null == t ? this.prevObject : this.prevObject.filter(t))
      }
    }),
      ce.each({
        parent: function(t) {
          var e = t.parentNode;
          return e && 11 !== e.nodeType ? e : null
        },
        parents: function(t) {
          return ce.dir(t, "parentNode")
        },
        parentsUntil: function(t, e, i) {
          return ce.dir(t, "parentNode", i)
        },
        next: function(t) {
          return u(t, "nextSibling")
        },
        prev: function(t) {
          return u(t, "previousSibling")
        },
        nextAll: function(t) {
          return ce.dir(t, "nextSibling")
        },
        prevAll: function(t) {
          return ce.dir(t, "previousSibling")
        },
        nextUntil: function(t, e, i) {
          return ce.dir(t, "nextSibling", i)
        },
        prevUntil: function(t, e, i) {
          return ce.dir(t, "previousSibling", i)
        },
        siblings: function(t) {
          return ce.sibling((t.parentNode || {}).firstChild, t)
        },
        children: function(t) {
          return ce.sibling(t.firstChild)
        },
        contents: function(t) {
          return ce.nodeName(t, "iframe") ? t.contentDocument || t.contentWindow.document : ce.merge([], t.childNodes)
        }
      }, function(t, e) {
        ce.fn[t] = function(i, n) {
          var r = ce.map(this, e, i);
          return "Until" !== t.slice(-5) && (n = i),
          n && "string" == typeof n && (r = ce.filter(n, r)),
          this.length > 1 && (je[t] || (r = ce.unique(r)),
          Ge.test(t) && (r = r.reverse())),
            this.pushStack(r)
        }
      }),
      ce.extend({
        filter: function(t, e, i) {
          var n = e[0];
          return i && (t = ":not(" + t + ")"),
            1 === e.length && 1 === n.nodeType ? ce.find.matchesSelector(n, t) ? [n] : [] : ce.find.matches(t, ce.grep(e, function(t) {
              return 1 === t.nodeType
            }))
        },
        dir: function(t, i, n) {
          for (var r = [], s = t[i]; s && 9 !== s.nodeType && (n === e || 1 !== s.nodeType || !ce(s).is(n)); )
            1 === s.nodeType && r.push(s),
              s = s[i];
          return r
        },
        sibling: function(t, e) {
          for (var i = []; t; t = t.nextSibling)
            1 === t.nodeType && t !== e && i.push(t);
          return i
        }
      });
    var Xe = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video"
      , Ye = / jQuery\d+="(?:null|\d+)"/g
      , qe = RegExp("<(?:" + Xe + ")[\\s/>]", "i")
      , $e = /^\s+/
      , Ke = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi
      , Qe = /<([\w:]+)/
      , Ze = /<tbody/i
      , Je = /<|&#?\w+;/
      , ti = /<(?:script|style|link)/i
      , ei = /^(?:checkbox|radio)$/i
      , ii = /checked\s*(?:[^=]|=\s*.checked.)/i
      , ni = /^$|\/(?:java|ecma)script/i
      , ri = /^true\/(.*)/
      , si = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g
      , oi = {
      option: [1, "<select multiple='multiple'>", "</select>"],
      legend: [1, "<fieldset>", "</fieldset>"],
      area: [1, "<map>", "</map>"],
      param: [1, "<object>", "</object>"],
      thead: [1, "<table>", "</table>"],
      tr: [2, "<table><tbody>", "</tbody></table>"],
      col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
      td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
      _default: ce.support.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]
    }
      , ai = d(K)
      , li = ai.appendChild(K.createElement("div"));
    oi.optgroup = oi.option,
      oi.tbody = oi.tfoot = oi.colgroup = oi.caption = oi.thead,
      oi.th = oi.td,
      ce.fn.extend({
        text: function(t) {
          return ce.access(this, function(t) {
            return t === e ? ce.text(this) : this.empty().append((this[0] && this[0].ownerDocument || K).createTextNode(t))
          }, null, t, arguments.length)
        },
        append: function() {
          return this.domManip(arguments, function(t) {
            if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
              var e = f(this, t);
              e.appendChild(t)
            }
          })
        },
        prepend: function() {
          return this.domManip(arguments, function(t) {
            if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
              var e = f(this, t);
              e.insertBefore(t, e.firstChild)
            }
          })
        },
        before: function() {
          return this.domManip(arguments, function(t) {
            this.parentNode && this.parentNode.insertBefore(t, this)
          })
        },
        after: function() {
          return this.domManip(arguments, function(t) {
            this.parentNode && this.parentNode.insertBefore(t, this.nextSibling)
          })
        },
        remove: function(t, e) {
          for (var i, n = t ? ce.filter(t, this) : this, r = 0; null != (i = n[r]); r++)
            e || 1 !== i.nodeType || ce.cleanData(T(i)),
            i.parentNode && (e && ce.contains(i.ownerDocument, i) && v(T(i, "script")),
              i.parentNode.removeChild(i));
          return this
        },
        empty: function() {
          for (var t, e = 0; null != (t = this[e]); e++) {
            for (1 === t.nodeType && ce.cleanData(T(t, !1)); t.firstChild; )
              t.removeChild(t.firstChild);
            t.options && ce.nodeName(t, "select") && (t.options.length = 0)
          }
          return this
        },
        clone: function(t, e) {
          return t = null == t ? !1 : t,
            e = null == e ? t : e,
            this.map(function() {
              return ce.clone(this, t, e)
            })
        },
        html: function(t) {
          return ce.access(this, function(t) {
            var i = this[0] || {}
              , n = 0
              , r = this.length;
            if (t === e)
              return 1 === i.nodeType ? i.innerHTML.replace(Ye, "") : e;
            if (!("string" != typeof t || ti.test(t) || !ce.support.htmlSerialize && qe.test(t) || !ce.support.leadingWhitespace && $e.test(t) || oi[(Qe.exec(t) || ["", ""])[1].toLowerCase()])) {
              t = t.replace(Ke, "<$1></$2>");
              try {
                for (; r > n; n++)
                  i = this[n] || {},
                  1 === i.nodeType && (ce.cleanData(T(i, !1)),
                    i.innerHTML = t);
                i = 0
              } catch (s) {}
            }
            i && this.empty().append(t)
          }, null, t, arguments.length)
        },
        replaceWith: function() {
          var t = ce.map(this, function(t) {
            return [t.nextSibling, t.parentNode]
          })
            , e = 0;
          return this.domManip(arguments, function(i) {
            var n = t[e++]
              , r = t[e++];
            r && (n && n.parentNode !== r && (n = this.nextSibling),
              ce(this).remove(),
              r.insertBefore(i, n))
          }, !0),
            e ? this : this.remove()
        },
        detach: function(t) {
          return this.remove(t, !0)
        },
        domManip: function(t, e, i) {
          t = ne.apply([], t);
          var n, r, s, o, a, l, h = 0, c = this.length, u = this, p = c - 1, d = t[0], f = ce.isFunction(d);
          if (f || !(1 >= c || "string" != typeof d || ce.support.checkClone) && ii.test(d))
            return this.each(function(n) {
              var r = u.eq(n);
              f && (t[0] = d.call(this, n, r.html())),
                r.domManip(t, e, i)
            });
          if (c && (l = ce.buildFragment(t, this[0].ownerDocument, !1, !i && this),
              n = l.firstChild,
            1 === l.childNodes.length && (l = n),
              n)) {
            for (o = ce.map(T(l, "script"), m),
                   s = o.length; c > h; h++)
              r = l,
              h !== p && (r = ce.clone(r, !0, !0),
              s && ce.merge(o, T(r, "script"))),
                e.call(this[h], r, h);
            if (s)
              for (a = o[o.length - 1].ownerDocument,
                     ce.map(o, g),
                     h = 0; s > h; h++)
                r = o[h],
                ni.test(r.type || "") && !ce._data(r, "globalEval") && ce.contains(a, r) && (r.src ? ce._evalUrl(r.src) : ce.globalEval((r.text || r.textContent || r.innerHTML || "").replace(si, "")));
            l = n = null
          }
          return this
        }
      }),
      ce.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
      }, function(t, e) {
        ce.fn[t] = function(t) {
          for (var i, n = 0, r = [], s = ce(t), o = s.length - 1; o >= n; n++)
            i = n === o ? this : this.clone(!0),
              ce(s[n])[e](i),
              re.apply(r, i.get());
          return this.pushStack(r)
        }
      }),
      ce.extend({
        clone: function(t, e, i) {
          var n, r, s, o, a, l = ce.contains(t.ownerDocument, t);
          if (ce.support.html5Clone || ce.isXMLDoc(t) || !qe.test("<" + t.nodeName + ">") ? s = t.cloneNode(!0) : (li.innerHTML = t.outerHTML,
              li.removeChild(s = li.firstChild)),
              !(ce.support.noCloneEvent && ce.support.noCloneChecked || 1 !== t.nodeType && 11 !== t.nodeType || ce.isXMLDoc(t)))
            for (n = T(s),
                   a = T(t),
                   o = 0; null != (r = a[o]); ++o)
              n[o] && E(r, n[o]);
          if (e)
            if (i)
              for (a = a || T(t),
                     n = n || T(s),
                     o = 0; null != (r = a[o]); o++)
                y(r, n[o]);
            else
              y(t, s);
          return n = T(s, "script"),
          n.length > 0 && v(n, !l && T(t, "script")),
            n = a = r = null,
            s
        },
        buildFragment: function(t, e, i, n) {
          for (var r, s, o, a, l, h, c, u = t.length, p = d(e), f = [], m = 0; u > m; m++)
            if (s = t[m],
              s || 0 === s)
              if ("object" === ce.type(s))
                ce.merge(f, s.nodeType ? [s] : s);
              else if (Je.test(s)) {
                for (a = a || p.appendChild(e.createElement("div")),
                       l = (Qe.exec(s) || ["", ""])[1].toLowerCase(),
                       c = oi[l] || oi._default,
                       a.innerHTML = c[1] + s.replace(Ke, "<$1></$2>") + c[2],
                       r = c[0]; r--; )
                  a = a.lastChild;
                if (!ce.support.leadingWhitespace && $e.test(s) && f.push(e.createTextNode($e.exec(s)[0])),
                    !ce.support.tbody)
                  for (s = "table" !== l || Ze.test(s) ? "<table>" !== c[1] || Ze.test(s) ? 0 : a : a.firstChild,
                         r = s && s.childNodes.length; r--; )
                    ce.nodeName(h = s.childNodes[r], "tbody") && !h.childNodes.length && s.removeChild(h);
                for (ce.merge(f, a.childNodes),
                       a.textContent = ""; a.firstChild; )
                  a.removeChild(a.firstChild);
                a = p.lastChild
              } else
                f.push(e.createTextNode(s));
          for (a && p.removeChild(a),
               ce.support.appendChecked || ce.grep(T(f, "input"), x),
                 m = 0; s = f[m++]; )
            if ((!n || -1 === ce.inArray(s, n)) && (o = ce.contains(s.ownerDocument, s),
                a = T(p.appendChild(s), "script"),
              o && v(a),
                i))
              for (r = 0; s = a[r++]; )
                ni.test(s.type || "") && i.push(s);
          return a = null,
            p
        },
        cleanData: function(t, e) {
          for (var i, n, r, s, o = 0, a = ce.expando, l = ce.cache, h = ce.support.deleteExpando, c = ce.event.special; null != (i = t[o]); o++)
            if ((e || ce.acceptData(i)) && (r = i[a],
                s = r && l[r])) {
              if (s.events)
                for (n in s.events)
                  c[n] ? ce.event.remove(i, n) : ce.removeEvent(i, n, s.handle);
              l[r] && (delete l[r],
                h ? delete i[a] : typeof i.removeAttribute !== q ? i.removeAttribute(a) : i[a] = null,
                ee.push(r))
            }
        },
        _evalUrl: function(t) {
          return ce.ajax({
            url: t,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            "throws": !0
          })
        }
      }),
      ce.fn.extend({
        wrapAll: function(t) {
          if (ce.isFunction(t))
            return this.each(function(e) {
              ce(this).wrapAll(t.call(this, e))
            });
          if (this[0]) {
            var e = ce(t, this[0].ownerDocument).eq(0).clone(!0);
            this[0].parentNode && e.insertBefore(this[0]),
              e.map(function() {
                for (var t = this; t.firstChild && 1 === t.firstChild.nodeType; )
                  t = t.firstChild;
                return t
              }).append(this)
          }
          return this
        },
        wrapInner: function(t) {
          return this.each(ce.isFunction(t) ? function(e) {
              ce(this).wrapInner(t.call(this, e))
            }
            : function() {
              var e = ce(this)
                , i = e.contents();
              i.length ? i.wrapAll(t) : e.append(t)
            }
          )
        },
        wrap: function(t) {
          var e = ce.isFunction(t);
          return this.each(function(i) {
            ce(this).wrapAll(e ? t.call(this, i) : t)
          })
        },
        unwrap: function() {
          return this.parent().each(function() {
            ce.nodeName(this, "body") || ce(this).replaceWith(this.childNodes)
          }).end()
        }
      });
    var hi, ci, ui, pi = /alpha\([^)]*\)/i, di = /opacity\s*=\s*([^)]*)/, fi = /^(top|right|bottom|left)$/, mi = /^(none|table(?!-c[ea]).+)/, gi = /^margin/, vi = RegExp("^(" + ue + ")(.*)$", "i"), yi = RegExp("^(" + ue + ")(?!px)[a-z%]+$", "i"), Ei = RegExp("^([+-])=(" + ue + ")", "i"), Ti = {
      BODY: "block"
    }, xi = {
      position: "absolute",
      visibility: "hidden",
      display: "block"
    }, bi = {
      letterSpacing: 0,
      fontWeight: 400
    }, wi = ["Top", "Right", "Bottom", "Left"], _i = ["Webkit", "O", "Moz", "ms"];
    ce.fn.extend({
      css: function(t, i) {
        return ce.access(this, function(t, i, n) {
          var r, s, o = {}, a = 0;
          if (ce.isArray(i)) {
            for (s = ci(t),
                   r = i.length; r > a; a++)
              o[i[a]] = ce.css(t, i[a], !1, s);
            return o
          }
          return n !== e ? ce.style(t, i, n) : ce.css(t, i)
        }, t, i, arguments.length > 1)
      },
      show: function() {
        return _(this, !0)
      },
      hide: function() {
        return _(this)
      },
      toggle: function(t) {
        return "boolean" == typeof t ? t ? this.show() : this.hide() : this.each(function() {
          w(this) ? ce(this).show() : ce(this).hide()
        })
      }
    }),
      ce.extend({
        cssHooks: {
          opacity: {
            get: function(t, e) {
              if (e) {
                var i = ui(t, "opacity");
                return "" === i ? "1" : i
              }
            }
          }
        },
        cssNumber: {
          columnCount: !0,
          fillOpacity: !0,
          fontWeight: !0,
          lineHeight: !0,
          opacity: !0,
          order: !0,
          orphans: !0,
          widows: !0,
          zIndex: !0,
          zoom: !0
        },
        cssProps: {
          "float": ce.support.cssFloat ? "cssFloat" : "styleFloat"
        },
        style: function(t, i, n, r) {
          if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) {
            var s, o, a, l = ce.camelCase(i), h = t.style;
            if (i = ce.cssProps[l] || (ce.cssProps[l] = b(h, l)),
                a = ce.cssHooks[i] || ce.cssHooks[l],
              n === e)
              return a && "get"in a && (s = a.get(t, !1, r)) !== e ? s : h[i];
            if (o = typeof n,
              "string" === o && (s = Ei.exec(n)) && (n = (s[1] + 1) * s[2] + parseFloat(ce.css(t, i)),
                o = "number"),
                !(null == n || "number" === o && isNaN(n) || ("number" !== o || ce.cssNumber[l] || (n += "px"),
                ce.support.clearCloneStyle || "" !== n || 0 !== i.indexOf("background") || (h[i] = "inherit"),
                a && "set"in a && (n = a.set(t, n, r)) === e)))
              try {
                h[i] = n
              } catch (c) {}
          }
        },
        css: function(t, i, n, r) {
          var s, o, a, l = ce.camelCase(i);
          return i = ce.cssProps[l] || (ce.cssProps[l] = b(t.style, l)),
            a = ce.cssHooks[i] || ce.cssHooks[l],
          a && "get"in a && (o = a.get(t, !0, n)),
          o === e && (o = ui(t, i, r)),
          "normal" === o && i in bi && (o = bi[i]),
            "" === n || n ? (s = parseFloat(o),
              n === !0 || ce.isNumeric(s) ? s || 0 : o) : o
        }
      }),
      t.getComputedStyle ? (ci = function(e) {
          return t.getComputedStyle(e, null)
        }
          ,
          ui = function(t, i, n) {
            var r, s, o, a = n || ci(t), l = a ? a.getPropertyValue(i) || a[i] : e, h = t.style;
            return a && ("" !== l || ce.contains(t.ownerDocument, t) || (l = ce.style(t, i)),
            yi.test(l) && gi.test(i) && (r = h.width,
              s = h.minWidth,
              o = h.maxWidth,
              h.minWidth = h.maxWidth = h.width = l,
              l = a.width,
              h.width = r,
              h.minWidth = s,
              h.maxWidth = o)),
              l
          }
      ) : K.documentElement.currentStyle && (ci = function(t) {
          return t.currentStyle
        }
          ,
          ui = function(t, i, n) {
            var r, s, o, a = n || ci(t), l = a ? a[i] : e, h = t.style;
            return null == l && h && h[i] && (l = h[i]),
            yi.test(l) && !fi.test(i) && (r = h.left,
              s = t.runtimeStyle,
              o = s && s.left,
            o && (s.left = t.currentStyle.left),
              h.left = "fontSize" === i ? "1em" : l,
              l = h.pixelLeft + "px",
              h.left = r,
            o && (s.left = o)),
              "" === l ? "auto" : l
          }
      ),
      ce.each(["height", "width"], function(t, i) {
        ce.cssHooks[i] = {
          get: function(t, n, r) {
            return n ? 0 === t.offsetWidth && mi.test(ce.css(t, "display")) ? ce.swap(t, xi, function() {
              return H(t, i, r)
            }) : H(t, i, r) : e
          },
          set: function(t, e, n) {
            var r = n && ci(t);
            return R(t, e, n ? S(t, i, n, ce.support.boxSizing && "border-box" === ce.css(t, "boxSizing", !1, r), r) : 0)
          }
        }
      }),
    ce.support.opacity || (ce.cssHooks.opacity = {
      get: function(t, e) {
        return di.test((e && t.currentStyle ? t.currentStyle.filter : t.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : e ? "1" : ""
      },
      set: function(t, e) {
        var i = t.style
          , n = t.currentStyle
          , r = ce.isNumeric(e) ? "alpha(opacity=" + 100 * e + ")" : ""
          , s = n && n.filter || i.filter || "";
        i.zoom = 1,
        (e >= 1 || "" === e) && "" === ce.trim(s.replace(pi, "")) && i.removeAttribute && (i.removeAttribute("filter"),
        "" === e || n && !n.filter) || (i.filter = pi.test(s) ? s.replace(pi, r) : s + " " + r)
      }
    }),
      ce(function() {
        ce.support.reliableMarginRight || (ce.cssHooks.marginRight = {
          get: function(t, i) {
            return i ? ce.swap(t, {
              display: "inline-block"
            }, ui, [t, "marginRight"]) : e
          }
        }),
        !ce.support.pixelPosition && ce.fn.position && ce.each(["top", "left"], function(t, i) {
          ce.cssHooks[i] = {
            get: function(t, n) {
              return n ? (n = ui(t, i),
                yi.test(n) ? ce(t).position()[i] + "px" : n) : e
            }
          }
        })
      }),
    ce.expr && ce.expr.filters && (ce.expr.filters.hidden = function(t) {
        return 0 >= t.offsetWidth && 0 >= t.offsetHeight || !ce.support.reliableHiddenOffsets && "none" === (t.style && t.style.display || ce.css(t, "display"))
      }
        ,
        ce.expr.filters.visible = function(t) {
          return !ce.expr.filters.hidden(t)
        }
    ),
      ce.each({
        margin: "",
        padding: "",
        border: "Width"
      }, function(t, e) {
        ce.cssHooks[t + e] = {
          expand: function(i) {
            for (var n = 0, r = {}, s = "string" == typeof i ? i.split(" ") : [i]; 4 > n; n++)
              r[t + wi[n] + e] = s[n] || s[n - 2] || s[0];
            return r
          }
        },
        gi.test(t) || (ce.cssHooks[t + e].set = R)
      });
    var Ri = /%20/g
      , Si = /\[\]$/
      , Hi = /\r?\n/g
      , Mi = /^(?:submit|button|image|reset|file)$/i
      , Ci = /^(?:input|select|textarea|keygen)/i;
    ce.fn.extend({
      serialize: function() {
        return ce.param(this.serializeArray())
      },
      serializeArray: function() {
        return this.map(function() {
          var t = ce.prop(this, "elements");
          return t ? ce.makeArray(t) : this
        }).filter(function() {
          var t = this.type;
          return this.name && !ce(this).is(":disabled") && Ci.test(this.nodeName) && !Mi.test(t) && (this.checked || !ei.test(t))
        }).map(function(t, e) {
          var i = ce(this).val();
          return null == i ? null : ce.isArray(i) ? ce.map(i, function(t) {
            return {
              name: e.name,
              value: t.replace(Hi, "\r\n")
            }
          }) : {
            name: e.name,
            value: i.replace(Hi, "\r\n")
          }
        }).get()
      }
    }),
      ce.param = function(t, i) {
        var n, r = [], s = function(t, e) {
          e = ce.isFunction(e) ? e() : null == e ? "" : e,
            r[r.length] = encodeURIComponent(t) + "=" + encodeURIComponent(e)
        };
        if (i === e && (i = ce.ajaxSettings && ce.ajaxSettings.traditional),
          ce.isArray(t) || t.jquery && !ce.isPlainObject(t))
          ce.each(t, function() {
            s(this.name, this.value)
          });
        else
          for (n in t)
            P(n, t[n], i, s);
        return r.join("&").replace(Ri, "+")
      }
      ,
      ce.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(t, e) {
        ce.fn[e] = function(t, i) {
          return arguments.length > 0 ? this.on(e, null, t, i) : this.trigger(e)
        }
      }),
      ce.fn.extend({
        hover: function(t, e) {
          return this.mouseenter(t).mouseleave(e || t)
        },
        bind: function(t, e, i) {
          return this.on(t, null, e, i)
        },
        unbind: function(t, e) {
          return this.off(t, null, e)
        },
        delegate: function(t, e, i, n) {
          return this.on(e, t, i, n)
        },
        undelegate: function(t, e, i) {
          return 1 === arguments.length ? this.off(t, "**") : this.off(e, t || "**", i)
        }
      });
    var Pi, Ai, Li = ce.now(), Di = /\?/, ki = /#.*$/, Ii = /([?&])_=[^&]*/, Oi = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm, zi = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, Fi = /^(?:GET|HEAD)$/, Ni = /^\/\//, Bi = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/, Vi = ce.fn.load, Ui = {}, Gi = {}, Wi = "*/".concat("*");
    try {
      Ai = $.href
    } catch (ji) {
      Ai = K.createElement("a"),
        Ai.href = "",
        Ai = Ai.href
    }
    Pi = Bi.exec(Ai.toLowerCase()) || [],
      ce.fn.load = function(t, i, n) {
        if ("string" != typeof t && Vi)
          return Vi.apply(this, arguments);
        var r, s, o, a = this, l = t.indexOf(" ");
        return l >= 0 && (r = t.slice(l, t.length),
          t = t.slice(0, l)),
          ce.isFunction(i) ? (n = i,
            i = e) : i && "object" == typeof i && (o = "POST"),
        a.length > 0 && ce.ajax({
          url: t,
          type: o,
          dataType: "html",
          data: i
        }).done(function(t) {
          s = arguments,
            a.html(r ? ce("<div>").append(ce.parseHTML(t)).find(r) : t)
        }).complete(n && function(t, e) {
          a.each(n, s || [t.responseText, e, t])
        }
        ),
          this
      }
      ,
      ce.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(t, e) {
        ce.fn[e] = function(t) {
          return this.on(e, t)
        }
      }),
      ce.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
          url: Ai,
          type: "GET",
          isLocal: zi.test(Pi[1]),
          global: !0,
          processData: !0,
          async: !0,
          contentType: "application/x-www-form-urlencoded; charset=UTF-8",
          accepts: {
            "*": Wi,
            text: "text/plain",
            html: "text/html",
            xml: "application/xml, text/xml",
            json: "application/json, text/javascript"
          },
          contents: {
            xml: /xml/,
            html: /html/,
            json: /json/
          },
          responseFields: {
            xml: "responseXML",
            text: "responseText",
            json: "responseJSON"
          },
          converters: {
            "* text": String,
            "text html": !0,
            "text json": ce.parseJSON,
            "text xml": ce.parseXML
          },
          flatOptions: {
            url: !0,
            context: !0
          }
        },
        ajaxSetup: function(t, e) {
          return e ? D(D(t, ce.ajaxSettings), e) : D(ce.ajaxSettings, t)
        },
        ajaxPrefilter: A(Ui),
        ajaxTransport: A(Gi),
        ajax: function(t, i) {
          function n(t, i, n, r) {
            var s, u, y, E, x, w = i;
            2 !== T && (T = 2,
            l && clearTimeout(l),
              c = e,
              a = r || "",
              b.readyState = t > 0 ? 4 : 0,
              s = t >= 200 && 300 > t || 304 === t,
            n && (E = k(p, b, n)),
              E = I(p, E, b, s),
              s ? (p.ifModified && (x = b.getResponseHeader("Last-Modified"),
              x && (ce.lastModified[o] = x),
                x = b.getResponseHeader("etag"),
              x && (ce.etag[o] = x)),
                204 === t || "HEAD" === p.type ? w = "nocontent" : 304 === t ? w = "notmodified" : (w = E.state,
                  u = E.data,
                  y = E.error,
                  s = !y)) : (y = w,
              (t || !w) && (w = "error",
              0 > t && (t = 0))),
              b.status = t,
              b.statusText = (i || w) + "",
              s ? m.resolveWith(d, [u, w, b]) : m.rejectWith(d, [b, w, y]),
              b.statusCode(v),
              v = e,
            h && f.trigger(s ? "ajaxSuccess" : "ajaxError", [b, p, s ? u : y]),
              g.fireWith(d, [b, w]),
            h && (f.trigger("ajaxComplete", [b, p]),
            --ce.active || ce.event.trigger("ajaxStop")))
          }
          "object" == typeof t && (i = t,
            t = e),
            i = i || {};
          var r, s, o, a, l, h, c, u, p = ce.ajaxSetup({}, i), d = p.context || p, f = p.context && (d.nodeType || d.jquery) ? ce(d) : ce.event, m = ce.Deferred(), g = ce.Callbacks("once memory"), v = p.statusCode || {}, y = {}, E = {}, T = 0, x = "canceled", b = {
            readyState: 0,
            getResponseHeader: function(t) {
              var e;
              if (2 === T) {
                if (!u)
                  for (u = {}; e = Oi.exec(a); )
                    u[e[1].toLowerCase()] = e[2];
                e = u[t.toLowerCase()]
              }
              return null == e ? null : e
            },
            getAllResponseHeaders: function() {
              return 2 === T ? a : null
            },
            setRequestHeader: function(t, e) {
              var i = t.toLowerCase();
              return T || (t = E[i] = E[i] || t,
                y[t] = e),
                this
            },
            overrideMimeType: function(t) {
              return T || (p.mimeType = t),
                this
            },
            statusCode: function(t) {
              var e;
              if (t)
                if (2 > T)
                  for (e in t)
                    v[e] = [v[e], t[e]];
                else
                  b.always(t[b.status]);
              return this
            },
            abort: function(t) {
              var e = t || x;
              return c && c.abort(e),
                n(0, e),
                this
            }
          };
          if (m.promise(b).complete = g.add,
              b.success = b.done,
              b.error = b.fail,
              p.url = ((t || p.url || Ai) + "").replace(ki, "").replace(Ni, Pi[1] + "//"),
              p.type = i.method || i.type || p.method || p.type,
              p.dataTypes = ce.trim(p.dataType || "*").toLowerCase().match(pe) || [""],
            null == p.crossDomain && (r = Bi.exec(p.url.toLowerCase()),
              p.crossDomain = !(!r || r[1] === Pi[1] && r[2] === Pi[2] && (r[3] || ("http:" === r[1] ? "80" : "443")) === (Pi[3] || ("http:" === Pi[1] ? "80" : "443")))),
            p.data && p.processData && "string" != typeof p.data && (p.data = ce.param(p.data, p.traditional)),
              L(Ui, p, i, b),
            2 === T)
            return b;
          h = p.global,
          h && 0 === ce.active++ && ce.event.trigger("ajaxStart"),
            p.type = p.type.toUpperCase(),
            p.hasContent = !Fi.test(p.type),
            o = p.url,
          p.hasContent || (p.data && (o = p.url += (Di.test(o) ? "&" : "?") + p.data,
            delete p.data),
          p.cache === !1 && (p.url = Ii.test(o) ? o.replace(Ii, "$1_=" + Li++) : o + (Di.test(o) ? "&" : "?") + "_=" + Li++)),
          p.ifModified && (ce.lastModified[o] && b.setRequestHeader("If-Modified-Since", ce.lastModified[o]),
          ce.etag[o] && b.setRequestHeader("If-None-Match", ce.etag[o])),
          (p.data && p.hasContent && p.contentType !== !1 || i.contentType) && b.setRequestHeader("Content-Type", p.contentType),
            b.setRequestHeader("Accept", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + ("*" !== p.dataTypes[0] ? ", " + Wi + "; q=0.01" : "") : p.accepts["*"]);
          for (s in p.headers)
            b.setRequestHeader(s, p.headers[s]);
          if (p.beforeSend && (p.beforeSend.call(d, b, p) === !1 || 2 === T))
            return b.abort();
          x = "abort";
          for (s in {
            success: 1,
            error: 1,
            complete: 1
          })
            b[s](p[s]);
          if (c = L(Gi, p, i, b)) {
            b.readyState = 1,
            h && f.trigger("ajaxSend", [b, p]),
            p.async && p.timeout > 0 && (l = setTimeout(function() {
              b.abort("timeout")
            }, p.timeout));
            try {
              T = 1,
                c.send(y, n)
            } catch (w) {
              if (!(2 > T))
                throw w;
              n(-1, w)
            }
          } else
            n(-1, "No Transport");
          return b
        },
        getJSON: function(t, e, i) {
          return ce.get(t, e, i, "json")
        },
        getScript: function(t, i) {
          return ce.get(t, e, i, "script")
        }
      }),
      ce.each(["get", "post"], function(t, i) {
        ce[i] = function(t, n, r, s) {
          return ce.isFunction(n) && (s = s || r,
            r = n,
            n = e),
            ce.ajax({
              url: t,
              type: i,
              dataType: s,
              data: n,
              success: r
            })
        }
      }),
      ce.ajaxSetup({
        accepts: {
          script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
          script: /(?:java|ecma)script/
        },
        converters: {
          "text script": function(t) {
            return ce.globalEval(t),
              t
          }
        }
      }),
      ce.ajaxPrefilter("script", function(t) {
        t.cache === e && (t.cache = !1),
        t.crossDomain && (t.type = "GET",
          t.global = !1)
      }),
      ce.ajaxTransport("script", function(t) {
        if (t.crossDomain) {
          var i, n = K.head || ce("head")[0] || K.documentElement;
          return {
            send: function(e, r) {
              i = K.createElement("script"),
                i.async = !0,
              t.scriptCharset && (i.charset = t.scriptCharset),
                i.src = t.url,
                i.onload = i.onreadystatechange = function(t, e) {
                  (e || !i.readyState || /loaded|complete/.test(i.readyState)) && (i.onload = i.onreadystatechange = null,
                  i.parentNode && i.parentNode.removeChild(i),
                    i = null,
                  e || r(200, "success"))
                }
                ,
                n.insertBefore(i, n.firstChild)
            },
            abort: function() {
              i && i.onload(e, !0)
            }
          }
        }
      });
    var Xi = []
      , Yi = /(=)\?(?=&|$)|\?\?/;
    ce.ajaxSetup({
      jsonp: "callback",
      jsonpCallback: function() {
        var t = Xi.pop() || ce.expando + "_" + Li++;
        return this[t] = !0,
          t
      }
    }),
      ce.ajaxPrefilter("json jsonp", function(i, n, r) {
        var s, o, a, l = i.jsonp !== !1 && (Yi.test(i.url) ? "url" : "string" == typeof i.data && !(i.contentType || "").indexOf("application/x-www-form-urlencoded") && Yi.test(i.data) && "data");
        return l || "jsonp" === i.dataTypes[0] ? (s = i.jsonpCallback = ce.isFunction(i.jsonpCallback) ? i.jsonpCallback() : i.jsonpCallback,
          l ? i[l] = i[l].replace(Yi, "$1" + s) : i.jsonp !== !1 && (i.url += (Di.test(i.url) ? "&" : "?") + i.jsonp + "=" + s),
          i.converters["script json"] = function() {
            return a || ce.error(s + " was not called"),
              a[0]
          }
          ,
          i.dataTypes[0] = "json",
          o = t[s],
          t[s] = function() {
            a = arguments
          }
          ,
          r.always(function() {
            t[s] = o,
            i[s] && (i.jsonpCallback = n.jsonpCallback,
              Xi.push(s)),
            a && ce.isFunction(o) && o(a[0]),
              a = o = e
          }),
          "script") : e
      });
    var qi, $i, Ki = 0, Qi = t.ActiveXObject && function() {
        var t;
        for (t in qi)
          qi[t](e, !0)
      }
    ;
    ce.ajaxSettings.xhr = t.ActiveXObject ? function() {
        return !this.isLocal && O() || z()
      }
      : O,
      $i = ce.ajaxSettings.xhr(),
      ce.support.cors = !!$i && "withCredentials"in $i,
      $i = ce.support.ajax = !!$i,
    $i && ce.ajaxTransport(function(i) {
      if (!i.crossDomain || ce.support.cors) {
        var n;
        return {
          send: function(r, s) {
            var o, a, l = i.xhr();
            if (i.username ? l.open(i.type, i.url, i.async, i.username, i.password) : l.open(i.type, i.url, i.async),
                i.xhrFields)
              for (a in i.xhrFields)
                l[a] = i.xhrFields[a];
            i.mimeType && l.overrideMimeType && l.overrideMimeType(i.mimeType),
            i.crossDomain || r["X-Requested-With"] || (r["X-Requested-With"] = "XMLHttpRequest");
            try {
              for (a in r)
                l.setRequestHeader(a, r[a])
            } catch (h) {}
            l.send(i.hasContent && i.data || null),
              n = function(t, r) {
                var a, h, c, u;
                try {
                  if (n && (r || 4 === l.readyState))
                    if (n = e,
                      o && (l.onreadystatechange = ce.noop,
                      Qi && delete qi[o]),
                        r)
                      4 !== l.readyState && l.abort();
                    else {
                      u = {},
                        a = l.status,
                        h = l.getAllResponseHeaders(),
                      "string" == typeof l.responseText && (u.text = l.responseText);
                      try {
                        c = l.statusText
                      } catch (p) {
                        c = ""
                      }
                      a || !i.isLocal || i.crossDomain ? 1223 === a && (a = 204) : a = u.text ? 200 : 404
                    }
                } catch (d) {
                  r || s(-1, d)
                }
                u && s(a, c, u, h)
              }
              ,
              i.async ? 4 === l.readyState ? setTimeout(n) : (o = ++Ki,
              Qi && (qi || (qi = {},
                ce(t).unload(Qi)),
                qi[o] = n),
                l.onreadystatechange = n) : n()
          },
          abort: function() {
            n && n(e, !0)
          }
        }
      }
    });
    var Zi, Ji, tn = /^(?:toggle|show|hide)$/, en = RegExp("^(?:([+-])=|)(" + ue + ")([a-z%]*)$", "i"), nn = /queueHooks$/, rn = [U], sn = {
      "*": [function(t, e) {
        var i = this.createTween(t, e)
          , n = i.cur()
          , r = en.exec(e)
          , s = r && r[3] || (ce.cssNumber[t] ? "" : "px")
          , o = (ce.cssNumber[t] || "px" !== s && +n) && en.exec(ce.css(i.elem, t))
          , a = 1
          , l = 20;
        if (o && o[3] !== s) {
          s = s || o[3],
            r = r || [],
            o = +n || 1;
          do
            a = a || ".5",
              o /= a,
              ce.style(i.elem, t, o + s);
          while (a !== (a = i.cur() / n) && 1 !== a && --l)
        }
        return r && (o = i.start = +o || +n || 0,
          i.unit = s,
          i.end = r[1] ? o + (r[1] + 1) * r[2] : +r[2]),
          i
      }
      ]
    };
    ce.Animation = ce.extend(B, {
      tweener: function(t, e) {
        ce.isFunction(t) ? (e = t,
          t = ["*"]) : t = t.split(" ");
        for (var i, n = 0, r = t.length; r > n; n++)
          i = t[n],
            sn[i] = sn[i] || [],
            sn[i].unshift(e)
      },
      prefilter: function(t, e) {
        e ? rn.unshift(t) : rn.push(t)
      }
    }),
      ce.Tween = G,
      G.prototype = {
        constructor: G,
        init: function(t, e, i, n, r, s) {
          this.elem = t,
            this.prop = i,
            this.easing = r || "swing",
            this.options = e,
            this.start = this.now = this.cur(),
            this.end = n,
            this.unit = s || (ce.cssNumber[i] ? "" : "px")
        },
        cur: function() {
          var t = G.propHooks[this.prop];
          return t && t.get ? t.get(this) : G.propHooks._default.get(this)
        },
        run: function(t) {
          var e, i = G.propHooks[this.prop];
          return this.pos = e = this.options.duration ? ce.easing[this.easing](t, this.options.duration * t, 0, 1, this.options.duration) : t,
            this.now = (this.end - this.start) * e + this.start,
          this.options.step && this.options.step.call(this.elem, this.now, this),
            i && i.set ? i.set(this) : G.propHooks._default.set(this),
            this
        }
      },
      G.prototype.init.prototype = G.prototype,
      G.propHooks = {
        _default: {
          get: function(t) {
            var e;
            return null == t.elem[t.prop] || t.elem.style && null != t.elem.style[t.prop] ? (e = ce.css(t.elem, t.prop, ""),
              e && "auto" !== e ? e : 0) : t.elem[t.prop]
          },
          set: function(t) {
            ce.fx.step[t.prop] ? ce.fx.step[t.prop](t) : t.elem.style && (null != t.elem.style[ce.cssProps[t.prop]] || ce.cssHooks[t.prop]) ? ce.style(t.elem, t.prop, t.now + t.unit) : t.elem[t.prop] = t.now
          }
        }
      },
      G.propHooks.scrollTop = G.propHooks.scrollLeft = {
        set: function(t) {
          t.elem.nodeType && t.elem.parentNode && (t.elem[t.prop] = t.now)
        }
      },
      ce.each(["toggle", "show", "hide"], function(t, e) {
        var i = ce.fn[e];
        ce.fn[e] = function(t, n, r) {
          return null == t || "boolean" == typeof t ? i.apply(this, arguments) : this.animate(W(e, !0), t, n, r)
        }
      }),
      ce.fn.extend({
        fadeTo: function(t, e, i, n) {
          return this.filter(w).css("opacity", 0).show().end().animate({
            opacity: e
          }, t, i, n)
        },
        animate: function(t, e, i, n) {
          var r = ce.isEmptyObject(t)
            , s = ce.speed(e, i, n)
            , o = function() {
            var e = B(this, ce.extend({}, t), s);
            (r || ce._data(this, "finish")) && e.stop(!0)
          };
          return o.finish = o,
            r || s.queue === !1 ? this.each(o) : this.queue(s.queue, o)
        },
        stop: function(t, i, n) {
          var r = function(t) {
            var e = t.stop;
            delete t.stop,
              e(n)
          };
          return "string" != typeof t && (n = i,
            i = t,
            t = e),
          i && t !== !1 && this.queue(t || "fx", []),
            this.each(function() {
              var e = !0
                , i = null != t && t + "queueHooks"
                , s = ce.timers
                , o = ce._data(this);
              if (i)
                o[i] && o[i].stop && r(o[i]);
              else
                for (i in o)
                  o[i] && o[i].stop && nn.test(i) && r(o[i]);
              for (i = s.length; i--; )
                s[i].elem !== this || null != t && s[i].queue !== t || (s[i].anim.stop(n),
                  e = !1,
                  s.splice(i, 1));
              (e || !n) && ce.dequeue(this, t)
            })
        },
        finish: function(t) {
          return t !== !1 && (t = t || "fx"),
            this.each(function() {
              var e, i = ce._data(this), n = i[t + "queue"], r = i[t + "queueHooks"], s = ce.timers, o = n ? n.length : 0;
              for (i.finish = !0,
                     ce.queue(this, t, []),
                   r && r.stop && r.stop.call(this, !0),
                     e = s.length; e--; )
                s[e].elem === this && s[e].queue === t && (s[e].anim.stop(!0),
                  s.splice(e, 1));
              for (e = 0; o > e; e++)
                n[e] && n[e].finish && n[e].finish.call(this);
              delete i.finish
            })
        }
      }),
      ce.each({
        slideDown: W("show"),
        slideUp: W("hide"),
        slideToggle: W("toggle"),
        fadeIn: {
          opacity: "show"
        },
        fadeOut: {
          opacity: "hide"
        },
        fadeToggle: {
          opacity: "toggle"
        }
      }, function(t, e) {
        ce.fn[t] = function(t, i, n) {
          return this.animate(e, t, i, n)
        }
      }),
      ce.speed = function(t, e, i) {
        var n = t && "object" == typeof t ? ce.extend({}, t) : {
          complete: i || !i && e || ce.isFunction(t) && t,
          duration: t,
          easing: i && e || e && !ce.isFunction(e) && e
        };
        return n.duration = ce.fx.off ? 0 : "number" == typeof n.duration ? n.duration : n.duration in ce.fx.speeds ? ce.fx.speeds[n.duration] : ce.fx.speeds._default,
        (null == n.queue || n.queue === !0) && (n.queue = "fx"),
          n.old = n.complete,
          n.complete = function() {
            ce.isFunction(n.old) && n.old.call(this),
            n.queue && ce.dequeue(this, n.queue)
          }
          ,
          n
      }
      ,
      ce.easing = {
        linear: function(t) {
          return t
        },
        swing: function(t) {
          return .5 - Math.cos(t * Math.PI) / 2
        }
      },
      ce.timers = [],
      ce.fx = G.prototype.init,
      ce.fx.tick = function() {
        var t, i = ce.timers, n = 0;
        for (Zi = ce.now(); i.length > n; n++)
          t = i[n],
          t() || i[n] !== t || i.splice(n--, 1);
        i.length || ce.fx.stop(),
          Zi = e
      }
      ,
      ce.fx.timer = function(t) {
        t() && ce.timers.push(t) && ce.fx.start()
      }
      ,
      ce.fx.interval = 13,
      ce.fx.start = function() {
        Ji || (Ji = setInterval(ce.fx.tick, ce.fx.interval))
      }
      ,
      ce.fx.stop = function() {
        clearInterval(Ji),
          Ji = null
      }
      ,
      ce.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
      },
      ce.fx.step = {},
    ce.expr && ce.expr.filters && (ce.expr.filters.animated = function(t) {
        return ce.grep(ce.timers, function(e) {
          return t === e.elem
        }).length
      }
    ),
      ce.fn.offset = function(t) {
        if (arguments.length)
          return t === e ? this : this.each(function(e) {
            ce.offset.setOffset(this, t, e)
          });
        var i, n, r = {
          top: 0,
          left: 0
        }, s = this[0], o = s && s.ownerDocument;
        return o ? (i = o.documentElement,
          ce.contains(i, s) ? (typeof s.getBoundingClientRect !== q && (r = s.getBoundingClientRect()),
            n = j(o),
            {
              top: r.top + (n.pageYOffset || i.scrollTop) - (i.clientTop || 0),
              left: r.left + (n.pageXOffset || i.scrollLeft) - (i.clientLeft || 0)
            }) : r) : void 0
      }
      ,
      ce.offset = {
        setOffset: function(t, e, i) {
          var n = ce.css(t, "position");
          "static" === n && (t.style.position = "relative");
          var r, s, o = ce(t), a = o.offset(), l = ce.css(t, "top"), h = ce.css(t, "left"), c = ("absolute" === n || "fixed" === n) && ce.inArray("auto", [l, h]) > -1, u = {}, p = {};
          c ? (p = o.position(),
            r = p.top,
            s = p.left) : (r = parseFloat(l) || 0,
            s = parseFloat(h) || 0),
          ce.isFunction(e) && (e = e.call(t, i, a)),
          null != e.top && (u.top = e.top - a.top + r),
          null != e.left && (u.left = e.left - a.left + s),
            "using"in e ? e.using.call(t, u) : o.css(u)
        }
      },
      ce.fn.extend({
        position: function() {
          if (this[0]) {
            var t, e, i = {
              top: 0,
              left: 0
            }, n = this[0];
            return "fixed" === ce.css(n, "position") ? e = n.getBoundingClientRect() : (t = this.offsetParent(),
              e = this.offset(),
            ce.nodeName(t[0], "html") || (i = t.offset()),
              i.top += ce.css(t[0], "borderTopWidth", !0),
              i.left += ce.css(t[0], "borderLeftWidth", !0)),
              {
                top: e.top - i.top - ce.css(n, "marginTop", !0),
                left: e.left - i.left - ce.css(n, "marginLeft", !0)
              }
          }
        },
        offsetParent: function() {
          return this.map(function() {
            for (var t = this.offsetParent || Q; t && !ce.nodeName(t, "html") && "static" === ce.css(t, "position"); )
              t = t.offsetParent;
            return t || Q
          })
        }
      }),
      ce.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
      }, function(t, i) {
        var n = /Y/.test(i);
        ce.fn[t] = function(r) {
          return ce.access(this, function(t, r, s) {
            var o = j(t);
            return s === e ? o ? i in o ? o[i] : o.document.documentElement[r] : t[r] : (o ? o.scrollTo(n ? ce(o).scrollLeft() : s, n ? s : ce(o).scrollTop()) : t[r] = s,
              e)
          }, t, r, arguments.length, null)
        }
      }),
      ce.each({
        Height: "height",
        Width: "width"
      }, function(t, i) {
        ce.each({
          padding: "inner" + t,
          content: i,
          "": "outer" + t
        }, function(n, r) {
          ce.fn[r] = function(r, s) {
            var o = arguments.length && (n || "boolean" != typeof r)
              , a = n || (r === !0 || s === !0 ? "margin" : "border");
            return ce.access(this, function(i, n, r) {
              var s;
              return ce.isWindow(i) ? i.document.documentElement["client" + t] : 9 === i.nodeType ? (s = i.documentElement,
                Math.max(i.body["scroll" + t], s["scroll" + t], i.body["offset" + t], s["offset" + t], s["client" + t])) : r === e ? ce.css(i, n, a) : ce.style(i, n, r, a)
            }, i, o ? r : e, o, null)
          }
        })
      }),
      ce.fn.size = function() {
        return this.length
      }
      ,
      ce.fn.andSelf = ce.fn.addBack,
      "object" == typeof module && module && "object" == typeof module.exports ? module.exports = ce : (t.jQuery = t.$ = ce,
      "function" == typeof define && define.amd && define("jquery", [], function() {
        return ce
      }))
  }(window),
  function(t) {
    "function" == typeof define && define.amd ? define(["jquery"], t) : "object" == typeof exports ? module.exports = t : t(jQuery)
  }(function(t) {
    function e(e) {
      var o = e || window.event
        , a = l.call(arguments, 1)
        , h = 0
        , u = 0
        , p = 0
        , d = 0
        , f = 0
        , m = 0;
      if (e = t.event.fix(o),
          e.type = "mousewheel",
        "detail"in o && (p = -1 * o.detail),
        "wheelDelta"in o && (p = o.wheelDelta),
        "wheelDeltaY"in o && (p = o.wheelDeltaY),
        "wheelDeltaX"in o && (u = -1 * o.wheelDeltaX),
        "axis"in o && o.axis === o.HORIZONTAL_AXIS && (u = -1 * p,
          p = 0),
          h = 0 === p ? u : p,
        "deltaY"in o && (p = -1 * o.deltaY,
          h = p),
        "deltaX"in o && (u = o.deltaX,
        0 === p && (h = -1 * u)),
        0 !== p || 0 !== u) {
        if (1 === o.deltaMode) {
          var g = t.data(this, "mousewheel-line-height");
          h *= g,
            p *= g,
            u *= g
        } else if (2 === o.deltaMode) {
          var v = t.data(this, "mousewheel-page-height");
          h *= v,
            p *= v,
            u *= v
        }
        if (d = Math.max(Math.abs(p), Math.abs(u)),
          (!s || s > d) && (s = d,
          n(o, d) && (s /= 40)),
          n(o, d) && (h /= 40,
            u /= 40,
            p /= 40),
            h = Math[h >= 1 ? "floor" : "ceil"](h / s),
            u = Math[u >= 1 ? "floor" : "ceil"](u / s),
            p = Math[p >= 1 ? "floor" : "ceil"](p / s),
          c.settings.normalizeOffset && this.getBoundingClientRect) {
          var y = this.getBoundingClientRect();
          f = e.clientX - y.left,
            m = e.clientY - y.top
        }
        return e.deltaX = u,
          e.deltaY = p,
          e.deltaFactor = s,
          e.offsetX = f,
          e.offsetY = m,
          e.deltaMode = 0,
          a.unshift(e, h, u, p),
        r && clearTimeout(r),
          r = setTimeout(i, 200),
          (t.event.dispatch || t.event.handle).apply(this, a)
      }
    }
    function i() {
      s = null
    }
    function n(t, e) {
      return c.settings.adjustOldDeltas && "mousewheel" === t.type && e % 120 === 0
    }
    var r, s, o = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"], a = "onwheel"in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"], l = Array.prototype.slice;
    if (t.event.fixHooks)
      for (var h = o.length; h; )
        t.event.fixHooks[o[--h]] = t.event.mouseHooks;
    var c = t.event.special.mousewheel = {
      version: "3.1.12",
      setup: function() {
        if (this.addEventListener)
          for (var i = a.length; i; )
            this.addEventListener(a[--i], e, !1);
        else
          this.onmousewheel = e;
        t.data(this, "mousewheel-line-height", c.getLineHeight(this)),
          t.data(this, "mousewheel-page-height", c.getPageHeight(this))
      },
      teardown: function() {
        if (this.removeEventListener)
          for (var i = a.length; i; )
            this.removeEventListener(a[--i], e, !1);
        else
          this.onmousewheel = null;
        t.removeData(this, "mousewheel-line-height"),
          t.removeData(this, "mousewheel-page-height")
      },
      getLineHeight: function(e) {
        var i = t(e)
          , n = i["offsetParent"in t.fn ? "offsetParent" : "parent"]();
        return n.length || (n = t("body")),
        parseInt(n.css("fontSize"), 10) || parseInt(i.css("fontSize"), 10) || 16
      },
      getPageHeight: function(e) {
        return t(e).height()
      },
      settings: {
        adjustOldDeltas: !0,
        normalizeOffset: !0
      }
    };
    t.fn.extend({
      mousewheel: function(t) {
        return t ? this.bind("mousewheel", t) : this.trigger("mousewheel")
      },
      unmousewheel: function(t) {
        return this.unbind("mousewheel", t)
      }
    })
  });
var Detector = {
  canvas: !!window.CanvasRenderingContext2D,
  webgl: function() {
    try {
      var t = document.createElement("canvas");
      return !!window.WebGLRenderingContext && (t.getContext("webgl") || t.getContext("experimental-webgl"))
    } catch (e) {
      return !1
    }
  }(),
  workers: !!window.Worker,
  fileapi: window.File && window.FileReader && window.FileList && window.Blob,
  getWebGLErrorMessage: function() {
    var t = document.createElement("div");
    return t.id = "webgl-error-message",
      t.style.fontFamily = "monospace",
      t.style.fontSize = "13px",
      t.style.fontWeight = "normal",
      t.style.textAlign = "center",
      t.style.background = "#fff",
      t.style.color = "#000",
      t.style.padding = "1.5em",
      t.style.width = "400px",
      t.style.margin = "5em auto 0",
    this.webgl || (t.innerHTML = window.WebGLRenderingContext ? ['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n") : ['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),
      t
  },
  addGetWebGLMessage: function(t) {
    var e, i, n;
    t = t || {},
      e = void 0 !== t.parent ? t.parent : document.body,
      i = void 0 !== t.id ? t.id : "oldie",
      n = Detector.getWebGLErrorMessage(),
      n.id = i,
      e.appendChild(n)
  }
};
window.Modernizr = function(t, e, i) {
  function n(t) {
    y.cssText = t
  }
  function r(t, e) {
    return typeof t === e
  }
  function s(t, e) {
    return !!~("" + t).indexOf(e)
  }
  function o(t, e) {
    for (var n in t) {
      var r = t[n];
      if (!s(r, "-") && y[r] !== i)
        return "pfx" == e ? r : !0
    }
    return !1
  }
  function a(t, e, n) {
    for (var s in t) {
      var o = e[t[s]];
      if (o !== i)
        return n === !1 ? t[s] : r(o, "function") ? o.bind(n || e) : o
    }
    return !1
  }
  function l(t, e, i) {
    var n = t.charAt(0).toUpperCase() + t.slice(1)
      , s = (t + " " + x.join(n + " ") + n).split(" ");
    return r(e, "string") || r(e, "undefined") ? o(s, e) : (s = (t + " " + b.join(n + " ") + n).split(" "),
      a(s, e, i))
  }
  var h, c, u, p = "2.8.3", d = {}, f = !0, m = e.documentElement, g = "modernizr", v = e.createElement(g), y = v.style, E = ({}.toString,
    " -webkit- -moz- -o- -ms- ".split(" ")), T = "Webkit Moz O ms", x = T.split(" "), b = T.toLowerCase().split(" "), w = {}, _ = [], R = _.slice, S = function(t, i, n, r) {
    var s, o, a, l, h = e.createElement("div"), c = e.body, u = c || e.createElement("body");
    if (parseInt(n, 10))
      for (; n--; )
        a = e.createElement("div"),
          a.id = r ? r[n] : g + (n + 1),
          h.appendChild(a);
    return s = ["&#173;", '<style id="s', g, '">', t, "</style>"].join(""),
      h.id = g,
      (c ? h : u).innerHTML += s,
      u.appendChild(h),
    c || (u.style.background = "",
      u.style.overflow = "hidden",
      l = m.style.overflow,
      m.style.overflow = "hidden",
      m.appendChild(u)),
      o = i(h, t),
      c ? h.parentNode.removeChild(h) : (u.parentNode.removeChild(u),
        m.style.overflow = l),
      !!o
  }, H = function() {
    function t(t, s) {
      s = s || e.createElement(n[t] || "div"),
        t = "on" + t;
      var o = t in s;
      return o || (s.setAttribute || (s = e.createElement("div")),
      s.setAttribute && s.removeAttribute && (s.setAttribute(t, ""),
        o = r(s[t], "function"),
      r(s[t], "undefined") || (s[t] = i),
        s.removeAttribute(t))),
        s = null,
        o
    }
    var n = {
      select: "input",
      change: "input",
      submit: "form",
      reset: "form",
      error: "img",
      load: "img",
      abort: "img"
    };
    return t
  }(), M = {}.hasOwnProperty;
  u = r(M, "undefined") || r(M.call, "undefined") ? function(t, e) {
      return e in t && r(t.constructor.prototype[e], "undefined")
    }
    : function(t, e) {
      return M.call(t, e)
    }
    ,
  Function.prototype.bind || (Function.prototype.bind = function(t) {
      var e = this;
      if ("function" != typeof e)
        throw new TypeError;
      var i = R.call(arguments, 1)
        , n = function() {
        if (this instanceof n) {
          var r = function() {};
          r.prototype = e.prototype;
          var s = new r
            , o = e.apply(s, i.concat(R.call(arguments)));
          return Object(o) === o ? o : s
        }
        return e.apply(t, i.concat(R.call(arguments)))
      };
      return n
    }
  ),
    w.canvas = function() {
      var t = e.createElement("canvas");
      return !!t.getContext && !!t.getContext("2d")
    }
    ,
    w.webgl = function() {
      return !!t.WebGLRenderingContext
    }
    ,
    w.touch = function() {
      var i;
      return "ontouchstart"in t || t.DocumentTouch && e instanceof DocumentTouch ? i = !0 : S(["@media (", E.join("touch-enabled),("), g, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function(t) {
        i = 9 === t.offsetTop
      }),
        i
    }
    ,
    w.geolocation = function() {
      return "geolocation"in navigator
    }
    ,
    w.hashchange = function() {
      return H("hashchange", t) && (e.documentMode === i || e.documentMode > 7)
    }
    ,
    w.history = function() {
      return !!t.history && !!history.pushState
    }
    ,
    w.rgba = function() {
      return n("background-color:rgba(150,255,150,.5)"),
        s(y.backgroundColor, "rgba")
    }
    ,
    w.backgroundsize = function() {
      return l("backgroundSize")
    }
    ,
    w.cssanimations = function() {
      return l("animationName")
    }
    ,
    w.cssgradients = function() {
      var t = "background-image:"
        , e = "gradient(linear,left top,right bottom,from(#9f9),to(white));"
        , i = "linear-gradient(left top,#9f9, white);";
      return n((t + "-webkit- ".split(" ").join(e + t) + E.join(i + t)).slice(0, -t.length)),
        s(y.backgroundImage, "gradient")
    }
    ,
    w.csstransforms = function() {
      return !!l("transform")
    }
    ,
    w.csstransforms3d = function() {
      var t = !!l("perspective");
      return t && "webkitPerspective"in m.style && S("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}", function(e) {
        t = 9 === e.offsetLeft && 3 === e.offsetHeight
      }),
        t
    }
    ,
    w.csstransitions = function() {
      return l("transition")
    }
    ,
    w.video = function() {
      var t = e.createElement("video")
        , i = !1;
      try {
        (i = !!t.canPlayType) && (i = new Boolean(i),
          i.ogg = t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, ""),
          i.h264 = t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, ""),
          i.webm = t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, ""))
      } catch (n) {}
      return i
    }
    ,
    w.audio = function() {
      var t = e.createElement("audio")
        , i = !1;
      try {
        (i = !!t.canPlayType) && (i = new Boolean(i),
          i.ogg = t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
          i.mp3 = t.canPlayType("audio/mpeg;").replace(/^no$/, ""),
          i.wav = t.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""),
          i.m4a = (t.canPlayType("audio/x-m4a;") || t.canPlayType("audio/aac;")).replace(/^no$/, ""))
      } catch (n) {}
      return i
    }
  ;
  for (var C in w)
    u(w, C) && (c = C.toLowerCase(),
      d[c] = w[C](),
      _.push((d[c] ? "" : "no-") + c));
  return d.addTest = function(t, e) {
    if ("object" == typeof t)
      for (var n in t)
        u(t, n) && d.addTest(n, t[n]);
    else {
      if (t = t.toLowerCase(),
        d[t] !== i)
        return d;
      e = "function" == typeof e ? e() : e,
      "undefined" != typeof f && f && (m.className += " " + (e ? "" : "no-") + t),
        d[t] = e
    }
    return d
  }
    ,
    n(""),
    v = h = null,
    function(t, e) {
      function i(t, e) {
        var i = t.createElement("p")
          , n = t.getElementsByTagName("head")[0] || t.documentElement;
        return i.innerHTML = "x<style>" + e + "</style>",
          n.insertBefore(i.lastChild, n.firstChild)
      }
      function n() {
        var t = y.elements;
        return "string" == typeof t ? t.split(" ") : t
      }
      function r(t) {
        var e = v[t[m]];
        return e || (e = {},
          g++,
          t[m] = g,
          v[g] = e),
          e
      }
      function s(t, i, n) {
        if (i || (i = e),
            c)
          return i.createElement(t);
        n || (n = r(i));
        var s;
        return s = n.cache[t] ? n.cache[t].cloneNode() : f.test(t) ? (n.cache[t] = n.createElem(t)).cloneNode() : n.createElem(t),
          !s.canHaveChildren || d.test(t) || s.tagUrn ? s : n.frag.appendChild(s)
      }
      function o(t, i) {
        if (t || (t = e),
            c)
          return t.createDocumentFragment();
        i = i || r(t);
        for (var s = i.frag.cloneNode(), o = 0, a = n(), l = a.length; l > o; o++)
          s.createElement(a[o]);
        return s
      }
      function a(t, e) {
        e.cache || (e.cache = {},
          e.createElem = t.createElement,
          e.createFrag = t.createDocumentFragment,
          e.frag = e.createFrag()),
          t.createElement = function(i) {
            return y.shivMethods ? s(i, t, e) : e.createElem(i)
          }
          ,
          t.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + n().join().replace(/[\w\-]+/g, function(t) {
            return e.createElem(t),
              e.frag.createElement(t),
            'c("' + t + '")'
          }) + ");return n}")(y, e.frag)
      }
      function l(t) {
        t || (t = e);
        var n = r(t);
        return y.shivCSS && !h && !n.hasCSS && (n.hasCSS = !!i(t, "article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),
        c || a(t, n),
          t
      }
      var h, c, u = "3.7.0", p = t.html5 || {}, d = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i, f = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i, m = "_html5shiv", g = 0, v = {};
      !function() {
        try {
          var t = e.createElement("a");
          t.innerHTML = "<xyz></xyz>",
            h = "hidden"in t,
            c = 1 == t.childNodes.length || function() {
              e.createElement("a");
              var t = e.createDocumentFragment();
              return "undefined" == typeof t.cloneNode || "undefined" == typeof t.createDocumentFragment || "undefined" == typeof t.createElement
            }()
        } catch (i) {
          h = !0,
            c = !0
        }
      }();
      var y = {
        elements: p.elements || "abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",
        version: u,
        shivCSS: p.shivCSS !== !1,
        supportsUnknownElements: c,
        shivMethods: p.shivMethods !== !1,
        type: "default",
        shivDocument: l,
        createElement: s,
        createDocumentFragment: o
      };
      t.html5 = y,
        l(e)
    }(this, e),
    d._version = p,
    d._prefixes = E,
    d._domPrefixes = b,
    d._cssomPrefixes = x,
    d.hasEvent = H,
    d.testProp = function(t) {
      return o([t])
    }
    ,
    d.testAllProps = l,
    d.testStyles = S,
    d.prefixed = function(t, e, i) {
      return e ? l(t, e, i) : l(t, "pfx")
    }
    ,
    m.className = m.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + (f ? " js " + _.join(" ") : ""),
    d
}(this, this.document),
  Modernizr.addTest("csspositionsticky", function() {
    var t = "position:"
      , e = "sticky"
      , i = document.createElement("modernizr")
      , n = i.style;
    return n.cssText = t + Modernizr._prefixes.join(e + ";" + t).slice(0, -t.length),
    -1 !== n.position.indexOf(e)
  }),
  (window._gsQueue || (window._gsQueue = [])).push(function() {
    "use strict";
    window._gsDefine("TweenMax", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(t, e, i) {
      var n = [].slice
        , r = function(t, e, n) {
        i.call(this, t, e, n),
          this._cycle = 0,
          this._yoyo = this.vars.yoyo === !0,
          this._repeat = this.vars.repeat || 0,
          this._repeatDelay = this.vars.repeatDelay || 0,
          this._dirty = !0,
          this.render = r.prototype.render
      }
        , s = 1e-10
        , o = i._internals.isSelector
        , a = i._internals.isArray
        , l = r.prototype = i.to({}, .1, {})
        , h = [];
      r.version = "1.11.1",
        l.constructor = r,
        l.kill()._gc = !1,
        r.killTweensOf = r.killDelayedCallsTo = i.killTweensOf,
        r.getTweensOf = i.getTweensOf,
        r.ticker = i.ticker,
        l.invalidate = function() {
          return this._yoyo = this.vars.yoyo === !0,
            this._repeat = this.vars.repeat || 0,
            this._repeatDelay = this.vars.repeatDelay || 0,
            this._uncache(!0),
            i.prototype.invalidate.call(this)
        }
        ,
        l.updateTo = function(t, e) {
          var n, r = this.ratio;
          e && this.timeline && this._startTime < this._timeline._time && (this._startTime = this._timeline._time,
            this._uncache(!1),
            this._gc ? this._enabled(!0, !1) : this._timeline.insert(this, this._startTime - this._delay));
          for (n in t)
            this.vars[n] = t[n];
          if (this._initted)
            if (e)
              this._initted = !1;
            else if (this._notifyPluginsOfEnabled && this._firstPT && i._onPluginEvent("_onDisable", this),
              this._time / this._duration > .998) {
              var s = this._time;
              this.render(0, !0, !1),
                this._initted = !1,
                this.render(s, !0, !1)
            } else if (this._time > 0) {
              this._initted = !1,
                this._init();
              for (var o, a = 1 / (1 - r), l = this._firstPT; l; )
                o = l.s + l.c,
                  l.c *= a,
                  l.s = o - l.c,
                  l = l._next
            }
          return this
        }
        ,
        l.render = function(t, e, i) {
          this._initted || 0 === this._duration && this.vars.repeat && this.invalidate();
          var n, r, o, a, l, c, u, p, d = this._dirty ? this.totalDuration() : this._totalDuration, f = this._time, m = this._totalTime, g = this._cycle, v = this._duration;
          if (t >= d ? (this._totalTime = d,
              this._cycle = this._repeat,
              this._yoyo && 0 !== (1 & this._cycle) ? (this._time = 0,
                this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0) : (this._time = v,
                this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1),
            this._reversed || (n = !0,
              r = "onComplete"),
            0 === v && (p = this._rawPrevTime,
            (0 === t || 0 > p || p === s) && p !== t && (i = !0,
            p > s && (r = "onReverseComplete")),
              this._rawPrevTime = p = !e || t ? t : s)) : 1e-7 > t ? (this._totalTime = this._time = this._cycle = 0,
              this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0,
            (0 !== m || 0 === v && this._rawPrevTime > s) && (r = "onReverseComplete",
              n = this._reversed),
              0 > t ? (this._active = !1,
              0 === v && (this._rawPrevTime >= 0 && (i = !0),
                this._rawPrevTime = p = !e || t ? t : s)) : this._initted || (i = !0)) : (this._totalTime = this._time = t,
            0 !== this._repeat && (a = v + this._repeatDelay,
              this._cycle = this._totalTime / a >> 0,
            0 !== this._cycle && this._cycle === this._totalTime / a && this._cycle--,
              this._time = this._totalTime - this._cycle * a,
            this._yoyo && 0 !== (1 & this._cycle) && (this._time = v - this._time),
              this._time > v ? this._time = v : 0 > this._time && (this._time = 0)),
              this._easeType ? (l = this._time / v,
                c = this._easeType,
                u = this._easePower,
              (1 === c || 3 === c && l >= .5) && (l = 1 - l),
              3 === c && (l *= 2),
                1 === u ? l *= l : 2 === u ? l *= l * l : 3 === u ? l *= l * l * l : 4 === u && (l *= l * l * l * l),
                this.ratio = 1 === c ? 1 - l : 2 === c ? l : .5 > this._time / v ? l / 2 : 1 - l / 2) : this.ratio = this._ease.getRatio(this._time / v)),
            f === this._time && !i && g === this._cycle)
            return void (m !== this._totalTime && this._onUpdate && (e || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || h)));
          if (!this._initted) {
            if (this._init(),
              !this._initted || this._gc)
              return;
            this._time && !n ? this.ratio = this._ease.getRatio(this._time / v) : n && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
          }
          for (this._active || !this._paused && this._time !== f && t >= 0 && (this._active = !0),
               0 === m && (this._startAt && (t >= 0 ? this._startAt.render(t, e, i) : r || (r = "_dummyGS")),
               this.vars.onStart && (0 !== this._totalTime || 0 === v) && (e || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || h))),
                 o = this._firstPT; o; )
            o.f ? o.t[o.p](o.c * this.ratio + o.s) : o.t[o.p] = o.c * this.ratio + o.s,
              o = o._next;
          this._onUpdate && (0 > t && this._startAt && this._startTime && this._startAt.render(t, e, i),
          e || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || h)),
          this._cycle !== g && (e || this._gc || this.vars.onRepeat && this.vars.onRepeat.apply(this.vars.onRepeatScope || this, this.vars.onRepeatParams || h)),
          r && (this._gc || (0 > t && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(t, e, i),
          n && (this._timeline.autoRemoveChildren && this._enabled(!1, !1),
            this._active = !1),
          !e && this.vars[r] && this.vars[r].apply(this.vars[r + "Scope"] || this, this.vars[r + "Params"] || h),
          0 === v && this._rawPrevTime === s && p !== s && (this._rawPrevTime = 0)))
        }
        ,
        r.to = function(t, e, i) {
          return new r(t,e,i)
        }
        ,
        r.from = function(t, e, i) {
          return i.runBackwards = !0,
            i.immediateRender = 0 != i.immediateRender,
            new r(t,e,i)
        }
        ,
        r.fromTo = function(t, e, i, n) {
          return n.startAt = i,
            n.immediateRender = 0 != n.immediateRender && 0 != i.immediateRender,
            new r(t,e,n)
        }
        ,
        r.staggerTo = r.allTo = function(t, e, s, l, c, u, p) {
          l = l || 0;
          var d, f, m, g, v = s.delay || 0, y = [], E = function() {
            s.onComplete && s.onComplete.apply(s.onCompleteScope || this, arguments),
              c.apply(p || this, u || h)
          };
          for (a(t) || ("string" == typeof t && (t = i.selector(t) || t),
          o(t) && (t = n.call(t, 0))),
                 d = t.length,
                 m = 0; d > m; m++) {
            f = {};
            for (g in s)
              f[g] = s[g];
            f.delay = v,
            m === d - 1 && c && (f.onComplete = E),
              y[m] = new r(t[m],e,f),
              v += l
          }
          return y
        }
        ,
        r.staggerFrom = r.allFrom = function(t, e, i, n, s, o, a) {
          return i.runBackwards = !0,
            i.immediateRender = 0 != i.immediateRender,
            r.staggerTo(t, e, i, n, s, o, a)
        }
        ,
        r.staggerFromTo = r.allFromTo = function(t, e, i, n, s, o, a, l) {
          return n.startAt = i,
            n.immediateRender = 0 != n.immediateRender && 0 != i.immediateRender,
            r.staggerTo(t, e, n, s, o, a, l)
        }
        ,
        r.delayedCall = function(t, e, i, n, s) {
          return new r(e,0,{
            delay: t,
            onComplete: e,
            onCompleteParams: i,
            onCompleteScope: n,
            onReverseComplete: e,
            onReverseCompleteParams: i,
            onReverseCompleteScope: n,
            immediateRender: !1,
            useFrames: s,
            overwrite: 0
          })
        }
        ,
        r.set = function(t, e) {
          return new r(t,0,e)
        }
        ,
        r.isTweening = function(t) {
          return i.getTweensOf(t, !0).length > 0
        }
      ;
      var c = function(t, e) {
          for (var n = [], r = 0, s = t._first; s; )
            s instanceof i ? n[r++] = s : (e && (n[r++] = s),
              n = n.concat(c(s, e)),
              r = n.length),
              s = s._next;
          return n
        }
        , u = r.getAllTweens = function(e) {
          return c(t._rootTimeline, e).concat(c(t._rootFramesTimeline, e))
        }
      ;
      r.killAll = function(t, i, n, r) {
        null == i && (i = !0),
        null == n && (n = !0);
        var s, o, a, l = u(0 != r), h = l.length, c = i && n && r;
        for (a = 0; h > a; a++)
          o = l[a],
          (c || o instanceof e || (s = o.target === o.vars.onComplete) && n || i && !s) && (t ? o.totalTime(o.totalDuration()) : o._enabled(!1, !1))
      }
        ,
        r.killChildTweensOf = function(t, e) {
          if (null != t) {
            var s, l, h, c, u, p = i._tweenLookup;
            if ("string" == typeof t && (t = i.selector(t) || t),
              o(t) && (t = n(t, 0)),
                a(t))
              for (c = t.length; --c > -1; )
                r.killChildTweensOf(t[c], e);
            else {
              s = [];
              for (h in p)
                for (l = p[h].target.parentNode; l; )
                  l === t && (s = s.concat(p[h].tweens)),
                    l = l.parentNode;
              for (u = s.length,
                     c = 0; u > c; c++)
                e && s[c].totalTime(s[c].totalDuration()),
                  s[c]._enabled(!1, !1)
            }
          }
        }
      ;
      var p = function(t, i, n, r) {
        i = i !== !1,
          n = n !== !1,
          r = r !== !1;
        for (var s, o, a = u(r), l = i && n && r, h = a.length; --h > -1; )
          o = a[h],
          (l || o instanceof e || (s = o.target === o.vars.onComplete) && n || i && !s) && o.paused(t)
      };
      return r.pauseAll = function(t, e, i) {
        p(!0, t, e, i)
      }
        ,
        r.resumeAll = function(t, e, i) {
          p(!1, t, e, i)
        }
        ,
        r.globalTimeScale = function(e) {
          var n = t._rootTimeline
            , r = i.ticker.time;
          return arguments.length ? (e = e || s,
            n._startTime = r - (r - n._startTime) * n._timeScale / e,
            n = t._rootFramesTimeline,
            r = i.ticker.frame,
            n._startTime = r - (r - n._startTime) * n._timeScale / e,
            n._timeScale = t._rootTimeline._timeScale = e,
            e) : n._timeScale
        }
        ,
        l.progress = function(t) {
          return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
        }
        ,
        l.totalProgress = function(t) {
          return arguments.length ? this.totalTime(this.totalDuration() * t, !1) : this._totalTime / this.totalDuration()
        }
        ,
        l.time = function(t, e) {
          return arguments.length ? (this._dirty && this.totalDuration(),
          t > this._duration && (t = this._duration),
            this._yoyo && 0 !== (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)),
            this.totalTime(t, e)) : this._time
        }
        ,
        l.duration = function(e) {
          return arguments.length ? t.prototype.duration.call(this, e) : this._duration
        }
        ,
        l.totalDuration = function(t) {
          return arguments.length ? -1 === this._repeat ? this : this.duration((t - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat,
            this._dirty = !1),
            this._totalDuration)
        }
        ,
        l.repeat = function(t) {
          return arguments.length ? (this._repeat = t,
            this._uncache(!0)) : this._repeat
        }
        ,
        l.repeatDelay = function(t) {
          return arguments.length ? (this._repeatDelay = t,
            this._uncache(!0)) : this._repeatDelay
        }
        ,
        l.yoyo = function(t) {
          return arguments.length ? (this._yoyo = t,
            this) : this._yoyo
        }
        ,
        r
    }, !0),
      window._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(t, e, i) {
        var n = function(t) {
          e.call(this, t),
            this._labels = {},
            this.autoRemoveChildren = this.vars.autoRemoveChildren === !0,
            this.smoothChildTiming = this.vars.smoothChildTiming === !0,
            this._sortChildren = !0,
            this._onUpdate = this.vars.onUpdate;
          var i, n, r = this.vars;
          for (n in r)
            i = r[n],
            o(i) && -1 !== i.join("").indexOf("{self}") && (r[n] = this._swapSelfInParams(i));
          o(r.tweens) && this.add(r.tweens, 0, r.align, r.stagger)
        }
          , r = 1e-10
          , s = i._internals.isSelector
          , o = i._internals.isArray
          , a = []
          , l = function(t) {
          var e, i = {};
          for (e in t)
            i[e] = t[e];
          return i
        }
          , h = function(t, e, i, n) {
          t._timeline.pause(t._startTime),
          e && e.apply(n || t._timeline, i || a)
        }
          , c = a.slice
          , u = n.prototype = new e;
        return n.version = "1.11.0",
          u.constructor = n,
          u.kill()._gc = !1,
          u.to = function(t, e, n, r) {
            return e ? this.add(new i(t,e,n), r) : this.set(t, n, r)
          }
          ,
          u.from = function(t, e, n, r) {
            return this.add(i.from(t, e, n), r)
          }
          ,
          u.fromTo = function(t, e, n, r, s) {
            return e ? this.add(i.fromTo(t, e, n, r), s) : this.set(t, r, s)
          }
          ,
          u.staggerTo = function(t, e, r, o, a, h, u, p) {
            var d, f = new n({
              onComplete: h,
              onCompleteParams: u,
              onCompleteScope: p
            });
            for ("string" == typeof t && (t = i.selector(t) || t),
                 s(t) && (t = c.call(t, 0)),
                   o = o || 0,
                   d = 0; t.length > d; d++)
              r.startAt && (r.startAt = l(r.startAt)),
                f.to(t[d], e, l(r), d * o);
            return this.add(f, a)
          }
          ,
          u.staggerFrom = function(t, e, i, n, r, s, o, a) {
            return i.immediateRender = 0 != i.immediateRender,
              i.runBackwards = !0,
              this.staggerTo(t, e, i, n, r, s, o, a)
          }
          ,
          u.staggerFromTo = function(t, e, i, n, r, s, o, a, l) {
            return n.startAt = i,
              n.immediateRender = 0 != n.immediateRender && 0 != i.immediateRender,
              this.staggerTo(t, e, n, r, s, o, a, l)
          }
          ,
          u.call = function(t, e, n, r) {
            return this.add(i.delayedCall(0, t, e, n), r)
          }
          ,
          u.set = function(t, e, n) {
            return n = this._parseTimeOrLabel(n, 0, !0),
            null == e.immediateRender && (e.immediateRender = n === this._time && !this._paused),
              this.add(new i(t,0,e), n)
          }
          ,
          n.exportRoot = function(t, e) {
            t = t || {},
            null == t.smoothChildTiming && (t.smoothChildTiming = !0);
            var r, s, o = new n(t), a = o._timeline;
            for (null == e && (e = !0),
                   a._remove(o, !0),
                   o._startTime = 0,
                   o._rawPrevTime = o._time = o._totalTime = a._time,
                   r = a._first; r; )
              s = r._next,
              e && r instanceof i && r.target === r.vars.onComplete || o.add(r, r._startTime - r._delay),
                r = s;
            return a.add(o, 0),
              o
          }
          ,
          u.add = function(r, s, a, l) {
            var h, c, u, p, d, f;
            if ("number" != typeof s && (s = this._parseTimeOrLabel(s, 0, !0, r)),
                !(r instanceof t)) {
              if (r instanceof Array || r && r.push && o(r)) {
                for (a = a || "normal",
                       l = l || 0,
                       h = s,
                       c = r.length,
                       u = 0; c > u; u++)
                  o(p = r[u]) && (p = new n({
                    tweens: p
                  })),
                    this.add(p, h),
                  "string" != typeof p && "function" != typeof p && ("sequence" === a ? h = p._startTime + p.totalDuration() / p._timeScale : "start" === a && (p._startTime -= p.delay())),
                    h += l;
                return this._uncache(!0)
              }
              if ("string" == typeof r)
                return this.addLabel(r, s);
              if ("function" != typeof r)
                throw "Cannot add " + r + " into the timeline; it is not a tween, timeline, function, or string.";
              r = i.delayedCall(0, r)
            }
            if (e.prototype.add.call(this, r, s),
              this._gc && !this._paused && this._duration < this.duration())
              for (d = this,
                     f = d.rawTime() > r._startTime; d._gc && d._timeline; )
                d._timeline.smoothChildTiming && f ? d.totalTime(d._totalTime, !0) : d._enabled(!0, !1),
                  d = d._timeline;
            return this
          }
          ,
          u.remove = function(e) {
            if (e instanceof t)
              return this._remove(e, !1);
            if (e instanceof Array || e && e.push && o(e)) {
              for (var i = e.length; --i > -1; )
                this.remove(e[i]);
              return this
            }
            return "string" == typeof e ? this.removeLabel(e) : this.kill(null, e)
          }
          ,
          u._remove = function(t, i) {
            e.prototype._remove.call(this, t, i);
            var n = this._last;
            return n ? this._time > n._startTime + n._totalDuration / n._timeScale && (this._time = this.duration(),
              this._totalTime = this._totalDuration) : this._time = this._totalTime = 0,
              this
          }
          ,
          u.append = function(t, e) {
            return this.add(t, this._parseTimeOrLabel(null, e, !0, t))
          }
          ,
          u.insert = u.insertMultiple = function(t, e, i, n) {
            return this.add(t, e || 0, i, n)
          }
          ,
          u.appendMultiple = function(t, e, i, n) {
            return this.add(t, this._parseTimeOrLabel(null, e, !0, t), i, n)
          }
          ,
          u.addLabel = function(t, e) {
            return this._labels[t] = this._parseTimeOrLabel(e),
              this
          }
          ,
          u.addPause = function(t, e, i, n) {
            return this.call(h, ["{self}", e, i, n], this, t)
          }
          ,
          u.removeLabel = function(t) {
            return delete this._labels[t],
              this
          }
          ,
          u.getLabelTime = function(t) {
            return null != this._labels[t] ? this._labels[t] : -1
          }
          ,
          u._parseTimeOrLabel = function(e, i, n, r) {
            var s;
            if (r instanceof t && r.timeline === this)
              this.remove(r);
            else if (r && (r instanceof Array || r.push && o(r)))
              for (s = r.length; --s > -1; )
                r[s]instanceof t && r[s].timeline === this && this.remove(r[s]);
            if ("string" == typeof i)
              return this._parseTimeOrLabel(i, n && "number" == typeof e && null == this._labels[i] ? e - this.duration() : 0, n);
            if (i = i || 0,
              "string" != typeof e || !isNaN(e) && null == this._labels[e])
              null == e && (e = this.duration());
            else {
              if (s = e.indexOf("="),
                -1 === s)
                return null == this._labels[e] ? n ? this._labels[e] = this.duration() + i : i : this._labels[e] + i;
              i = parseInt(e.charAt(s - 1) + "1", 10) * Number(e.substr(s + 1)),
                e = s > 1 ? this._parseTimeOrLabel(e.substr(0, s - 1), 0, n) : this.duration()
            }
            return Number(e) + i
          }
          ,
          u.seek = function(t, e) {
            return this.totalTime("number" == typeof t ? t : this._parseTimeOrLabel(t), e !== !1)
          }
          ,
          u.stop = function() {
            return this.paused(!0)
          }
          ,
          u.gotoAndPlay = function(t, e) {
            return this.play(t, e)
          }
          ,
          u.gotoAndStop = function(t, e) {
            return this.pause(t, e)
          }
          ,
          u.render = function(t, e, i) {
            this._gc && this._enabled(!0, !1);
            var n, s, o, l, h, c = this._dirty ? this.totalDuration() : this._totalDuration, u = this._time, p = this._startTime, d = this._timeScale, f = this._paused;
            if (t >= c ? (this._totalTime = this._time = c,
              this._reversed || this._hasPausedChild() || (s = !0,
                l = "onComplete",
              0 === this._duration && (0 === t || 0 > this._rawPrevTime || this._rawPrevTime === r) && this._rawPrevTime !== t && this._first && (h = !0,
              this._rawPrevTime > r && (l = "onReverseComplete"))),
                this._rawPrevTime = this._duration || !e || t ? t : r,
                t = c + 1e-6) : 1e-7 > t ? (this._totalTime = this._time = 0,
              (0 !== u || 0 === this._duration && (this._rawPrevTime > r || 0 > t && this._rawPrevTime >= 0)) && (l = "onReverseComplete",
                s = this._reversed),
                0 > t ? (this._active = !1,
                0 === this._duration && this._rawPrevTime >= 0 && this._first && (h = !0),
                  this._rawPrevTime = t) : (this._rawPrevTime = this._duration || !e || t ? t : r,
                  t = 0,
                this._initted || (h = !0))) : this._totalTime = this._time = this._rawPrevTime = t,
              this._time !== u && this._first || i || h) {
              if (this._initted || (this._initted = !0),
                this._active || !this._paused && this._time !== u && t > 0 && (this._active = !0),
                0 === u && this.vars.onStart && 0 !== this._time && (e || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || a)),
                this._time >= u)
                for (n = this._first; n && (o = n._next,
                !this._paused || f); )
                  (n._active || n._startTime <= this._time && !n._paused && !n._gc) && (n._reversed ? n.render((n._dirty ? n.totalDuration() : n._totalDuration) - (t - n._startTime) * n._timeScale, e, i) : n.render((t - n._startTime) * n._timeScale, e, i)),
                    n = o;
              else
                for (n = this._last; n && (o = n._prev,
                !this._paused || f); )
                  (n._active || u >= n._startTime && !n._paused && !n._gc) && (n._reversed ? n.render((n._dirty ? n.totalDuration() : n._totalDuration) - (t - n._startTime) * n._timeScale, e, i) : n.render((t - n._startTime) * n._timeScale, e, i)),
                    n = o;
              this._onUpdate && (e || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || a)),
              l && (this._gc || (p === this._startTime || d !== this._timeScale) && (0 === this._time || c >= this.totalDuration()) && (s && (this._timeline.autoRemoveChildren && this._enabled(!1, !1),
                this._active = !1),
              !e && this.vars[l] && this.vars[l].apply(this.vars[l + "Scope"] || this, this.vars[l + "Params"] || a)))
            }
          }
          ,
          u._hasPausedChild = function() {
            for (var t = this._first; t; ) {
              if (t._paused || t instanceof n && t._hasPausedChild())
                return !0;
              t = t._next
            }
            return !1
          }
          ,
          u.getChildren = function(t, e, n, r) {
            r = r || -9999999999;
            for (var s = [], o = this._first, a = 0; o; )
              r > o._startTime || (o instanceof i ? e !== !1 && (s[a++] = o) : (n !== !1 && (s[a++] = o),
              t !== !1 && (s = s.concat(o.getChildren(!0, e, n)),
                a = s.length))),
                o = o._next;
            return s
          }
          ,
          u.getTweensOf = function(t, e) {
            for (var n = i.getTweensOf(t), r = n.length, s = [], o = 0; --r > -1; )
              (n[r].timeline === this || e && this._contains(n[r])) && (s[o++] = n[r]);
            return s
          }
          ,
          u._contains = function(t) {
            for (var e = t.timeline; e; ) {
              if (e === this)
                return !0;
              e = e.timeline
            }
            return !1
          }
          ,
          u.shiftChildren = function(t, e, i) {
            i = i || 0;
            for (var n, r = this._first, s = this._labels; r; )
              r._startTime >= i && (r._startTime += t),
                r = r._next;
            if (e)
              for (n in s)
                s[n] >= i && (s[n] += t);
            return this._uncache(!0)
          }
          ,
          u._kill = function(t, e) {
            if (!t && !e)
              return this._enabled(!1, !1);
            for (var i = e ? this.getTweensOf(e) : this.getChildren(!0, !0, !1), n = i.length, r = !1; --n > -1; )
              i[n]._kill(t, e) && (r = !0);
            return r
          }
          ,
          u.clear = function(t) {
            var e = this.getChildren(!1, !0, !0)
              , i = e.length;
            for (this._time = this._totalTime = 0; --i > -1; )
              e[i]._enabled(!1, !1);
            return t !== !1 && (this._labels = {}),
              this._uncache(!0)
          }
          ,
          u.invalidate = function() {
            for (var t = this._first; t; )
              t.invalidate(),
                t = t._next;
            return this
          }
          ,
          u._enabled = function(t, i) {
            if (t === this._gc)
              for (var n = this._first; n; )
                n._enabled(t, !0),
                  n = n._next;
            return e.prototype._enabled.call(this, t, i)
          }
          ,
          u.duration = function(t) {
            return arguments.length ? (0 !== this.duration() && 0 !== t && this.timeScale(this._duration / t),
              this) : (this._dirty && this.totalDuration(),
              this._duration)
          }
          ,
          u.totalDuration = function(t) {
            if (!arguments.length) {
              if (this._dirty) {
                for (var e, i, n = 0, r = this._last, s = 999999999999; r; )
                  e = r._prev,
                  r._dirty && r.totalDuration(),
                    r._startTime > s && this._sortChildren && !r._paused ? this.add(r, r._startTime - r._delay) : s = r._startTime,
                  0 > r._startTime && !r._paused && (n -= r._startTime,
                  this._timeline.smoothChildTiming && (this._startTime += r._startTime / this._timeScale),
                    this.shiftChildren(-r._startTime, !1, -9999999999),
                    s = 0),
                    i = r._startTime + r._totalDuration / r._timeScale,
                  i > n && (n = i),
                    r = e;
                this._duration = this._totalDuration = n,
                  this._dirty = !1
              }
              return this._totalDuration
            }
            return 0 !== this.totalDuration() && 0 !== t && this.timeScale(this._totalDuration / t),
              this
          }
          ,
          u.usesFrames = function() {
            for (var e = this._timeline; e._timeline; )
              e = e._timeline;
            return e === t._rootFramesTimeline
          }
          ,
          u.rawTime = function() {
            return this._paused ? this._totalTime : (this._timeline.rawTime() - this._startTime) * this._timeScale
          }
          ,
          n
      }, !0),
      window._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function(t, e, i) {
        var n = function(e) {
          t.call(this, e),
            this._repeat = this.vars.repeat || 0,
            this._repeatDelay = this.vars.repeatDelay || 0,
            this._cycle = 0,
            this._yoyo = this.vars.yoyo === !0,
            this._dirty = !0
        }
          , r = 1e-10
          , s = []
          , o = new i(null,null,1,0)
          , a = n.prototype = new t;
        return a.constructor = n,
          a.kill()._gc = !1,
          n.version = "1.11.0",
          a.invalidate = function() {
            return this._yoyo = this.vars.yoyo === !0,
              this._repeat = this.vars.repeat || 0,
              this._repeatDelay = this.vars.repeatDelay || 0,
              this._uncache(!0),
              t.prototype.invalidate.call(this)
          }
          ,
          a.addCallback = function(t, i, n, r) {
            return this.add(e.delayedCall(0, t, n, r), i)
          }
          ,
          a.removeCallback = function(t, e) {
            if (t)
              if (null == e)
                this._kill(null, t);
              else
                for (var i = this.getTweensOf(t, !1), n = i.length, r = this._parseTimeOrLabel(e); --n > -1; )
                  i[n]._startTime === r && i[n]._enabled(!1, !1);
            return this
          }
          ,
          a.tweenTo = function(t, i) {
            i = i || {};
            var n, r, a = {
              ease: o,
              overwrite: 2,
              useFrames: this.usesFrames(),
              immediateRender: !1
            };
            for (n in i)
              a[n] = i[n];
            return a.time = this._parseTimeOrLabel(t),
              r = new e(this,Math.abs(Number(a.time) - this._time) / this._timeScale || .001,a),
              a.onStart = function() {
                r.target.paused(!0),
                r.vars.time !== r.target.time() && r.duration(Math.abs(r.vars.time - r.target.time()) / r.target._timeScale),
                i.onStart && i.onStart.apply(i.onStartScope || r, i.onStartParams || s)
              }
              ,
              r
          }
          ,
          a.tweenFromTo = function(t, e, i) {
            i = i || {},
              t = this._parseTimeOrLabel(t),
              i.startAt = {
                onComplete: this.seek,
                onCompleteParams: [t],
                onCompleteScope: this
              },
              i.immediateRender = i.immediateRender !== !1;
            var n = this.tweenTo(e, i);
            return n.duration(Math.abs(n.vars.time - t) / this._timeScale || .001)
          }
          ,
          a.render = function(t, e, i) {
            this._gc && this._enabled(!0, !1);
            var n, o, a, l, h, c, u = this._dirty ? this.totalDuration() : this._totalDuration, p = this._duration, d = this._time, f = this._totalTime, m = this._startTime, g = this._timeScale, v = this._rawPrevTime, y = this._paused, E = this._cycle;
            if (t >= u ? (this._locked || (this._totalTime = u,
                this._cycle = this._repeat),
              this._reversed || this._hasPausedChild() || (o = !0,
                l = "onComplete",
              0 === this._duration && (0 === t || 0 > v || v === r) && v !== t && this._first && (h = !0,
              v > r && (l = "onReverseComplete"))),
                this._rawPrevTime = this._duration || !e || t ? t : r,
                this._yoyo && 0 !== (1 & this._cycle) ? this._time = t = 0 : (this._time = p,
                  t = p + 1e-6)) : 1e-7 > t ? (this._locked || (this._totalTime = this._cycle = 0),
                this._time = 0,
              (0 !== d || 0 === p && (v > r || 0 > t && v >= 0) && !this._locked) && (l = "onReverseComplete",
                o = this._reversed),
                0 > t ? (this._active = !1,
                0 === p && v >= 0 && this._first && (h = !0),
                  this._rawPrevTime = t) : (this._rawPrevTime = p || !e || t ? t : r,
                  t = 0,
                this._initted || (h = !0))) : (0 === p && 0 > v && (h = !0),
                this._time = this._rawPrevTime = t,
              this._locked || (this._totalTime = t,
              0 !== this._repeat && (c = p + this._repeatDelay,
                this._cycle = this._totalTime / c >> 0,
              0 !== this._cycle && this._cycle === this._totalTime / c && this._cycle--,
                this._time = this._totalTime - this._cycle * c,
              this._yoyo && 0 !== (1 & this._cycle) && (this._time = p - this._time),
                this._time > p ? (this._time = p,
                  t = p + 1e-6) : 0 > this._time ? this._time = t = 0 : t = this._time))),
              this._cycle !== E && !this._locked) {
              var T = this._yoyo && 0 !== (1 & E)
                , x = T === (this._yoyo && 0 !== (1 & this._cycle))
                , b = this._totalTime
                , w = this._cycle
                , _ = this._rawPrevTime
                , R = this._time;
              if (this._totalTime = E * p,
                  E > this._cycle ? T = !T : this._totalTime += p,
                  this._time = d,
                  this._rawPrevTime = 0 === p ? v - 1e-5 : v,
                  this._cycle = E,
                  this._locked = !0,
                  d = T ? 0 : p,
                  this.render(d, e, 0 === p),
                e || this._gc || this.vars.onRepeat && this.vars.onRepeat.apply(this.vars.onRepeatScope || this, this.vars.onRepeatParams || s),
                x && (d = T ? p + 1e-6 : -1e-6,
                  this.render(d, !0, !1)),
                  this._locked = !1,
                this._paused && !y)
                return;
              this._time = R,
                this._totalTime = b,
                this._cycle = w,
                this._rawPrevTime = _
            }
            if (!(this._time !== d && this._first || i || h))
              return void (f !== this._totalTime && this._onUpdate && (e || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || s)));
            if (this._initted || (this._initted = !0),
              this._active || !this._paused && this._totalTime !== f && t > 0 && (this._active = !0),
              0 === f && this.vars.onStart && 0 !== this._totalTime && (e || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || s)),
              this._time >= d)
              for (n = this._first; n && (a = n._next,
              !this._paused || y); )
                (n._active || n._startTime <= this._time && !n._paused && !n._gc) && (n._reversed ? n.render((n._dirty ? n.totalDuration() : n._totalDuration) - (t - n._startTime) * n._timeScale, e, i) : n.render((t - n._startTime) * n._timeScale, e, i)),
                  n = a;
            else
              for (n = this._last; n && (a = n._prev,
              !this._paused || y); )
                (n._active || d >= n._startTime && !n._paused && !n._gc) && (n._reversed ? n.render((n._dirty ? n.totalDuration() : n._totalDuration) - (t - n._startTime) * n._timeScale, e, i) : n.render((t - n._startTime) * n._timeScale, e, i)),
                  n = a;
            this._onUpdate && (e || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || s)),
            l && (this._locked || this._gc || (m === this._startTime || g !== this._timeScale) && (0 === this._time || u >= this.totalDuration()) && (o && (this._timeline.autoRemoveChildren && this._enabled(!1, !1),
              this._active = !1),
            !e && this.vars[l] && this.vars[l].apply(this.vars[l + "Scope"] || this, this.vars[l + "Params"] || s)))
          }
          ,
          a.getActive = function(t, e, i) {
            null == t && (t = !0),
            null == e && (e = !0),
            null == i && (i = !1);
            var n, r, s = [], o = this.getChildren(t, e, i), a = 0, l = o.length;
            for (n = 0; l > n; n++)
              r = o[n],
              r.isActive() && (s[a++] = r);
            return s
          }
          ,
          a.getLabelAfter = function(t) {
            t || 0 !== t && (t = this._time);
            var e, i = this.getLabelsArray(), n = i.length;
            for (e = 0; n > e; e++)
              if (i[e].time > t)
                return i[e].name;
            return null
          }
          ,
          a.getLabelBefore = function(t) {
            null == t && (t = this._time);
            for (var e = this.getLabelsArray(), i = e.length; --i > -1; )
              if (t > e[i].time)
                return e[i].name;
            return null
          }
          ,
          a.getLabelsArray = function() {
            var t, e = [], i = 0;
            for (t in this._labels)
              e[i++] = {
                time: this._labels[t],
                name: t
              };
            return e.sort(function(t, e) {
              return t.time - e.time
            }),
              e
          }
          ,
          a.progress = function(t) {
            return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
          }
          ,
          a.totalProgress = function(t) {
            return arguments.length ? this.totalTime(this.totalDuration() * t, !1) : this._totalTime / this.totalDuration()
          }
          ,
          a.totalDuration = function(e) {
            return arguments.length ? -1 === this._repeat ? this : this.duration((e - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (t.prototype.totalDuration.call(this),
              this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat),
              this._totalDuration)
          }
          ,
          a.time = function(t, e) {
            return arguments.length ? (this._dirty && this.totalDuration(),
            t > this._duration && (t = this._duration),
              this._yoyo && 0 !== (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)),
              this.totalTime(t, e)) : this._time
          }
          ,
          a.repeat = function(t) {
            return arguments.length ? (this._repeat = t,
              this._uncache(!0)) : this._repeat
          }
          ,
          a.repeatDelay = function(t) {
            return arguments.length ? (this._repeatDelay = t,
              this._uncache(!0)) : this._repeatDelay
          }
          ,
          a.yoyo = function(t) {
            return arguments.length ? (this._yoyo = t,
              this) : this._yoyo
          }
          ,
          a.currentLabel = function(t) {
            return arguments.length ? this.seek(t, !0) : this.getLabelBefore(this._time + 1e-8)
          }
          ,
          n
      }, !0),
      function() {
        var t = 180 / Math.PI
          , e = []
          , i = []
          , n = []
          , r = {}
          , s = function(t, e, i, n) {
          this.a = t,
            this.b = e,
            this.c = i,
            this.d = n,
            this.da = n - t,
            this.ca = i - t,
            this.ba = e - t
        }
          , o = ",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,"
          , a = function(t, e, i, n) {
          var r = {
            a: t
          }
            , s = {}
            , o = {}
            , a = {
            c: n
          }
            , l = (t + e) / 2
            , h = (e + i) / 2
            , c = (i + n) / 2
            , u = (l + h) / 2
            , p = (h + c) / 2
            , d = (p - u) / 8;
          return r.b = l + (t - l) / 4,
            s.b = u + d,
            r.c = s.a = (r.b + s.b) / 2,
            s.c = o.a = (u + p) / 2,
            o.b = p - d,
            a.b = c + (n - c) / 4,
            o.c = a.a = (o.b + a.b) / 2,
            [r, s, o, a]
        }
          , l = function(t, r, s, o, l) {
          var h, c, u, p, d, f, m, g, v, y, E, T, x, b = t.length - 1, w = 0, _ = t[0].a;
          for (h = 0; b > h; h++)
            d = t[w],
              c = d.a,
              u = d.d,
              p = t[w + 1].d,
              l ? (E = e[h],
                T = i[h],
                x = .25 * (T + E) * r / (o ? .5 : n[h] || .5),
                f = u - (u - c) * (o ? .5 * r : 0 !== E ? x / E : 0),
                m = u + (p - u) * (o ? .5 * r : 0 !== T ? x / T : 0),
                g = u - (f + ((m - f) * (3 * E / (E + T) + .5) / 4 || 0))) : (f = u - .5 * (u - c) * r,
                m = u + .5 * (p - u) * r,
                g = u - (f + m) / 2),
              f += g,
              m += g,
              d.c = v = f,
              d.b = 0 !== h ? _ : _ = d.a + .6 * (d.c - d.a),
              d.da = u - c,
              d.ca = v - c,
              d.ba = _ - c,
              s ? (y = a(c, _, v, u),
                t.splice(w, 1, y[0], y[1], y[2], y[3]),
                w += 4) : w++,
              _ = m;
          d = t[w],
            d.b = _,
            d.c = _ + .4 * (d.d - _),
            d.da = d.d - d.a,
            d.ca = d.c - d.a,
            d.ba = _ - d.a,
          s && (y = a(d.a, _, d.c, d.d),
            t.splice(w, 1, y[0], y[1], y[2], y[3]))
        }
          , h = function(t, n, r, o) {
          var a, l, h, c, u, p, d = [];
          if (o)
            for (t = [o].concat(t),
                   l = t.length; --l > -1; )
              "string" == typeof (p = t[l][n]) && "=" === p.charAt(1) && (t[l][n] = o[n] + Number(p.charAt(0) + p.substr(2)));
          if (a = t.length - 2,
            0 > a)
            return d[0] = new s(t[0][n],0,0,t[-1 > a ? 0 : 1][n]),
              d;
          for (l = 0; a > l; l++)
            h = t[l][n],
              c = t[l + 1][n],
              d[l] = new s(h,0,0,c),
            r && (u = t[l + 2][n],
              e[l] = (e[l] || 0) + (c - h) * (c - h),
              i[l] = (i[l] || 0) + (u - c) * (u - c));
          return d[l] = new s(t[l][n],0,0,t[l + 1][n]),
            d
        }
          , c = function(t, s, a, c, u, p) {
          var d, f, m, g, v, y, E, T, x = {}, b = [], w = p || t[0];
          u = "string" == typeof u ? "," + u + "," : o,
          null == s && (s = 1);
          for (f in t[0])
            b.push(f);
          if (t.length > 1) {
            for (T = t[t.length - 1],
                   E = !0,
                   d = b.length; --d > -1; )
              if (f = b[d],
                Math.abs(w[f] - T[f]) > .05) {
                E = !1;
                break
              }
            E && (t = t.concat(),
            p && t.unshift(p),
              t.push(t[1]),
              p = t[t.length - 3])
          }
          for (e.length = i.length = n.length = 0,
                 d = b.length; --d > -1; )
            f = b[d],
              r[f] = -1 !== u.indexOf("," + f + ","),
              x[f] = h(t, f, r[f], p);
          for (d = e.length; --d > -1; )
            e[d] = Math.sqrt(e[d]),
              i[d] = Math.sqrt(i[d]);
          if (!c) {
            for (d = b.length; --d > -1; )
              if (r[f])
                for (m = x[b[d]],
                       y = m.length - 1,
                       g = 0; y > g; g++)
                  v = m[g + 1].da / i[g] + m[g].da / e[g],
                    n[g] = (n[g] || 0) + v * v;
            for (d = n.length; --d > -1; )
              n[d] = Math.sqrt(n[d])
          }
          for (d = b.length,
                 g = a ? 4 : 1; --d > -1; )
            f = b[d],
              m = x[f],
              l(m, s, a, c, r[f]),
            E && (m.splice(0, g),
              m.splice(m.length - g, g));
          return x
        }
          , u = function(t, e, i) {
          e = e || "soft";
          var n, r, o, a, l, h, c, u, p, d, f, m = {}, g = "cubic" === e ? 3 : 2, v = "soft" === e, y = [];
          if (v && i && (t = [i].concat(t)),
            null == t || g + 1 > t.length)
            throw "invalid Bezier data";
          for (p in t[0])
            y.push(p);
          for (h = y.length; --h > -1; ) {
            for (p = y[h],
                   m[p] = l = [],
                   d = 0,
                   u = t.length,
                   c = 0; u > c; c++)
              n = null == i ? t[c][p] : "string" == typeof (f = t[c][p]) && "=" === f.charAt(1) ? i[p] + Number(f.charAt(0) + f.substr(2)) : Number(f),
              v && c > 1 && u - 1 > c && (l[d++] = (n + l[d - 2]) / 2),
                l[d++] = n;
            for (u = d - g + 1,
                   d = 0,
                   c = 0; u > c; c += g)
              n = l[c],
                r = l[c + 1],
                o = l[c + 2],
                a = 2 === g ? 0 : l[c + 3],
                l[d++] = f = 3 === g ? new s(n,r,o,a) : new s(n,(2 * r + n) / 3,(2 * r + o) / 3,o);
            l.length = d
          }
          return m
        }
          , p = function(t, e, i) {
          for (var n, r, s, o, a, l, h, c, u, p, d, f = 1 / i, m = t.length; --m > -1; )
            for (p = t[m],
                   s = p.a,
                   o = p.d - s,
                   a = p.c - s,
                   l = p.b - s,
                   n = r = 0,
                   c = 1; i >= c; c++)
              h = f * c,
                u = 1 - h,
                n = r - (r = (h * h * o + 3 * u * (h * a + u * l)) * h),
                d = m * i + c - 1,
                e[d] = (e[d] || 0) + n * n
        }
          , d = function(t, e) {
          e = e >> 0 || 6;
          var i, n, r, s, o = [], a = [], l = 0, h = 0, c = e - 1, u = [], d = [];
          for (i in t)
            p(t[i], o, e);
          for (r = o.length,
                 n = 0; r > n; n++)
            l += Math.sqrt(o[n]),
              s = n % e,
              d[s] = l,
            s === c && (h += l,
              s = n / e >> 0,
              u[s] = d,
              a[s] = h,
              l = 0,
              d = []);
          return {
            length: h,
            lengths: a,
            segments: u
          }
        }
          , f = window._gsDefine.plugin({
          propName: "bezier",
          priority: -1,
          API: 2,
          global: !0,
          init: function(t, e, i) {
            this._target = t,
            e instanceof Array && (e = {
              values: e
            }),
              this._func = {},
              this._round = {},
              this._props = [],
              this._timeRes = null == e.timeResolution ? 6 : parseInt(e.timeResolution, 10);
            var n, r, s, o, a, l = e.values || [], h = {}, p = l[0], f = e.autoRotate || i.vars.orientToBezier;
            this._autoRotate = f ? f instanceof Array ? f : [["x", "y", "rotation", f === !0 ? 0 : Number(f) || 0]] : null;
            for (n in p)
              this._props.push(n);
            for (s = this._props.length; --s > -1; )
              n = this._props[s],
                this._overwriteProps.push(n),
                r = this._func[n] = "function" == typeof t[n],
                h[n] = r ? t[n.indexOf("set") || "function" != typeof t["get" + n.substr(3)] ? n : "get" + n.substr(3)]() : parseFloat(t[n]),
              a || h[n] !== l[0][n] && (a = h);
            if (this._beziers = "cubic" !== e.type && "quadratic" !== e.type && "soft" !== e.type ? c(l, isNaN(e.curviness) ? 1 : e.curviness, !1, "thruBasic" === e.type, e.correlate, a) : u(l, e.type, h),
                this._segCount = this._beziers[n].length,
                this._timeRes) {
              var m = d(this._beziers, this._timeRes);
              this._length = m.length,
                this._lengths = m.lengths,
                this._segments = m.segments,
                this._l1 = this._li = this._s1 = this._si = 0,
                this._l2 = this._lengths[0],
                this._curSeg = this._segments[0],
                this._s2 = this._curSeg[0],
                this._prec = 1 / this._curSeg.length
            }
            if (f = this._autoRotate)
              for (f[0]instanceof Array || (this._autoRotate = f = [f]),
                     s = f.length; --s > -1; )
                for (o = 0; 3 > o; o++)
                  n = f[s][o],
                    this._func[n] = "function" == typeof t[n] ? t[n.indexOf("set") || "function" != typeof t["get" + n.substr(3)] ? n : "get" + n.substr(3)] : !1;
            return !0
          },
          set: function(e) {
            var i, n, r, s, o, a, l, h, c, u, p = this._segCount, d = this._func, f = this._target;
            if (this._timeRes) {
              if (c = this._lengths,
                  u = this._curSeg,
                  e *= this._length,
                  r = this._li,
                e > this._l2 && p - 1 > r) {
                for (h = p - 1; h > r && e >= (this._l2 = c[++r]); )
                  ;
                this._l1 = c[r - 1],
                  this._li = r,
                  this._curSeg = u = this._segments[r],
                  this._s2 = u[this._s1 = this._si = 0]
              } else if (this._l1 > e && r > 0) {
                for (; r > 0 && (this._l1 = c[--r]) >= e; )
                  ;
                0 === r && this._l1 > e ? this._l1 = 0 : r++,
                  this._l2 = c[r],
                  this._li = r,
                  this._curSeg = u = this._segments[r],
                  this._s1 = u[(this._si = u.length - 1) - 1] || 0,
                  this._s2 = u[this._si]
              }
              if (i = r,
                  e -= this._l1,
                  r = this._si,
                e > this._s2 && u.length - 1 > r) {
                for (h = u.length - 1; h > r && e >= (this._s2 = u[++r]); )
                  ;
                this._s1 = u[r - 1],
                  this._si = r
              } else if (this._s1 > e && r > 0) {
                for (; r > 0 && (this._s1 = u[--r]) >= e; )
                  ;
                0 === r && this._s1 > e ? this._s1 = 0 : r++,
                  this._s2 = u[r],
                  this._si = r
              }
              a = (r + (e - this._s1) / (this._s2 - this._s1)) * this._prec
            } else
              i = 0 > e ? 0 : e >= 1 ? p - 1 : p * e >> 0,
                a = (e - i * (1 / p)) * p;
            for (n = 1 - a,
                   r = this._props.length; --r > -1; )
              s = this._props[r],
                o = this._beziers[s][i],
                l = (a * a * o.da + 3 * n * (a * o.ca + n * o.ba)) * a + o.a,
              this._round[s] && (l = l + (l > 0 ? .5 : -.5) >> 0),
                d[s] ? f[s](l) : f[s] = l;
            if (this._autoRotate) {
              var m, g, v, y, E, T, x, b = this._autoRotate;
              for (r = b.length; --r > -1; )
                s = b[r][2],
                  T = b[r][3] || 0,
                  x = b[r][4] === !0 ? 1 : t,
                  o = this._beziers[b[r][0]],
                  m = this._beziers[b[r][1]],
                o && m && (o = o[i],
                  m = m[i],
                  g = o.a + (o.b - o.a) * a,
                  y = o.b + (o.c - o.b) * a,
                  g += (y - g) * a,
                  y += (o.c + (o.d - o.c) * a - y) * a,
                  v = m.a + (m.b - m.a) * a,
                  E = m.b + (m.c - m.b) * a,
                  v += (E - v) * a,
                  E += (m.c + (m.d - m.c) * a - E) * a,
                  l = Math.atan2(E - v, y - g) * x + T,
                  d[s] ? f[s](l) : f[s] = l)
            }
          }
        })
          , m = f.prototype;
        f.bezierThrough = c,
          f.cubicToQuadratic = a,
          f._autoCSS = !0,
          f.quadraticToCubic = function(t, e, i) {
            return new s(t,(2 * e + t) / 3,(2 * e + i) / 3,i)
          }
          ,
          f._cssRegister = function() {
            var t = window._gsDefine.globals.CSSPlugin;
            if (t) {
              var e = t._internals
                , i = e._parseToProxy
                , n = e._setPluginRatio
                , r = e.CSSPropTween;
              e._registerComplexSpecialProp("bezier", {
                parser: function(t, e, s, o, a, l) {
                  e instanceof Array && (e = {
                    values: e
                  }),
                    l = new f;
                  var h, c, u, p = e.values, d = p.length - 1, m = [], g = {};
                  if (0 > d)
                    return a;
                  for (h = 0; d >= h; h++)
                    u = i(t, p[h], o, a, l, d !== h),
                      m[h] = u.end;
                  for (c in e)
                    g[c] = e[c];
                  return g.values = m,
                    a = new r(t,"bezier",0,0,u.pt,2),
                    a.data = u,
                    a.plugin = l,
                    a.setRatio = n,
                  0 === g.autoRotate && (g.autoRotate = !0),
                  !g.autoRotate || g.autoRotate instanceof Array || (h = g.autoRotate === !0 ? 0 : Number(g.autoRotate),
                    g.autoRotate = null != u.end.left ? [["left", "top", "rotation", h, !1]] : null != u.end.x ? [["x", "y", "rotation", h, !1]] : !1),
                  g.autoRotate && (o._transform || o._enableTransforms(!1),
                    u.autoRotate = o._target._gsTransform),
                    l._onInitTween(u.proxy, g, o._tween),
                    a
                }
              })
            }
          }
          ,
          m._roundProps = function(t, e) {
            for (var i = this._overwriteProps, n = i.length; --n > -1; )
              (t[i[n]] || t.bezier || t.bezierThrough) && (this._round[i[n]] = e)
          }
          ,
          m._kill = function(t) {
            var e, i, n = this._props;
            for (e in this._beziers)
              if (e in t)
                for (delete this._beziers[e],
                       delete this._func[e],
                       i = n.length; --i > -1; )
                  n[i] === e && n.splice(i, 1);
            return this._super._kill.call(this, t)
          }
      }(),
      window._gsDefine("plugins.CSSPlugin", ["plugins.TweenPlugin", "TweenLite"], function(t, e) {
        var i, n, r, s, o = function() {
          t.call(this, "css"),
            this._overwriteProps.length = 0,
            this.setRatio = o.prototype.setRatio
        }, a = {}, l = o.prototype = new t("css");
        l.constructor = o,
          o.version = "1.11.0",
          o.API = 2,
          o.defaultTransformPerspective = 0,
          l = "px",
          o.suffixMap = {
            top: l,
            right: l,
            bottom: l,
            left: l,
            width: l,
            height: l,
            fontSize: l,
            padding: l,
            margin: l,
            perspective: l
          };
        var h, c, u, p, d, f, m = /(?:\d|\-\d|\.\d|\-\.\d)+/g, g = /(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g, v = /(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi, y = /[^\d\-\.]/g, E = /(?:\d|\-|\+|=|#|\.)*/g, T = /opacity *= *([^)]*)/, x = /opacity:([^;]*)/, b = /alpha\(opacity *=.+?\)/i, w = /^(rgb|hsl)/, _ = /([A-Z])/g, R = /-([a-z])/gi, S = /(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi, H = function(t, e) {
          return e.toUpperCase()
        }, M = /(?:Left|Right|Width)/i, C = /(M11|M12|M21|M22)=[\d\-\.e]+/gi, P = /progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i, A = /,(?=[^\)]*(?:\(|$))/gi, L = Math.PI / 180, D = 180 / Math.PI, k = {}, I = document, O = I.createElement("div"), z = I.createElement("img"), F = o._internals = {
          _specialProps: a
        }, N = navigator.userAgent, B = function() {
          var t, e = N.indexOf("Android"), i = I.createElement("div");
          return u = -1 !== N.indexOf("Safari") && -1 === N.indexOf("Chrome") && (-1 === e || Number(N.substr(e + 8, 1)) > 3),
            d = u && 6 > Number(N.substr(N.indexOf("Version/") + 8, 1)),
            p = -1 !== N.indexOf("Firefox"),
            /MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N),
            f = parseFloat(RegExp.$1),
            i.innerHTML = "<a style='top:1px;opacity:.55;'>a</a>",
            t = i.getElementsByTagName("a")[0],
            t ? /^0.55/.test(t.style.opacity) : !1
        }(), V = function(t) {
          return T.test("string" == typeof t ? t : (t.currentStyle ? t.currentStyle.filter : t.style.filter) || "") ? parseFloat(RegExp.$1) / 100 : 1
        }, U = function(t) {
          window.console && console.log(t)
        }, G = "", W = "", j = function(t, e) {
          e = e || O;
          var i, n, r = e.style;
          if (void 0 !== r[t])
            return t;
          for (t = t.charAt(0).toUpperCase() + t.substr(1),
                 i = ["O", "Moz", "ms", "Ms", "Webkit"],
                 n = 5; --n > -1 && void 0 === r[i[n] + t]; )
            ;
          return n >= 0 ? (W = 3 === n ? "ms" : i[n],
            G = "-" + W.toLowerCase() + "-",
          W + t) : null
        }, X = I.defaultView ? I.defaultView.getComputedStyle : function() {}
          , Y = o.getStyle = function(t, e, i, n, r) {
          var s;
          return B || "opacity" !== e ? (!n && t.style[e] ? s = t.style[e] : (i = i || X(t, null)) ? (t = i.getPropertyValue(e.replace(_, "-$1").toLowerCase()),
            s = t || i.length ? t : i[e]) : t.currentStyle && (s = t.currentStyle[e]),
            null == r || s && "none" !== s && "auto" !== s && "auto auto" !== s ? s : r) : V(t)
        }
          , q = function(t, e, i, n, r) {
          if ("px" === n || !n)
            return i;
          if ("auto" === n || !i)
            return 0;
          var s, o = M.test(e), a = t, l = O.style, h = 0 > i;
          return h && (i = -i),
            "%" === n && -1 !== e.indexOf("border") ? s = i / 100 * (o ? t.clientWidth : t.clientHeight) : (l.cssText = "border-style:solid;border-width:0;position:absolute;line-height:0;",
              "%" !== n && a.appendChild ? l[o ? "borderLeftWidth" : "borderTopWidth"] = i + n : (a = t.parentNode || I.body,
                l[o ? "width" : "height"] = i + n),
              a.appendChild(O),
              s = parseFloat(O[o ? "offsetWidth" : "offsetHeight"]),
              a.removeChild(O),
            0 !== s || r || (s = q(t, e, i, n, !0))),
            h ? -s : s
        }, $ = function(t, e, i) {
          if ("absolute" !== Y(t, "position", i))
            return 0;
          var n = "left" === e ? "Left" : "Top"
            , r = Y(t, "margin" + n, i);
          return t["offset" + n] - (q(t, e, parseFloat(r), r.replace(E, "")) || 0)
        }, K = function(t, e) {
          var i, n, r = {};
          if (e = e || X(t, null))
            if (i = e.length)
              for (; --i > -1; )
                r[e[i].replace(R, H)] = e.getPropertyValue(e[i]);
            else
              for (i in e)
                r[i] = e[i];
          else if (e = t.currentStyle || t.style)
            for (i in e)
              "string" == typeof i && void 0 !== r[i] && (r[i.replace(R, H)] = e[i]);
          return B || (r.opacity = V(t)),
            n = we(t, e, !1),
            r.rotation = n.rotation,
            r.skewX = n.skewX,
            r.scaleX = n.scaleX,
            r.scaleY = n.scaleY,
            r.x = n.x,
            r.y = n.y,
          be && (r.z = n.z,
            r.rotationX = n.rotationX,
            r.rotationY = n.rotationY,
            r.scaleZ = n.scaleZ),
          r.filters && delete r.filters,
            r
        }, Q = function(t, e, i, n, r) {
          var s, o, a, l = {}, h = t.style;
          for (o in i)
            "cssText" !== o && "length" !== o && isNaN(o) && (e[o] !== (s = i[o]) || r && r[o]) && -1 === o.indexOf("Origin") && ("number" == typeof s || "string" == typeof s) && (l[o] = "auto" !== s || "left" !== o && "top" !== o ? "" !== s && "auto" !== s && "none" !== s || "string" != typeof e[o] || "" === e[o].replace(y, "") ? s : 0 : $(t, o),
            void 0 !== h[o] && (a = new ue(h,o,h[o],a)));
          if (n)
            for (o in n)
              "className" !== o && (l[o] = n[o]);
          return {
            difs: l,
            firstMPT: a
          }
        }, Z = {
          width: ["Left", "Right"],
          height: ["Top", "Bottom"]
        }, J = ["marginLeft", "marginRight", "marginTop", "marginBottom"], te = function(t, e, i) {
          var n = parseFloat("width" === e ? t.offsetWidth : t.offsetHeight)
            , r = Z[e]
            , s = r.length;
          for (i = i || X(t, null); --s > -1; )
            n -= parseFloat(Y(t, "padding" + r[s], i, !0)) || 0,
              n -= parseFloat(Y(t, "border" + r[s] + "Width", i, !0)) || 0;
          return n
        }, ee = function(t, e) {
          (null == t || "" === t || "auto" === t || "auto auto" === t) && (t = "0 0");
          var i = t.split(" ")
            , n = -1 !== t.indexOf("left") ? "0%" : -1 !== t.indexOf("right") ? "100%" : i[0]
            , r = -1 !== t.indexOf("top") ? "0%" : -1 !== t.indexOf("bottom") ? "100%" : i[1];
          return null == r ? r = "0" : "center" === r && (r = "50%"),
          ("center" === n || isNaN(parseFloat(n)) && -1 === (n + "").indexOf("=")) && (n = "50%"),
          e && (e.oxp = -1 !== n.indexOf("%"),
            e.oyp = -1 !== r.indexOf("%"),
            e.oxr = "=" === n.charAt(1),
            e.oyr = "=" === r.charAt(1),
            e.ox = parseFloat(n.replace(y, "")),
            e.oy = parseFloat(r.replace(y, ""))),
          n + " " + r + (i.length > 2 ? " " + i[2] : "")
        }, ie = function(t, e) {
          return "string" == typeof t && "=" === t.charAt(1) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(t.substr(2)) : parseFloat(t) - parseFloat(e)
        }, ne = function(t, e) {
          return null == t ? e : "string" == typeof t && "=" === t.charAt(1) ? parseInt(t.charAt(0) + "1", 10) * Number(t.substr(2)) + e : parseFloat(t)
        }, re = function(t, e, i, n) {
          var r, s, o, a, l = 1e-6;
          return null == t ? a = e : "number" == typeof t ? a = t : (r = 360,
            s = t.split("_"),
            o = Number(s[0].replace(y, "")) * (-1 === t.indexOf("rad") ? 1 : D) - ("=" === t.charAt(1) ? 0 : e),
          s.length && (n && (n[i] = e + o),
          -1 !== t.indexOf("short") && (o %= r,
          o !== o % (r / 2) && (o = 0 > o ? o + r : o - r)),
            -1 !== t.indexOf("_cw") && 0 > o ? o = (o + 9999999999 * r) % r - (0 | o / r) * r : -1 !== t.indexOf("ccw") && o > 0 && (o = (o - 9999999999 * r) % r - (0 | o / r) * r)),
            a = e + o),
          l > a && a > -l && (a = 0),
            a
        }, se = {
          aqua: [0, 255, 255],
          lime: [0, 255, 0],
          silver: [192, 192, 192],
          black: [0, 0, 0],
          maroon: [128, 0, 0],
          teal: [0, 128, 128],
          blue: [0, 0, 255],
          navy: [0, 0, 128],
          white: [255, 255, 255],
          fuchsia: [255, 0, 255],
          olive: [128, 128, 0],
          yellow: [255, 255, 0],
          orange: [255, 165, 0],
          gray: [128, 128, 128],
          purple: [128, 0, 128],
          green: [0, 128, 0],
          red: [255, 0, 0],
          pink: [255, 192, 203],
          cyan: [0, 255, 255],
          transparent: [255, 255, 255, 0]
        }, oe = function(t, e, i) {
          return t = 0 > t ? t + 1 : t > 1 ? t - 1 : t,
          0 | 255 * (1 > 6 * t ? e + 6 * (i - e) * t : .5 > t ? i : 2 > 3 * t ? e + 6 * (i - e) * (2 / 3 - t) : e) + .5
        }, ae = function(t) {
          var e, i, n, r, s, o;
          return t && "" !== t ? "number" == typeof t ? [t >> 16, 255 & t >> 8, 255 & t] : ("," === t.charAt(t.length - 1) && (t = t.substr(0, t.length - 1)),
            se[t] ? se[t] : "#" === t.charAt(0) ? (4 === t.length && (e = t.charAt(1),
              i = t.charAt(2),
              n = t.charAt(3),
              t = "#" + e + e + i + i + n + n),
              t = parseInt(t.substr(1), 16),
              [t >> 16, 255 & t >> 8, 255 & t]) : "hsl" === t.substr(0, 3) ? (t = t.match(m),
              r = Number(t[0]) % 360 / 360,
              s = Number(t[1]) / 100,
              o = Number(t[2]) / 100,
              i = .5 >= o ? o * (s + 1) : o + s - o * s,
              e = 2 * o - i,
            t.length > 3 && (t[3] = Number(t[3])),
              t[0] = oe(r + 1 / 3, e, i),
              t[1] = oe(r, e, i),
              t[2] = oe(r - 1 / 3, e, i),
              t) : (t = t.match(m) || se.transparent,
              t[0] = Number(t[0]),
              t[1] = Number(t[1]),
              t[2] = Number(t[2]),
            t.length > 3 && (t[3] = Number(t[3])),
              t)) : se.black
        }, le = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";
        for (l in se)
          le += "|" + l + "\\b";
        le = RegExp(le + ")", "gi");
        var he = function(t, e, i, n) {
          if (null == t)
            return function(t) {
              return t
            }
              ;
          var r, s = e ? (t.match(le) || [""])[0] : "", o = t.split(s).join("").match(v) || [], a = t.substr(0, t.indexOf(o[0])), l = ")" === t.charAt(t.length - 1) ? ")" : "", h = -1 !== t.indexOf(" ") ? " " : ",", c = o.length, u = c > 0 ? o[0].replace(m, "") : "";
          return c ? r = e ? function(t) {
              var e, p, d, f;
              if ("number" == typeof t)
                t += u;
              else if (n && A.test(t)) {
                for (f = t.replace(A, "|").split("|"),
                       d = 0; f.length > d; d++)
                  f[d] = r(f[d]);
                return f.join(",")
              }
              if (e = (t.match(le) || [s])[0],
                  p = t.split(e).join("").match(v) || [],
                  d = p.length,
                c > d--)
                for (; c > ++d; )
                  p[d] = i ? p[0 | (d - 1) / 2] : o[d];
              return a + p.join(h) + h + e + l + (-1 !== t.indexOf("inset") ? " inset" : "")
            }
            : function(t) {
              var e, s, p;
              if ("number" == typeof t)
                t += u;
              else if (n && A.test(t)) {
                for (s = t.replace(A, "|").split("|"),
                       p = 0; s.length > p; p++)
                  s[p] = r(s[p]);
                return s.join(",")
              }
              if (e = t.match(v) || [],
                  p = e.length,
                c > p--)
                for (; c > ++p; )
                  e[p] = i ? e[0 | (p - 1) / 2] : o[p];
              return a + e.join(h) + l
            }
            : function(t) {
              return t
            }
        }
          , ce = function(t) {
          return t = t.split(","),
            function(e, i, n, r, s, o, a) {
              var l, h = (i + "").split(" ");
              for (a = {},
                     l = 0; 4 > l; l++)
                a[t[l]] = h[l] = h[l] || h[(l - 1) / 2 >> 0];
              return r.parse(e, a, s, o)
            }
        }
          , ue = (F._setPluginRatio = function(t) {
            this.plugin.setRatio(t);
            for (var e, i, n, r, s = this.data, o = s.proxy, a = s.firstMPT, l = 1e-6; a; )
              e = o[a.v],
                a.r ? e = e > 0 ? 0 | e + .5 : 0 | e - .5 : l > e && e > -l && (e = 0),
                a.t[a.p] = e,
                a = a._next;
            if (s.autoRotate && (s.autoRotate.rotation = o.rotation),
              1 === t)
              for (a = s.firstMPT; a; ) {
                if (i = a.t,
                    i.type) {
                  if (1 === i.type) {
                    for (r = i.xs0 + i.s + i.xs1,
                           n = 1; i.l > n; n++)
                      r += i["xn" + n] + i["xs" + (n + 1)];
                    i.e = r
                  }
                } else
                  i.e = i.s + i.xs0;
                a = a._next
              }
          }
            ,
            function(t, e, i, n, r) {
              this.t = t,
                this.p = e,
                this.v = i,
                this.r = r,
              n && (n._prev = this,
                this._next = n)
            }
        )
          , pe = (F._parseToProxy = function(t, e, i, n, r, s) {
            var o, a, l, h, c, u = n, p = {}, d = {}, f = i._transform, m = k;
            for (i._transform = null,
                   k = e,
                   n = c = i.parse(t, e, n, r),
                   k = m,
                 s && (i._transform = f,
                 u && (u._prev = null,
                 u._prev && (u._prev._next = null))); n && n !== u; ) {
              if (1 >= n.type && (a = n.p,
                  d[a] = n.s + n.c,
                  p[a] = n.s,
                s || (h = new ue(n,"s",a,h,n.r),
                  n.c = 0),
                1 === n.type))
                for (o = n.l; --o > 0; )
                  l = "xn" + o,
                    a = n.p + "_" + l,
                    d[a] = n.data[l],
                    p[a] = n[l],
                  s || (h = new ue(n,l,a,h,n.rxp[l]));
              n = n._next
            }
            return {
              proxy: p,
              end: d,
              firstMPT: h,
              pt: c
            }
          }
            ,
            F.CSSPropTween = function(t, e, n, r, o, a, l, h, c, u, p) {
              this.t = t,
                this.p = e,
                this.s = n,
                this.c = r,
                this.n = l || e,
              t instanceof pe || s.push(this.n),
                this.r = h,
                this.type = a || 0,
              c && (this.pr = c,
                i = !0),
                this.b = void 0 === u ? n : u,
                this.e = void 0 === p ? n + r : p,
              o && (this._next = o,
                o._prev = this)
            }
        )
          , de = o.parseComplex = function(t, e, i, n, r, s, o, a, l, c) {
          i = i || s || "",
            o = new pe(t,e,0,0,o,c ? 2 : 1,null,!1,a,i,n),
            n += "";
          var u, p, d, f, v, y, E, T, x, b, _, R, S = i.split(", ").join(",").split(" "), H = n.split(", ").join(",").split(" "), M = S.length, C = h !== !1;
          for ((-1 !== n.indexOf(",") || -1 !== i.indexOf(",")) && (S = S.join(" ").replace(A, ", ").split(" "),
            H = H.join(" ").replace(A, ", ").split(" "),
            M = S.length),
               M !== H.length && (S = (s || "").split(" "),
                 M = S.length),
                 o.plugin = l,
                 o.setRatio = c,
                 u = 0; M > u; u++)
            if (f = S[u],
                v = H[u],
                T = parseFloat(f),
              T || 0 === T)
              o.appendXtra("", T, ie(v, T), v.replace(g, ""), C && -1 !== v.indexOf("px"), !0);
            else if (r && ("#" === f.charAt(0) || se[f] || w.test(f)))
              R = "," === v.charAt(v.length - 1) ? ")," : ")",
                f = ae(f),
                v = ae(v),
                x = f.length + v.length > 6,
                x && !B && 0 === v[3] ? (o["xs" + o.l] += o.l ? " transparent" : "transparent",
                  o.e = o.e.split(H[u]).join("transparent")) : (B || (x = !1),
                  o.appendXtra(x ? "rgba(" : "rgb(", f[0], v[0] - f[0], ",", !0, !0).appendXtra("", f[1], v[1] - f[1], ",", !0).appendXtra("", f[2], v[2] - f[2], x ? "," : R, !0),
                x && (f = 4 > f.length ? 1 : f[3],
                  o.appendXtra("", f, (4 > v.length ? 1 : v[3]) - f, R, !1)));
            else if (y = f.match(m)) {
              if (E = v.match(g),
                !E || E.length !== y.length)
                return o;
              for (d = 0,
                     p = 0; y.length > p; p++)
                _ = y[p],
                  b = f.indexOf(_, d),
                  o.appendXtra(f.substr(d, b - d), Number(_), ie(E[p], _), "", C && "px" === f.substr(b + _.length, 2), 0 === p),
                  d = b + _.length;
              o["xs" + o.l] += f.substr(d)
            } else
              o["xs" + o.l] += o.l ? " " + f : f;
          if (-1 !== n.indexOf("=") && o.data) {
            for (R = o.xs0 + o.data.s,
                   u = 1; o.l > u; u++)
              R += o["xs" + u] + o.data["xn" + u];
            o.e = R + o["xs" + u]
          }
          return o.l || (o.type = -1,
            o.xs0 = o.e),
          o.xfirst || o
        }
          , fe = 9;
        for (l = pe.prototype,
               l.l = l.pr = 0; --fe > 0; )
          l["xn" + fe] = 0,
            l["xs" + fe] = "";
        l.xs0 = "",
          l._next = l._prev = l.xfirst = l.data = l.plugin = l.setRatio = l.rxp = null,
          l.appendXtra = function(t, e, i, n, r, s) {
            var o = this
              , a = o.l;
            return o["xs" + a] += s && a ? " " + t : t || "",
              i || 0 === a || o.plugin ? (o.l++,
                o.type = o.setRatio ? 2 : 1,
                o["xs" + o.l] = n || "",
                a > 0 ? (o.data["xn" + a] = e + i,
                  o.rxp["xn" + a] = r,
                  o["xn" + a] = e,
                o.plugin || (o.xfirst = new pe(o,"xn" + a,e,i,o.xfirst || o,0,o.n,r,o.pr),
                  o.xfirst.xs0 = 0),
                  o) : (o.data = {
                  s: e + i
                },
                  o.rxp = {},
                  o.s = e,
                  o.c = i,
                  o.r = r,
                  o)) : (o["xs" + a] += e + (n || ""),
                o)
          }
        ;
        var me = function(t, e) {
          e = e || {},
            this.p = e.prefix ? j(t) || t : t,
            a[t] = a[this.p] = this,
            this.format = e.formatter || he(e.defaultValue, e.color, e.collapsible, e.multi),
          e.parser && (this.parse = e.parser),
            this.clrs = e.color,
            this.multi = e.multi,
            this.keyword = e.keyword,
            this.dflt = e.defaultValue,
            this.pr = e.priority || 0
        }
          , ge = F._registerComplexSpecialProp = function(t, e, i) {
          "object" != typeof e && (e = {
            parser: i
          });
          var n, r, s = t.split(","), o = e.defaultValue;
          for (i = i || [o],
                 n = 0; s.length > n; n++)
            e.prefix = 0 === n && e.prefix,
              e.defaultValue = i[n] || o,
              r = new me(s[n],e)
        }
          , ve = function(t) {
          if (!a[t]) {
            var e = t.charAt(0).toUpperCase() + t.substr(1) + "Plugin";
            ge(t, {
              parser: function(t, i, n, r, s, o, l) {
                var h = (window.GreenSockGlobals || window).com.greensock.plugins[e];
                return h ? (h._cssRegister(),
                  a[n].parse(t, i, n, r, s, o, l)) : (U("Error: " + e + " js file not loaded."),
                  s)
              }
            })
          }
        };
        l = me.prototype,
          l.parseComplex = function(t, e, i, n, r, s) {
            var o, a, l, h, c, u, p = this.keyword;
            if (this.multi && (A.test(i) || A.test(e) ? (a = e.replace(A, "|").split("|"),
                l = i.replace(A, "|").split("|")) : p && (a = [e],
                l = [i])),
                l) {
              for (h = l.length > a.length ? l.length : a.length,
                     o = 0; h > o; o++)
                e = a[o] = a[o] || this.dflt,
                  i = l[o] = l[o] || this.dflt,
                p && (c = e.indexOf(p),
                  u = i.indexOf(p),
                c !== u && (i = -1 === u ? l : a,
                  i[o] += " " + p));
              e = a.join(", "),
                i = l.join(", ")
            }
            return de(t, this.p, e, i, this.clrs, this.dflt, n, this.pr, r, s)
          }
          ,
          l.parse = function(t, e, i, n, s, o) {
            return this.parseComplex(t.style, this.format(Y(t, this.p, r, !1, this.dflt)), this.format(e), s, o)
          }
          ,
          o.registerSpecialProp = function(t, e, i) {
            ge(t, {
              parser: function(t, n, r, s, o, a) {
                var l = new pe(t,r,0,0,o,2,r,!1,i);
                return l.plugin = a,
                  l.setRatio = e(t, n, s._tween, r),
                  l
              },
              priority: i
            })
          }
        ;
        var ye = "scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(",")
          , Ee = j("transform")
          , Te = G + "transform"
          , xe = j("transformOrigin")
          , be = null !== j("perspective")
          , we = function(t, e, i, n) {
          if (t._gsTransform && i && !n)
            return t._gsTransform;
          var r, s, a, l, h, c, u, p, d, f, m, g, v, y = i ? t._gsTransform || {
            skewY: 0
          } : {
            skewY: 0
          }, E = 0 > y.scaleX, T = 2e-5, x = 1e5, b = 179.99, w = b * L, _ = be ? parseFloat(Y(t, xe, e, !1, "0 0 0").split(" ")[2]) || y.zOrigin || 0 : 0;
          for (Ee ? r = Y(t, Te, e, !0) : t.currentStyle && (r = t.currentStyle.filter.match(C),
            r = r && 4 === r.length ? [r[0].substr(4), Number(r[2].substr(4)), Number(r[1].substr(4)), r[3].substr(4), y.x || 0, y.y || 0].join(",") : ""),
                 s = (r || "").match(/(?:\-|\b)[\d\-\.e]+\b/gi) || [],
                 a = s.length; --a > -1; )
            l = Number(s[a]),
              s[a] = (h = l - (l |= 0)) ? (0 | h * x + (0 > h ? -.5 : .5)) / x + l : l;
          if (16 === s.length) {
            var R = s[8]
              , S = s[9]
              , H = s[10]
              , M = s[12]
              , P = s[13]
              , A = s[14];
            if (y.zOrigin && (A = -y.zOrigin,
                M = R * A - s[12],
                P = S * A - s[13],
                A = H * A + y.zOrigin - s[14]),
              !i || n || null == y.rotationX) {
              var k, I, O, z, F, N, B, V = s[0], U = s[1], G = s[2], W = s[3], j = s[4], X = s[5], q = s[6], $ = s[7], K = s[11], Q = Math.atan2(q, H), Z = -w > Q || Q > w;
              y.rotationX = Q * D,
              Q && (z = Math.cos(-Q),
                F = Math.sin(-Q),
                k = j * z + R * F,
                I = X * z + S * F,
                O = q * z + H * F,
                R = j * -F + R * z,
                S = X * -F + S * z,
                H = q * -F + H * z,
                K = $ * -F + K * z,
                j = k,
                X = I,
                q = O),
                Q = Math.atan2(R, V),
                y.rotationY = Q * D,
              Q && (N = -w > Q || Q > w,
                z = Math.cos(-Q),
                F = Math.sin(-Q),
                k = V * z - R * F,
                I = U * z - S * F,
                O = G * z - H * F,
                S = U * F + S * z,
                H = G * F + H * z,
                K = W * F + K * z,
                V = k,
                U = I,
                G = O),
                Q = Math.atan2(U, X),
                y.rotation = Q * D,
              Q && (B = -w > Q || Q > w,
                z = Math.cos(-Q),
                F = Math.sin(-Q),
                V = V * z + j * F,
                I = U * z + X * F,
                X = U * -F + X * z,
                q = G * -F + q * z,
                U = I),
                B && Z ? y.rotation = y.rotationX = 0 : B && N ? y.rotation = y.rotationY = 0 : N && Z && (y.rotationY = y.rotationX = 0),
                y.scaleX = (0 | Math.sqrt(V * V + U * U) * x + .5) / x,
                y.scaleY = (0 | Math.sqrt(X * X + S * S) * x + .5) / x,
                y.scaleZ = (0 | Math.sqrt(q * q + H * H) * x + .5) / x,
                y.skewX = 0,
                y.perspective = K ? 1 / (0 > K ? -K : K) : 0,
                y.x = M,
                y.y = P,
                y.z = A
            }
          } else if (!(be && !n && s.length && y.x === s[4] && y.y === s[5] && (y.rotationX || y.rotationY) || void 0 !== y.x && "none" === Y(t, "display", e))) {
            var J = s.length >= 6
              , te = J ? s[0] : 1
              , ee = s[1] || 0
              , ie = s[2] || 0
              , ne = J ? s[3] : 1;
            y.x = s[4] || 0,
              y.y = s[5] || 0,
              c = Math.sqrt(te * te + ee * ee),
              u = Math.sqrt(ne * ne + ie * ie),
              p = te || ee ? Math.atan2(ee, te) * D : y.rotation || 0,
              d = ie || ne ? Math.atan2(ie, ne) * D + p : y.skewX || 0,
              f = c - Math.abs(y.scaleX || 0),
              m = u - Math.abs(y.scaleY || 0),
            Math.abs(d) > 90 && 270 > Math.abs(d) && (E ? (c *= -1,
              d += 0 >= p ? 180 : -180,
              p += 0 >= p ? 180 : -180) : (u *= -1,
              d += 0 >= d ? 180 : -180)),
              g = (p - y.rotation) % 180,
              v = (d - y.skewX) % 180,
            (void 0 === y.skewX || f > T || -T > f || m > T || -T > m || g > -b && b > g && !1 | g * x || v > -b && b > v && !1 | v * x) && (y.scaleX = c,
              y.scaleY = u,
              y.rotation = p,
              y.skewX = d),
            be && (y.rotationX = y.rotationY = y.z = 0,
              y.perspective = parseFloat(o.defaultTransformPerspective) || 0,
              y.scaleZ = 1)
          }
          y.zOrigin = _;
          for (a in y)
            T > y[a] && y[a] > -T && (y[a] = 0);
          return i && (t._gsTransform = y),
            y
        }
          , _e = function(t) {
          var e, i, n = this.data, r = -n.rotation * L, s = r + n.skewX * L, o = 1e5, a = (0 | Math.cos(r) * n.scaleX * o) / o, l = (0 | Math.sin(r) * n.scaleX * o) / o, h = (0 | Math.sin(s) * -n.scaleY * o) / o, c = (0 | Math.cos(s) * n.scaleY * o) / o, u = this.t.style, p = this.t.currentStyle;
          if (p) {
            i = l,
              l = -h,
              h = -i,
              e = p.filter,
              u.filter = "";
            var d, m, g = this.t.offsetWidth, v = this.t.offsetHeight, y = "absolute" !== p.position, x = "progid:DXImageTransform.Microsoft.Matrix(M11=" + a + ", M12=" + l + ", M21=" + h + ", M22=" + c, b = n.x, w = n.y;
            if (null != n.ox && (d = (n.oxp ? .01 * g * n.ox : n.ox) - g / 2,
                m = (n.oyp ? .01 * v * n.oy : n.oy) - v / 2,
                b += d - (d * a + m * l),
                w += m - (d * h + m * c)),
                y ? (d = g / 2,
                  m = v / 2,
                  x += ", Dx=" + (d - (d * a + m * l) + b) + ", Dy=" + (m - (d * h + m * c) + w) + ")") : x += ", sizingMethod='auto expand')",
                u.filter = -1 !== e.indexOf("DXImageTransform.Microsoft.Matrix(") ? e.replace(P, x) : x + " " + e,
              (0 === t || 1 === t) && 1 === a && 0 === l && 0 === h && 1 === c && (y && -1 === x.indexOf("Dx=0, Dy=0") || T.test(e) && 100 !== parseFloat(RegExp.$1) || -1 === e.indexOf("gradient(" && e.indexOf("Alpha")) && u.removeAttribute("filter")),
                !y) {
              var _, R, S, H = 8 > f ? 1 : -1;
              for (d = n.ieOffsetX || 0,
                     m = n.ieOffsetY || 0,
                     n.ieOffsetX = Math.round((g - ((0 > a ? -a : a) * g + (0 > l ? -l : l) * v)) / 2 + b),
                     n.ieOffsetY = Math.round((v - ((0 > c ? -c : c) * v + (0 > h ? -h : h) * g)) / 2 + w),
                     fe = 0; 4 > fe; fe++)
                R = J[fe],
                  _ = p[R],
                  i = -1 !== _.indexOf("px") ? parseFloat(_) : q(this.t, R, parseFloat(_), _.replace(E, "")) || 0,
                  S = i !== n[R] ? 2 > fe ? -n.ieOffsetX : -n.ieOffsetY : 2 > fe ? d - n.ieOffsetX : m - n.ieOffsetY,
                  u[R] = (n[R] = Math.round(i - S * (0 === fe || 2 === fe ? 1 : H))) + "px"
            }
          }
        }
          , Re = function() {
          var t, e, i, n, r, s, o, a, l, h, c, u, d, f, m, g, v, y, E, T, x, b, w, _, R, S, H = this.data, M = this.t.style, C = H.rotation * L, P = H.scaleX, A = H.scaleY, D = H.scaleZ, k = H.perspective;
          if (p && (_ = M.top ? "top" : M.bottom ? "bottom" : parseFloat(Y(this.t, "top", null, !1)) ? "bottom" : "top",
              T = Y(this.t, _, null, !1),
              R = parseFloat(T) || 0,
              S = T.substr((R + "").length) || "px",
              H._ffFix = !H._ffFix,
              M[_] = (H._ffFix ? R + .05 : R - .05) + S),
            C || H.skewX)
            y = Math.cos(C),
              E = Math.sin(C),
              t = y,
              r = E,
            H.skewX && (C -= H.skewX * L,
              y = Math.cos(C),
              E = Math.sin(C)),
              e = -E,
              s = y;
          else {
            if (!(H.rotationY || H.rotationX || 1 !== D || k))
              return void (M[Ee] = "translate3d(" + H.x + "px," + H.y + "px," + H.z + "px)" + (1 !== P || 1 !== A ? " scale(" + P + "," + A + ")" : ""));
            t = s = 1,
              e = r = 0
          }
          c = 1,
            i = n = o = a = l = h = u = d = f = 0,
            m = k ? -1 / k : 0,
            g = H.zOrigin,
            v = 1e5,
            C = H.rotationY * L,
          C && (y = Math.cos(C),
            E = Math.sin(C),
            l = c * -E,
            d = m * -E,
            i = t * E,
            o = r * E,
            c *= y,
            m *= y,
            t *= y,
            r *= y),
            C = H.rotationX * L,
          C && (y = Math.cos(C),
            E = Math.sin(C),
            T = e * y + i * E,
            x = s * y + o * E,
            b = h * y + c * E,
            w = f * y + m * E,
            i = e * -E + i * y,
            o = s * -E + o * y,
            c = h * -E + c * y,
            m = f * -E + m * y,
            e = T,
            s = x,
            h = b,
            f = w),
          1 !== D && (i *= D,
            o *= D,
            c *= D,
            m *= D),
          1 !== A && (e *= A,
            s *= A,
            h *= A,
            f *= A),
          1 !== P && (t *= P,
            r *= P,
            l *= P,
            d *= P),
          g && (u -= g,
            n = i * u,
            a = o * u,
            u = c * u + g),
            n = (T = (n += H.x) - (n |= 0)) ? (0 | T * v + (0 > T ? -.5 : .5)) / v + n : n,
            a = (T = (a += H.y) - (a |= 0)) ? (0 | T * v + (0 > T ? -.5 : .5)) / v + a : a,
            u = (T = (u += H.z) - (u |= 0)) ? (0 | T * v + (0 > T ? -.5 : .5)) / v + u : u,
            M[Ee] = "matrix3d(" + [(0 | t * v) / v, (0 | r * v) / v, (0 | l * v) / v, (0 | d * v) / v, (0 | e * v) / v, (0 | s * v) / v, (0 | h * v) / v, (0 | f * v) / v, (0 | i * v) / v, (0 | o * v) / v, (0 | c * v) / v, (0 | m * v) / v, n, a, u, k ? 1 + -u / k : 1].join(",") + ")"
        }
          , Se = function() {
          var t, e, i, n, r, s, o, a, l, h = this.data, c = this.t, u = c.style;
          p && (t = u.top ? "top" : u.bottom ? "bottom" : parseFloat(Y(c, "top", null, !1)) ? "bottom" : "top",
            e = Y(c, t, null, !1),
            i = parseFloat(e) || 0,
            n = e.substr((i + "").length) || "px",
            h._ffFix = !h._ffFix,
            u[t] = (h._ffFix ? i + .05 : i - .05) + n),
            h.rotation || h.skewX ? (r = h.rotation * L,
              s = r - h.skewX * L,
              o = 1e5,
              a = h.scaleX * o,
              l = h.scaleY * o,
              u[Ee] = "matrix(" + (0 | Math.cos(r) * a) / o + "," + (0 | Math.sin(r) * a) / o + "," + (0 | Math.sin(s) * -l) / o + "," + (0 | Math.cos(s) * l) / o + "," + h.x + "," + h.y + ")") : u[Ee] = "matrix(" + h.scaleX + ",0,0," + h.scaleY + "," + h.x + "," + h.y + ")"
        };
        ge("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D", {
          parser: function(t, e, i, n, s, o, a) {
            if (n._transform)
              return s;
            var l, h, c, u, p, d, f, m = n._transform = we(t, r, !0, a.parseTransform), g = t.style, v = 1e-6, y = ye.length, E = a, T = {};
            if ("string" == typeof E.transform && Ee)
              c = g.cssText,
                g[Ee] = E.transform,
                g.display = "block",
                l = we(t, null, !1),
                g.cssText = c;
            else if ("object" == typeof E) {
              if (l = {
                  scaleX: ne(null != E.scaleX ? E.scaleX : E.scale, m.scaleX),
                  scaleY: ne(null != E.scaleY ? E.scaleY : E.scale, m.scaleY),
                  scaleZ: ne(null != E.scaleZ ? E.scaleZ : E.scale, m.scaleZ),
                  x: ne(E.x, m.x),
                  y: ne(E.y, m.y),
                  z: ne(E.z, m.z),
                  perspective: ne(E.transformPerspective, m.perspective)
                },
                  f = E.directionalRotation,
                null != f)
                if ("object" == typeof f)
                  for (c in f)
                    E[c] = f[c];
                else
                  E.rotation = f;
              l.rotation = re("rotation"in E ? E.rotation : "shortRotation"in E ? E.shortRotation + "_short" : "rotationZ"in E ? E.rotationZ : m.rotation, m.rotation, "rotation", T),
              be && (l.rotationX = re("rotationX"in E ? E.rotationX : "shortRotationX"in E ? E.shortRotationX + "_short" : m.rotationX || 0, m.rotationX, "rotationX", T),
                l.rotationY = re("rotationY"in E ? E.rotationY : "shortRotationY"in E ? E.shortRotationY + "_short" : m.rotationY || 0, m.rotationY, "rotationY", T)),
                l.skewX = null == E.skewX ? m.skewX : re(E.skewX, m.skewX),
                l.skewY = null == E.skewY ? m.skewY : re(E.skewY, m.skewY),
              (h = l.skewY - m.skewY) && (l.skewX += h,
                l.rotation += h)
            }
            for (null != E.force3D && (m.force3D = E.force3D,
              d = !0),
                   p = m.force3D || m.z || m.rotationX || m.rotationY || l.z || l.rotationX || l.rotationY || l.perspective,
                 p || null == E.scale || (l.scaleZ = 1); --y > -1; )
              i = ye[y],
                u = l[i] - m[i],
              (u > v || -v > u || null != k[i]) && (d = !0,
                s = new pe(m,i,m[i],u,s),
              i in T && (s.e = T[i]),
                s.xs0 = 0,
                s.plugin = o,
                n._overwriteProps.push(s.n));
            return u = E.transformOrigin,
            (u || be && p && m.zOrigin) && (Ee ? (d = !0,
              i = xe,
              u = (u || Y(t, i, r, !1, "50% 50%")) + "",
              s = new pe(g,i,0,0,s,-1,"transformOrigin"),
              s.b = g[i],
              s.plugin = o,
              be ? (c = m.zOrigin,
                u = u.split(" "),
                m.zOrigin = (u.length > 2 && (0 === c || "0px" !== u[2]) ? parseFloat(u[2]) : c) || 0,
                s.xs0 = s.e = g[i] = u[0] + " " + (u[1] || "50%") + " 0px",
                s = new pe(m,"zOrigin",0,0,s,-1,s.n),
                s.b = c,
                s.xs0 = s.e = m.zOrigin) : s.xs0 = s.e = g[i] = u) : ee(u + "", m)),
            d && (n._transformType = p || 3 === this._transformType ? 3 : 2),
              s
          },
          prefix: !0
        }),
          ge("boxShadow", {
            defaultValue: "0px 0px 0px 0px #999",
            prefix: !0,
            color: !0,
            multi: !0,
            keyword: "inset"
          }),
          ge("borderRadius", {
            defaultValue: "0px",
            parser: function(t, e, i, s, o) {
              e = this.format(e);
              var a, l, h, c, u, p, d, f, m, g, v, y, E, T, x, b, w = ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"], _ = t.style;
              for (m = parseFloat(t.offsetWidth),
                     g = parseFloat(t.offsetHeight),
                     a = e.split(" "),
                     l = 0; w.length > l; l++)
                this.p.indexOf("border") && (w[l] = j(w[l])),
                  u = c = Y(t, w[l], r, !1, "0px"),
                -1 !== u.indexOf(" ") && (c = u.split(" "),
                  u = c[0],
                  c = c[1]),
                  p = h = a[l],
                  d = parseFloat(u),
                  y = u.substr((d + "").length),
                  E = "=" === p.charAt(1),
                  E ? (f = parseInt(p.charAt(0) + "1", 10),
                    p = p.substr(2),
                    f *= parseFloat(p),
                    v = p.substr((f + "").length - (0 > f ? 1 : 0)) || "") : (f = parseFloat(p),
                    v = p.substr((f + "").length)),
                "" === v && (v = n[i] || y),
                v !== y && (T = q(t, "borderLeft", d, y),
                  x = q(t, "borderTop", d, y),
                  "%" === v ? (u = 100 * (T / m) + "%",
                    c = 100 * (x / g) + "%") : "em" === v ? (b = q(t, "borderLeft", 1, "em"),
                    u = T / b + "em",
                    c = x / b + "em") : (u = T + "px",
                    c = x + "px"),
                E && (p = parseFloat(u) + f + v,
                  h = parseFloat(c) + f + v)),
                  o = de(_, w[l], u + " " + c, p + " " + h, !1, "0px", o);
              return o
            },
            prefix: !0,
            formatter: he("0px 0px 0px 0px", !1, !0)
          }),
          ge("backgroundPosition", {
            defaultValue: "0 0",
            parser: function(t, e, i, n, s, o) {
              var a, l, h, c, u, p, d = "background-position", m = r || X(t, null), g = this.format((m ? f ? m.getPropertyValue(d + "-x") + " " + m.getPropertyValue(d + "-y") : m.getPropertyValue(d) : t.currentStyle.backgroundPositionX + " " + t.currentStyle.backgroundPositionY) || "0 0"), v = this.format(e);
              if (-1 !== g.indexOf("%") != (-1 !== v.indexOf("%")) && (p = Y(t, "backgroundImage").replace(S, ""),
                p && "none" !== p)) {
                for (a = g.split(" "),
                       l = v.split(" "),
                       z.setAttribute("src", p),
                       h = 2; --h > -1; )
                  g = a[h],
                    c = -1 !== g.indexOf("%"),
                  c !== (-1 !== l[h].indexOf("%")) && (u = 0 === h ? t.offsetWidth - z.width : t.offsetHeight - z.height,
                    a[h] = c ? parseFloat(g) / 100 * u + "px" : 100 * (parseFloat(g) / u) + "%");
                g = a.join(" ")
              }
              return this.parseComplex(t.style, g, v, s, o)
            },
            formatter: ee
          }),
          ge("backgroundSize", {
            defaultValue: "0 0",
            formatter: ee
          }),
          ge("perspective", {
            defaultValue: "0px",
            prefix: !0
          }),
          ge("perspectiveOrigin", {
            defaultValue: "50% 50%",
            prefix: !0
          }),
          ge("transformStyle", {
            prefix: !0
          }),
          ge("backfaceVisibility", {
            prefix: !0
          }),
          ge("userSelect", {
            prefix: !0
          }),
          ge("margin", {
            parser: ce("marginTop,marginRight,marginBottom,marginLeft")
          }),
          ge("padding", {
            parser: ce("paddingTop,paddingRight,paddingBottom,paddingLeft")
          }),
          ge("clip", {
            defaultValue: "rect(0px,0px,0px,0px)",
            parser: function(t, e, i, n, s, o) {
              var a, l, h;
              return 9 > f ? (l = t.currentStyle,
                h = 8 > f ? " " : ",",
                a = "rect(" + l.clipTop + h + l.clipRight + h + l.clipBottom + h + l.clipLeft + ")",
                e = this.format(e).split(",").join(h)) : (a = this.format(Y(t, this.p, r, !1, this.dflt)),
                e = this.format(e)),
                this.parseComplex(t.style, a, e, s, o)
            }
          }),
          ge("textShadow", {
            defaultValue: "0px 0px 0px #999",
            color: !0,
            multi: !0
          }),
          ge("autoRound,strictUnits", {
            parser: function(t, e, i, n, r) {
              return r
            }
          }),
          ge("border", {
            defaultValue: "0px solid #000",
            parser: function(t, e, i, n, s, o) {
              return this.parseComplex(t.style, this.format(Y(t, "borderTopWidth", r, !1, "0px") + " " + Y(t, "borderTopStyle", r, !1, "solid") + " " + Y(t, "borderTopColor", r, !1, "#000")), this.format(e), s, o)
            },
            color: !0,
            formatter: function(t) {
              var e = t.split(" ");
              return e[0] + " " + (e[1] || "solid") + " " + (t.match(le) || ["#000"])[0]
            }
          }),
          ge("float,cssFloat,styleFloat", {
            parser: function(t, e, i, n, r) {
              var s = t.style
                , o = "cssFloat"in s ? "cssFloat" : "styleFloat";
              return new pe(s,o,0,0,r,-1,i,!1,0,s[o],e)
            }
          });
        var He = function(t) {
          var e, i = this.t, n = i.filter || Y(this.data, "filter"), r = 0 | this.s + this.c * t;
          100 === r && (-1 === n.indexOf("atrix(") && -1 === n.indexOf("radient(") && -1 === n.indexOf("oader(") ? (i.removeAttribute("filter"),
            e = !Y(this.data, "filter")) : (i.filter = n.replace(b, ""),
            e = !0)),
          e || (this.xn1 && (i.filter = n = n || "alpha(opacity=" + r + ")"),
            -1 === n.indexOf("opacity") ? 0 === r && this.xn1 || (i.filter = n + " alpha(opacity=" + r + ")") : i.filter = n.replace(T, "opacity=" + r))
        };
        ge("opacity,alpha,autoAlpha", {
          defaultValue: "1",
          parser: function(t, e, i, n, s, o) {
            var a = parseFloat(Y(t, "opacity", r, !1, "1"))
              , l = t.style
              , h = "autoAlpha" === i;
            return "string" == typeof e && "=" === e.charAt(1) && (e = ("-" === e.charAt(0) ? -1 : 1) * parseFloat(e.substr(2)) + a),
            h && 1 === a && "hidden" === Y(t, "visibility", r) && 0 !== e && (a = 0),
              B ? s = new pe(l,"opacity",a,e - a,s) : (s = new pe(l,"opacity",100 * a,100 * (e - a),s),
                s.xn1 = h ? 1 : 0,
                l.zoom = 1,
                s.type = 2,
                s.b = "alpha(opacity=" + s.s + ")",
                s.e = "alpha(opacity=" + (s.s + s.c) + ")",
                s.data = t,
                s.plugin = o,
                s.setRatio = He),
            h && (s = new pe(l,"visibility",0,0,s,-1,null,!1,0,0 !== a ? "inherit" : "hidden",0 === e ? "hidden" : "inherit"),
              s.xs0 = "inherit",
              n._overwriteProps.push(s.n),
              n._overwriteProps.push(i)),
              s
          }
        });
        var Me = function(t, e) {
          e && (t.removeProperty ? t.removeProperty(e.replace(_, "-$1").toLowerCase()) : t.removeAttribute(e))
        }
          , Ce = function(t) {
          if (this.t._gsClassPT = this,
            1 === t || 0 === t) {
            this.t.className = 0 === t ? this.b : this.e;
            for (var e = this.data, i = this.t.style; e; )
              e.v ? i[e.p] = e.v : Me(i, e.p),
                e = e._next;
            1 === t && this.t._gsClassPT === this && (this.t._gsClassPT = null)
          } else
            this.t.className !== this.e && (this.t.className = this.e)
        };
        ge("className", {
          parser: function(t, e, n, s, o, a, l) {
            var h, c, u, p, d, f = t.className, m = t.style.cssText;
            if (o = s._classNamePT = new pe(t,n,0,0,o,2),
                o.setRatio = Ce,
                o.pr = -11,
                i = !0,
                o.b = f,
                c = K(t, r),
                u = t._gsClassPT) {
              for (p = {},
                     d = u.data; d; )
                p[d.p] = 1,
                  d = d._next;
              u.setRatio(1)
            }
            return t._gsClassPT = o,
              o.e = "=" !== e.charAt(1) ? e : f.replace(RegExp("\\s*\\b" + e.substr(2) + "\\b"), "") + ("+" === e.charAt(0) ? " " + e.substr(2) : ""),
            s._tween._duration && (t.className = o.e,
              h = Q(t, c, K(t), l, p),
              t.className = f,
              o.data = h.firstMPT,
              t.style.cssText = m,
              o = o.xfirst = s.parse(t, h.difs, o, a)),
              o
          }
        });
        var Pe = function(t) {
          if ((1 === t || 0 === t) && this.data._totalTime === this.data._totalDuration && "isFromStart" !== this.data.data) {
            var e, i, n, r, s = this.t.style, o = a.transform.parse;
            if ("all" === this.e)
              s.cssText = "",
                r = !0;
            else
              for (e = this.e.split(","),
                     n = e.length; --n > -1; )
                i = e[n],
                a[i] && (a[i].parse === o ? r = !0 : i = "transformOrigin" === i ? xe : a[i].p),
                  Me(s, i);
            r && (Me(s, Ee),
            this.t._gsTransform && delete this.t._gsTransform)
          }
        };
        for (ge("clearProps", {
          parser: function(t, e, n, r, s) {
            return s = new pe(t,n,0,0,s,2),
              s.setRatio = Pe,
              s.e = e,
              s.pr = -10,
              s.data = r._tween,
              i = !0,
              s
          }
        }),
               l = "bezier,throwProps,physicsProps,physics2D".split(","),
               fe = l.length; fe--; )
          ve(l[fe]);
        l = o.prototype,
          l._firstPT = null,
          l._onInitTween = function(t, e, a) {
            if (!t.nodeType)
              return !1;
            this._target = t,
              this._tween = a,
              this._vars = e,
              h = e.autoRound,
              i = !1,
              n = e.suffixMap || o.suffixMap,
              r = X(t, ""),
              s = this._overwriteProps;
            var l, p, f, m, g, v, y, E, T, b = t.style;
            if (c && "" === b.zIndex && (l = Y(t, "zIndex", r),
              ("auto" === l || "" === l) && (b.zIndex = 0)),
              "string" == typeof e && (m = b.cssText,
                l = K(t, r),
                b.cssText = m + ";" + e,
                l = Q(t, l, K(t)).difs,
              !B && x.test(e) && (l.opacity = parseFloat(RegExp.$1)),
                e = l,
                b.cssText = m),
                this._firstPT = p = this.parse(t, e, null),
                this._transformType) {
              for (T = 3 === this._transformType,
                     Ee ? u && (c = !0,
                     "" === b.zIndex && (y = Y(t, "zIndex", r),
                     ("auto" === y || "" === y) && (b.zIndex = 0)),
                     d && (b.WebkitBackfaceVisibility = this._vars.WebkitBackfaceVisibility || (T ? "visible" : "hidden"))) : b.zoom = 1,
                     f = p; f && f._next; )
                f = f._next;
              E = new pe(t,"transform",0,0,null,2),
                this._linkCSSP(E, null, f),
                E.setRatio = T && be ? Re : Ee ? Se : _e,
                E.data = this._transform || we(t, r, !0),
                s.pop()
            }
            if (i) {
              for (; p; ) {
                for (v = p._next,
                       f = m; f && f.pr > p.pr; )
                  f = f._next;
                (p._prev = f ? f._prev : g) ? p._prev._next = p : m = p,
                  (p._next = f) ? f._prev = p : g = p,
                  p = v
              }
              this._firstPT = m
            }
            return !0
          }
          ,
          l.parse = function(t, e, i, s) {
            var o, l, c, u, p, d, f, m, g, v, y = t.style;
            for (o in e)
              d = e[o],
                l = a[o],
                l ? i = l.parse(t, d, o, this, i, s, e) : (p = Y(t, o, r) + "",
                  g = "string" == typeof d,
                  "color" === o || "fill" === o || "stroke" === o || -1 !== o.indexOf("Color") || g && w.test(d) ? (g || (d = ae(d),
                    d = (d.length > 3 ? "rgba(" : "rgb(") + d.join(",") + ")"),
                    i = de(y, o, p, d, !0, "transparent", i, 0, s)) : !g || -1 === d.indexOf(" ") && -1 === d.indexOf(",") ? (c = parseFloat(p),
                    f = c || 0 === c ? p.substr((c + "").length) : "",
                  ("" === p || "auto" === p) && ("width" === o || "height" === o ? (c = te(t, o, r),
                    f = "px") : "left" === o || "top" === o ? (c = $(t, o, r),
                    f = "px") : (c = "opacity" !== o ? 0 : 1,
                    f = "")),
                    v = g && "=" === d.charAt(1),
                    v ? (u = parseInt(d.charAt(0) + "1", 10),
                      d = d.substr(2),
                      u *= parseFloat(d),
                      m = d.replace(E, "")) : (u = parseFloat(d),
                      m = g ? d.substr((u + "").length) || "" : ""),
                  "" === m && (m = n[o] || f),
                    d = u || 0 === u ? (v ? u + c : u) + m : e[o],
                  f !== m && "" !== m && (u || 0 === u) && (c || 0 === c) && (c = q(t, o, c, f),
                    "%" === m ? (c /= q(t, o, 100, "%") / 100,
                    c > 100 && (c = 100),
                    e.strictUnits !== !0 && (p = c + "%")) : "em" === m ? c /= q(t, o, 1, "em") : (u = q(t, o, u, m),
                      m = "px"),
                  v && (u || 0 === u) && (d = u + c + m)),
                  v && (u += c),
                    !c && 0 !== c || !u && 0 !== u ? void 0 !== y[o] && (d || "NaN" != d + "" && null != d) ? (i = new pe(y,o,u || c || 0,0,i,-1,o,!1,0,p,d),
                      i.xs0 = "none" !== d || "display" !== o && -1 === o.indexOf("Style") ? d : p) : U("invalid " + o + " tween value: " + e[o]) : (i = new pe(y,o,c,u - c,i,0,o,h !== !1 && ("px" === m || "zIndex" === o),0,p,d),
                      i.xs0 = m)) : i = de(y, o, p, d, !0, null, i, 0, s)),
              s && i && !i.plugin && (i.plugin = s);
            return i
          }
          ,
          l.setRatio = function(t) {
            var e, i, n, r = this._firstPT, s = 1e-6;
            if (1 !== t || this._tween._time !== this._tween._duration && 0 !== this._tween._time)
              if (t || this._tween._time !== this._tween._duration && 0 !== this._tween._time || this._tween._rawPrevTime === -1e-6)
                for (; r; ) {
                  if (e = r.c * t + r.s,
                      r.r ? e = e > 0 ? 0 | e + .5 : 0 | e - .5 : s > e && e > -s && (e = 0),
                      r.type)
                    if (1 === r.type)
                      if (n = r.l,
                        2 === n)
                        r.t[r.p] = r.xs0 + e + r.xs1 + r.xn1 + r.xs2;
                      else if (3 === n)
                        r.t[r.p] = r.xs0 + e + r.xs1 + r.xn1 + r.xs2 + r.xn2 + r.xs3;
                      else if (4 === n)
                        r.t[r.p] = r.xs0 + e + r.xs1 + r.xn1 + r.xs2 + r.xn2 + r.xs3 + r.xn3 + r.xs4;
                      else if (5 === n)
                        r.t[r.p] = r.xs0 + e + r.xs1 + r.xn1 + r.xs2 + r.xn2 + r.xs3 + r.xn3 + r.xs4 + r.xn4 + r.xs5;
                      else {
                        for (i = r.xs0 + e + r.xs1,
                               n = 1; r.l > n; n++)
                          i += r["xn" + n] + r["xs" + (n + 1)];
                        r.t[r.p] = i
                      }
                    else
                      -1 === r.type ? r.t[r.p] = r.xs0 : r.setRatio && r.setRatio(t);
                  else
                    r.t[r.p] = e + r.xs0;
                  r = r._next
                }
              else
                for (; r; )
                  2 !== r.type ? r.t[r.p] = r.b : r.setRatio(t),
                    r = r._next;
            else
              for (; r; )
                2 !== r.type ? r.t[r.p] = r.e : r.setRatio(t),
                  r = r._next
          }
          ,
          l._enableTransforms = function(t) {
            this._transformType = t || 3 === this._transformType ? 3 : 2,
              this._transform = this._transform || we(this._target, r, !0)
          }
          ,
          l._linkCSSP = function(t, e, i, n) {
            return t && (e && (e._prev = t),
            t._next && (t._next._prev = t._prev),
              t._prev ? t._prev._next = t._next : this._firstPT === t && (this._firstPT = t._next,
                n = !0),
              i ? i._next = t : n || null !== this._firstPT || (this._firstPT = t),
              t._next = e,
              t._prev = i),
              t
          }
          ,
          l._kill = function(e) {
            var i, n, r, s = e;
            if (e.autoAlpha || e.alpha) {
              s = {};
              for (n in e)
                s[n] = e[n];
              s.opacity = 1,
              s.autoAlpha && (s.visibility = 1)
            }
            return e.className && (i = this._classNamePT) && (r = i.xfirst,
              r && r._prev ? this._linkCSSP(r._prev, i._next, r._prev._prev) : r === this._firstPT && (this._firstPT = i._next),
            i._next && this._linkCSSP(i._next, i._next._next, r._prev),
              this._classNamePT = null),
              t.prototype._kill.call(this, s)
          }
        ;
        var Ae = function(t, e, i) {
          var n, r, s, o;
          if (t.slice)
            for (r = t.length; --r > -1; )
              Ae(t[r], e, i);
          else
            for (n = t.childNodes,
                   r = n.length; --r > -1; )
              s = n[r],
                o = s.type,
              s.style && (e.push(K(s)),
              i && i.push(s)),
              1 !== o && 9 !== o && 11 !== o || !s.childNodes.length || Ae(s, e, i)
        };
        return o.cascadeTo = function(t, i, n) {
          var r, s, o, a = e.to(t, i, n), l = [a], h = [], c = [], u = [], p = e._internals.reservedProps;
          for (t = a._targets || a.target,
                 Ae(t, h, u),
                 a.render(i, !0),
                 Ae(t, c),
                 a.render(0, !0),
                 a._enabled(!0),
                 r = u.length; --r > -1; )
            if (s = Q(u[r], h[r], c[r]),
                s.firstMPT) {
              s = s.difs;
              for (o in n)
                p[o] && (s[o] = n[o]);
              l.push(e.to(u[r], i, s))
            }
          return l
        }
          ,
          t.activate([o]),
          o
      }, !0),
      function() {
        var t = window._gsDefine.plugin({
          propName: "roundProps",
          priority: -1,
          API: 2,
          init: function(t, e, i) {
            return this._tween = i,
              !0
          }
        })
          , e = t.prototype;
        e._onInitAllProps = function() {
          for (var t, e, i, n = this._tween, r = n.vars.roundProps instanceof Array ? n.vars.roundProps : n.vars.roundProps.split(","), s = r.length, o = {}, a = n._propLookup.roundProps; --s > -1; )
            o[r[s]] = 1;
          for (s = r.length; --s > -1; )
            for (t = r[s],
                   e = n._firstPT; e; )
              i = e._next,
                e.pg ? e.t._roundProps(o, !0) : e.n === t && (this._add(e.t, t, e.s, e.c),
                i && (i._prev = e._prev),
                  e._prev ? e._prev._next = i : n._firstPT === e && (n._firstPT = i),
                  e._next = e._prev = null,
                  n._propLookup[t] = a),
                e = i;
          return !1
        }
          ,
          e._add = function(t, e, i, n) {
            this._addTween(t, e, i, i + n, e, !0),
              this._overwriteProps.push(e)
          }
      }(),
      window._gsDefine.plugin({
        propName: "attr",
        API: 2,
        init: function(t, e) {
          var i;
          if ("function" != typeof t.setAttribute)
            return !1;
          this._target = t,
            this._proxy = {};
          for (i in e)
            this._addTween(this._proxy, i, parseFloat(t.getAttribute(i)), e[i], i) && this._overwriteProps.push(i);
          return !0
        },
        set: function(t) {
          this._super.setRatio.call(this, t);
          for (var e, i = this._overwriteProps, n = i.length; --n > -1; )
            e = i[n],
              this._target.setAttribute(e, this._proxy[e] + "")
        }
      }),
      window._gsDefine.plugin({
        propName: "directionalRotation",
        API: 2,
        init: function(t, e) {
          "object" != typeof e && (e = {
            rotation: e
          }),
            this.finals = {};
          var i, n, r, s, o, a, l = e.useRadians === !0 ? 2 * Math.PI : 360, h = 1e-6;
          for (i in e)
            "useRadians" !== i && (a = (e[i] + "").split("_"),
              n = a[0],
              r = parseFloat("function" != typeof t[i] ? t[i] : t[i.indexOf("set") || "function" != typeof t["get" + i.substr(3)] ? i : "get" + i.substr(3)]()),
              s = this.finals[i] = "string" == typeof n && "=" === n.charAt(1) ? r + parseInt(n.charAt(0) + "1", 10) * Number(n.substr(2)) : Number(n) || 0,
              o = s - r,
            a.length && (n = a.join("_"),
            -1 !== n.indexOf("short") && (o %= l,
            o !== o % (l / 2) && (o = 0 > o ? o + l : o - l)),
              -1 !== n.indexOf("_cw") && 0 > o ? o = (o + 9999999999 * l) % l - (0 | o / l) * l : -1 !== n.indexOf("ccw") && o > 0 && (o = (o - 9999999999 * l) % l - (0 | o / l) * l)),
            (o > h || -h > o) && (this._addTween(t, i, r, r + o, i),
              this._overwriteProps.push(i)));
          return !0
        },
        set: function(t) {
          var e;
          if (1 !== t)
            this._super.setRatio.call(this, t);
          else
            for (e = this._firstPT; e; )
              e.f ? e.t[e.p](this.finals[e.p]) : e.t[e.p] = this.finals[e.p],
                e = e._next
        }
      })._autoCSS = !0,
      window._gsDefine("easing.Back", ["easing.Ease"], function(t) {
        var e, i, n, r = window.GreenSockGlobals || window, s = r.com.greensock, o = 2 * Math.PI, a = Math.PI / 2, l = s._class, h = function(e, i) {
          var n = l("easing." + e, function() {}, !0)
            , r = n.prototype = new t;
          return r.constructor = n,
            r.getRatio = i,
            n
        }, c = t.register || function() {}
          , u = function(t, e, i, n) {
          var r = l("easing." + t, {
            easeOut: new e,
            easeIn: new i,
            easeInOut: new n
          }, !0);
          return c(r, t),
            r
        }, p = function(t, e, i) {
          this.t = t,
            this.v = e,
          i && (this.next = i,
            i.prev = this,
            this.c = i.v - e,
            this.gap = i.t - t)
        }, d = function(e, i) {
          var n = l("easing." + e, function(t) {
            this._p1 = t || 0 === t ? t : 1.70158,
              this._p2 = 1.525 * this._p1
          }, !0)
            , r = n.prototype = new t;
          return r.constructor = n,
            r.getRatio = i,
            r.config = function(t) {
              return new n(t)
            }
            ,
            n
        }, f = u("Back", d("BackOut", function(t) {
          return (t -= 1) * t * ((this._p1 + 1) * t + this._p1) + 1
        }), d("BackIn", function(t) {
          return t * t * ((this._p1 + 1) * t - this._p1)
        }), d("BackInOut", function(t) {
          return 1 > (t *= 2) ? .5 * t * t * ((this._p2 + 1) * t - this._p2) : .5 * ((t -= 2) * t * ((this._p2 + 1) * t + this._p2) + 2)
        })), m = l("easing.SlowMo", function(t, e, i) {
          e = e || 0 === e ? e : .7,
            null == t ? t = .7 : t > 1 && (t = 1),
            this._p = 1 !== t ? e : 0,
            this._p1 = (1 - t) / 2,
            this._p2 = t,
            this._p3 = this._p1 + this._p2,
            this._calcEnd = i === !0
        }, !0), g = m.prototype = new t;
        return g.constructor = m,
          g.getRatio = function(t) {
            var e = t + (.5 - t) * this._p;
            return this._p1 > t ? this._calcEnd ? 1 - (t = 1 - t / this._p1) * t : e - (t = 1 - t / this._p1) * t * t * t * e : t > this._p3 ? this._calcEnd ? 1 - (t = (t - this._p3) / this._p1) * t : e + (t - e) * (t = (t - this._p3) / this._p1) * t * t * t : this._calcEnd ? 1 : e
          }
          ,
          m.ease = new m(.7,.7),
          g.config = m.config = function(t, e, i) {
            return new m(t,e,i)
          }
          ,
          e = l("easing.SteppedEase", function(t) {
            t = t || 1,
              this._p1 = 1 / t,
              this._p2 = t + 1
          }, !0),
          g = e.prototype = new t,
          g.constructor = e,
          g.getRatio = function(t) {
            return 0 > t ? t = 0 : t >= 1 && (t = .999999999),
            (this._p2 * t >> 0) * this._p1
          }
          ,
          g.config = e.config = function(t) {
            return new e(t)
          }
          ,
          i = l("easing.RoughEase", function(e) {
            e = e || {};
            for (var i, n, r, s, o, a, l = e.taper || "none", h = [], c = 0, u = 0 | (e.points || 20), d = u, f = e.randomize !== !1, m = e.clamp === !0, g = e.template instanceof t ? e.template : null, v = "number" == typeof e.strength ? .4 * e.strength : .4; --d > -1; )
              i = f ? Math.random() : 1 / u * d,
                n = g ? g.getRatio(i) : i,
                "none" === l ? r = v : "out" === l ? (s = 1 - i,
                  r = s * s * v) : "in" === l ? r = i * i * v : .5 > i ? (s = 2 * i,
                  r = .5 * s * s * v) : (s = 2 * (1 - i),
                  r = .5 * s * s * v),
                f ? n += Math.random() * r - .5 * r : d % 2 ? n += .5 * r : n -= .5 * r,
              m && (n > 1 ? n = 1 : 0 > n && (n = 0)),
                h[c++] = {
                  x: i,
                  y: n
                };
            for (h.sort(function(t, e) {
              return t.x - e.x
            }),
                   a = new p(1,1,null),
                   d = u; --d > -1; )
              o = h[d],
                a = new p(o.x,o.y,a);
            this._prev = new p(0,0,0 !== a.t ? a : a.next)
          }, !0),
          g = i.prototype = new t,
          g.constructor = i,
          g.getRatio = function(t) {
            var e = this._prev;
            if (t > e.t) {
              for (; e.next && t >= e.t; )
                e = e.next;
              e = e.prev
            } else
              for (; e.prev && e.t >= t; )
                e = e.prev;
            return this._prev = e,
            e.v + (t - e.t) / e.gap * e.c
          }
          ,
          g.config = function(t) {
            return new i(t)
          }
          ,
          i.ease = new i,
          u("Bounce", h("BounceOut", function(t) {
            return 1 / 2.75 > t ? 7.5625 * t * t : 2 / 2.75 > t ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : 2.5 / 2.75 > t ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375
          }), h("BounceIn", function(t) {
            return 1 / 2.75 > (t = 1 - t) ? 1 - 7.5625 * t * t : 2 / 2.75 > t ? 1 - (7.5625 * (t -= 1.5 / 2.75) * t + .75) : 2.5 / 2.75 > t ? 1 - (7.5625 * (t -= 2.25 / 2.75) * t + .9375) : 1 - (7.5625 * (t -= 2.625 / 2.75) * t + .984375)
          }), h("BounceInOut", function(t) {
            var e = .5 > t;
            return t = e ? 1 - 2 * t : 2 * t - 1,
              t = 1 / 2.75 > t ? 7.5625 * t * t : 2 / 2.75 > t ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : 2.5 / 2.75 > t ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375,
              e ? .5 * (1 - t) : .5 * t + .5
          })),
          u("Circ", h("CircOut", function(t) {
            return Math.sqrt(1 - (t -= 1) * t)
          }), h("CircIn", function(t) {
            return -(Math.sqrt(1 - t * t) - 1)
          }), h("CircInOut", function(t) {
            return 1 > (t *= 2) ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1)
          })),
          n = function(e, i, n) {
            var r = l("easing." + e, function(t, e) {
              this._p1 = t || 1,
                this._p2 = e || n,
                this._p3 = this._p2 / o * (Math.asin(1 / this._p1) || 0)
            }, !0)
              , s = r.prototype = new t;
            return s.constructor = r,
              s.getRatio = i,
              s.config = function(t, e) {
                return new r(t,e)
              }
              ,
              r
          }
          ,
          u("Elastic", n("ElasticOut", function(t) {
            return this._p1 * Math.pow(2, -10 * t) * Math.sin((t - this._p3) * o / this._p2) + 1
          }, .3), n("ElasticIn", function(t) {
            return -(this._p1 * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - this._p3) * o / this._p2))
          }, .3), n("ElasticInOut", function(t) {
            return 1 > (t *= 2) ? -.5 * this._p1 * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - this._p3) * o / this._p2) : .5 * this._p1 * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - this._p3) * o / this._p2) + 1
          }, .45)),
          u("Expo", h("ExpoOut", function(t) {
            return 1 - Math.pow(2, -10 * t)
          }), h("ExpoIn", function(t) {
            return Math.pow(2, 10 * (t - 1)) - .001
          }), h("ExpoInOut", function(t) {
            return 1 > (t *= 2) ? .5 * Math.pow(2, 10 * (t - 1)) : .5 * (2 - Math.pow(2, -10 * (t - 1)))
          })),
          u("Sine", h("SineOut", function(t) {
            return Math.sin(t * a)
          }), h("SineIn", function(t) {
            return -Math.cos(t * a) + 1
          }), h("SineInOut", function(t) {
            return -.5 * (Math.cos(Math.PI * t) - 1)
          })),
          l("easing.EaseLookup", {
            find: function(e) {
              return t.map[e]
            }
          }, !0),
          c(r.SlowMo, "SlowMo", "ease,"),
          c(i, "RoughEase", "ease,"),
          c(e, "SteppedEase", "ease,"),
          f
      }, !0)
  }),
  function(t) {
    "use strict";
    var e = t.GreenSockGlobals || t;
    if (!e.TweenLite) {
      var i, n, r, s, o, a = function(t) {
          var i, n = t.split("."), r = e;
          for (i = 0; n.length > i; i++)
            r[n[i]] = r = r[n[i]] || {};
          return r
        }, l = a("com.greensock"), h = 1e-10, c = [].slice, u = function() {}, p = function() {
          var t = Object.prototype.toString
            , e = t.call([]);
          return function(i) {
            return i instanceof Array || "object" == typeof i && !!i.push && t.call(i) === e
          }
        }(), d = {}, f = function(i, n, r, s) {
          this.sc = d[i] ? d[i].sc : [],
            d[i] = this,
            this.gsClass = null,
            this.func = r;
          var o = [];
          this.check = function(l) {
            for (var h, c, u, p, m = n.length, g = m; --m > -1; )
              (h = d[n[m]] || new f(n[m],[])).gsClass ? (o[m] = h.gsClass,
                g--) : l && h.sc.push(this);
            if (0 === g && r)
              for (c = ("com.greensock." + i).split("."),
                     u = c.pop(),
                     p = a(c.join("."))[u] = this.gsClass = r.apply(r, o),
                   s && (e[u] = p,
                     "function" == typeof define && define.amd ? define((t.GreenSockAMDPath ? t.GreenSockAMDPath + "/" : "") + i.split(".").join("/"), [], function() {
                       return p
                     }) : "undefined" != typeof module && module.exports && (module.exports = p)),
                     m = 0; this.sc.length > m; m++)
                this.sc[m].check()
          }
            ,
            this.check(!0)
        }, m = t._gsDefine = function(t, e, i, n) {
          return new f(t,e,i,n)
        }
        , g = l._class = function(t, e, i) {
          return e = e || function() {}
            ,
            m(t, [], function() {
              return e
            }, i),
            e
        }
      ;
      m.globals = e;
      var v = [0, 0, 1, 1]
        , y = []
        , E = g("easing.Ease", function(t, e, i, n) {
          this._func = t,
            this._type = i || 0,
            this._power = n || 0,
            this._params = e ? v.concat(e) : v
        }, !0)
        , T = E.map = {}
        , x = E.register = function(t, e, i, n) {
          for (var r, s, o, a, h = e.split(","), c = h.length, u = (i || "easeIn,easeOut,easeInOut").split(","); --c > -1; )
            for (s = h[c],
                   r = n ? g("easing." + s, null, !0) : l.easing[s] || {},
                   o = u.length; --o > -1; )
              a = u[o],
                T[s + "." + a] = T[a + s] = r[a] = t.getRatio ? t : t[a] || new t
        }
      ;
      for (r = E.prototype,
             r._calcEnd = !1,
             r.getRatio = function(t) {
               if (this._func)
                 return this._params[0] = t,
                   this._func.apply(null, this._params);
               var e = this._type
                 , i = this._power
                 , n = 1 === e ? 1 - t : 2 === e ? t : .5 > t ? 2 * t : 2 * (1 - t);
               return 1 === i ? n *= n : 2 === i ? n *= n * n : 3 === i ? n *= n * n * n : 4 === i && (n *= n * n * n * n),
                 1 === e ? 1 - n : 2 === e ? n : .5 > t ? n / 2 : 1 - n / 2
             }
             ,
             i = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"],
             n = i.length; --n > -1; )
        r = i[n] + ",Power" + n,
          x(new E(null,null,1,n), r, "easeOut", !0),
          x(new E(null,null,2,n), r, "easeIn" + (0 === n ? ",easeNone" : "")),
          x(new E(null,null,3,n), r, "easeInOut");
      T.linear = l.easing.Linear.easeIn,
        T.swing = l.easing.Quad.easeInOut;
      var b = g("events.EventDispatcher", function(t) {
        this._listeners = {},
          this._eventTarget = t || this
      });
      r = b.prototype,
        r.addEventListener = function(t, e, i, n, r) {
          r = r || 0;
          var a, l, h = this._listeners[t], c = 0;
          for (null == h && (this._listeners[t] = h = []),
                 l = h.length; --l > -1; )
            a = h[l],
              a.c === e && a.s === i ? h.splice(l, 1) : 0 === c && r > a.pr && (c = l + 1);
          h.splice(c, 0, {
            c: e,
            s: i,
            up: n,
            pr: r
          }),
          this !== s || o || s.wake()
        }
        ,
        r.removeEventListener = function(t, e) {
          var i, n = this._listeners[t];
          if (n)
            for (i = n.length; --i > -1; )
              if (n[i].c === e)
                return void n.splice(i, 1)
        }
        ,
        r.dispatchEvent = function(t) {
          var e, i, n, r = this._listeners[t];
          if (r)
            for (e = r.length,
                   i = this._eventTarget; --e > -1; )
              n = r[e],
                n.up ? n.c.call(n.s || i, {
                  type: t,
                  target: i
                }) : n.c.call(n.s || i)
        }
      ;
      var w = t.requestAnimationFrame
        , _ = t.cancelAnimationFrame
        , R = Date.now || function() {
        return (new Date).getTime()
      }
        , S = R();
      for (i = ["ms", "moz", "webkit", "o"],
             n = i.length; --n > -1 && !w; )
        w = t[i[n] + "RequestAnimationFrame"],
          _ = t[i[n] + "CancelAnimationFrame"] || t[i[n] + "CancelRequestAnimationFrame"];
      g("Ticker", function(t, e) {
        var i, n, r, a, l, h = this, c = R(), p = e !== !1 && w, d = function(t) {
          S = R(),
            h.time = (S - c) / 1e3;
          var e, s = h.time - l;
          (!i || s > 0 || t === !0) && (h.frame++,
            l += s + (s >= a ? .004 : a - s),
            e = !0),
          t !== !0 && (r = n(d)),
          e && h.dispatchEvent("tick")
        };
        b.call(h),
          h.time = h.frame = 0,
          h.tick = function() {
            d(!0)
          }
          ,
          h.sleep = function() {
            null != r && (p && _ ? _(r) : clearTimeout(r),
              n = u,
              r = null,
            h === s && (o = !1))
          }
          ,
          h.wake = function() {
            null !== r && h.sleep(),
              n = 0 === i ? u : p && w ? w : function(t) {
                return setTimeout(t, 0 | 1e3 * (l - h.time) + 1)
              }
              ,
            h === s && (o = !0),
              d(2)
          }
          ,
          h.fps = function(t) {
            return arguments.length ? (i = t,
              a = 1 / (i || 60),
              l = this.time + a,
              void h.wake()) : i
          }
          ,
          h.useRAF = function(t) {
            return arguments.length ? (h.sleep(),
              p = t,
              void h.fps(i)) : p
          }
          ,
          h.fps(t),
          setTimeout(function() {
            p && (!r || 5 > h.frame) && h.useRAF(!1)
          }, 1500)
      }),
        r = l.Ticker.prototype = new l.events.EventDispatcher,
        r.constructor = l.Ticker;
      var H = g("core.Animation", function(t, e) {
        if (this.vars = e = e || {},
            this._duration = this._totalDuration = t || 0,
            this._delay = Number(e.delay) || 0,
            this._timeScale = 1,
            this._active = e.immediateRender === !0,
            this.data = e.data,
            this._reversed = e.reversed === !0,
            B) {
          o || s.wake();
          var i = this.vars.useFrames ? N : B;
          i.add(this, i._time),
          this.vars.paused && this.paused(!0)
        }
      });
      s = H.ticker = new l.Ticker,
        r = H.prototype,
        r._dirty = r._gc = r._initted = r._paused = !1,
        r._totalTime = r._time = 0,
        r._rawPrevTime = -1,
        r._next = r._last = r._onUpdate = r._timeline = r.timeline = null,
        r._paused = !1;
      var M = function() {
        R() - S > 2e3 && s.wake(),
          setTimeout(M, 2e3)
      };
      M(),
        r.play = function(t, e) {
          return arguments.length && this.seek(t, e),
            this.reversed(!1).paused(!1)
        }
        ,
        r.pause = function(t, e) {
          return arguments.length && this.seek(t, e),
            this.paused(!0)
        }
        ,
        r.resume = function(t, e) {
          return arguments.length && this.seek(t, e),
            this.paused(!1)
        }
        ,
        r.seek = function(t, e) {
          return this.totalTime(Number(t), e !== !1)
        }
        ,
        r.restart = function(t, e) {
          return this.reversed(!1).paused(!1).totalTime(t ? -this._delay : 0, e !== !1, !0)
        }
        ,
        r.reverse = function(t, e) {
          return arguments.length && this.seek(t || this.totalDuration(), e),
            this.reversed(!0).paused(!1)
        }
        ,
        r.render = function() {}
        ,
        r.invalidate = function() {
          return this
        }
        ,
        r.isActive = function() {
          var t, e = this._timeline, i = this._startTime;
          return !e || !this._gc && !this._paused && e.isActive() && (t = e.rawTime()) >= i && i + this.totalDuration() / this._timeScale > t
        }
        ,
        r._enabled = function(t, e) {
          return o || s.wake(),
            this._gc = !t,
            this._active = this.isActive(),
          e !== !0 && (t && !this.timeline ? this._timeline.add(this, this._startTime - this._delay) : !t && this.timeline && this._timeline._remove(this, !0)),
            !1
        }
        ,
        r._kill = function() {
          return this._enabled(!1, !1)
        }
        ,
        r.kill = function(t, e) {
          return this._kill(t, e),
            this
        }
        ,
        r._uncache = function(t) {
          for (var e = t ? this : this.timeline; e; )
            e._dirty = !0,
              e = e.timeline;
          return this
        }
        ,
        r._swapSelfInParams = function(t) {
          for (var e = t.length, i = t.concat(); --e > -1; )
            "{self}" === t[e] && (i[e] = this);
          return i
        }
        ,
        r.eventCallback = function(t, e, i, n) {
          if ("on" === (t || "").substr(0, 2)) {
            var r = this.vars;
            if (1 === arguments.length)
              return r[t];
            null == e ? delete r[t] : (r[t] = e,
              r[t + "Params"] = p(i) && -1 !== i.join("").indexOf("{self}") ? this._swapSelfInParams(i) : i,
              r[t + "Scope"] = n),
            "onUpdate" === t && (this._onUpdate = e)
          }
          return this
        }
        ,
        r.delay = function(t) {
          return arguments.length ? (this._timeline.smoothChildTiming && this.startTime(this._startTime + t - this._delay),
            this._delay = t,
            this) : this._delay
        }
        ,
        r.duration = function(t) {
          return arguments.length ? (this._duration = this._totalDuration = t,
            this._uncache(!0),
          this._timeline.smoothChildTiming && this._time > 0 && this._time < this._duration && 0 !== t && this.totalTime(this._totalTime * (t / this._duration), !0),
            this) : (this._dirty = !1,
            this._duration)
        }
        ,
        r.totalDuration = function(t) {
          return this._dirty = !1,
            arguments.length ? this.duration(t) : this._totalDuration
        }
        ,
        r.time = function(t, e) {
          return arguments.length ? (this._dirty && this.totalDuration(),
            this.totalTime(t > this._duration ? this._duration : t, e)) : this._time
        }
        ,
        r.totalTime = function(t, e, i) {
          if (o || s.wake(),
              !arguments.length)
            return this._totalTime;
          if (this._timeline) {
            if (0 > t && !i && (t += this.totalDuration()),
                this._timeline.smoothChildTiming) {
              this._dirty && this.totalDuration();
              var n = this._totalDuration
                , r = this._timeline;
              if (t > n && !i && (t = n),
                  this._startTime = (this._paused ? this._pauseTime : r._time) - (this._reversed ? n - t : t) / this._timeScale,
                r._dirty || this._uncache(!1),
                  r._timeline)
                for (; r._timeline; )
                  r._timeline._time !== (r._startTime + r._totalTime) / r._timeScale && r.totalTime(r._totalTime, !0),
                    r = r._timeline
            }
            this._gc && this._enabled(!0, !1),
            (this._totalTime !== t || 0 === this._duration) && this.render(t, e, !1)
          }
          return this
        }
        ,
        r.progress = r.totalProgress = function(t, e) {
          return arguments.length ? this.totalTime(this.duration() * t, e) : this._time / this.duration()
        }
        ,
        r.startTime = function(t) {
          return arguments.length ? (t !== this._startTime && (this._startTime = t,
          this.timeline && this.timeline._sortChildren && this.timeline.add(this, t - this._delay)),
            this) : this._startTime
        }
        ,
        r.timeScale = function(t) {
          if (!arguments.length)
            return this._timeScale;
          if (t = t || h,
            this._timeline && this._timeline.smoothChildTiming) {
            var e = this._pauseTime
              , i = e || 0 === e ? e : this._timeline.totalTime();
            this._startTime = i - (i - this._startTime) * this._timeScale / t
          }
          return this._timeScale = t,
            this._uncache(!1)
        }
        ,
        r.reversed = function(t) {
          return arguments.length ? (t != this._reversed && (this._reversed = t,
            this.totalTime(this._totalTime, !0)),
            this) : this._reversed
        }
        ,
        r.paused = function(t) {
          if (!arguments.length)
            return this._paused;
          if (t != this._paused && this._timeline) {
            o || t || s.wake();
            var e = this._timeline
              , i = e.rawTime()
              , n = i - this._pauseTime;
            !t && e.smoothChildTiming && (this._startTime += n,
              this._uncache(!1)),
              this._pauseTime = t ? i : null,
              this._paused = t,
              this._active = this.isActive(),
            !t && 0 !== n && this._initted && this.duration() && this.render(e.smoothChildTiming ? this._totalTime : (i - this._startTime) / this._timeScale, !0, !0)
          }
          return this._gc && !t && this._enabled(!0, !1),
            this
        }
      ;
      var C = g("core.SimpleTimeline", function(t) {
        H.call(this, 0, t),
          this.autoRemoveChildren = this.smoothChildTiming = !0
      });
      r = C.prototype = new H,
        r.constructor = C,
        r.kill()._gc = !1,
        r._first = r._last = null,
        r._sortChildren = !1,
        r.add = r.insert = function(t, e) {
          var i, n;
          if (t._startTime = Number(e || 0) + t._delay,
            t._paused && this !== t._timeline && (t._pauseTime = t._startTime + (this.rawTime() - t._startTime) / t._timeScale),
            t.timeline && t.timeline._remove(t, !0),
              t.timeline = t._timeline = this,
            t._gc && t._enabled(!0, !0),
              i = this._last,
              this._sortChildren)
            for (n = t._startTime; i && i._startTime > n; )
              i = i._prev;
          return i ? (t._next = i._next,
            i._next = t) : (t._next = this._first,
            this._first = t),
            t._next ? t._next._prev = t : this._last = t,
            t._prev = i,
          this._timeline && this._uncache(!0),
            this
        }
        ,
        r._remove = function(t, e) {
          return t.timeline === this && (e || t._enabled(!1, !0),
            t.timeline = null,
            t._prev ? t._prev._next = t._next : this._first === t && (this._first = t._next),
            t._next ? t._next._prev = t._prev : this._last === t && (this._last = t._prev),
          this._timeline && this._uncache(!0)),
            this
        }
        ,
        r.render = function(t, e, i) {
          var n, r = this._first;
          for (this._totalTime = this._time = this._rawPrevTime = t; r; )
            n = r._next,
            (r._active || t >= r._startTime && !r._paused) && (r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, e, i) : r.render((t - r._startTime) * r._timeScale, e, i)),
              r = n
        }
        ,
        r.rawTime = function() {
          return o || s.wake(),
            this._totalTime
        }
      ;
      var P = g("TweenLite", function(e, i, n) {
        if (H.call(this, i, n),
            this.render = P.prototype.render,
          null == e)
          throw "Cannot tween a null target.";
        this.target = e = "string" != typeof e ? e : P.selector(e) || e;
        var r, s, o, a = e.jquery || e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType), l = this.vars.overwrite;
        if (this._overwrite = l = null == l ? F[P.defaultOverwrite] : "number" == typeof l ? l >> 0 : F[l],
          (a || e instanceof Array || e.push && p(e)) && "number" != typeof e[0])
          for (this._targets = o = c.call(e, 0),
                 this._propLookup = [],
                 this._siblings = [],
                 r = 0; o.length > r; r++)
            s = o[r],
              s ? "string" != typeof s ? s.length && s !== t && s[0] && (s[0] === t || s[0].nodeType && s[0].style && !s.nodeType) ? (o.splice(r--, 1),
                this._targets = o = o.concat(c.call(s, 0))) : (this._siblings[r] = V(s, this, !1),
              1 === l && this._siblings[r].length > 1 && U(s, this, null, 1, this._siblings[r])) : (s = o[r--] = P.selector(s),
              "string" == typeof s && o.splice(r + 1, 1)) : o.splice(r--, 1);
        else
          this._propLookup = {},
            this._siblings = V(e, this, !1),
          1 === l && this._siblings.length > 1 && U(e, this, null, 1, this._siblings);
        (this.vars.immediateRender || 0 === i && 0 === this._delay && this.vars.immediateRender !== !1) && this.render(-this._delay, !1, !0)
      }, !0)
        , A = function(e) {
        return e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType)
      }
        , L = function(t, e) {
        var i, n = {};
        for (i in t)
          z[i] || i in e && "x" !== i && "y" !== i && "width" !== i && "height" !== i && "className" !== i && "border" !== i || !(!k[i] || k[i] && k[i]._autoCSS) || (n[i] = t[i],
            delete t[i]);
        t.css = n
      };
      r = P.prototype = new H,
        r.constructor = P,
        r.kill()._gc = !1,
        r.ratio = 0,
        r._firstPT = r._targets = r._overwrittenProps = r._startAt = null,
        r._notifyPluginsOfEnabled = !1,
        P.version = "1.11.1",
        P.defaultEase = r._ease = new E(null,null,1,1),
        P.defaultOverwrite = "auto",
        P.ticker = s,
        P.autoSleep = !0,
        P.selector = t.$ || t.jQuery || function(e) {
          return t.$ ? (P.selector = t.$,
            t.$(e)) : t.document ? t.document.getElementById("#" === e.charAt(0) ? e.substr(1) : e) : e
        }
      ;
      var D = P._internals = {
        isArray: p,
        isSelector: A
      }
        , k = P._plugins = {}
        , I = P._tweenLookup = {}
        , O = 0
        , z = D.reservedProps = {
        ease: 1,
        delay: 1,
        overwrite: 1,
        onComplete: 1,
        onCompleteParams: 1,
        onCompleteScope: 1,
        useFrames: 1,
        runBackwards: 1,
        startAt: 1,
        onUpdate: 1,
        onUpdateParams: 1,
        onUpdateScope: 1,
        onStart: 1,
        onStartParams: 1,
        onStartScope: 1,
        onReverseComplete: 1,
        onReverseCompleteParams: 1,
        onReverseCompleteScope: 1,
        onRepeat: 1,
        onRepeatParams: 1,
        onRepeatScope: 1,
        easeParams: 1,
        yoyo: 1,
        immediateRender: 1,
        repeat: 1,
        repeatDelay: 1,
        data: 1,
        paused: 1,
        reversed: 1,
        autoCSS: 1
      }
        , F = {
        none: 0,
        all: 1,
        auto: 2,
        concurrent: 3,
        allOnStart: 4,
        preexisting: 5,
        "true": 1,
        "false": 0
      }
        , N = H._rootFramesTimeline = new C
        , B = H._rootTimeline = new C;
      B._startTime = s.time,
        N._startTime = s.frame,
        B._active = N._active = !0,
        H._updateRoot = function() {
          if (B.render((s.time - B._startTime) * B._timeScale, !1, !1),
              N.render((s.frame - N._startTime) * N._timeScale, !1, !1),
              !(s.frame % 120)) {
            var t, e, i;
            for (i in I) {
              for (e = I[i].tweens,
                     t = e.length; --t > -1; )
                e[t]._gc && e.splice(t, 1);
              0 === e.length && delete I[i]
            }
            if (i = B._first,
              (!i || i._paused) && P.autoSleep && !N._first && 1 === s._listeners.tick.length) {
              for (; i && i._paused; )
                i = i._next;
              i || s.sleep()
            }
          }
        }
        ,
        s.addEventListener("tick", H._updateRoot);
      var V = function(t, e, i) {
        var n, r, s = t._gsTweenID;
        if (I[s || (t._gsTweenID = s = "t" + O++)] || (I[s] = {
            target: t,
            tweens: []
          }),
          e && (n = I[s].tweens,
            n[r = n.length] = e,
            i))
          for (; --r > -1; )
            n[r] === e && n.splice(r, 1);
        return I[s].tweens
      }
        , U = function(t, e, i, n, r) {
        var s, o, a, l;
        if (1 === n || n >= 4) {
          for (l = r.length,
                 s = 0; l > s; s++)
            if ((a = r[s]) !== e)
              a._gc || a._enabled(!1, !1) && (o = !0);
            else if (5 === n)
              break;
          return o
        }
        var c, u = e._startTime + h, p = [], d = 0, f = 0 === e._duration;
        for (s = r.length; --s > -1; )
          (a = r[s]) === e || a._gc || a._paused || (a._timeline !== e._timeline ? (c = c || G(e, 0, f),
          0 === G(a, c, f) && (p[d++] = a)) : u >= a._startTime && a._startTime + a.totalDuration() / a._timeScale + h > u && ((f || !a._initted) && 2e-10 >= u - a._startTime || (p[d++] = a)));
        for (s = d; --s > -1; )
          a = p[s],
          2 === n && a._kill(i, t) && (o = !0),
          (2 !== n || !a._firstPT && a._initted) && a._enabled(!1, !1) && (o = !0);
        return o
      }
        , G = function(t, e, i) {
        for (var n = t._timeline, r = n._timeScale, s = t._startTime; n._timeline; ) {
          if (s += n._startTime,
              r *= n._timeScale,
              n._paused)
            return -100;
          n = n._timeline
        }
        return s /= r,
          s > e ? s - e : i && s === e || !t._initted && 2 * h > s - e ? h : (s += t.totalDuration() / t._timeScale / r) > e + h ? 0 : s - e - h
      };
      r._init = function() {
        var t, e, i, n, r = this.vars, s = this._overwrittenProps, o = this._duration, a = r.immediateRender, l = r.ease;
        if (r.startAt) {
          if (this._startAt && this._startAt.render(-1, !0),
              r.startAt.overwrite = 0,
              r.startAt.immediateRender = !0,
              this._startAt = P.to(this.target, 0, r.startAt),
              a)
            if (this._time > 0)
              this._startAt = null;
            else if (0 !== o)
              return
        } else if (r.runBackwards && 0 !== o)
          if (this._startAt)
            this._startAt.render(-1, !0),
              this._startAt = null;
          else {
            i = {};
            for (n in r)
              z[n] && "autoCSS" !== n || (i[n] = r[n]);
            if (i.overwrite = 0,
                i.data = "isFromStart",
                this._startAt = P.to(this.target, 0, i),
                r.immediateRender) {
              if (0 === this._time)
                return
            } else
              this._startAt.render(-1, !0)
          }
        if (this._ease = l ? l instanceof E ? r.easeParams instanceof Array ? l.config.apply(l, r.easeParams) : l : "function" == typeof l ? new E(l,r.easeParams) : T[l] || P.defaultEase : P.defaultEase,
            this._easeType = this._ease._type,
            this._easePower = this._ease._power,
            this._firstPT = null,
            this._targets)
          for (t = this._targets.length; --t > -1; )
            this._initProps(this._targets[t], this._propLookup[t] = {}, this._siblings[t], s ? s[t] : null) && (e = !0);
        else
          e = this._initProps(this.target, this._propLookup, this._siblings, s);
        if (e && P._onPluginEvent("_onInitAllProps", this),
          s && (this._firstPT || "function" != typeof this.target && this._enabled(!1, !1)),
            r.runBackwards)
          for (i = this._firstPT; i; )
            i.s += i.c,
              i.c = -i.c,
              i = i._next;
        this._onUpdate = r.onUpdate,
          this._initted = !0
      }
        ,
        r._initProps = function(e, i, n, r) {
          var s, o, a, l, h, c;
          if (null == e)
            return !1;
          this.vars.css || e.style && e !== t && e.nodeType && k.css && this.vars.autoCSS !== !1 && L(this.vars, e);
          for (s in this.vars) {
            if (c = this.vars[s],
                z[s])
              c && (c instanceof Array || c.push && p(c)) && -1 !== c.join("").indexOf("{self}") && (this.vars[s] = c = this._swapSelfInParams(c, this));
            else if (k[s] && (l = new k[s])._onInitTween(e, this.vars[s], this)) {
              for (this._firstPT = h = {
                _next: this._firstPT,
                t: l,
                p: "setRatio",
                s: 0,
                c: 1,
                f: !0,
                n: s,
                pg: !0,
                pr: l._priority
              },
                     o = l._overwriteProps.length; --o > -1; )
                i[l._overwriteProps[o]] = this._firstPT;
              (l._priority || l._onInitAllProps) && (a = !0),
              (l._onDisable || l._onEnable) && (this._notifyPluginsOfEnabled = !0)
            } else
              this._firstPT = i[s] = h = {
                _next: this._firstPT,
                t: e,
                p: s,
                f: "function" == typeof e[s],
                n: s,
                pg: !1,
                pr: 0
              },
                h.s = h.f ? e[s.indexOf("set") || "function" != typeof e["get" + s.substr(3)] ? s : "get" + s.substr(3)]() : parseFloat(e[s]),
                h.c = "string" == typeof c && "=" === c.charAt(1) ? parseInt(c.charAt(0) + "1", 10) * Number(c.substr(2)) : Number(c) - h.s || 0;
            h && h._next && (h._next._prev = h)
          }
          return r && this._kill(r, e) ? this._initProps(e, i, n, r) : this._overwrite > 1 && this._firstPT && n.length > 1 && U(e, this, i, this._overwrite, n) ? (this._kill(i, e),
            this._initProps(e, i, n, r)) : a
        }
        ,
        r.render = function(t, e, i) {
          var n, r, s, o, a = this._time, l = this._duration;
          if (t >= l)
            this._totalTime = this._time = l,
              this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1,
            this._reversed || (n = !0,
              r = "onComplete"),
            0 === l && (o = this._rawPrevTime,
            (0 === t || 0 > o || o === h) && o !== t && (i = !0,
            o > h && (r = "onReverseComplete")),
              this._rawPrevTime = o = !e || t ? t : h);
          else if (1e-7 > t)
            this._totalTime = this._time = 0,
              this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0,
            (0 !== a || 0 === l && this._rawPrevTime > h) && (r = "onReverseComplete",
              n = this._reversed),
              0 > t ? (this._active = !1,
              0 === l && (this._rawPrevTime >= 0 && (i = !0),
                this._rawPrevTime = o = !e || t ? t : h)) : this._initted || (i = !0);
          else if (this._totalTime = this._time = t,
              this._easeType) {
            var c = t / l
              , u = this._easeType
              , p = this._easePower;
            (1 === u || 3 === u && c >= .5) && (c = 1 - c),
            3 === u && (c *= 2),
              1 === p ? c *= c : 2 === p ? c *= c * c : 3 === p ? c *= c * c * c : 4 === p && (c *= c * c * c * c),
              this.ratio = 1 === u ? 1 - c : 2 === u ? c : .5 > t / l ? c / 2 : 1 - c / 2
          } else
            this.ratio = this._ease.getRatio(t / l);
          if (this._time !== a || i) {
            if (!this._initted) {
              if (this._init(),
                !this._initted || this._gc)
                return;
              this._time && !n ? this.ratio = this._ease.getRatio(this._time / l) : n && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
            }
            for (this._active || !this._paused && this._time !== a && t >= 0 && (this._active = !0),
                 0 === a && (this._startAt && (t >= 0 ? this._startAt.render(t, e, i) : r || (r = "_dummyGS")),
                 this.vars.onStart && (0 !== this._time || 0 === l) && (e || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || y))),
                   s = this._firstPT; s; )
              s.f ? s.t[s.p](s.c * this.ratio + s.s) : s.t[s.p] = s.c * this.ratio + s.s,
                s = s._next;
            this._onUpdate && (0 > t && this._startAt && this._startTime && this._startAt.render(t, e, i),
            e || i && 0 === this._time && 0 === a || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || y)),
            r && (this._gc || (0 > t && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(t, e, i),
            n && (this._timeline.autoRemoveChildren && this._enabled(!1, !1),
              this._active = !1),
            !e && this.vars[r] && this.vars[r].apply(this.vars[r + "Scope"] || this, this.vars[r + "Params"] || y),
            0 === l && this._rawPrevTime === h && o !== h && (this._rawPrevTime = 0)))
          }
        }
        ,
        r._kill = function(t, e) {
          if ("all" === t && (t = null),
            null == t && (null == e || e === this.target))
            return this._enabled(!1, !1);
          e = "string" != typeof e ? e || this._targets || this.target : P.selector(e) || e;
          var i, n, r, s, o, a, l, h;
          if ((p(e) || A(e)) && "number" != typeof e[0])
            for (i = e.length; --i > -1; )
              this._kill(t, e[i]) && (a = !0);
          else {
            if (this._targets) {
              for (i = this._targets.length; --i > -1; )
                if (e === this._targets[i]) {
                  o = this._propLookup[i] || {},
                    this._overwrittenProps = this._overwrittenProps || [],
                    n = this._overwrittenProps[i] = t ? this._overwrittenProps[i] || {} : "all";
                  break
                }
            } else {
              if (e !== this.target)
                return !1;
              o = this._propLookup,
                n = this._overwrittenProps = t ? this._overwrittenProps || {} : "all"
            }
            if (o) {
              l = t || o,
                h = t !== n && "all" !== n && t !== o && ("object" != typeof t || !t._tempKill);
              for (r in l)
                (s = o[r]) && (s.pg && s.t._kill(l) && (a = !0),
                s.pg && 0 !== s.t._overwriteProps.length || (s._prev ? s._prev._next = s._next : s === this._firstPT && (this._firstPT = s._next),
                s._next && (s._next._prev = s._prev),
                  s._next = s._prev = null),
                  delete o[r]),
                h && (n[r] = 1);
              !this._firstPT && this._initted && this._enabled(!1, !1)
            }
          }
          return a
        }
        ,
        r.invalidate = function() {
          return this._notifyPluginsOfEnabled && P._onPluginEvent("_onDisable", this),
            this._firstPT = null,
            this._overwrittenProps = null,
            this._onUpdate = null,
            this._startAt = null,
            this._initted = this._active = this._notifyPluginsOfEnabled = !1,
            this._propLookup = this._targets ? {} : [],
            this
        }
        ,
        r._enabled = function(t, e) {
          if (o || s.wake(),
            t && this._gc) {
            var i, n = this._targets;
            if (n)
              for (i = n.length; --i > -1; )
                this._siblings[i] = V(n[i], this, !0);
            else
              this._siblings = V(this.target, this, !0)
          }
          return H.prototype._enabled.call(this, t, e),
            this._notifyPluginsOfEnabled && this._firstPT ? P._onPluginEvent(t ? "_onEnable" : "_onDisable", this) : !1
        }
        ,
        P.to = function(t, e, i) {
          return new P(t,e,i)
        }
        ,
        P.from = function(t, e, i) {
          return i.runBackwards = !0,
            i.immediateRender = 0 != i.immediateRender,
            new P(t,e,i)
        }
        ,
        P.fromTo = function(t, e, i, n) {
          return n.startAt = i,
            n.immediateRender = 0 != n.immediateRender && 0 != i.immediateRender,
            new P(t,e,n)
        }
        ,
        P.delayedCall = function(t, e, i, n, r) {
          return new P(e,0,{
            delay: t,
            onComplete: e,
            onCompleteParams: i,
            onCompleteScope: n,
            onReverseComplete: e,
            onReverseCompleteParams: i,
            onReverseCompleteScope: n,
            immediateRender: !1,
            useFrames: r,
            overwrite: 0
          })
        }
        ,
        P.set = function(t, e) {
          return new P(t,0,e)
        }
        ,
        P.getTweensOf = function(t, e) {
          if (null == t)
            return [];
          t = "string" != typeof t ? t : P.selector(t) || t;
          var i, n, r, s;
          if ((p(t) || A(t)) && "number" != typeof t[0]) {
            for (i = t.length,
                   n = []; --i > -1; )
              n = n.concat(P.getTweensOf(t[i], e));
            for (i = n.length; --i > -1; )
              for (s = n[i],
                     r = i; --r > -1; )
                s === n[r] && n.splice(i, 1)
          } else
            for (n = V(t).concat(),
                   i = n.length; --i > -1; )
              (n[i]._gc || e && !n[i].isActive()) && n.splice(i, 1);
          return n
        }
        ,
        P.killTweensOf = P.killDelayedCallsTo = function(t, e, i) {
          "object" == typeof e && (i = e,
            e = !1);
          for (var n = P.getTweensOf(t, e), r = n.length; --r > -1; )
            n[r]._kill(i, t)
        }
      ;
      var W = g("plugins.TweenPlugin", function(t, e) {
        this._overwriteProps = (t || "").split(","),
          this._propName = this._overwriteProps[0],
          this._priority = e || 0,
          this._super = W.prototype
      }, !0);
      if (r = W.prototype,
          W.version = "1.10.1",
          W.API = 2,
          r._firstPT = null,
          r._addTween = function(t, e, i, n, r, s) {
            var o, a;
            return null != n && (o = "number" == typeof n || "=" !== n.charAt(1) ? Number(n) - i : parseInt(n.charAt(0) + "1", 10) * Number(n.substr(2))) ? (this._firstPT = a = {
              _next: this._firstPT,
              t: t,
              p: e,
              s: i,
              c: o,
              f: "function" == typeof t[e],
              n: r || e,
              r: s
            },
            a._next && (a._next._prev = a),
              a) : void 0
          }
          ,
          r.setRatio = function(t) {
            for (var e, i = this._firstPT, n = 1e-6; i; )
              e = i.c * t + i.s,
                i.r ? e = 0 | e + (e > 0 ? .5 : -.5) : n > e && e > -n && (e = 0),
                i.f ? i.t[i.p](e) : i.t[i.p] = e,
                i = i._next
          }
          ,
          r._kill = function(t) {
            var e, i = this._overwriteProps, n = this._firstPT;
            if (null != t[this._propName])
              this._overwriteProps = [];
            else
              for (e = i.length; --e > -1; )
                null != t[i[e]] && i.splice(e, 1);
            for (; n; )
              null != t[n.n] && (n._next && (n._next._prev = n._prev),
                n._prev ? (n._prev._next = n._next,
                  n._prev = null) : this._firstPT === n && (this._firstPT = n._next)),
                n = n._next;
            return !1
          }
          ,
          r._roundProps = function(t, e) {
            for (var i = this._firstPT; i; )
              (t[this._propName] || null != i.n && t[i.n.split(this._propName + "_").join("")]) && (i.r = e),
                i = i._next
          }
          ,
          P._onPluginEvent = function(t, e) {
            var i, n, r, s, o, a = e._firstPT;
            if ("_onInitAllProps" === t) {
              for (; a; ) {
                for (o = a._next,
                       n = r; n && n.pr > a.pr; )
                  n = n._next;
                (a._prev = n ? n._prev : s) ? a._prev._next = a : r = a,
                  (a._next = n) ? n._prev = a : s = a,
                  a = o
              }
              a = e._firstPT = r
            }
            for (; a; )
              a.pg && "function" == typeof a.t[t] && a.t[t]() && (i = !0),
                a = a._next;
            return i
          }
          ,
          W.activate = function(t) {
            for (var e = t.length; --e > -1; )
              t[e].API === W.API && (k[(new t[e])._propName] = t[e]);
            return !0
          }
          ,
          m.plugin = function(t) {
            if (!(t && t.propName && t.init && t.API))
              throw "illegal plugin definition.";
            var e, i = t.propName, n = t.priority || 0, r = t.overwriteProps, s = {
              init: "_onInitTween",
              set: "setRatio",
              kill: "_kill",
              round: "_roundProps",
              initAll: "_onInitAllProps"
            }, o = g("plugins." + i.charAt(0).toUpperCase() + i.substr(1) + "Plugin", function() {
              W.call(this, i, n),
                this._overwriteProps = r || []
            }, t.global === !0), a = o.prototype = new W(i);
            a.constructor = o,
              o.API = t.API;
            for (e in s)
              "function" == typeof t[e] && (a[s[e]] = t[e]);
            return o.version = t.version,
              W.activate([o]),
              o
          }
          ,
          i = t._gsQueue) {
        for (n = 0; i.length > n; n++)
          i[n]();
        for (r in d)
          d[r].func || t.console.log("GSAP encountered missing dependency: com.greensock." + r)
      }
      o = !1
    }
  }(window);
var _gsScope = "undefined" != typeof module && module.exports && "undefined" != typeof global ? global : this || window;
(_gsScope._gsQueue || (_gsScope._gsQueue = [])).push(function() {
  "use strict";
  var t = document.documentElement
    , e = window
    , i = function(i, n) {
    var r = "x" === n ? "Width" : "Height"
      , s = "scroll" + r
      , o = "client" + r
      , a = document.body;
    return i === e || i === t || i === a ? Math.max(t[s], a[s]) - (e["inner" + r] || t[o] || a[o]) : i[s] - i["offset" + r]
  }
    , n = _gsScope._gsDefine.plugin({
    propName: "scrollTo",
    API: 2,
    version: "1.7.5",
    init: function(t, n, r) {
      return this._wdw = t === e,
        this._target = t,
        this._tween = r,
      "object" != typeof n && (n = {
        y: n
      }),
        this.vars = n,
        this._autoKill = n.autoKill !== !1,
        this.x = this.xPrev = this.getX(),
        this.y = this.yPrev = this.getY(),
        null != n.x ? (this._addTween(this, "x", this.x, "max" === n.x ? i(t, "x") : n.x, "scrollTo_x", !0),
          this._overwriteProps.push("scrollTo_x")) : this.skipX = !0,
        null != n.y ? (this._addTween(this, "y", this.y, "max" === n.y ? i(t, "y") : n.y, "scrollTo_y", !0),
          this._overwriteProps.push("scrollTo_y")) : this.skipY = !0,
        !0
    },
    set: function(t) {
      this._super.setRatio.call(this, t);
      var n = this._wdw || !this.skipX ? this.getX() : this.xPrev
        , r = this._wdw || !this.skipY ? this.getY() : this.yPrev
        , s = r - this.yPrev
        , o = n - this.xPrev;
      this._autoKill && (!this.skipX && (o > 7 || -7 > o) && i(this._target, "x") > n && (this.skipX = !0),
      !this.skipY && (s > 7 || -7 > s) && i(this._target, "y") > r && (this.skipY = !0),
      this.skipX && this.skipY && (this._tween.kill(),
      this.vars.onAutoKill && this.vars.onAutoKill.apply(this.vars.onAutoKillScope || this._tween, this.vars.onAutoKillParams || []))),
        this._wdw ? e.scrollTo(this.skipX ? n : this.x, this.skipY ? r : this.y) : (this.skipY || (this._target.scrollTop = this.y),
        this.skipX || (this._target.scrollLeft = this.x)),
        this.xPrev = this.x,
        this.yPrev = this.y
    }
  })
    , r = n.prototype;
  n.max = i,
    r.getX = function() {
      return this._wdw ? null != e.pageXOffset ? e.pageXOffset : null != t.scrollLeft ? t.scrollLeft : document.body.scrollLeft : this._target.scrollLeft
    }
    ,
    r.getY = function() {
      return this._wdw ? null != e.pageYOffset ? e.pageYOffset : null != t.scrollTop ? t.scrollTop : document.body.scrollTop : this._target.scrollTop
    }
    ,
    r._kill = function(t) {
      return t.scrollTo_x && (this.skipX = !0),
      t.scrollTo_y && (this.skipY = !0),
        this._super._kill.call(this, t)
    }
}),
_gsScope._gsDefine && _gsScope._gsQueue.pop()();
var THREE = {
  REVISION: "65"
};
self.console = self.console || {
  info: function() {},
  log: function() {},
  debug: function() {},
  warn: function() {},
  error: function() {}
},
  String.prototype.trim = String.prototype.trim || function() {
    return this.replace(/^\s+|\s+$/g, "")
  }
  ,
  THREE.extend = function(t, e) {
    if (Object.keys)
      for (var i = Object.keys(e), n = 0, r = i.length; r > n; n++) {
        var s = i[n];
        Object.defineProperty(t, s, Object.getOwnPropertyDescriptor(e, s))
      }
    else
      for (s in i = {}.hasOwnProperty,
        e)
        i.call(e, s) && (t[s] = e[s]);
    return t
  }
  ,
  function() {
    for (var t = 0, e = ["ms", "moz", "webkit", "o"], i = 0; i < e.length && !self.requestAnimationFrame; ++i)
      self.requestAnimationFrame = self[e[i] + "RequestAnimationFrame"],
        self.cancelAnimationFrame = self[e[i] + "CancelAnimationFrame"] || self[e[i] + "CancelRequestAnimationFrame"];
    void 0 === self.requestAnimationFrame && void 0 !== self.setTimeout && (self.requestAnimationFrame = function(e) {
        var i = Date.now()
          , n = Math.max(0, 16 - (i - t))
          , r = self.setTimeout(function() {
          e(i + n)
        }, n);
        return t = i + n,
          r
      }
    ),
    void 0 === self.cancelAnimationFrame && void 0 !== self.clearTimeout && (self.cancelAnimationFrame = function(t) {
        self.clearTimeout(t)
      }
    )
  }(),
  THREE.CullFaceNone = 0,
  THREE.CullFaceBack = 1,
  THREE.CullFaceFront = 2,
  THREE.CullFaceFrontBack = 3,
  THREE.FrontFaceDirectionCW = 0,
  THREE.FrontFaceDirectionCCW = 1,
  THREE.BasicShadowMap = 0,
  THREE.PCFShadowMap = 1,
  THREE.PCFSoftShadowMap = 2,
  THREE.FrontSide = 0,
  THREE.BackSide = 1,
  THREE.DoubleSide = 2,
  THREE.NoShading = 0,
  THREE.FlatShading = 1,
  THREE.SmoothShading = 2,
  THREE.NoColors = 0,
  THREE.FaceColors = 1,
  THREE.VertexColors = 2,
  THREE.NoBlending = 0,
  THREE.NormalBlending = 1,
  THREE.AdditiveBlending = 2,
  THREE.SubtractiveBlending = 3,
  THREE.MultiplyBlending = 4,
  THREE.CustomBlending = 5,
  THREE.AddEquation = 100,
  THREE.SubtractEquation = 101,
  THREE.ReverseSubtractEquation = 102,
  THREE.ZeroFactor = 200,
  THREE.OneFactor = 201,
  THREE.SrcColorFactor = 202,
  THREE.OneMinusSrcColorFactor = 203,
  THREE.SrcAlphaFactor = 204,
  THREE.OneMinusSrcAlphaFactor = 205,
  THREE.DstAlphaFactor = 206,
  THREE.OneMinusDstAlphaFactor = 207,
  THREE.DstColorFactor = 208,
  THREE.OneMinusDstColorFactor = 209,
  THREE.SrcAlphaSaturateFactor = 210,
  THREE.MultiplyOperation = 0,
  THREE.MixOperation = 1,
  THREE.AddOperation = 2,
  THREE.UVMapping = function() {}
  ,
  THREE.CubeReflectionMapping = function() {}
  ,
  THREE.CubeRefractionMapping = function() {}
  ,
  THREE.SphericalReflectionMapping = function() {}
  ,
  THREE.SphericalRefractionMapping = function() {}
  ,
  THREE.RepeatWrapping = 1e3,
  THREE.ClampToEdgeWrapping = 1001,
  THREE.MirroredRepeatWrapping = 1002,
  THREE.NearestFilter = 1003,
  THREE.NearestMipMapNearestFilter = 1004,
  THREE.NearestMipMapLinearFilter = 1005,
  THREE.LinearFilter = 1006,
  THREE.LinearMipMapNearestFilter = 1007,
  THREE.LinearMipMapLinearFilter = 1008,
  THREE.UnsignedByteType = 1009,
  THREE.ByteType = 1010,
  THREE.ShortType = 1011,
  THREE.UnsignedShortType = 1012,
  THREE.IntType = 1013,
  THREE.UnsignedIntType = 1014,
  THREE.FloatType = 1015,
  THREE.UnsignedShort4444Type = 1016,
  THREE.UnsignedShort5551Type = 1017,
  THREE.UnsignedShort565Type = 1018,
  THREE.AlphaFormat = 1019,
  THREE.RGBFormat = 1020,
  THREE.RGBAFormat = 1021,
  THREE.LuminanceFormat = 1022,
  THREE.LuminanceAlphaFormat = 1023,
  THREE.RGB_S3TC_DXT1_Format = 2001,
  THREE.RGBA_S3TC_DXT1_Format = 2002,
  THREE.RGBA_S3TC_DXT3_Format = 2003,
  THREE.RGBA_S3TC_DXT5_Format = 2004,
  THREE.Color = function(t) {
    return void 0 !== t && this.set(t),
      this
  }
  ,
  THREE.Color.prototype = {
    constructor: THREE.Color,
    r: 1,
    g: 1,
    b: 1,
    set: function(t) {
      return t instanceof THREE.Color ? this.copy(t) : "number" == typeof t ? this.setHex(t) : "string" == typeof t && this.setStyle(t),
        this
    },
    setHex: function(t) {
      return t = Math.floor(t),
        this.r = (t >> 16 & 255) / 255,
        this.g = (t >> 8 & 255) / 255,
        this.b = (255 & t) / 255,
        this
    },
    setRGB: function(t, e, i) {
      return this.r = t,
        this.g = e,
        this.b = i,
        this
    },
    setHSL: function(t, e, i) {
      if (0 === e)
        this.r = this.g = this.b = i;
      else {
        var n = function(t, e, i) {
          return 0 > i && (i += 1),
          i > 1 && (i -= 1),
            1 / 6 > i ? t + 6 * (e - t) * i : .5 > i ? e : 2 / 3 > i ? t + 6 * (e - t) * (2 / 3 - i) : t
        }
          , e = .5 >= i ? i * (1 + e) : i + e - i * e
          , i = 2 * i - e;
        this.r = n(i, e, t + 1 / 3),
          this.g = n(i, e, t),
          this.b = n(i, e, t - 1 / 3)
      }
      return this
    },
    setStyle: function(t) {
      return /^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(t) ? (t = /^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(t),
        this.r = Math.min(255, parseInt(t[1], 10)) / 255,
        this.g = Math.min(255, parseInt(t[2], 10)) / 255,
        this.b = Math.min(255, parseInt(t[3], 10)) / 255,
        this) : /^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(t) ? (t = /^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(t),
        this.r = Math.min(100, parseInt(t[1], 10)) / 100,
        this.g = Math.min(100, parseInt(t[2], 10)) / 100,
        this.b = Math.min(100, parseInt(t[3], 10)) / 100,
        this) : /^\#([0-9a-f]{6})$/i.test(t) ? (t = /^\#([0-9a-f]{6})$/i.exec(t),
        this.setHex(parseInt(t[1], 16)),
        this) : /^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(t) ? (t = /^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t),
        this.setHex(parseInt(t[1] + t[1] + t[2] + t[2] + t[3] + t[3], 16)),
        this) : /^(\w+)$/i.test(t) ? (this.setHex(THREE.ColorKeywords[t]),
        this) : void 0
    },
    copy: function(t) {
      return this.r = t.r,
        this.g = t.g,
        this.b = t.b,
        this
    },
    copyGammaToLinear: function(t) {
      return this.r = t.r * t.r,
        this.g = t.g * t.g,
        this.b = t.b * t.b,
        this
    },
    copyLinearToGamma: function(t) {
      return this.r = Math.sqrt(t.r),
        this.g = Math.sqrt(t.g),
        this.b = Math.sqrt(t.b),
        this
    },
    convertGammaToLinear: function() {
      var t = this.r
        , e = this.g
        , i = this.b;
      return this.r = t * t,
        this.g = e * e,
        this.b = i * i,
        this
    },
    convertLinearToGamma: function() {
      return this.r = Math.sqrt(this.r),
        this.g = Math.sqrt(this.g),
        this.b = Math.sqrt(this.b),
        this
    },
    getHex: function() {
      return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
    },
    getHexString: function() {
      return ("000000" + this.getHex().toString(16)).slice(-6)
    },
    getHSL: function(t) {
      var e, t = t || {
        h: 0,
        s: 0,
        l: 0
      }, i = this.r, n = this.g, r = this.b, s = Math.max(i, n, r), o = Math.min(i, n, r), a = (o + s) / 2;
      if (o === s)
        o = e = 0;
      else {
        var l = s - o
          , o = .5 >= a ? l / (s + o) : l / (2 - s - o);
        switch (s) {
          case i:
            e = (n - r) / l + (r > n ? 6 : 0);
            break;
          case n:
            e = (r - i) / l + 2;
            break;
          case r:
            e = (i - n) / l + 4
        }
        e /= 6
      }
      return t.h = e,
        t.s = o,
        t.l = a,
        t
    },
    getStyle: function() {
      return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
    },
    offsetHSL: function(t, e, i) {
      var n = this.getHSL();
      return n.h += t,
        n.s += e,
        n.l += i,
        this.setHSL(n.h, n.s, n.l),
        this
    },
    add: function(t) {
      return this.r += t.r,
        this.g += t.g,
        this.b += t.b,
        this
    },
    addColors: function(t, e) {
      return this.r = t.r + e.r,
        this.g = t.g + e.g,
        this.b = t.b + e.b,
        this
    },
    addScalar: function(t) {
      return this.r += t,
        this.g += t,
        this.b += t,
        this
    },
    multiply: function(t) {
      return this.r *= t.r,
        this.g *= t.g,
        this.b *= t.b,
        this
    },
    multiplyScalar: function(t) {
      return this.r *= t,
        this.g *= t,
        this.b *= t,
        this
    },
    lerp: function(t, e) {
      return this.r += (t.r - this.r) * e,
        this.g += (t.g - this.g) * e,
        this.b += (t.b - this.b) * e,
        this
    },
    equals: function(t) {
      return t.r === this.r && t.g === this.g && t.b === this.b
    },
    fromArray: function(t) {
      return this.r = t[0],
        this.g = t[1],
        this.b = t[2],
        this
    },
    toArray: function() {
      return [this.r, this.g, this.b]
    },
    clone: function() {
      return (new THREE.Color).setRGB(this.r, this.g, this.b)
    }
  },
  THREE.ColorKeywords = {
    aliceblue: 15792383,
    antiquewhite: 16444375,
    aqua: 65535,
    aquamarine: 8388564,
    azure: 15794175,
    beige: 16119260,
    bisque: 16770244,
    black: 0,
    blanchedalmond: 16772045,
    blue: 255,
    blueviolet: 9055202,
    brown: 10824234,
    burlywood: 14596231,
    cadetblue: 6266528,
    chartreuse: 8388352,
    chocolate: 13789470,
    coral: 16744272,
    cornflowerblue: 6591981,
    cornsilk: 16775388,
    crimson: 14423100,
    cyan: 65535,
    darkblue: 139,
    darkcyan: 35723,
    darkgoldenrod: 12092939,
    darkgray: 11119017,
    darkgreen: 25600,
    darkgrey: 11119017,
    darkkhaki: 12433259,
    darkmagenta: 9109643,
    darkolivegreen: 5597999,
    darkorange: 16747520,
    darkorchid: 10040012,
    darkred: 9109504,
    darksalmon: 15308410,
    darkseagreen: 9419919,
    darkslateblue: 4734347,
    darkslategray: 3100495,
    darkslategrey: 3100495,
    darkturquoise: 52945,
    darkviolet: 9699539,
    deeppink: 16716947,
    deepskyblue: 49151,
    dimgray: 6908265,
    dimgrey: 6908265,
    dodgerblue: 2003199,
    firebrick: 11674146,
    floralwhite: 16775920,
    forestgreen: 2263842,
    fuchsia: 16711935,
    gainsboro: 14474460,
    ghostwhite: 16316671,
    gold: 16766720,
    goldenrod: 14329120,
    gray: 8421504,
    green: 32768,
    greenyellow: 11403055,
    grey: 8421504,
    honeydew: 15794160,
    hotpink: 16738740,
    indianred: 13458524,
    indigo: 4915330,
    ivory: 16777200,
    khaki: 15787660,
    lavender: 15132410,
    lavenderblush: 16773365,
    lawngreen: 8190976,
    lemonchiffon: 16775885,
    lightblue: 11393254,
    lightcoral: 15761536,
    lightcyan: 14745599,
    lightgoldenrodyellow: 16448210,
    lightgray: 13882323,
    lightgreen: 9498256,
    lightgrey: 13882323,
    lightpink: 16758465,
    lightsalmon: 16752762,
    lightseagreen: 2142890,
    lightskyblue: 8900346,
    lightslategray: 7833753,
    lightslategrey: 7833753,
    lightsteelblue: 11584734,
    lightyellow: 16777184,
    lime: 65280,
    limegreen: 3329330,
    linen: 16445670,
    magenta: 16711935,
    maroon: 8388608,
    mediumaquamarine: 6737322,
    mediumblue: 205,
    mediumorchid: 12211667,
    mediumpurple: 9662683,
    mediumseagreen: 3978097,
    mediumslateblue: 8087790,
    mediumspringgreen: 64154,
    mediumturquoise: 4772300,
    mediumvioletred: 13047173,
    midnightblue: 1644912,
    mintcream: 16121850,
    mistyrose: 16770273,
    moccasin: 16770229,
    navajowhite: 16768685,
    navy: 128,
    oldlace: 16643558,
    olive: 8421376,
    olivedrab: 7048739,
    orange: 16753920,
    orangered: 16729344,
    orchid: 14315734,
    palegoldenrod: 15657130,
    palegreen: 10025880,
    paleturquoise: 11529966,
    palevioletred: 14381203,
    papayawhip: 16773077,
    peachpuff: 16767673,
    peru: 13468991,
    pink: 16761035,
    plum: 14524637,
    powderblue: 11591910,
    purple: 8388736,
    red: 16711680,
    rosybrown: 12357519,
    royalblue: 4286945,
    saddlebrown: 9127187,
    salmon: 16416882,
    sandybrown: 16032864,
    seagreen: 3050327,
    seashell: 16774638,
    sienna: 10506797,
    silver: 12632256,
    skyblue: 8900331,
    slateblue: 6970061,
    slategray: 7372944,
    slategrey: 7372944,
    snow: 16775930,
    springgreen: 65407,
    steelblue: 4620980,
    tan: 13808780,
    teal: 32896,
    thistle: 14204888,
    tomato: 16737095,
    turquoise: 4251856,
    violet: 15631086,
    wheat: 16113331,
    white: 16777215,
    whitesmoke: 16119285,
    yellow: 16776960,
    yellowgreen: 10145074
  },
  THREE.Quaternion = function(t, e, i, n) {
    this._x = t || 0,
      this._y = e || 0,
      this._z = i || 0,
      this._w = void 0 !== n ? n : 1
  }
  ,
  THREE.Quaternion.prototype = {
    constructor: THREE.Quaternion,
    _x: 0,
    _y: 0,
    _z: 0,
    _w: 0,
    _euler: void 0,
    _updateEuler: function() {
      void 0 !== this._euler && this._euler.setFromQuaternion(this, void 0, !1)
    },
    get x() {
      return this._x
    },
    set x(t) {
      this._x = t,
        this._updateEuler()
    },
    get y() {
      return this._y
    },
    set y(t) {
      this._y = t,
        this._updateEuler()
    },
    get z() {
      return this._z
    },
    set z(t) {
      this._z = t,
        this._updateEuler()
    },
    get w() {
      return this._w
    },
    set w(t) {
      this._w = t,
        this._updateEuler()
    },
    set: function(t, e, i, n) {
      return this._x = t,
        this._y = e,
        this._z = i,
        this._w = n,
        this._updateEuler(),
        this
    },
    copy: function(t) {
      return this._x = t._x,
        this._y = t._y,
        this._z = t._z,
        this._w = t._w,
        this._updateEuler(),
        this
    },
    setFromEuler: function(t, e) {
      if (!1 == t instanceof THREE.Euler)
        throw Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");
      var i = Math.cos(t._x / 2)
        , n = Math.cos(t._y / 2)
        , r = Math.cos(t._z / 2)
        , s = Math.sin(t._x / 2)
        , o = Math.sin(t._y / 2)
        , a = Math.sin(t._z / 2);
      return "XYZ" === t.order ? (this._x = s * n * r + i * o * a,
        this._y = i * o * r - s * n * a,
        this._z = i * n * a + s * o * r,
        this._w = i * n * r - s * o * a) : "YXZ" === t.order ? (this._x = s * n * r + i * o * a,
        this._y = i * o * r - s * n * a,
        this._z = i * n * a - s * o * r,
        this._w = i * n * r + s * o * a) : "ZXY" === t.order ? (this._x = s * n * r - i * o * a,
        this._y = i * o * r + s * n * a,
        this._z = i * n * a + s * o * r,
        this._w = i * n * r - s * o * a) : "ZYX" === t.order ? (this._x = s * n * r - i * o * a,
        this._y = i * o * r + s * n * a,
        this._z = i * n * a - s * o * r,
        this._w = i * n * r + s * o * a) : "YZX" === t.order ? (this._x = s * n * r + i * o * a,
        this._y = i * o * r + s * n * a,
        this._z = i * n * a - s * o * r,
        this._w = i * n * r - s * o * a) : "XZY" === t.order && (this._x = s * n * r - i * o * a,
        this._y = i * o * r - s * n * a,
        this._z = i * n * a + s * o * r,
        this._w = i * n * r + s * o * a),
      !1 !== e && this._updateEuler(),
        this
    },
    setFromAxisAngle: function(t, e) {
      var i = e / 2
        , n = Math.sin(i);
      return this._x = t.x * n,
        this._y = t.y * n,
        this._z = t.z * n,
        this._w = Math.cos(i),
        this._updateEuler(),
        this
    },
    setFromRotationMatrix: function(t) {
      var e = t.elements
        , i = e[0]
        , t = e[4]
        , n = e[8]
        , r = e[1]
        , s = e[5]
        , o = e[9]
        , a = e[2]
        , l = e[6]
        , e = e[10]
        , h = i + s + e;
      return h > 0 ? (i = .5 / Math.sqrt(h + 1),
        this._w = .25 / i,
        this._x = (l - o) * i,
        this._y = (n - a) * i,
        this._z = (r - t) * i) : i > s && i > e ? (i = 2 * Math.sqrt(1 + i - s - e),
        this._w = (l - o) / i,
        this._x = .25 * i,
        this._y = (t + r) / i,
        this._z = (n + a) / i) : s > e ? (i = 2 * Math.sqrt(1 + s - i - e),
        this._w = (n - a) / i,
        this._x = (t + r) / i,
        this._y = .25 * i,
        this._z = (o + l) / i) : (i = 2 * Math.sqrt(1 + e - i - s),
        this._w = (r - t) / i,
        this._x = (n + a) / i,
        this._y = (o + l) / i,
        this._z = .25 * i),
        this._updateEuler(),
        this
    },
    inverse: function() {
      return this.conjugate().normalize(),
        this
    },
    conjugate: function() {
      return this._x *= -1,
        this._y *= -1,
        this._z *= -1,
        this._updateEuler(),
        this
    },
    lengthSq: function() {
      return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
    },
    length: function() {
      return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
    },
    normalize: function() {
      var t = this.length();
      return 0 === t ? (this._z = this._y = this._x = 0,
        this._w = 1) : (t = 1 / t,
        this._x *= t,
        this._y *= t,
        this._z *= t,
        this._w *= t),
        this
    },
    multiply: function(t, e) {
      return void 0 !== e ? (console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
        this.multiplyQuaternions(t, e)) : this.multiplyQuaternions(this, t)
    },
    multiplyQuaternions: function(t, e) {
      var i = t._x
        , n = t._y
        , r = t._z
        , s = t._w
        , o = e._x
        , a = e._y
        , l = e._z
        , h = e._w;
      return this._x = i * h + s * o + n * l - r * a,
        this._y = n * h + s * a + r * o - i * l,
        this._z = r * h + s * l + i * a - n * o,
        this._w = s * h - i * o - n * a - r * l,
        this._updateEuler(),
        this
    },
    multiplyVector3: function(t) {
      return console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),
        t.applyQuaternion(this)
    },
    slerp: function(t, e) {
      var i = this._x
        , n = this._y
        , r = this._z
        , s = this._w
        , o = s * t._w + i * t._x + n * t._y + r * t._z;
      if (0 > o ? (this._w = -t._w,
          this._x = -t._x,
          this._y = -t._y,
          this._z = -t._z,
          o = -o) : this.copy(t),
        o >= 1)
        return this._w = s,
          this._x = i,
          this._y = n,
          this._z = r,
          this;
      var a = Math.acos(o)
        , l = Math.sqrt(1 - o * o);
      return .001 > Math.abs(l) ? (this._w = .5 * (s + this._w),
        this._x = .5 * (i + this._x),
        this._y = .5 * (n + this._y),
        this._z = .5 * (r + this._z),
        this) : (o = Math.sin((1 - e) * a) / l,
        a = Math.sin(e * a) / l,
        this._w = s * o + this._w * a,
        this._x = i * o + this._x * a,
        this._y = n * o + this._y * a,
        this._z = r * o + this._z * a,
        this._updateEuler(),
        this)
    },
    equals: function(t) {
      return t._x === this._x && t._y === this._y && t._z === this._z && t._w === this._w
    },
    fromArray: function(t) {
      return this._x = t[0],
        this._y = t[1],
        this._z = t[2],
        this._w = t[3],
        this._updateEuler(),
        this
    },
    toArray: function() {
      return [this._x, this._y, this._z, this._w]
    },
    clone: function() {
      return new THREE.Quaternion(this._x,this._y,this._z,this._w)
    }
  },
  THREE.Quaternion.slerp = function(t, e, i, n) {
    return i.copy(t).slerp(e, n)
  }
  ,
  THREE.Vector2 = function(t, e) {
    this.x = t || 0,
      this.y = e || 0
  }
  ,
  THREE.Vector2.prototype = {
    constructor: THREE.Vector2,
    set: function(t, e) {
      return this.x = t,
        this.y = e,
        this
    },
    setX: function(t) {
      return this.x = t,
        this
    },
    setY: function(t) {
      return this.y = t,
        this
    },
    setComponent: function(t, e) {
      switch (t) {
        case 0:
          this.x = e;
          break;
        case 1:
          this.y = e;
          break;
        default:
          throw Error("index is out of range: " + t)
      }
    },
    getComponent: function(t) {
      switch (t) {
        case 0:
          return this.x;
        case 1:
          return this.y;
        default:
          throw Error("index is out of range: " + t)
      }
    },
    copy: function(t) {
      return this.x = t.x,
        this.y = t.y,
        this
    },
    add: function(t, e) {
      return void 0 !== e ? (console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
        this.addVectors(t, e)) : (this.x += t.x,
        this.y += t.y,
        this)
    },
    addVectors: function(t, e) {
      return this.x = t.x + e.x,
        this.y = t.y + e.y,
        this
    },
    addScalar: function(t) {
      return this.x += t,
        this.y += t,
        this
    },
    sub: function(t, e) {
      return void 0 !== e ? (console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
        this.subVectors(t, e)) : (this.x -= t.x,
        this.y -= t.y,
        this)
    },
    subVectors: function(t, e) {
      return this.x = t.x - e.x,
        this.y = t.y - e.y,
        this
    },
    multiplyScalar: function(t) {
      return this.x *= t,
        this.y *= t,
        this
    },
    divideScalar: function(t) {
      return 0 !== t ? (t = 1 / t,
        this.x *= t,
        this.y *= t) : this.y = this.x = 0,
        this
    },
    min: function(t) {
      return this.x > t.x && (this.x = t.x),
      this.y > t.y && (this.y = t.y),
        this
    },
    max: function(t) {
      return this.x < t.x && (this.x = t.x),
      this.y < t.y && (this.y = t.y),
        this
    },
    clamp: function(t, e) {
      return this.x < t.x ? this.x = t.x : this.x > e.x && (this.x = e.x),
        this.y < t.y ? this.y = t.y : this.y > e.y && (this.y = e.y),
        this
    },
    negate: function() {
      return this.multiplyScalar(-1)
    },
    dot: function(t) {
      return this.x * t.x + this.y * t.y
    },
    lengthSq: function() {
      return this.x * this.x + this.y * this.y
    },
    length: function() {
      return Math.sqrt(this.x * this.x + this.y * this.y)
    },
    normalize: function() {
      return this.divideScalar(this.length())
    },
    distanceTo: function(t) {
      return Math.sqrt(this.distanceToSquared(t))
    },
    distanceToSquared: function(t) {
      var e = this.x - t.x
        , t = this.y - t.y;
      return e * e + t * t
    },
    setLength: function(t) {
      var e = this.length();
      return 0 !== e && t !== e && this.multiplyScalar(t / e),
        this
    },
    lerp: function(t, e) {
      return this.x += (t.x - this.x) * e,
        this.y += (t.y - this.y) * e,
        this
    },
    equals: function(t) {
      return t.x === this.x && t.y === this.y
    },
    fromArray: function(t) {
      return this.x = t[0],
        this.y = t[1],
        this
    },
    toArray: function() {
      return [this.x, this.y]
    },
    clone: function() {
      return new THREE.Vector2(this.x,this.y)
    }
  },
  THREE.Vector3 = function(t, e, i) {
    this.x = t || 0,
      this.y = e || 0,
      this.z = i || 0
  }
  ,
  THREE.Vector3.prototype = {
    constructor: THREE.Vector3,
    set: function(t, e, i) {
      return this.x = t,
        this.y = e,
        this.z = i,
        this
    },
    setX: function(t) {
      return this.x = t,
        this
    },
    setY: function(t) {
      return this.y = t,
        this
    },
    setZ: function(t) {
      return this.z = t,
        this
    },
    setComponent: function(t, e) {
      switch (t) {
        case 0:
          this.x = e;
          break;
        case 1:
          this.y = e;
          break;
        case 2:
          this.z = e;
          break;
        default:
          throw Error("index is out of range: " + t)
      }
    },
    getComponent: function(t) {
      switch (t) {
        case 0:
          return this.x;
        case 1:
          return this.y;
        case 2:
          return this.z;
        default:
          throw Error("index is out of range: " + t)
      }
    },
    copy: function(t) {
      return this.x = t.x,
        this.y = t.y,
        this.z = t.z,
        this
    },
    add: function(t, e) {
      return void 0 !== e ? (console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
        this.addVectors(t, e)) : (this.x += t.x,
        this.y += t.y,
        this.z += t.z,
        this)
    },
    addScalar: function(t) {
      return this.x += t,
        this.y += t,
        this.z += t,
        this
    },
    addVectors: function(t, e) {
      return this.x = t.x + e.x,
        this.y = t.y + e.y,
        this.z = t.z + e.z,
        this
    },
    sub: function(t, e) {
      return void 0 !== e ? (console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
        this.subVectors(t, e)) : (this.x -= t.x,
        this.y -= t.y,
        this.z -= t.z,
        this)
    },
    subVectors: function(t, e) {
      return this.x = t.x - e.x,
        this.y = t.y - e.y,
        this.z = t.z - e.z,
        this
    },
    multiply: function(t, e) {
      return void 0 !== e ? (console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
        this.multiplyVectors(t, e)) : (this.x *= t.x,
        this.y *= t.y,
        this.z *= t.z,
        this)
    },
    multiplyScalar: function(t) {
      return this.x *= t,
        this.y *= t,
        this.z *= t,
        this
    },
    multiplyVectors: function(t, e) {
      return this.x = t.x * e.x,
        this.y = t.y * e.y,
        this.z = t.z * e.z,
        this
    },
    applyMatrix3: function(t) {
      var e = this.x
        , i = this.y
        , n = this.z
        , t = t.elements;
      return this.x = t[0] * e + t[3] * i + t[6] * n,
        this.y = t[1] * e + t[4] * i + t[7] * n,
        this.z = t[2] * e + t[5] * i + t[8] * n,
        this
    },
    applyMatrix4: function(t) {
      var e = this.x
        , i = this.y
        , n = this.z
        , t = t.elements;
      return this.x = t[0] * e + t[4] * i + t[8] * n + t[12],
        this.y = t[1] * e + t[5] * i + t[9] * n + t[13],
        this.z = t[2] * e + t[6] * i + t[10] * n + t[14],
        this
    },
    applyProjection: function(t) {
      var e = this.x
        , i = this.y
        , n = this.z
        , t = t.elements
        , r = 1 / (t[3] * e + t[7] * i + t[11] * n + t[15]);
      return this.x = (t[0] * e + t[4] * i + t[8] * n + t[12]) * r,
        this.y = (t[1] * e + t[5] * i + t[9] * n + t[13]) * r,
        this.z = (t[2] * e + t[6] * i + t[10] * n + t[14]) * r,
        this
    },
    applyQuaternion: function(t) {
      var e = this.x
        , i = this.y
        , n = this.z
        , r = t.x
        , s = t.y
        , o = t.z
        , t = t.w
        , a = t * e + s * n - o * i
        , l = t * i + o * e - r * n
        , h = t * n + r * i - s * e
        , e = -r * e - s * i - o * n;
      return this.x = a * t + e * -r + l * -o - h * -s,
        this.y = l * t + e * -s + h * -r - a * -o,
        this.z = h * t + e * -o + a * -s - l * -r,
        this
    },
    transformDirection: function(t) {
      var e = this.x
        , i = this.y
        , n = this.z
        , t = t.elements;
      return this.x = t[0] * e + t[4] * i + t[8] * n,
        this.y = t[1] * e + t[5] * i + t[9] * n,
        this.z = t[2] * e + t[6] * i + t[10] * n,
        this.normalize(),
        this
    },
    divide: function(t) {
      return this.x /= t.x,
        this.y /= t.y,
        this.z /= t.z,
        this
    },
    divideScalar: function(t) {
      return 0 !== t ? (t = 1 / t,
        this.x *= t,
        this.y *= t,
        this.z *= t) : this.z = this.y = this.x = 0,
        this
    },
    min: function(t) {
      return this.x > t.x && (this.x = t.x),
      this.y > t.y && (this.y = t.y),
      this.z > t.z && (this.z = t.z),
        this
    },
    max: function(t) {
      return this.x < t.x && (this.x = t.x),
      this.y < t.y && (this.y = t.y),
      this.z < t.z && (this.z = t.z),
        this
    },
    clamp: function(t, e) {
      return this.x < t.x ? this.x = t.x : this.x > e.x && (this.x = e.x),
        this.y < t.y ? this.y = t.y : this.y > e.y && (this.y = e.y),
        this.z < t.z ? this.z = t.z : this.z > e.z && (this.z = e.z),
        this
    },
    negate: function() {
      return this.multiplyScalar(-1)
    },
    dot: function(t) {
      return this.x * t.x + this.y * t.y + this.z * t.z
    },
    lengthSq: function() {
      return this.x * this.x + this.y * this.y + this.z * this.z
    },
    length: function() {
      return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
    },
    lengthManhattan: function() {
      return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
    },
    normalize: function() {
      return this.divideScalar(this.length())
    },
    setLength: function(t) {
      var e = this.length();
      return 0 !== e && t !== e && this.multiplyScalar(t / e),
        this
    },
    lerp: function(t, e) {
      return this.x += (t.x - this.x) * e,
        this.y += (t.y - this.y) * e,
        this.z += (t.z - this.z) * e,
        this
    },
    cross: function(t, e) {
      if (void 0 !== e)
        return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
          this.crossVectors(t, e);
      var i = this.x
        , n = this.y
        , r = this.z;
      return this.x = n * t.z - r * t.y,
        this.y = r * t.x - i * t.z,
        this.z = i * t.y - n * t.x,
        this
    },
    crossVectors: function(t, e) {
      var i = t.x
        , n = t.y
        , r = t.z
        , s = e.x
        , o = e.y
        , a = e.z;
      return this.x = n * a - r * o,
        this.y = r * s - i * a,
        this.z = i * o - n * s,
        this
    },
    angleTo: function(t) {
      return t = this.dot(t) / (this.length() * t.length()),
        Math.acos(THREE.Math.clamp(t, -1, 1))
    },
    distanceTo: function(t) {
      return Math.sqrt(this.distanceToSquared(t))
    },
    distanceToSquared: function(t) {
      var e = this.x - t.x
        , i = this.y - t.y
        , t = this.z - t.z;
      return e * e + i * i + t * t
    },
    setEulerFromRotationMatrix: function() {
      console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.")
    },
    setEulerFromQuaternion: function() {
      console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.")
    },
    getPositionFromMatrix: function(t) {
      return console.warn("DEPRECATED: Vector3's .getPositionFromMatrix() has been renamed to .setFromMatrixPosition(). Please update your code."),
        this.setFromMatrixPosition(t)
    },
    getScaleFromMatrix: function(t) {
      return console.warn("DEPRECATED: Vector3's .getScaleFromMatrix() has been renamed to .setFromMatrixScale(). Please update your code."),
        this.setFromMatrixScale(t)
    },
    getColumnFromMatrix: function(t, e) {
      return console.warn("DEPRECATED: Vector3's .getColumnFromMatrix() has been renamed to .setFromMatrixColumn(). Please update your code."),
        this.setFromMatrixColumn(t, e)
    },
    setFromMatrixPosition: function(t) {
      return this.x = t.elements[12],
        this.y = t.elements[13],
        this.z = t.elements[14],
        this
    },
    setFromMatrixScale: function(t) {
      var e = this.set(t.elements[0], t.elements[1], t.elements[2]).length()
        , i = this.set(t.elements[4], t.elements[5], t.elements[6]).length()
        , t = this.set(t.elements[8], t.elements[9], t.elements[10]).length();
      return this.x = e,
        this.y = i,
        this.z = t,
        this
    },
    setFromMatrixColumn: function(t, e) {
      var i = 4 * t
        , n = e.elements;
      return this.x = n[i],
        this.y = n[i + 1],
        this.z = n[i + 2],
        this
    },
    equals: function(t) {
      return t.x === this.x && t.y === this.y && t.z === this.z
    },
    fromArray: function(t) {
      return this.x = t[0],
        this.y = t[1],
        this.z = t[2],
        this
    },
    toArray: function() {
      return [this.x, this.y, this.z]
    },
    clone: function() {
      return new THREE.Vector3(this.x,this.y,this.z)
    }
  },
  THREE.extend(THREE.Vector3.prototype, {
    applyEuler: function() {
      var t = new THREE.Quaternion;
      return function(e) {
        return !1 == e instanceof THREE.Euler && console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code."),
          this.applyQuaternion(t.setFromEuler(e)),
          this
      }
    }(),
    applyAxisAngle: function() {
      var t = new THREE.Quaternion;
      return function(e, i) {
        return this.applyQuaternion(t.setFromAxisAngle(e, i)),
          this
      }
    }(),
    projectOnVector: function() {
      var t = new THREE.Vector3;
      return function(e) {
        return t.copy(e).normalize(),
          e = this.dot(t),
          this.copy(t).multiplyScalar(e)
      }
    }(),
    projectOnPlane: function() {
      var t = new THREE.Vector3;
      return function(e) {
        return t.copy(this).projectOnVector(e),
          this.sub(t)
      }
    }(),
    reflect: function() {
      var t = new THREE.Vector3;
      return function(e) {
        return t.copy(this).projectOnVector(e).multiplyScalar(2),
          this.subVectors(t, this)
      }
    }()
  }),
  THREE.Vector4 = function(t, e, i, n) {
    this.x = t || 0,
      this.y = e || 0,
      this.z = i || 0,
      this.w = void 0 !== n ? n : 1
  }
  ,
  THREE.Vector4.prototype = {
    constructor: THREE.Vector4,
    set: function(t, e, i, n) {
      return this.x = t,
        this.y = e,
        this.z = i,
        this.w = n,
        this
    },
    setX: function(t) {
      return this.x = t,
        this
    },
    setY: function(t) {
      return this.y = t,
        this
    },
    setZ: function(t) {
      return this.z = t,
        this
    },
    setW: function(t) {
      return this.w = t,
        this
    },
    setComponent: function(t, e) {
      switch (t) {
        case 0:
          this.x = e;
          break;
        case 1:
          this.y = e;
          break;
        case 2:
          this.z = e;
          break;
        case 3:
          this.w = e;
          break;
        default:
          throw Error("index is out of range: " + t)
      }
    },
    getComponent: function(t) {
      switch (t) {
        case 0:
          return this.x;
        case 1:
          return this.y;
        case 2:
          return this.z;
        case 3:
          return this.w;
        default:
          throw Error("index is out of range: " + t)
      }
    },
    copy: function(t) {
      return this.x = t.x,
        this.y = t.y,
        this.z = t.z,
        this.w = void 0 !== t.w ? t.w : 1,
        this
    },
    add: function(t, e) {
      return void 0 !== e ? (console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
        this.addVectors(t, e)) : (this.x += t.x,
        this.y += t.y,
        this.z += t.z,
        this.w += t.w,
        this)
    },
    addScalar: function(t) {
      return this.x += t,
        this.y += t,
        this.z += t,
        this.w += t,
        this
    },
    addVectors: function(t, e) {
      return this.x = t.x + e.x,
        this.y = t.y + e.y,
        this.z = t.z + e.z,
        this.w = t.w + e.w,
        this
    },
    sub: function(t, e) {
      return void 0 !== e ? (console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
        this.subVectors(t, e)) : (this.x -= t.x,
        this.y -= t.y,
        this.z -= t.z,
        this.w -= t.w,
        this)
    },
    subVectors: function(t, e) {
      return this.x = t.x - e.x,
        this.y = t.y - e.y,
        this.z = t.z - e.z,
        this.w = t.w - e.w,
        this
    },
    multiplyScalar: function(t) {
      return this.x *= t,
        this.y *= t,
        this.z *= t,
        this.w *= t,
        this
    },
    applyMatrix4: function(t) {
      var e = this.x
        , i = this.y
        , n = this.z
        , r = this.w
        , t = t.elements;
      return this.x = t[0] * e + t[4] * i + t[8] * n + t[12] * r,
        this.y = t[1] * e + t[5] * i + t[9] * n + t[13] * r,
        this.z = t[2] * e + t[6] * i + t[10] * n + t[14] * r,
        this.w = t[3] * e + t[7] * i + t[11] * n + t[15] * r,
        this
    },
    divideScalar: function(t) {
      return 0 !== t ? (t = 1 / t,
        this.x *= t,
        this.y *= t,
        this.z *= t,
        this.w *= t) : (this.z = this.y = this.x = 0,
        this.w = 1),
        this
    },
    setAxisAngleFromQuaternion: function(t) {
      this.w = 2 * Math.acos(t.w);
      var e = Math.sqrt(1 - t.w * t.w);
      return 1e-4 > e ? (this.x = 1,
        this.z = this.y = 0) : (this.x = t.x / e,
        this.y = t.y / e,
        this.z = t.z / e),
        this
    },
    setAxisAngleFromRotationMatrix: function(t) {
      var e, i, n, t = t.elements, r = t[0];
      n = t[4];
      var s = t[8]
        , o = t[1]
        , a = t[5]
        , l = t[9];
      i = t[2],
        e = t[6];
      var h = t[10];
      return .01 > Math.abs(n - o) && .01 > Math.abs(s - i) && .01 > Math.abs(l - e) ? .1 > Math.abs(n + o) && .1 > Math.abs(s + i) && .1 > Math.abs(l + e) && .1 > Math.abs(r + a + h - 3) ? (this.set(1, 0, 0, 0),
        this) : (t = Math.PI,
        r = (r + 1) / 2,
        a = (a + 1) / 2,
        h = (h + 1) / 2,
        n = (n + o) / 4,
        s = (s + i) / 4,
        l = (l + e) / 4,
        r > a && r > h ? .01 > r ? (e = 0,
          n = i = .707106781) : (e = Math.sqrt(r),
          i = n / e,
          n = s / e) : a > h ? .01 > a ? (e = .707106781,
          i = 0,
          n = .707106781) : (i = Math.sqrt(a),
          e = n / i,
          n = l / i) : .01 > h ? (i = e = .707106781,
          n = 0) : (n = Math.sqrt(h),
          e = s / n,
          i = l / n),
        this.set(e, i, n, t),
        this) : (t = Math.sqrt((e - l) * (e - l) + (s - i) * (s - i) + (o - n) * (o - n)),
      .001 > Math.abs(t) && (t = 1),
        this.x = (e - l) / t,
        this.y = (s - i) / t,
        this.z = (o - n) / t,
        this.w = Math.acos((r + a + h - 1) / 2),
        this)
    },
    min: function(t) {
      return this.x > t.x && (this.x = t.x),
      this.y > t.y && (this.y = t.y),
      this.z > t.z && (this.z = t.z),
      this.w > t.w && (this.w = t.w),
        this
    },
    max: function(t) {
      return this.x < t.x && (this.x = t.x),
      this.y < t.y && (this.y = t.y),
      this.z < t.z && (this.z = t.z),
      this.w < t.w && (this.w = t.w),
        this
    },
    clamp: function(t, e) {
      return this.x < t.x ? this.x = t.x : this.x > e.x && (this.x = e.x),
        this.y < t.y ? this.y = t.y : this.y > e.y && (this.y = e.y),
        this.z < t.z ? this.z = t.z : this.z > e.z && (this.z = e.z),
        this.w < t.w ? this.w = t.w : this.w > e.w && (this.w = e.w),
        this
    },
    negate: function() {
      return this.multiplyScalar(-1)
    },
    dot: function(t) {
      return this.x * t.x + this.y * t.y + this.z * t.z + this.w * t.w
    },
    lengthSq: function() {
      return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
    },
    length: function() {
      return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
    },
    lengthManhattan: function() {
      return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
    },
    normalize: function() {
      return this.divideScalar(this.length())
    },
    setLength: function(t) {
      var e = this.length();
      return 0 !== e && t !== e && this.multiplyScalar(t / e),
        this
    },
    lerp: function(t, e) {
      return this.x += (t.x - this.x) * e,
        this.y += (t.y - this.y) * e,
        this.z += (t.z - this.z) * e,
        this.w += (t.w - this.w) * e,
        this
    },
    equals: function(t) {
      return t.x === this.x && t.y === this.y && t.z === this.z && t.w === this.w
    },
    fromArray: function(t) {
      return this.x = t[0],
        this.y = t[1],
        this.z = t[2],
        this.w = t[3],
        this
    },
    toArray: function() {
      return [this.x, this.y, this.z, this.w]
    },
    clone: function() {
      return new THREE.Vector4(this.x,this.y,this.z,this.w)
    }
  },
  THREE.Euler = function(t, e, i, n) {
    this._x = t || 0,
      this._y = e || 0,
      this._z = i || 0,
      this._order = n || THREE.Euler.DefaultOrder
  }
  ,
  THREE.Euler.RotationOrders = "XYZ YZX ZXY XZY YXZ ZYX".split(" "),
  THREE.Euler.DefaultOrder = "XYZ",
  THREE.Euler.prototype = {
    constructor: THREE.Euler,
    _x: 0,
    _y: 0,
    _z: 0,
    _order: THREE.Euler.DefaultOrder,
    _quaternion: void 0,
    _updateQuaternion: function() {
      void 0 !== this._quaternion && this._quaternion.setFromEuler(this, !1)
    },
    get x() {
      return this._x
    },
    set x(t) {
      this._x = t,
        this._updateQuaternion()
    },
    get y() {
      return this._y
    },
    set y(t) {
      this._y = t,
        this._updateQuaternion()
    },
    get z() {
      return this._z
    },
    set z(t) {
      this._z = t,
        this._updateQuaternion()
    },
    get order() {
      return this._order
    },
    set order(t) {
      this._order = t,
        this._updateQuaternion()
    },
    set: function(t, e, i, n) {
      return this._x = t,
        this._y = e,
        this._z = i,
        this._order = n || this._order,
        this._updateQuaternion(),
        this
    },
    copy: function(t) {
      return this._x = t._x,
        this._y = t._y,
        this._z = t._z,
        this._order = t._order,
        this._updateQuaternion(),
        this
    },
    setFromRotationMatrix: function(t, e) {
      function i(t) {
        return Math.min(Math.max(t, -1), 1)
      }
      var n = t.elements
        , r = n[0]
        , s = n[4]
        , o = n[8]
        , a = n[1]
        , l = n[5]
        , h = n[9]
        , c = n[2]
        , u = n[6]
        , n = n[10]
        , e = e || this._order;
      return "XYZ" === e ? (this._y = Math.asin(i(o)),
        .99999 > Math.abs(o) ? (this._x = Math.atan2(-h, n),
          this._z = Math.atan2(-s, r)) : (this._x = Math.atan2(u, l),
          this._z = 0)) : "YXZ" === e ? (this._x = Math.asin(-i(h)),
        .99999 > Math.abs(h) ? (this._y = Math.atan2(o, n),
          this._z = Math.atan2(a, l)) : (this._y = Math.atan2(-c, r),
          this._z = 0)) : "ZXY" === e ? (this._x = Math.asin(i(u)),
        .99999 > Math.abs(u) ? (this._y = Math.atan2(-c, n),
          this._z = Math.atan2(-s, l)) : (this._y = 0,
          this._z = Math.atan2(a, r))) : "ZYX" === e ? (this._y = Math.asin(-i(c)),
        .99999 > Math.abs(c) ? (this._x = Math.atan2(u, n),
          this._z = Math.atan2(a, r)) : (this._x = 0,
          this._z = Math.atan2(-s, l))) : "YZX" === e ? (this._z = Math.asin(i(a)),
        .99999 > Math.abs(a) ? (this._x = Math.atan2(-h, l),
          this._y = Math.atan2(-c, r)) : (this._x = 0,
          this._y = Math.atan2(o, n))) : "XZY" === e ? (this._z = Math.asin(-i(s)),
        .99999 > Math.abs(s) ? (this._x = Math.atan2(u, l),
          this._y = Math.atan2(o, r)) : (this._x = Math.atan2(-h, n),
          this._y = 0)) : console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: " + e),
        this._order = e,
        this._updateQuaternion(),
        this
    },
    setFromQuaternion: function(t, e, i) {
      function n(t) {
        return Math.min(Math.max(t, -1), 1)
      }
      var r = t.x * t.x
        , s = t.y * t.y
        , o = t.z * t.z
        , a = t.w * t.w
        , e = e || this._order;
      return "XYZ" === e ? (this._x = Math.atan2(2 * (t.x * t.w - t.y * t.z), a - r - s + o),
        this._y = Math.asin(n(2 * (t.x * t.z + t.y * t.w))),
        this._z = Math.atan2(2 * (t.z * t.w - t.x * t.y), a + r - s - o)) : "YXZ" === e ? (this._x = Math.asin(n(2 * (t.x * t.w - t.y * t.z))),
        this._y = Math.atan2(2 * (t.x * t.z + t.y * t.w), a - r - s + o),
        this._z = Math.atan2(2 * (t.x * t.y + t.z * t.w), a - r + s - o)) : "ZXY" === e ? (this._x = Math.asin(n(2 * (t.x * t.w + t.y * t.z))),
        this._y = Math.atan2(2 * (t.y * t.w - t.z * t.x), a - r - s + o),
        this._z = Math.atan2(2 * (t.z * t.w - t.x * t.y), a - r + s - o)) : "ZYX" === e ? (this._x = Math.atan2(2 * (t.x * t.w + t.z * t.y), a - r - s + o),
        this._y = Math.asin(n(2 * (t.y * t.w - t.x * t.z))),
        this._z = Math.atan2(2 * (t.x * t.y + t.z * t.w), a + r - s - o)) : "YZX" === e ? (this._x = Math.atan2(2 * (t.x * t.w - t.z * t.y), a - r + s - o),
        this._y = Math.atan2(2 * (t.y * t.w - t.x * t.z), a + r - s - o),
        this._z = Math.asin(n(2 * (t.x * t.y + t.z * t.w)))) : "XZY" === e ? (this._x = Math.atan2(2 * (t.x * t.w + t.y * t.z), a - r + s - o),
        this._y = Math.atan2(2 * (t.x * t.z + t.y * t.w), a + r - s - o),
        this._z = Math.asin(n(2 * (t.z * t.w - t.x * t.y)))) : console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: " + e),
        this._order = e,
      !1 !== i && this._updateQuaternion(),
        this
    },
    reorder: function() {
      var t = new THREE.Quaternion;
      return function(e) {
        t.setFromEuler(this),
          this.setFromQuaternion(t, e)
      }
    }(),
    fromArray: function(t) {
      return this._x = t[0],
        this._y = t[1],
        this._z = t[2],
      void 0 !== t[3] && (this._order = t[3]),
        this._updateQuaternion(),
        this
    },
    toArray: function() {
      return [this._x, this._y, this._z, this._order]
    },
    equals: function(t) {
      return t._x === this._x && t._y === this._y && t._z === this._z && t._order === this._order
    },
    clone: function() {
      return new THREE.Euler(this._x,this._y,this._z,this._order)
    }
  },
  THREE.Line3 = function(t, e) {
    this.start = void 0 !== t ? t : new THREE.Vector3,
      this.end = void 0 !== e ? e : new THREE.Vector3
  }
  ,
  THREE.Line3.prototype = {
    constructor: THREE.Line3,
    set: function(t, e) {
      return this.start.copy(t),
        this.end.copy(e),
        this
    },
    copy: function(t) {
      return this.start.copy(t.start),
        this.end.copy(t.end),
        this
    },
    center: function(t) {
      return (t || new THREE.Vector3).addVectors(this.start, this.end).multiplyScalar(.5)
    },
    delta: function(t) {
      return (t || new THREE.Vector3).subVectors(this.end, this.start)
    },
    distanceSq: function() {
      return this.start.distanceToSquared(this.end)
    },
    distance: function() {
      return this.start.distanceTo(this.end)
    },
    at: function(t, e) {
      var i = e || new THREE.Vector3;
      return this.delta(i).multiplyScalar(t).add(this.start)
    },
    closestPointToPointParameter: function() {
      var t = new THREE.Vector3
        , e = new THREE.Vector3;
      return function(i, n) {
        t.subVectors(i, this.start),
          e.subVectors(this.end, this.start);
        var r = e.dot(e)
          , r = e.dot(t) / r;
        return n && (r = THREE.Math.clamp(r, 0, 1)),
          r
      }
    }(),
    closestPointToPoint: function(t, e, i) {
      return t = this.closestPointToPointParameter(t, e),
        i = i || new THREE.Vector3,
        this.delta(i).multiplyScalar(t).add(this.start)
    },
    applyMatrix4: function(t) {
      return this.start.applyMatrix4(t),
        this.end.applyMatrix4(t),
        this
    },
    equals: function(t) {
      return t.start.equals(this.start) && t.end.equals(this.end)
    },
    clone: function() {
      return (new THREE.Line3).copy(this)
    }
  },
  THREE.Box2 = function(t, e) {
    this.min = void 0 !== t ? t : new THREE.Vector2(1 / 0,1 / 0),
      this.max = void 0 !== e ? e : new THREE.Vector2(-1 / 0,-1 / 0)
  }
  ,
  THREE.Box2.prototype = {
    constructor: THREE.Box2,
    set: function(t, e) {
      return this.min.copy(t),
        this.max.copy(e),
        this
    },
    setFromPoints: function(t) {
      if (0 < t.length) {
        var e = t[0];
        this.min.copy(e),
          this.max.copy(e);
        for (var i = 1, n = t.length; n > i; i++)
          e = t[i],
            e.x < this.min.x ? this.min.x = e.x : e.x > this.max.x && (this.max.x = e.x),
            e.y < this.min.y ? this.min.y = e.y : e.y > this.max.y && (this.max.y = e.y)
      } else
        this.makeEmpty();
      return this
    },
    setFromCenterAndSize: function() {
      var t = new THREE.Vector2;
      return function(e, i) {
        var n = t.copy(i).multiplyScalar(.5);
        return this.min.copy(e).sub(n),
          this.max.copy(e).add(n),
          this
      }
    }(),
    copy: function(t) {
      return this.min.copy(t.min),
        this.max.copy(t.max),
        this
    },
    makeEmpty: function() {
      return this.min.x = this.min.y = 1 / 0,
        this.max.x = this.max.y = -1 / 0,
        this
    },
    empty: function() {
      return this.max.x < this.min.x || this.max.y < this.min.y
    },
    center: function(t) {
      return (t || new THREE.Vector2).addVectors(this.min, this.max).multiplyScalar(.5)
    },
    size: function(t) {
      return (t || new THREE.Vector2).subVectors(this.max, this.min)
    },
    expandByPoint: function(t) {
      return this.min.min(t),
        this.max.max(t),
        this
    },
    expandByVector: function(t) {
      return this.min.sub(t),
        this.max.add(t),
        this
    },
    expandByScalar: function(t) {
      return this.min.addScalar(-t),
        this.max.addScalar(t),
        this
    },
    containsPoint: function(t) {
      return t.x < this.min.x || t.x > this.max.x || t.y < this.min.y || t.y > this.max.y ? !1 : !0
    },
    containsBox: function(t) {
      return this.min.x <= t.min.x && t.max.x <= this.max.x && this.min.y <= t.min.y && t.max.y <= this.max.y ? !0 : !1
    },
    getParameter: function(t, e) {
      return (e || new THREE.Vector2).set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y))
    },
    isIntersectionBox: function(t) {
      return t.max.x < this.min.x || t.min.x > this.max.x || t.max.y < this.min.y || t.min.y > this.max.y ? !1 : !0
    },
    clampPoint: function(t, e) {
      return (e || new THREE.Vector2).copy(t).clamp(this.min, this.max)
    },
    distanceToPoint: function() {
      var t = new THREE.Vector2;
      return function(e) {
        return t.copy(e).clamp(this.min, this.max).sub(e).length()
      }
    }(),
    intersect: function(t) {
      return this.min.max(t.min),
        this.max.min(t.max),
        this
    },
    union: function(t) {
      return this.min.min(t.min),
        this.max.max(t.max),
        this
    },
    translate: function(t) {
      return this.min.add(t),
        this.max.add(t),
        this
    },
    equals: function(t) {
      return t.min.equals(this.min) && t.max.equals(this.max)
    },
    clone: function() {
      return (new THREE.Box2).copy(this)
    }
  },
  THREE.Box3 = function(t, e) {
    this.min = void 0 !== t ? t : new THREE.Vector3(1 / 0,1 / 0,1 / 0),
      this.max = void 0 !== e ? e : new THREE.Vector3(-1 / 0,-1 / 0,-1 / 0)
  }
  ,
  THREE.Box3.prototype = {
    constructor: THREE.Box3,
    set: function(t, e) {
      return this.min.copy(t),
        this.max.copy(e),
        this
    },
    addPoint: function(t) {
      t.x < this.min.x ? this.min.x = t.x : t.x > this.max.x && (this.max.x = t.x),
        t.y < this.min.y ? this.min.y = t.y : t.y > this.max.y && (this.max.y = t.y),
        t.z < this.min.z ? this.min.z = t.z : t.z > this.max.z && (this.max.z = t.z)
    },
    setFromPoints: function(t) {
      if (0 < t.length) {
        var e = t[0];
        this.min.copy(e),
          this.max.copy(e);
        for (var e = 1, i = t.length; i > e; e++)
          this.addPoint(t[e])
      } else
        this.makeEmpty();
      return this
    },
    setFromCenterAndSize: function() {
      var t = new THREE.Vector3;
      return function(e, i) {
        var n = t.copy(i).multiplyScalar(.5);
        return this.min.copy(e).sub(n),
          this.max.copy(e).add(n),
          this
      }
    }(),
    setFromObject: function() {
      var t = new THREE.Vector3;
      return function(e) {
        var i = this;
        return e.updateMatrixWorld(!0),
          this.makeEmpty(),
          e.traverse(function(e) {
            if (void 0 !== e.geometry && void 0 !== e.geometry.vertices)
              for (var n = e.geometry.vertices, r = 0, s = n.length; s > r; r++)
                t.copy(n[r]),
                  t.applyMatrix4(e.matrixWorld),
                  i.expandByPoint(t)
          }),
          this
      }
    }(),
    copy: function(t) {
      return this.min.copy(t.min),
        this.max.copy(t.max),
        this
    },
    makeEmpty: function() {
      return this.min.x = this.min.y = this.min.z = 1 / 0,
        this.max.x = this.max.y = this.max.z = -1 / 0,
        this
    },
    empty: function() {
      return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
    },
    center: function(t) {
      return (t || new THREE.Vector3).addVectors(this.min, this.max).multiplyScalar(.5)
    },
    size: function(t) {
      return (t || new THREE.Vector3).subVectors(this.max, this.min)
    },
    expandByPoint: function(t) {
      return this.min.min(t),
        this.max.max(t),
        this
    },
    expandByVector: function(t) {
      return this.min.sub(t),
        this.max.add(t),
        this
    },
    expandByScalar: function(t) {
      return this.min.addScalar(-t),
        this.max.addScalar(t),
        this
    },
    containsPoint: function(t) {
      return t.x < this.min.x || t.x > this.max.x || t.y < this.min.y || t.y > this.max.y || t.z < this.min.z || t.z > this.max.z ? !1 : !0
    },
    containsBox: function(t) {
      return this.min.x <= t.min.x && t.max.x <= this.max.x && this.min.y <= t.min.y && t.max.y <= this.max.y && this.min.z <= t.min.z && t.max.z <= this.max.z ? !0 : !1
    },
    getParameter: function(t, e) {
      return (e || new THREE.Vector3).set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y), (t.z - this.min.z) / (this.max.z - this.min.z))
    },
    isIntersectionBox: function(t) {
      return t.max.x < this.min.x || t.min.x > this.max.x || t.max.y < this.min.y || t.min.y > this.max.y || t.max.z < this.min.z || t.min.z > this.max.z ? !1 : !0
    },
    clampPoint: function(t, e) {
      return (e || new THREE.Vector3).copy(t).clamp(this.min, this.max)
    },
    distanceToPoint: function() {
      var t = new THREE.Vector3;
      return function(e) {
        return t.copy(e).clamp(this.min, this.max).sub(e).length()
      }
    }(),
    getBoundingSphere: function() {
      var t = new THREE.Vector3;
      return function(e) {
        return e = e || new THREE.Sphere,
          e.center = this.center(),
          e.radius = .5 * this.size(t).length(),
          e
      }
    }(),
    intersect: function(t) {
      return this.min.max(t.min),
        this.max.min(t.max),
        this
    },
    union: function(t) {
      return this.min.min(t.min),
        this.max.max(t.max),
        this
    },
    applyMatrix4: function() {
      var t = [new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3];
      return function(e) {
        return t[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e),
          t[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e),
          t[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e),
          t[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e),
          t[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e),
          t[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e),
          t[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e),
          t[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e),
          this.makeEmpty(),
          this.setFromPoints(t),
          this
      }
    }(),
    translate: function(t) {
      return this.min.add(t),
        this.max.add(t),
        this
    },
    equals: function(t) {
      return t.min.equals(this.min) && t.max.equals(this.max)
    },
    clone: function() {
      return (new THREE.Box3).copy(this)
    }
  },
THREE.Matrix3 = function(t, e, i, n, r, s, o, a, l) {
  this.elements = new Float32Array(9),
    this.set(void 0 !== t ? t : 1, e || 0, i || 0, n || 0, void 0 !== r ? r : 1, s || 0, o || 0, a || 0, void 0 !== l ? l : 1)
}
,
THREE.Matrix3.prototype = {
  constructor: THREE.Matrix3,
  set: function(t, e, i, n, r, s, o, a, l) {
    var h = this.elements;
    return h[0] = t,
      h[3] = e,
      h[6] = i,
      h[1] = n,
      h[4] = r,
      h[7] = s,
      h[2] = o,
      h[5] = a,
      h[8] = l,
      this
  },
  identity: function() {
    return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1),
      this
  },
  copy: function(t) {
    return t = t.elements,
      this.set(t[0], t[3], t[6], t[1], t[4], t[7], t[2], t[5], t[8]),
      this
  },
  multiplyVector3: function(t) {
    return console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),
      t.applyMatrix3(this)
  },
  multiplyVector3Array: function() {
    var t = new THREE.Vector3;
    return function(e) {
      for (var i = 0, n = e.length; n > i; i += 3)
        t.x = e[i],
          t.y = e[i + 1],
          t.z = e[i + 2],
          t.applyMatrix3(this),
          e[i] = t.x,
          e[i + 1] = t.y,
          e[i + 2] = t.z;
      return e
    }
  }(),
  multiplyScalar: function(t) {
    var e = this.elements;
    return e[0] *= t,
      e[3] *= t,
      e[6] *= t,
      e[1] *= t,
      e[4] *= t,
      e[7] *= t,
      e[2] *= t,
      e[5] *= t,
      e[8] *= t,
      this
  },
  determinant: function() {
    var t = this.elements
      , e = t[0]
      , i = t[1]
      , n = t[2]
      , r = t[3]
      , s = t[4]
      , o = t[5]
      , a = t[6]
      , l = t[7]
      , t = t[8];
    return e * s * t - e * o * l - i * r * t + i * o * a + n * r * l - n * s * a
  },
  getInverse: function(t, e) {
    var i = t.elements
      , n = this.elements;
    if (n[0] = i[10] * i[5] - i[6] * i[9],
        n[1] = -i[10] * i[1] + i[2] * i[9],
        n[2] = i[6] * i[1] - i[2] * i[5],
        n[3] = -i[10] * i[4] + i[6] * i[8],
        n[4] = i[10] * i[0] - i[2] * i[8],
        n[5] = -i[6] * i[0] + i[2] * i[4],
        n[6] = i[9] * i[4] - i[5] * i[8],
        n[7] = -i[9] * i[0] + i[1] * i[8],
        n[8] = i[5] * i[0] - i[1] * i[4],
        i = i[0] * n[0] + i[1] * n[3] + i[2] * n[6],
      0 === i) {
      if (e)
        throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");
      return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),
        this.identity(),
        this
    }
    return this.multiplyScalar(1 / i),
      this
  },
  transpose: function() {
    var t, e = this.elements;
    return t = e[1],
      e[1] = e[3],
      e[3] = t,
      t = e[2],
      e[2] = e[6],
      e[6] = t,
      t = e[5],
      e[5] = e[7],
      e[7] = t,
      this
  },
  getNormalMatrix: function(t) {
    return this.getInverse(t).transpose(),
      this
  },
  transposeIntoArray: function(t) {
    var e = this.elements;
    return t[0] = e[0],
      t[1] = e[3],
      t[2] = e[6],
      t[3] = e[1],
      t[4] = e[4],
      t[5] = e[7],
      t[6] = e[2],
      t[7] = e[5],
      t[8] = e[8],
      this
  },
  fromArray: function(t) {
    return this.elements.set(t),
      this
  },
  toArray: function() {
    var t = this.elements;
    return [t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8]]
  },
  clone: function() {
    var t = this.elements;
    return new THREE.Matrix3(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])
  }
},
THREE.Matrix4 = function(t, e, i, n, r, s, o, a, l, h, c, u, p, d, f, m) {
  var g = this.elements = new Float32Array(16);
  g[0] = void 0 !== t ? t : 1,
    g[4] = e || 0,
    g[8] = i || 0,
    g[12] = n || 0,
    g[1] = r || 0,
    g[5] = void 0 !== s ? s : 1,
    g[9] = o || 0,
    g[13] = a || 0,
    g[2] = l || 0,
    g[6] = h || 0,
    g[10] = void 0 !== c ? c : 1,
    g[14] = u || 0,
    g[3] = p || 0,
    g[7] = d || 0,
    g[11] = f || 0,
    g[15] = void 0 !== m ? m : 1
}
,
THREE.Matrix4.prototype = {
  constructor: THREE.Matrix4,
  set: function(t, e, i, n, r, s, o, a, l, h, c, u, p, d, f, m) {
    var g = this.elements;
    return g[0] = t,
      g[4] = e,
      g[8] = i,
      g[12] = n,
      g[1] = r,
      g[5] = s,
      g[9] = o,
      g[13] = a,
      g[2] = l,
      g[6] = h,
      g[10] = c,
      g[14] = u,
      g[3] = p,
      g[7] = d,
      g[11] = f,
      g[15] = m,
      this
  },
  identity: function() {
    return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
      this
  },
  copy: function(t) {
    return this.elements.set(t.elements),
      this
  },
  extractPosition: function(t) {
    return console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition()."),
      this.copyPosition(t)
  },
  copyPosition: function(t) {
    var e = this.elements
      , t = t.elements;
    return e[12] = t[12],
      e[13] = t[13],
      e[14] = t[14],
      this
  },
  extractRotation: function() {
    var t = new THREE.Vector3;
    return function(e) {
      var i = this.elements
        , e = e.elements
        , n = 1 / t.set(e[0], e[1], e[2]).length()
        , r = 1 / t.set(e[4], e[5], e[6]).length()
        , s = 1 / t.set(e[8], e[9], e[10]).length();
      return i[0] = e[0] * n,
        i[1] = e[1] * n,
        i[2] = e[2] * n,
        i[4] = e[4] * r,
        i[5] = e[5] * r,
        i[6] = e[6] * r,
        i[8] = e[8] * s,
        i[9] = e[9] * s,
        i[10] = e[10] * s,
        this
    }
  }(),
  makeRotationFromEuler: function(t) {
    !1 == t instanceof THREE.Euler && console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");
    var e = this.elements
      , i = t.x
      , n = t.y
      , r = t.z
      , s = Math.cos(i)
      , i = Math.sin(i)
      , o = Math.cos(n)
      , n = Math.sin(n)
      , a = Math.cos(r)
      , r = Math.sin(r);
    if ("XYZ" === t.order) {
      var t = s * a
        , l = s * r
        , h = i * a
        , c = i * r;
      e[0] = o * a,
        e[4] = -o * r,
        e[8] = n,
        e[1] = l + h * n,
        e[5] = t - c * n,
        e[9] = -i * o,
        e[2] = c - t * n,
        e[6] = h + l * n,
        e[10] = s * o
    } else
      "YXZ" === t.order ? (t = o * a,
        l = o * r,
        h = n * a,
        c = n * r,
        e[0] = t + c * i,
        e[4] = h * i - l,
        e[8] = s * n,
        e[1] = s * r,
        e[5] = s * a,
        e[9] = -i,
        e[2] = l * i - h,
        e[6] = c + t * i,
        e[10] = s * o) : "ZXY" === t.order ? (t = o * a,
        l = o * r,
        h = n * a,
        c = n * r,
        e[0] = t - c * i,
        e[4] = -s * r,
        e[8] = h + l * i,
        e[1] = l + h * i,
        e[5] = s * a,
        e[9] = c - t * i,
        e[2] = -s * n,
        e[6] = i,
        e[10] = s * o) : "ZYX" === t.order ? (t = s * a,
        l = s * r,
        h = i * a,
        c = i * r,
        e[0] = o * a,
        e[4] = h * n - l,
        e[8] = t * n + c,
        e[1] = o * r,
        e[5] = c * n + t,
        e[9] = l * n - h,
        e[2] = -n,
        e[6] = i * o,
        e[10] = s * o) : "YZX" === t.order ? (t = s * o,
        l = s * n,
        h = i * o,
        c = i * n,
        e[0] = o * a,
        e[4] = c - t * r,
        e[8] = h * r + l,
        e[1] = r,
        e[5] = s * a,
        e[9] = -i * a,
        e[2] = -n * a,
        e[6] = l * r + h,
        e[10] = t - c * r) : "XZY" === t.order && (t = s * o,
        l = s * n,
        h = i * o,
        c = i * n,
        e[0] = o * a,
        e[4] = -r,
        e[8] = n * a,
        e[1] = t * r + c,
        e[5] = s * a,
        e[9] = l * r - h,
        e[2] = h * r - l,
        e[6] = i * a,
        e[10] = c * r + t);
    return e[3] = 0,
      e[7] = 0,
      e[11] = 0,
      e[12] = 0,
      e[13] = 0,
      e[14] = 0,
      e[15] = 1,
      this
  },
  setRotationFromQuaternion: function(t) {
    return console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code."),
      this.makeRotationFromQuaternion(t)
  },
  makeRotationFromQuaternion: function(t) {
    var e = this.elements
      , i = t.x
      , n = t.y
      , r = t.z
      , s = t.w
      , o = i + i
      , a = n + n
      , l = r + r
      , t = i * o
      , h = i * a
      , i = i * l
      , c = n * a
      , n = n * l
      , r = r * l
      , o = s * o
      , a = s * a
      , s = s * l;
    return e[0] = 1 - (c + r),
      e[4] = h - s,
      e[8] = i + a,
      e[1] = h + s,
      e[5] = 1 - (t + r),
      e[9] = n - o,
      e[2] = i - a,
      e[6] = n + o,
      e[10] = 1 - (t + c),
      e[3] = 0,
      e[7] = 0,
      e[11] = 0,
      e[12] = 0,
      e[13] = 0,
      e[14] = 0,
      e[15] = 1,
      this
  },
  lookAt: function() {
    var t = new THREE.Vector3
      , e = new THREE.Vector3
      , i = new THREE.Vector3;
    return function(n, r, s) {
      var o = this.elements;
      return i.subVectors(n, r).normalize(),
      0 === i.length() && (i.z = 1),
        t.crossVectors(s, i).normalize(),
      0 === t.length() && (i.x += 1e-4,
        t.crossVectors(s, i).normalize()),
        e.crossVectors(i, t),
        o[0] = t.x,
        o[4] = e.x,
        o[8] = i.x,
        o[1] = t.y,
        o[5] = e.y,
        o[9] = i.y,
        o[2] = t.z,
        o[6] = e.z,
        o[10] = i.z,
        this
    }
  }(),
  multiply: function(t, e) {
    return void 0 !== e ? (console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),
      this.multiplyMatrices(t, e)) : this.multiplyMatrices(this, t)
  },
  multiplyMatrices: function(t, e) {
    var i = t.elements
      , n = e.elements
      , r = this.elements
      , s = i[0]
      , o = i[4]
      , a = i[8]
      , l = i[12]
      , h = i[1]
      , c = i[5]
      , u = i[9]
      , p = i[13]
      , d = i[2]
      , f = i[6]
      , m = i[10]
      , g = i[14]
      , v = i[3]
      , y = i[7]
      , E = i[11]
      , i = i[15]
      , T = n[0]
      , x = n[4]
      , b = n[8]
      , w = n[12]
      , _ = n[1]
      , R = n[5]
      , S = n[9]
      , H = n[13]
      , M = n[2]
      , C = n[6]
      , P = n[10]
      , A = n[14]
      , L = n[3]
      , D = n[7]
      , k = n[11]
      , n = n[15];
    return r[0] = s * T + o * _ + a * M + l * L,
      r[4] = s * x + o * R + a * C + l * D,
      r[8] = s * b + o * S + a * P + l * k,
      r[12] = s * w + o * H + a * A + l * n,
      r[1] = h * T + c * _ + u * M + p * L,
      r[5] = h * x + c * R + u * C + p * D,
      r[9] = h * b + c * S + u * P + p * k,
      r[13] = h * w + c * H + u * A + p * n,
      r[2] = d * T + f * _ + m * M + g * L,
      r[6] = d * x + f * R + m * C + g * D,
      r[10] = d * b + f * S + m * P + g * k,
      r[14] = d * w + f * H + m * A + g * n,
      r[3] = v * T + y * _ + E * M + i * L,
      r[7] = v * x + y * R + E * C + i * D,
      r[11] = v * b + y * S + E * P + i * k,
      r[15] = v * w + y * H + E * A + i * n,
      this
  },
  multiplyToArray: function(t, e, i) {
    var n = this.elements;
    return this.multiplyMatrices(t, e),
      i[0] = n[0],
      i[1] = n[1],
      i[2] = n[2],
      i[3] = n[3],
      i[4] = n[4],
      i[5] = n[5],
      i[6] = n[6],
      i[7] = n[7],
      i[8] = n[8],
      i[9] = n[9],
      i[10] = n[10],
      i[11] = n[11],
      i[12] = n[12],
      i[13] = n[13],
      i[14] = n[14],
      i[15] = n[15],
      this
  },
  multiplyScalar: function(t) {
    var e = this.elements;
    return e[0] *= t,
      e[4] *= t,
      e[8] *= t,
      e[12] *= t,
      e[1] *= t,
      e[5] *= t,
      e[9] *= t,
      e[13] *= t,
      e[2] *= t,
      e[6] *= t,
      e[10] *= t,
      e[14] *= t,
      e[3] *= t,
      e[7] *= t,
      e[11] *= t,
      e[15] *= t,
      this
  },
  multiplyVector3: function(t) {
    return console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),
      t.applyProjection(this)
  },
  multiplyVector4: function(t) {
    return console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),
      t.applyMatrix4(this)
  },
  multiplyVector3Array: function() {
    var t = new THREE.Vector3;
    return function(e) {
      for (var i = 0, n = e.length; n > i; i += 3)
        t.x = e[i],
          t.y = e[i + 1],
          t.z = e[i + 2],
          t.applyProjection(this),
          e[i] = t.x,
          e[i + 1] = t.y,
          e[i + 2] = t.z;
      return e
    }
  }(),
  rotateAxis: function(t) {
    console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),
      t.transformDirection(this)
  },
  crossVector: function(t) {
    return console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),
      t.applyMatrix4(this)
  },
  determinant: function() {
    var t = this.elements
      , e = t[0]
      , i = t[4]
      , n = t[8]
      , r = t[12]
      , s = t[1]
      , o = t[5]
      , a = t[9]
      , l = t[13]
      , h = t[2]
      , c = t[6]
      , u = t[10]
      , p = t[14];
    return t[3] * (+r * a * c - n * l * c - r * o * u + i * l * u + n * o * p - i * a * p) + t[7] * (+e * a * p - e * l * u + r * s * u - n * s * p + n * l * h - r * a * h) + t[11] * (+e * l * c - e * o * p - r * s * c + i * s * p + r * o * h - i * l * h) + t[15] * (-n * o * h - e * a * c + e * o * u + n * s * c - i * s * u + i * a * h)
  },
  transpose: function() {
    var t, e = this.elements;
    return t = e[1],
      e[1] = e[4],
      e[4] = t,
      t = e[2],
      e[2] = e[8],
      e[8] = t,
      t = e[6],
      e[6] = e[9],
      e[9] = t,
      t = e[3],
      e[3] = e[12],
      e[12] = t,
      t = e[7],
      e[7] = e[13],
      e[13] = t,
      t = e[11],
      e[11] = e[14],
      e[14] = t,
      this
  },
  flattenToArray: function(t) {
    var e = this.elements;
    return t[0] = e[0],
      t[1] = e[1],
      t[2] = e[2],
      t[3] = e[3],
      t[4] = e[4],
      t[5] = e[5],
      t[6] = e[6],
      t[7] = e[7],
      t[8] = e[8],
      t[9] = e[9],
      t[10] = e[10],
      t[11] = e[11],
      t[12] = e[12],
      t[13] = e[13],
      t[14] = e[14],
      t[15] = e[15],
      t
  },
  flattenToArrayOffset: function(t, e) {
    var i = this.elements;
    return t[e] = i[0],
      t[e + 1] = i[1],
      t[e + 2] = i[2],
      t[e + 3] = i[3],
      t[e + 4] = i[4],
      t[e + 5] = i[5],
      t[e + 6] = i[6],
      t[e + 7] = i[7],
      t[e + 8] = i[8],
      t[e + 9] = i[9],
      t[e + 10] = i[10],
      t[e + 11] = i[11],
      t[e + 12] = i[12],
      t[e + 13] = i[13],
      t[e + 14] = i[14],
      t[e + 15] = i[15],
      t
  },
  getPosition: function() {
    var t = new THREE.Vector3;
    return function() {
      console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
      var e = this.elements;
      return t.set(e[12], e[13], e[14])
    }
  }(),
  setPosition: function(t) {
    var e = this.elements;
    return e[12] = t.x,
      e[13] = t.y,
      e[14] = t.z,
      this
  },
  getInverse: function(t, e) {
    var i = this.elements
      , n = t.elements
      , r = n[0]
      , s = n[4]
      , o = n[8]
      , a = n[12]
      , l = n[1]
      , h = n[5]
      , c = n[9]
      , u = n[13]
      , p = n[2]
      , d = n[6]
      , f = n[10]
      , m = n[14]
      , g = n[3]
      , v = n[7]
      , y = n[11]
      , n = n[15];
    if (i[0] = c * m * v - u * f * v + u * d * y - h * m * y - c * d * n + h * f * n,
        i[4] = a * f * v - o * m * v - a * d * y + s * m * y + o * d * n - s * f * n,
        i[8] = o * u * v - a * c * v + a * h * y - s * u * y - o * h * n + s * c * n,
        i[12] = a * c * d - o * u * d - a * h * f + s * u * f + o * h * m - s * c * m,
        i[1] = u * f * g - c * m * g - u * p * y + l * m * y + c * p * n - l * f * n,
        i[5] = o * m * g - a * f * g + a * p * y - r * m * y - o * p * n + r * f * n,
        i[9] = a * c * g - o * u * g - a * l * y + r * u * y + o * l * n - r * c * n,
        i[13] = o * u * p - a * c * p + a * l * f - r * u * f - o * l * m + r * c * m,
        i[2] = h * m * g - u * d * g + u * p * v - l * m * v - h * p * n + l * d * n,
        i[6] = a * d * g - s * m * g - a * p * v + r * m * v + s * p * n - r * d * n,
        i[10] = s * u * g - a * h * g + a * l * v - r * u * v - s * l * n + r * h * n,
        i[14] = a * h * p - s * u * p - a * l * d + r * u * d + s * l * m - r * h * m,
        i[3] = c * d * g - h * f * g - c * p * v + l * f * v + h * p * y - l * d * y,
        i[7] = s * f * g - o * d * g + o * p * v - r * f * v - s * p * y + r * d * y,
        i[11] = o * h * g - s * c * g - o * l * v + r * c * v + s * l * y - r * h * y,
        i[15] = s * c * p - o * h * p + o * l * d - r * c * d - s * l * f + r * h * f,
        i = r * i[0] + l * i[4] + p * i[8] + g * i[12],
      0 == i) {
      if (e)
        throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");
      return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"),
        this.identity(),
        this
    }
    return this.multiplyScalar(1 / i),
      this
  },
  translate: function() {
    console.warn("DEPRECATED: Matrix4's .translate() has been removed.")
  },
  rotateX: function() {
    console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")
  },
  rotateY: function() {
    console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")
  },
  rotateZ: function() {
    console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")
  },
  rotateByAxis: function() {
    console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")
  },
  scale: function(t) {
    var e = this.elements
      , i = t.x
      , n = t.y
      , t = t.z;
    return e[0] *= i,
      e[4] *= n,
      e[8] *= t,
      e[1] *= i,
      e[5] *= n,
      e[9] *= t,
      e[2] *= i,
      e[6] *= n,
      e[10] *= t,
      e[3] *= i,
      e[7] *= n,
      e[11] *= t,
      this
  },
  getMaxScaleOnAxis: function() {
    var t = this.elements;
    return Math.sqrt(Math.max(t[0] * t[0] + t[1] * t[1] + t[2] * t[2], Math.max(t[4] * t[4] + t[5] * t[5] + t[6] * t[6], t[8] * t[8] + t[9] * t[9] + t[10] * t[10])))
  },
  makeTranslation: function(t, e, i) {
    return this.set(1, 0, 0, t, 0, 1, 0, e, 0, 0, 1, i, 0, 0, 0, 1),
      this
  },
  makeRotationX: function(t) {
    var e = Math.cos(t)
      , t = Math.sin(t);
    return this.set(1, 0, 0, 0, 0, e, -t, 0, 0, t, e, 0, 0, 0, 0, 1),
      this
  },
  makeRotationY: function(t) {
    var e = Math.cos(t)
      , t = Math.sin(t);
    return this.set(e, 0, t, 0, 0, 1, 0, 0, -t, 0, e, 0, 0, 0, 0, 1),
      this
  },
  makeRotationZ: function(t) {
    var e = Math.cos(t)
      , t = Math.sin(t);
    return this.set(e, -t, 0, 0, t, e, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
      this
  },
  makeRotationAxis: function(t, e) {
    var i = Math.cos(e)
      , n = Math.sin(e)
      , r = 1 - i
      , s = t.x
      , o = t.y
      , a = t.z
      , l = r * s
      , h = r * o;
    return this.set(l * s + i, l * o - n * a, l * a + n * o, 0, l * o + n * a, h * o + i, h * a - n * s, 0, l * a - n * o, h * a + n * s, r * a * a + i, 0, 0, 0, 0, 1),
      this
  },
  makeScale: function(t, e, i) {
    return this.set(t, 0, 0, 0, 0, e, 0, 0, 0, 0, i, 0, 0, 0, 0, 1),
      this
  },
  compose: function(t, e, i) {
    return this.makeRotationFromQuaternion(e),
      this.scale(i),
      this.setPosition(t),
      this
  },
  decompose: function() {
    var t = new THREE.Vector3
      , e = new THREE.Matrix4;
    return function(i, n, r) {
      var s = this.elements
        , o = t.set(s[0], s[1], s[2]).length()
        , a = t.set(s[4], s[5], s[6]).length()
        , l = t.set(s[8], s[9], s[10]).length();
      0 > this.determinant() && (o = -o),
        i.x = s[12],
        i.y = s[13],
        i.z = s[14],
        e.elements.set(this.elements);
      var i = 1 / o
        , s = 1 / a
        , h = 1 / l;
      return e.elements[0] *= i,
        e.elements[1] *= i,
        e.elements[2] *= i,
        e.elements[4] *= s,
        e.elements[5] *= s,
        e.elements[6] *= s,
        e.elements[8] *= h,
        e.elements[9] *= h,
        e.elements[10] *= h,
        n.setFromRotationMatrix(e),
        r.x = o,
        r.y = a,
        r.z = l,
        this
    }
  }(),
  makeFrustum: function(t, e, i, n, r, s) {
    var o = this.elements;
    return o[0] = 2 * r / (e - t),
      o[4] = 0,
      o[8] = (e + t) / (e - t),
      o[12] = 0,
      o[1] = 0,
      o[5] = 2 * r / (n - i),
      o[9] = (n + i) / (n - i),
      o[13] = 0,
      o[2] = 0,
      o[6] = 0,
      o[10] = -(s + r) / (s - r),
      o[14] = -2 * s * r / (s - r),
      o[3] = 0,
      o[7] = 0,
      o[11] = -1,
      o[15] = 0,
      this
  },
  makePerspective: function(t, e, i, n) {
    var t = i * Math.tan(THREE.Math.degToRad(.5 * t))
      , r = -t;
    return this.makeFrustum(r * e, t * e, r, t, i, n)
  },
  makeOrthographic: function(t, e, i, n, r, s) {
    var o = this.elements
      , a = e - t
      , l = i - n
      , h = s - r;
    return o[0] = 2 / a,
      o[4] = 0,
      o[8] = 0,
      o[12] = -((e + t) / a),
      o[1] = 0,
      o[5] = 2 / l,
      o[9] = 0,
      o[13] = -((i + n) / l),
      o[2] = 0,
      o[6] = 0,
      o[10] = -2 / h,
      o[14] = -((s + r) / h),
      o[3] = 0,
      o[7] = 0,
      o[11] = 0,
      o[15] = 1,
      this
  },
  fromArray: function(t) {
    return this.elements.set(t),
      this
  },
  toArray: function() {
    var t = this.elements;
    return [t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8], t[9], t[10], t[11], t[12], t[13], t[14], t[15]]
  },
  clone: function() {
    var t = this.elements;
    return new THREE.Matrix4(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])
  }
},
THREE.Ray = function(t, e) {
  this.origin = void 0 !== t ? t : new THREE.Vector3,
    this.direction = void 0 !== e ? e : new THREE.Vector3
}
,
THREE.Ray.prototype = {
  constructor: THREE.Ray,
  set: function(t, e) {
    return this.origin.copy(t),
      this.direction.copy(e),
      this
  },
  copy: function(t) {
    return this.origin.copy(t.origin),
      this.direction.copy(t.direction),
      this
  },
  at: function(t, e) {
    return (e || new THREE.Vector3).copy(this.direction).multiplyScalar(t).add(this.origin)
  },
  recast: function() {
    var t = new THREE.Vector3;
    return function(e) {
      return this.origin.copy(this.at(e, t)),
        this
    }
  }(),
  closestPointToPoint: function(t, e) {
    var i = e || new THREE.Vector3;
    i.subVectors(t, this.origin);
    var n = i.dot(this.direction);
    return 0 > n ? i.copy(this.origin) : i.copy(this.direction).multiplyScalar(n).add(this.origin)
  },
  distanceToPoint: function() {
    var t = new THREE.Vector3;
    return function(e) {
      var i = t.subVectors(e, this.origin).dot(this.direction);
      return 0 > i ? this.origin.distanceTo(e) : (t.copy(this.direction).multiplyScalar(i).add(this.origin),
        t.distanceTo(e))
    }
  }(),
  distanceSqToSegment: function(t, e, i, n) {
    var r, s, o = t.clone().add(e).multiplyScalar(.5), a = e.clone().sub(t).normalize(), l = .5 * t.distanceTo(e), h = this.origin.clone().sub(o), t = -this.direction.dot(a), e = h.dot(this.direction), c = -h.dot(a), u = h.lengthSq(), p = Math.abs(1 - t * t);
    return p >= 0 ? (h = t * c - e,
      r = t * e - c,
      s = l * p,
      h >= 0 ? r >= -s ? s >= r ? (l = 1 / p,
        h *= l,
        r *= l,
        t = h * (h + t * r + 2 * e) + r * (t * h + r + 2 * c) + u) : (r = l,
        h = Math.max(0, -(t * r + e)),
        t = -h * h + r * (r + 2 * c) + u) : (r = -l,
        h = Math.max(0, -(t * r + e)),
        t = -h * h + r * (r + 2 * c) + u) : -s >= r ? (h = Math.max(0, -(-t * l + e)),
        r = h > 0 ? -l : Math.min(Math.max(-l, -c), l),
        t = -h * h + r * (r + 2 * c) + u) : s >= r ? (h = 0,
        r = Math.min(Math.max(-l, -c), l),
        t = r * (r + 2 * c) + u) : (h = Math.max(0, -(t * l + e)),
        r = h > 0 ? l : Math.min(Math.max(-l, -c), l),
        t = -h * h + r * (r + 2 * c) + u)) : (r = t > 0 ? -l : l,
      h = Math.max(0, -(t * r + e)),
      t = -h * h + r * (r + 2 * c) + u),
    i && i.copy(this.direction.clone().multiplyScalar(h).add(this.origin)),
    n && n.copy(a.clone().multiplyScalar(r).add(o)),
      t
  },
  isIntersectionSphere: function(t) {
    return this.distanceToPoint(t.center) <= t.radius
  },
  isIntersectionPlane: function(t) {
    var e = t.distanceToPoint(this.origin);
    return 0 === e || 0 > t.normal.dot(this.direction) * e ? !0 : !1
  },
  distanceToPlane: function(t) {
    var e = t.normal.dot(this.direction);
    return 0 == e ? 0 == t.distanceToPoint(this.origin) ? 0 : null : (t = -(this.origin.dot(t.normal) + t.constant) / e,
      t >= 0 ? t : null)
  },
  intersectPlane: function(t, e) {
    var i = this.distanceToPlane(t);
    return null === i ? null : this.at(i, e)
  },
  isIntersectionBox: function() {
    var t = new THREE.Vector3;
    return function(e) {
      return null !== this.intersectBox(e, t)
    }
  }(),
  intersectBox: function(t, e) {
    var i, n, r, s, o;
    n = 1 / this.direction.x,
      s = 1 / this.direction.y,
      o = 1 / this.direction.z;
    var a = this.origin;
    return n >= 0 ? (i = (t.min.x - a.x) * n,
      n *= t.max.x - a.x) : (i = (t.max.x - a.x) * n,
      n *= t.min.x - a.x),
      s >= 0 ? (r = (t.min.y - a.y) * s,
        s *= t.max.y - a.y) : (r = (t.max.y - a.y) * s,
        s *= t.min.y - a.y),
      i > s || r > n ? null : ((r > i || i !== i) && (i = r),
      (n > s || n !== n) && (n = s),
        o >= 0 ? (r = (t.min.z - a.z) * o,
          o *= t.max.z - a.z) : (r = (t.max.z - a.z) * o,
          o *= t.min.z - a.z),
        i > o || r > n ? null : ((r > i || i !== i) && (i = r),
        (n > o || n !== n) && (n = o),
          0 > n ? null : this.at(i >= 0 ? i : n, e)))
  },
  intersectTriangle: function() {
    var t = new THREE.Vector3
      , e = new THREE.Vector3
      , i = new THREE.Vector3
      , n = new THREE.Vector3;
    return function(r, s, o, a, l) {
      if (e.subVectors(s, r),
          i.subVectors(o, r),
          n.crossVectors(e, i),
          s = this.direction.dot(n),
        s > 0) {
        if (a)
          return null;
        a = 1
      } else {
        if (!(0 > s))
          return null;
        a = -1,
          s = -s
      }
      return t.subVectors(this.origin, r),
        r = a * this.direction.dot(i.crossVectors(t, i)),
        0 > r ? null : (o = a * this.direction.dot(e.cross(t)),
          0 > o || r + o > s ? null : (r = -a * t.dot(n),
            0 > r ? null : this.at(r / s, l)))
    }
  }(),
  applyMatrix4: function(t) {
    return this.direction.add(this.origin).applyMatrix4(t),
      this.origin.applyMatrix4(t),
      this.direction.sub(this.origin),
      this.direction.normalize(),
      this
  },
  equals: function(t) {
    return t.origin.equals(this.origin) && t.direction.equals(this.direction)
  },
  clone: function() {
    return (new THREE.Ray).copy(this)
  }
},
THREE.Sphere = function(t, e) {
  this.center = void 0 !== t ? t : new THREE.Vector3,
    this.radius = void 0 !== e ? e : 0
}
,
THREE.Sphere.prototype = {
  constructor: THREE.Sphere,
  set: function(t, e) {
    return this.center.copy(t),
      this.radius = e,
      this
  },
  setFromPoints: function() {
    var t = new THREE.Box3;
    return function(e, i) {
      var n = this.center;
      void 0 !== i ? n.copy(i) : t.setFromPoints(e).center(n);
      for (var r = 0, s = 0, o = e.length; o > s; s++)
        r = Math.max(r, n.distanceToSquared(e[s]));
      return this.radius = Math.sqrt(r),
        this
    }
  }(),
  copy: function(t) {
    return this.center.copy(t.center),
      this.radius = t.radius,
      this
  },
  empty: function() {
    return 0 >= this.radius
  },
  containsPoint: function(t) {
    return t.distanceToSquared(this.center) <= this.radius * this.radius
  },
  distanceToPoint: function(t) {
    return t.distanceTo(this.center) - this.radius
  },
  intersectsSphere: function(t) {
    var e = this.radius + t.radius;
    return t.center.distanceToSquared(this.center) <= e * e
  },
  clampPoint: function(t, e) {
    var i = this.center.distanceToSquared(t)
      , n = e || new THREE.Vector3;
    return n.copy(t),
    i > this.radius * this.radius && (n.sub(this.center).normalize(),
      n.multiplyScalar(this.radius).add(this.center)),
      n
  },
  getBoundingBox: function(t) {
    return t = t || new THREE.Box3,
      t.set(this.center, this.center),
      t.expandByScalar(this.radius),
      t
  },
  applyMatrix4: function(t) {
    return this.center.applyMatrix4(t),
      this.radius *= t.getMaxScaleOnAxis(),
      this
  },
  translate: function(t) {
    return this.center.add(t),
      this
  },
  equals: function(t) {
    return t.center.equals(this.center) && t.radius === this.radius
  },
  clone: function() {
    return (new THREE.Sphere).copy(this)
  }
},
THREE.Frustum = function(t, e, i, n, r, s) {
  this.planes = [void 0 !== t ? t : new THREE.Plane, void 0 !== e ? e : new THREE.Plane, void 0 !== i ? i : new THREE.Plane, void 0 !== n ? n : new THREE.Plane, void 0 !== r ? r : new THREE.Plane, void 0 !== s ? s : new THREE.Plane]
}
,
THREE.Frustum.prototype = {
  constructor: THREE.Frustum,
  set: function(t, e, i, n, r, s) {
    var o = this.planes;
    return o[0].copy(t),
      o[1].copy(e),
      o[2].copy(i),
      o[3].copy(n),
      o[4].copy(r),
      o[5].copy(s),
      this
  },
  copy: function(t) {
    for (var e = this.planes, i = 0; 6 > i; i++)
      e[i].copy(t.planes[i]);
    return this
  },
  setFromMatrix: function(t) {
    var e = this.planes
      , i = t.elements
      , t = i[0]
      , n = i[1]
      , r = i[2]
      , s = i[3]
      , o = i[4]
      , a = i[5]
      , l = i[6]
      , h = i[7]
      , c = i[8]
      , u = i[9]
      , p = i[10]
      , d = i[11]
      , f = i[12]
      , m = i[13]
      , g = i[14]
      , i = i[15];
    return e[0].setComponents(s - t, h - o, d - c, i - f).normalize(),
      e[1].setComponents(s + t, h + o, d + c, i + f).normalize(),
      e[2].setComponents(s + n, h + a, d + u, i + m).normalize(),
      e[3].setComponents(s - n, h - a, d - u, i - m).normalize(),
      e[4].setComponents(s - r, h - l, d - p, i - g).normalize(),
      e[5].setComponents(s + r, h + l, d + p, i + g).normalize(),
      this
  },
  intersectsObject: function() {
    var t = new THREE.Sphere;
    return function(e) {
      var i = e.geometry;
      return null === i.boundingSphere && i.computeBoundingSphere(),
        t.copy(i.boundingSphere),
        t.applyMatrix4(e.matrixWorld),
        this.intersectsSphere(t)
    }
  }(),
  intersectsSphere: function(t) {
    for (var e = this.planes, i = t.center, t = -t.radius, n = 0; 6 > n; n++)
      if (e[n].distanceToPoint(i) < t)
        return !1;
    return !0
  },
  intersectsBox: function() {
    var t = new THREE.Vector3
      , e = new THREE.Vector3;
    return function(i) {
      for (var n = this.planes, r = 0; 6 > r; r++) {
        var s = n[r];
        t.x = 0 < s.normal.x ? i.min.x : i.max.x,
          e.x = 0 < s.normal.x ? i.max.x : i.min.x,
          t.y = 0 < s.normal.y ? i.min.y : i.max.y,
          e.y = 0 < s.normal.y ? i.max.y : i.min.y,
          t.z = 0 < s.normal.z ? i.min.z : i.max.z,
          e.z = 0 < s.normal.z ? i.max.z : i.min.z;
        var o = s.distanceToPoint(t)
          , s = s.distanceToPoint(e);
        if (0 > o && 0 > s)
          return !1
      }
      return !0
    }
  }(),
  containsPoint: function(t) {
    for (var e = this.planes, i = 0; 6 > i; i++)
      if (0 > e[i].distanceToPoint(t))
        return !1;
    return !0
  },
  clone: function() {
    return (new THREE.Frustum).copy(this)
  }
},
THREE.Plane = function(t, e) {
  this.normal = void 0 !== t ? t : new THREE.Vector3(1,0,0),
    this.constant = void 0 !== e ? e : 0
}
,
THREE.Plane.prototype = {
  constructor: THREE.Plane,
  set: function(t, e) {
    return this.normal.copy(t),
      this.constant = e,
      this
  },
  setComponents: function(t, e, i, n) {
    return this.normal.set(t, e, i),
      this.constant = n,
      this
  },
  setFromNormalAndCoplanarPoint: function(t, e) {
    return this.normal.copy(t),
      this.constant = -e.dot(this.normal),
      this
  },
  setFromCoplanarPoints: function() {
    var t = new THREE.Vector3
      , e = new THREE.Vector3;
    return function(i, n, r) {
      return n = t.subVectors(r, n).cross(e.subVectors(i, n)).normalize(),
        this.setFromNormalAndCoplanarPoint(n, i),
        this
    }
  }(),
  copy: function(t) {
    return this.normal.copy(t.normal),
      this.constant = t.constant,
      this
  },
  normalize: function() {
    var t = 1 / this.normal.length();
    return this.normal.multiplyScalar(t),
      this.constant *= t,
      this
  },
  negate: function() {
    return this.constant *= -1,
      this.normal.negate(),
      this
  },
  distanceToPoint: function(t) {
    return this.normal.dot(t) + this.constant
  },
  distanceToSphere: function(t) {
    return this.distanceToPoint(t.center) - t.radius
  },
  projectPoint: function(t, e) {
    return this.orthoPoint(t, e).sub(t).negate()
  },
  orthoPoint: function(t, e) {
    var i = this.distanceToPoint(t);
    return (e || new THREE.Vector3).copy(this.normal).multiplyScalar(i)
  },
  isIntersectionLine: function(t) {
    var e = this.distanceToPoint(t.start)
      , t = this.distanceToPoint(t.end);
    return 0 > e && t > 0 || 0 > t && e > 0
  },
  intersectLine: function() {
    var t = new THREE.Vector3;
    return function(e, i) {
      var n = i || new THREE.Vector3
        , r = e.delta(t)
        , s = this.normal.dot(r);
      return 0 != s ? (s = -(e.start.dot(this.normal) + this.constant) / s,
        0 > s || s > 1 ? void 0 : n.copy(r).multiplyScalar(s).add(e.start)) : 0 == this.distanceToPoint(e.start) ? n.copy(e.start) : void 0
    }
  }(),
  coplanarPoint: function(t) {
    return (t || new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)
  },
  applyMatrix4: function() {
    var t = new THREE.Vector3
      , e = new THREE.Vector3
      , i = new THREE.Matrix3;
    return function(n, r) {
      var s = r || i.getNormalMatrix(n)
        , s = t.copy(this.normal).applyMatrix3(s)
        , o = this.coplanarPoint(e);
      return o.applyMatrix4(n),
        this.setFromNormalAndCoplanarPoint(s, o),
        this
    }
  }(),
  translate: function(t) {
    return this.constant -= t.dot(this.normal),
      this
  },
  equals: function(t) {
    return t.normal.equals(this.normal) && t.constant == this.constant
  },
  clone: function() {
    return (new THREE.Plane).copy(this)
  }
},
THREE.Math = {
  PI2: 2 * Math.PI,
  generateUUID: function() {
    var t, e = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), i = Array(36), n = 0;
    return function() {
      for (var r = 0; 36 > r; r++)
        8 == r || 13 == r || 18 == r || 23 == r ? i[r] = "-" : 14 == r ? i[r] = "4" : (2 >= n && (n = 33554432 + 16777216 * Math.random() | 0),
          t = 15 & n,
          n >>= 4,
          i[r] = e[19 == r ? 3 & t | 8 : t]);
      return i.join("")
    }
  }(),
  clamp: function(t, e, i) {
    return e > t ? e : t > i ? i : t
  },
  clampBottom: function(t, e) {
    return e > t ? e : t
  },
  mapLinear: function(t, e, i, n, r) {
    return n + (t - e) * (r - n) / (i - e)
  },
  smoothstep: function(t, e, i) {
    return e >= t ? 0 : t >= i ? 1 : (t = (t - e) / (i - e),
    t * t * (3 - 2 * t))
  },
  smootherstep: function(t, e, i) {
    return e >= t ? 0 : t >= i ? 1 : (t = (t - e) / (i - e),
    t * t * t * (t * (6 * t - 15) + 10))
  },
  random16: function() {
    return (65280 * Math.random() + 255 * Math.random()) / 65535
  },
  randInt: function(t, e) {
    return t + Math.floor(Math.random() * (e - t + 1))
  },
  randFloat: function(t, e) {
    return t + Math.random() * (e - t)
  },
  randFloatSpread: function(t) {
    return t * (.5 - Math.random())
  },
  sign: function(t) {
    return 0 > t ? -1 : t > 0 ? 1 : 0
  },
  degToRad: function() {
    var t = Math.PI / 180;
    return function(e) {
      return e * t
    }
  }(),
  radToDeg: function() {
    var t = 180 / Math.PI;
    return function(e) {
      return e * t
    }
  }()
},
THREE.Spline = function(t) {
  function e(t, e, i, n, r, s, o) {
    return t = .5 * (i - t),
      n = .5 * (n - e),
    (2 * (e - i) + t + n) * o + (-3 * (e - i) - 2 * t - n) * s + t * r + e
  }
  this.points = t;
  var i, n, r, s, o, a, l, h, c, u = [], p = {
    x: 0,
    y: 0,
    z: 0
  };
  this.initFromArray = function(t) {
    this.points = [];
    for (var e = 0; e < t.length; e++)
      this.points[e] = {
        x: t[e][0],
        y: t[e][1],
        z: t[e][2]
      }
  }
    ,
    this.getPoint = function(t) {
      return i = (this.points.length - 1) * t,
        n = Math.floor(i),
        r = i - n,
        u[0] = 0 === n ? n : n - 1,
        u[1] = n,
        u[2] = n > this.points.length - 2 ? this.points.length - 1 : n + 1,
        u[3] = n > this.points.length - 3 ? this.points.length - 1 : n + 2,
        a = this.points[u[0]],
        l = this.points[u[1]],
        h = this.points[u[2]],
        c = this.points[u[3]],
        s = r * r,
        o = r * s,
        p.x = e(a.x, l.x, h.x, c.x, r, s, o),
        p.y = e(a.y, l.y, h.y, c.y, r, s, o),
        p.z = e(a.z, l.z, h.z, c.z, r, s, o),
        p
    }
    ,
    this.getControlPointsArray = function() {
      var t, e, i = this.points.length, n = [];
      for (t = 0; i > t; t++)
        e = this.points[t],
          n[t] = [e.x, e.y, e.z];
      return n
    }
    ,
    this.getLength = function(t) {
      var e, i, n, r = e = e = 0, s = new THREE.Vector3, o = new THREE.Vector3, a = [], l = 0;
      for (a[0] = 0,
           t || (t = 100),
             i = this.points.length * t,
             s.copy(this.points[0]),
             t = 1; i > t; t++)
        e = t / i,
          n = this.getPoint(e),
          o.copy(n),
          l += o.distanceTo(s),
          s.copy(n),
          e *= this.points.length - 1,
          e = Math.floor(e),
        e != r && (a[e] = l,
          r = e);
      return a[a.length] = l,
        {
          chunks: a,
          total: l
        }
    }
    ,
    this.reparametrizeByArcLength = function(t) {
      var e, i, n, r, s, o, a = [], l = new THREE.Vector3, h = this.getLength();
      for (a.push(l.copy(this.points[0]).clone()),
             e = 1; e < this.points.length; e++) {
        for (i = h.chunks[e] - h.chunks[e - 1],
               o = Math.ceil(t * i / h.total),
               r = (e - 1) / (this.points.length - 1),
               s = e / (this.points.length - 1),
               i = 1; o - 1 > i; i++)
          n = r + i * (1 / o) * (s - r),
            n = this.getPoint(n),
            a.push(l.copy(n).clone());
        a.push(l.copy(this.points[e]).clone())
      }
      this.points = a
    }
}
,
THREE.Triangle = function(t, e, i) {
  this.a = void 0 !== t ? t : new THREE.Vector3,
    this.b = void 0 !== e ? e : new THREE.Vector3,
    this.c = void 0 !== i ? i : new THREE.Vector3
}
,
THREE.Triangle.normal = function() {
  var t = new THREE.Vector3;
  return function(e, i, n, r) {
    return r = r || new THREE.Vector3,
      r.subVectors(n, i),
      t.subVectors(e, i),
      r.cross(t),
      e = r.lengthSq(),
      e > 0 ? r.multiplyScalar(1 / Math.sqrt(e)) : r.set(0, 0, 0)
  }
}(),
THREE.Triangle.barycoordFromPoint = function() {
  var t = new THREE.Vector3
    , e = new THREE.Vector3
    , i = new THREE.Vector3;
  return function(n, r, s, o, a) {
    t.subVectors(o, r),
      e.subVectors(s, r),
      i.subVectors(n, r);
    var n = t.dot(t)
      , r = t.dot(e)
      , s = t.dot(i)
      , l = e.dot(e)
      , o = e.dot(i)
      , h = n * l - r * r
      , a = a || new THREE.Vector3;
    return 0 == h ? a.set(-2, -1, -1) : (h = 1 / h,
      l = (l * s - r * o) * h,
      n = (n * o - r * s) * h,
      a.set(1 - l - n, n, l))
  }
}(),
THREE.Triangle.containsPoint = function() {
  var t = new THREE.Vector3;
  return function(e, i, n, r) {
    return e = THREE.Triangle.barycoordFromPoint(e, i, n, r, t),
    0 <= e.x && 0 <= e.y && 1 >= e.x + e.y
  }
}(),
THREE.Triangle.prototype = {
  constructor: THREE.Triangle,
  set: function(t, e, i) {
    return this.a.copy(t),
      this.b.copy(e),
      this.c.copy(i),
      this
  },
  setFromPointsAndIndices: function(t, e, i, n) {
    return this.a.copy(t[e]),
      this.b.copy(t[i]),
      this.c.copy(t[n]),
      this
  },
  copy: function(t) {
    return this.a.copy(t.a),
      this.b.copy(t.b),
      this.c.copy(t.c),
      this
  },
  area: function() {
    var t = new THREE.Vector3
      , e = new THREE.Vector3;
    return function() {
      return t.subVectors(this.c, this.b),
        e.subVectors(this.a, this.b),
      .5 * t.cross(e).length()
    }
  }(),
  midpoint: function(t) {
    return (t || new THREE.Vector3).addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
  },
  normal: function(t) {
    return THREE.Triangle.normal(this.a, this.b, this.c, t)
  },
  plane: function(t) {
    return (t || new THREE.Plane).setFromCoplanarPoints(this.a, this.b, this.c)
  },
  barycoordFromPoint: function(t, e) {
    return THREE.Triangle.barycoordFromPoint(t, this.a, this.b, this.c, e)
  },
  containsPoint: function(t) {
    return THREE.Triangle.containsPoint(t, this.a, this.b, this.c)
  },
  equals: function(t) {
    return t.a.equals(this.a) && t.b.equals(this.b) && t.c.equals(this.c)
  },
  clone: function() {
    return (new THREE.Triangle).copy(this)
  }
},
THREE.Vertex = function(t) {
  return console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead."),
    t
}
,
THREE.UV = function(t, e) {
  return console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead."),
    new THREE.Vector2(t,e)
}
,
THREE.Clock = function(t) {
  this.autoStart = void 0 !== t ? t : !0,
    this.elapsedTime = this.oldTime = this.startTime = 0,
    this.running = !1
}
,
THREE.Clock.prototype = {
  constructor: THREE.Clock,
  start: function() {
    this.oldTime = this.startTime = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now(),
      this.running = !0
  },
  stop: function() {
    this.getElapsedTime(),
      this.running = !1
  },
  getElapsedTime: function() {
    return this.getDelta(),
      this.elapsedTime
  },
  getDelta: function() {
    var t = 0;
    if (this.autoStart && !this.running && this.start(),
        this.running) {
      var e = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now()
        , t = .001 * (e - this.oldTime);
      this.oldTime = e,
        this.elapsedTime += t
    }
    return t
  }
},
THREE.EventDispatcher = function() {}
,
THREE.EventDispatcher.prototype = {
  constructor: THREE.EventDispatcher,
  apply: function(t) {
    t.addEventListener = THREE.EventDispatcher.prototype.addEventListener,
      t.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener,
      t.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener,
      t.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent
  },
  addEventListener: function(t, e) {
    void 0 === this._listeners && (this._listeners = {});
    var i = this._listeners;
    void 0 === i[t] && (i[t] = []),
    -1 === i[t].indexOf(e) && i[t].push(e)
  },
  hasEventListener: function(t, e) {
    if (void 0 === this._listeners)
      return !1;
    var i = this._listeners;
    return void 0 !== i[t] && -1 !== i[t].indexOf(e) ? !0 : !1
  },
  removeEventListener: function(t, e) {
    if (void 0 !== this._listeners) {
      var i = this._listeners[t];
      if (void 0 !== i) {
        var n = i.indexOf(e);
        -1 !== n && i.splice(n, 1)
      }
    }
  },
  dispatchEvent: function() {
    var t = [];
    return function(e) {
      if (void 0 !== this._listeners) {
        var i = this._listeners[e.type];
        if (void 0 !== i) {
          e.target = this;
          for (var n = i.length, r = 0; n > r; r++)
            t[r] = i[r];
          for (r = 0; n > r; r++)
            t[r].call(this, e)
        }
      }
    }
  }()
},
function(t) {
  t.Raycaster = function(e, i, n, r) {
    this.ray = new t.Ray(e,i),
      this.near = n || 0,
      this.far = r || 1 / 0
  }
  ;
  var e = new t.Sphere
    , i = new t.Ray;
  new t.Plane,
    new t.Vector3;
  var n = new t.Vector3
    , r = new t.Matrix4
    , s = function(t, e) {
    return t.distance - e.distance
  }
    , o = new t.Vector3
    , a = new t.Vector3
    , l = new t.Vector3
    , h = function(s, c, u) {
    if (s instanceof t.Sprite) {
      n.setFromMatrixPosition(s.matrixWorld);
      var p = c.ray.distanceToPoint(n);
      if (p > s.scale.x)
        return u;
      u.push({
        distance: p,
        point: s.position,
        face: null,
        object: s
      })
    } else if (s instanceof t.LOD)
      n.setFromMatrixPosition(s.matrixWorld),
        p = c.ray.origin.distanceTo(n),
        h(s.getObjectForDistance(p), c, u);
    else if (s instanceof t.Mesh) {
      var d = s.geometry;
      if (null === d.boundingSphere && d.computeBoundingSphere(),
          e.copy(d.boundingSphere),
          e.applyMatrix4(s.matrixWorld),
        !1 === c.ray.isIntersectionSphere(e))
        return u;
      if (r.getInverse(s.matrixWorld),
          i.copy(c.ray).applyMatrix4(r),
        null !== d.boundingBox && !1 === i.isIntersectionBox(d.boundingBox))
        return u;
      if (d instanceof t.BufferGeometry) {
        var f = s.material;
        if (void 0 === f || !1 === d.dynamic)
          return u;
        var m, g, v = c.precision;
        if (void 0 !== d.attributes.index)
          for (var y = d.offsets, E = d.attributes.index.array, T = d.attributes.position.array, x = d.offsets.length, b = d.attributes.index.array.length / 3, b = 0; x > b; ++b)
            for (var p = y[b].start, w = y[b].index, d = p, _ = p + y[b].count; _ > d; d += 3)
              p = w + E[d],
                m = w + E[d + 1],
                g = w + E[d + 2],
                o.set(T[3 * p], T[3 * p + 1], T[3 * p + 2]),
                a.set(T[3 * m], T[3 * m + 1], T[3 * m + 2]),
                l.set(T[3 * g], T[3 * g + 1], T[3 * g + 2]),
                m = f.side === t.BackSide ? i.intersectTriangle(l, a, o, !0) : i.intersectTriangle(o, a, l, f.side !== t.DoubleSide),
              null !== m && (m.applyMatrix4(s.matrixWorld),
                p = c.ray.origin.distanceTo(m),
              v > p || p < c.near || p > c.far || u.push({
                distance: p,
                point: m,
                face: null,
                faceIndex: null,
                object: s
              }));
        else
          for (T = d.attributes.position.array,
                 b = d.attributes.position.array.length,
                 d = 0; b > d; d += 3)
            p = d,
              m = d + 1,
              g = d + 2,
              o.set(T[3 * p], T[3 * p + 1], T[3 * p + 2]),
              a.set(T[3 * m], T[3 * m + 1], T[3 * m + 2]),
              l.set(T[3 * g], T[3 * g + 1], T[3 * g + 2]),
              m = f.side === t.BackSide ? i.intersectTriangle(l, a, o, !0) : i.intersectTriangle(o, a, l, f.side !== t.DoubleSide),
            null !== m && (m.applyMatrix4(s.matrixWorld),
              p = c.ray.origin.distanceTo(m),
            v > p || p < c.near || p > c.far || u.push({
              distance: p,
              point: m,
              face: null,
              faceIndex: null,
              object: s
            }))
      } else if (d instanceof t.Geometry)
        for (E = s.material instanceof t.MeshFaceMaterial,
               T = !0 === E ? s.material.materials : null,
               v = c.precision,
               y = d.vertices,
               x = 0,
               b = d.faces.length; b > x; x++)
          if (w = d.faces[x],
              f = !0 === E ? T[w.materialIndex] : s.material,
            void 0 !== f) {
            if (p = y[w.a],
                m = y[w.b],
                g = y[w.c],
              !0 === f.morphTargets) {
              var _ = d.morphTargets
                , R = s.morphTargetInfluences;
              o.set(0, 0, 0),
                a.set(0, 0, 0),
                l.set(0, 0, 0);
              for (var S = 0, H = _.length; H > S; S++) {
                var M = R[S];
                if (0 !== M) {
                  var C = _[S].vertices;
                  o.x += (C[w.a].x - p.x) * M,
                    o.y += (C[w.a].y - p.y) * M,
                    o.z += (C[w.a].z - p.z) * M,
                    a.x += (C[w.b].x - m.x) * M,
                    a.y += (C[w.b].y - m.y) * M,
                    a.z += (C[w.b].z - m.z) * M,
                    l.x += (C[w.c].x - g.x) * M,
                    l.y += (C[w.c].y - g.y) * M,
                    l.z += (C[w.c].z - g.z) * M
                }
              }
              o.add(p),
                a.add(m),
                l.add(g),
                p = o,
                m = a,
                g = l
            }
            m = f.side === t.BackSide ? i.intersectTriangle(g, m, p, !0) : i.intersectTriangle(p, m, g, f.side !== t.DoubleSide),
            null !== m && (m.applyMatrix4(s.matrixWorld),
              p = c.ray.origin.distanceTo(m),
            v > p || p < c.near || p > c.far || u.push({
              distance: p,
              point: m,
              face: w,
              faceIndex: x,
              object: s
            }))
          }
    } else if (s instanceof t.Line) {
      if (v = c.linePrecision,
          f = v * v,
          d = s.geometry,
        null === d.boundingSphere && d.computeBoundingSphere(),
          e.copy(d.boundingSphere),
          e.applyMatrix4(s.matrixWorld),
        !1 === c.ray.isIntersectionSphere(e))
        return u;
      if (r.getInverse(s.matrixWorld),
          i.copy(c.ray).applyMatrix4(r),
        d instanceof t.Geometry)
        for (y = d.vertices,
               v = y.length,
               m = new t.Vector3,
               g = new t.Vector3,
               b = s.type === t.LineStrip ? 1 : 2,
               d = 0; v - 1 > d; d += b)
          i.distanceSqToSegment(y[d], y[d + 1], g, m) > f || (p = i.origin.distanceTo(g),
          p < c.near || p > c.far || u.push({
            distance: p,
            point: m.clone().applyMatrix4(s.matrixWorld),
            face: null,
            faceIndex: null,
            object: s
          }))
    }
  }
    , c = function(t, e, i) {
    for (var t = t.getDescendants(), n = 0, r = t.length; r > n; n++)
      h(t[n], e, i)
  };
  t.Raycaster.prototype.precision = 1e-4,
    t.Raycaster.prototype.linePrecision = 1,
    t.Raycaster.prototype.set = function(t, e) {
      this.ray.set(t, e)
    }
    ,
    t.Raycaster.prototype.intersectObject = function(t, e) {
      var i = [];
      return !0 === e && c(t, this, i),
        h(t, this, i),
        i.sort(s),
        i
    }
    ,
    t.Raycaster.prototype.intersectObjects = function(t, e) {
      for (var i = [], n = 0, r = t.length; r > n; n++)
        h(t[n], this, i),
        !0 === e && c(t[n], this, i);
      return i.sort(s),
        i
    }
}(THREE),
THREE.Object3D = function() {
  this.id = THREE.Object3DIdCount++,
    this.uuid = THREE.Math.generateUUID(),
    this.name = "",
    this.parent = void 0,
    this.children = [],
    this.up = new THREE.Vector3(0,1,0),
    this.position = new THREE.Vector3,
    this._rotation = new THREE.Euler,
    this._quaternion = new THREE.Quaternion,
    this.scale = new THREE.Vector3(1,1,1),
    this._rotation._quaternion = this.quaternion,
    this._quaternion._euler = this.rotation,
    this.renderDepth = null,
    this.rotationAutoUpdate = !0,
    this.matrix = new THREE.Matrix4,
    this.matrixWorld = new THREE.Matrix4,
    this.visible = this.matrixWorldNeedsUpdate = this.matrixAutoUpdate = !0,
    this.receiveShadow = this.castShadow = !1,
    this.frustumCulled = !0,
    this.userData = {}
}
,
THREE.Object3D.prototype = {
  constructor: THREE.Object3D,
  get rotation() {
    return this._rotation
  },
  set rotation(t) {
    this._rotation = t,
      this._rotation._quaternion = this._quaternion,
      this._quaternion._euler = this._rotation,
      this._rotation._updateQuaternion()
  },
  get quaternion() {
    return this._quaternion
  },
  set quaternion(t) {
    this._quaternion = t,
      this._quaternion._euler = this._rotation,
      this._rotation._quaternion = this._quaternion,
      this._quaternion._updateEuler()
  },
  get eulerOrder() {
    return console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),
      this.rotation.order
  },
  set eulerOrder(t) {
    console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),
      this.rotation.order = t
  },
  get useQuaternion() {
    console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")
  },
  set useQuaternion(t) {
    console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")
  },
  applyMatrix: function(t) {
    this.matrix.multiplyMatrices(t, this.matrix),
      this.matrix.decompose(this.position, this.quaternion, this.scale)
  },
  setRotationFromAxisAngle: function(t, e) {
    this.quaternion.setFromAxisAngle(t, e)
  },
  setRotationFromEuler: function(t) {
    this.quaternion.setFromEuler(t, !0)
  },
  setRotationFromMatrix: function(t) {
    this.quaternion.setFromRotationMatrix(t)
  },
  setRotationFromQuaternion: function(t) {
    this.quaternion.copy(t)
  },
  rotateOnAxis: function() {
    var t = new THREE.Quaternion;
    return function(e, i) {
      return t.setFromAxisAngle(e, i),
        this.quaternion.multiply(t),
        this
    }
  }(),
  rotateX: function() {
    var t = new THREE.Vector3(1,0,0);
    return function(e) {
      return this.rotateOnAxis(t, e)
    }
  }(),
  rotateY: function() {
    var t = new THREE.Vector3(0,1,0);
    return function(e) {
      return this.rotateOnAxis(t, e)
    }
  }(),
  rotateZ: function() {
    var t = new THREE.Vector3(0,0,1);
    return function(e) {
      return this.rotateOnAxis(t, e)
    }
  }(),
  translateOnAxis: function() {
    var t = new THREE.Vector3;
    return function(e, i) {
      return t.copy(e),
        t.applyQuaternion(this.quaternion),
        this.position.add(t.multiplyScalar(i)),
        this
    }
  }(),
  translate: function(t, e) {
    return console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed."),
      this.translateOnAxis(e, t)
  },
  translateX: function() {
    var t = new THREE.Vector3(1,0,0);
    return function(e) {
      return this.translateOnAxis(t, e)
    }
  }(),
  translateY: function() {
    var t = new THREE.Vector3(0,1,0);
    return function(e) {
      return this.translateOnAxis(t, e)
    }
  }(),
  translateZ: function() {
    var t = new THREE.Vector3(0,0,1);
    return function(e) {
      return this.translateOnAxis(t, e)
    }
  }(),
  localToWorld: function(t) {
    return t.applyMatrix4(this.matrixWorld)
  },
  worldToLocal: function() {
    var t = new THREE.Matrix4;
    return function(e) {
      return e.applyMatrix4(t.getInverse(this.matrixWorld))
    }
  }(),
  lookAt: function() {
    var t = new THREE.Matrix4;
    return function(e) {
      t.lookAt(e, this.position, this.up),
        this.quaternion.setFromRotationMatrix(t)
    }
  }(),
  add: function(t) {
    if (t === this)
      console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");
    else if (t instanceof THREE.Object3D) {
      void 0 !== t.parent && t.parent.remove(t),
        t.parent = this,
        t.dispatchEvent({
          type: "added"
        }),
        this.children.push(t);
      for (var e = this; void 0 !== e.parent; )
        e = e.parent;
      void 0 !== e && e instanceof THREE.Scene && e.__addObject(t)
    }
  },
  remove: function(t) {
    var e = this.children.indexOf(t);
    if (-1 !== e) {
      for (t.parent = void 0,
             t.dispatchEvent({
               type: "removed"
             }),
             this.children.splice(e, 1),
             e = this; void 0 !== e.parent; )
        e = e.parent;
      void 0 !== e && e instanceof THREE.Scene && e.__removeObject(t)
    }
  },
  traverse: function(t) {
    t(this);
    for (var e = 0, i = this.children.length; i > e; e++)
      this.children[e].traverse(t)
  },
  getObjectById: function(t, e) {
    for (var i = 0, n = this.children.length; n > i; i++) {
      var r = this.children[i];
      if (r.id === t || !0 === e && (r = r.getObjectById(t, e),
        void 0 !== r))
        return r
    }
  },
  getObjectByName: function(t, e) {
    for (var i = 0, n = this.children.length; n > i; i++) {
      var r = this.children[i];
      if (r.name === t || !0 === e && (r = r.getObjectByName(t, e),
        void 0 !== r))
        return r
    }
  },
  getChildByName: function(t, e) {
    return console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName()."),
      this.getObjectByName(t, e)
  },
  getDescendants: function(t) {
    void 0 === t && (t = []),
      Array.prototype.push.apply(t, this.children);
    for (var e = 0, i = this.children.length; i > e; e++)
      this.children[e].getDescendants(t);
    return t
  },
  updateMatrix: function() {
    this.matrix.compose(this.position, this.quaternion, this.scale),
      this.matrixWorldNeedsUpdate = !0
  },
  updateMatrixWorld: function(t) {
    !0 === this.matrixAutoUpdate && this.updateMatrix(),
    (!0 === this.matrixWorldNeedsUpdate || !0 === t) && (void 0 === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix),
      this.matrixWorldNeedsUpdate = !1,
      t = !0);
    for (var e = 0, i = this.children.length; i > e; e++)
      this.children[e].updateMatrixWorld(t)
  },
  clone: function(t, e) {
    if (void 0 === t && (t = new THREE.Object3D),
      void 0 === e && (e = !0),
        t.name = this.name,
        t.up.copy(this.up),
        t.position.copy(this.position),
        t.quaternion.copy(this.quaternion),
        t.scale.copy(this.scale),
        t.renderDepth = this.renderDepth,
        t.rotationAutoUpdate = this.rotationAutoUpdate,
        t.matrix.copy(this.matrix),
        t.matrixWorld.copy(this.matrixWorld),
        t.matrixAutoUpdate = this.matrixAutoUpdate,
        t.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate,
        t.visible = this.visible,
        t.castShadow = this.castShadow,
        t.receiveShadow = this.receiveShadow,
        t.frustumCulled = this.frustumCulled,
        t.userData = JSON.parse(JSON.stringify(this.userData)),
      !0 === e)
      for (var i = 0; i < this.children.length; i++)
        t.add(this.children[i].clone());
    return t
  }
},
THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),
THREE.Object3DIdCount = 0,
THREE.Projector = function() {
  function t() {
    if (o === v) {
      var t = new THREE.RenderableVertex;
      return g.push(t),
        v++,
        o++,
        t
    }
    return g[o++]
  }
  function e(t, e) {
    return t.z !== e.z ? e.z - t.z : t.id !== e.id ? t.id - e.id : 0
  }
  function i(t, e) {
    var i = 0
      , n = 1
      , r = t.z + t.w
      , s = e.z + e.w
      , o = -t.z + t.w
      , a = -e.z + e.w;
    return r >= 0 && s >= 0 && o >= 0 && a >= 0 ? !0 : 0 > r && 0 > s || 0 > o && 0 > a ? !1 : (0 > r ? i = Math.max(i, r / (r - s)) : 0 > s && (n = Math.min(n, r / (r - s))),
      0 > o ? i = Math.max(i, o / (o - a)) : 0 > a && (n = Math.min(n, o / (o - a))),
      i > n ? !1 : (t.lerp(e, i),
        e.lerp(t, 1 - n),
        !0))
  }
  var n, r, s, o, a, l, h, c, u, p, d, f = [], m = 0, g = [], v = 0, y = [], E = 0, T = [], x = 0, b = [], w = 0, _ = {
    objects: [],
    sprites: [],
    lights: [],
    elements: []
  }, R = new THREE.Vector3, S = new THREE.Vector3, H = new THREE.Vector3, M = new THREE.Vector3, C = new THREE.Vector4, P = new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)), A = new THREE.Box3, L = Array(3), D = new THREE.Matrix4, k = new THREE.Matrix4, I = new THREE.Matrix4, O = new THREE.Matrix3, z = new THREE.Matrix3, F = new THREE.Vector3, N = new THREE.Frustum, B = new THREE.Vector4, V = new THREE.Vector4;
  this.projectVector = function(t, e) {
    return e.matrixWorldInverse.getInverse(e.matrixWorld),
      k.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse),
      t.applyProjection(k)
  }
  ;
  var U = new THREE.Matrix4;
  this.unprojectVector = function(t, e) {
    return U.getInverse(e.projectionMatrix),
      k.multiplyMatrices(e.matrixWorld, U),
      t.applyProjection(k)
  }
    ,
    this.pickingRay = function(t, e) {
      t.z = -1;
      var i = new THREE.Vector3(t.x,t.y,1);
      return this.unprojectVector(t, e),
        this.unprojectVector(i, e),
        i.sub(t).normalize(),
        new THREE.Raycaster(t,i)
    }
  ;
  var G = function(t) {
    if (r === m) {
      var e = new THREE.RenderableObject;
      f.push(e),
        m++,
        r++,
        n = e
    } else
      n = f[r++];
    return n.id = t.id,
      n.object = t,
      null !== t.renderDepth ? n.z = t.renderDepth : (M.setFromMatrixPosition(t.matrixWorld),
        M.applyProjection(k),
        n.z = M.z),
      n
  }
    , W = function(t) {
    var e = t.positionWorld
      , i = t.positionScreen;
    e.copy(t.position).applyMatrix4(d),
      i.copy(e).applyMatrix4(k),
      e = 1 / i.w,
      i.x *= e,
      i.y *= e,
      i.z *= e,
      t.visible = -1 <= i.x && 1 >= i.x && -1 <= i.y && 1 >= i.y && -1 <= i.z && 1 >= i.z
  }
    , j = function(t) {
    if (!1 !== t.visible) {
      t instanceof THREE.Light ? _.lights.push(t) : t instanceof THREE.Mesh || t instanceof THREE.Line ? (!1 === t.frustumCulled || !0 === N.intersectsObject(t)) && _.objects.push(G(t)) : t instanceof THREE.Sprite && _.sprites.push(G(t));
      for (var e = 0, i = t.children.length; i > e; e++)
        j(t.children[e])
    }
  };
  this.projectScene = function(n, f, m, v) {
    var M, U, G, X, Y, q, $, K, Q, Z = !1;
    p = c = l = 0,
      _.elements.length = 0,
    !0 === n.autoUpdate && n.updateMatrixWorld(),
    void 0 === f.parent && f.updateMatrixWorld(),
      D.copy(f.matrixWorldInverse.getInverse(f.matrixWorld)),
      k.multiplyMatrices(f.projectionMatrix, D),
      z.getNormalMatrix(D),
      N.setFromMatrix(k),
      r = 0,
      _.objects.length = 0,
      _.sprites.length = 0,
      _.lights.length = 0,
      j(n),
    !0 === m && _.objects.sort(e);
    for (var m = 0, J = _.objects.length; J > m; m++)
      if (n = _.objects[m].object,
          d = n.matrixWorld,
          o = 0,
        n instanceof THREE.Mesh) {
        M = n.geometry,
          U = M.vertices,
          G = M.faces,
          Y = M.faceVertexUvs,
          O.getNormalMatrix(d),
          K = n.material instanceof THREE.MeshFaceMaterial,
          Q = !0 === K ? n.material : null;
        for (var te = 0, ee = U.length; ee > te; te++)
          s = t(),
            s.position.copy(U[te]),
            W(s);
        for (te = 0,
               ee = G.length; ee > te; te++) {
          U = G[te];
          var ie = !0 === K ? Q.materials[U.materialIndex] : n.material;
          if (void 0 !== ie) {
            var ne = ie.side;
            if (X = g[U.a],
                q = g[U.b],
                $ = g[U.c],
              !0 === ie.morphTargets) {
              var Z = M.morphTargets
                , re = n.morphTargetInfluences
                , se = X.position
                , oe = q.position
                , ae = $.position;
              R.set(0, 0, 0),
                S.set(0, 0, 0),
                H.set(0, 0, 0);
              for (var le = 0, he = Z.length; he > le; le++) {
                var ce = re[le];
                if (0 !== ce) {
                  var ue = Z[le].vertices;
                  R.x += (ue[U.a].x - se.x) * ce,
                    R.y += (ue[U.a].y - se.y) * ce,
                    R.z += (ue[U.a].z - se.z) * ce,
                    S.x += (ue[U.b].x - oe.x) * ce,
                    S.y += (ue[U.b].y - oe.y) * ce,
                    S.z += (ue[U.b].z - oe.z) * ce,
                    H.x += (ue[U.c].x - ae.x) * ce,
                    H.y += (ue[U.c].y - ae.y) * ce,
                    H.z += (ue[U.c].z - ae.z) * ce
                }
              }
              X.position.add(R),
                q.position.add(S),
                $.position.add(H),
                W(X),
                W(q),
                W($)
            }
            if (L[0] = X.positionScreen,
                L[1] = q.positionScreen,
                L[2] = $.positionScreen,
              (!0 === X.visible || !0 === q.visible || !0 === $.visible || P.isIntersectionBox(A.setFromPoints(L))) && (Z = 0 > ($.positionScreen.x - X.positionScreen.x) * (q.positionScreen.y - X.positionScreen.y) - ($.positionScreen.y - X.positionScreen.y) * (q.positionScreen.x - X.positionScreen.x),
              ne === THREE.DoubleSide || Z === (ne === THREE.FrontSide))) {
              for (l === E ? (re = new THREE.RenderableFace3,
                y.push(re),
                E++,
                l++,
                a = re) : a = y[l++],
                     a.id = n.id,
                     a.v1.copy(X),
                     a.v2.copy(q),
                     a.v3.copy($),
                     a.normalModel.copy(U.normal),
                   !1 === Z && (ne === THREE.BackSide || ne === THREE.DoubleSide) && a.normalModel.negate(),
                     a.normalModel.applyMatrix3(O).normalize(),
                     a.normalModelView.copy(a.normalModel).applyMatrix3(z),
                     a.centroidModel.copy(U.centroid).applyMatrix4(d),
                     X = U.vertexNormals,
                     q = 0,
                     $ = Math.min(X.length, 3); $ > q; q++)
                re = a.vertexNormalsModel[q],
                  re.copy(X[q]),
                !1 === Z && (ne === THREE.BackSide || ne === THREE.DoubleSide) && re.negate(),
                  re.applyMatrix3(O).normalize(),
                  a.vertexNormalsModelView[q].copy(re).applyMatrix3(z);
              for (a.vertexNormalsLength = X.length,
                     q = 0,
                     ne = Math.min(Y.length, 3); ne > q; q++)
                if (X = Y[q][te],
                  void 0 !== X)
                  for ($ = 0,
                         Z = X.length; Z > $; $++)
                    a.uvs[q][$] = X[$];
              a.color = U.color,
                a.material = ie,
                F.copy(a.centroidModel).applyProjection(k),
                a.z = F.z,
                _.elements.push(a)
            }
          }
        }
      } else if (n instanceof THREE.Line)
        for (I.multiplyMatrices(k, d),
               U = n.geometry.vertices,
               X = t(),
               X.positionScreen.copy(U[0]).applyMatrix4(I),
               M = n.type === THREE.LinePieces ? 2 : 1,
               te = 1,
               ee = U.length; ee > te; te++)
          X = t(),
            X.positionScreen.copy(U[te]).applyMatrix4(I),
          (te + 1) % M > 0 || (q = g[o - 2],
            B.copy(X.positionScreen),
            V.copy(q.positionScreen),
          !0 === i(B, V) && (B.multiplyScalar(1 / B.w),
            V.multiplyScalar(1 / V.w),
            c === x ? (G = new THREE.RenderableLine,
              T.push(G),
              x++,
              c++,
              h = G) : h = T[c++],
            h.id = n.id,
            h.v1.positionScreen.copy(B),
            h.v2.positionScreen.copy(V),
            h.z = Math.max(B.z, V.z),
            h.material = n.material,
          n.material.vertexColors === THREE.VertexColors && (h.vertexColors[0].copy(n.geometry.colors[te]),
            h.vertexColors[1].copy(n.geometry.colors[te - 1])),
            _.elements.push(h)));
    for (m = 0,
           J = _.sprites.length; J > m; m++)
      n = _.sprites[m].object,
        d = n.matrixWorld,
        C.set(d.elements[12], d.elements[13], d.elements[14], 1),
        C.applyMatrix4(k),
        M = 1 / C.w,
        C.z *= M,
      -1 <= C.z && 1 >= C.z && (p === w ? (G = new THREE.RenderableSprite,
        b.push(G),
        w++,
        p++,
        u = G) : u = b[p++],
        u.id = n.id,
        u.x = C.x * M,
        u.y = C.y * M,
        u.z = C.z,
        u.object = n,
        u.rotation = n.rotation,
        u.scale.x = n.scale.x * Math.abs(u.x - (C.x + f.projectionMatrix.elements[0]) / (C.w + f.projectionMatrix.elements[12])),
        u.scale.y = n.scale.y * Math.abs(u.y - (C.y + f.projectionMatrix.elements[5]) / (C.w + f.projectionMatrix.elements[13])),
        u.material = n.material,
        _.elements.push(u));
    return !0 === v && _.elements.sort(e),
      _
  }
}
,
THREE.Face3 = function(t, e, i, n, r, s) {
  this.a = t,
    this.b = e,
    this.c = i,
    this.normal = n instanceof THREE.Vector3 ? n : new THREE.Vector3,
    this.vertexNormals = n instanceof Array ? n : [],
    this.color = r instanceof THREE.Color ? r : new THREE.Color,
    this.vertexColors = r instanceof Array ? r : [],
    this.vertexTangents = [],
    this.materialIndex = void 0 !== s ? s : 0,
    this.centroid = new THREE.Vector3
}
,
THREE.Face3.prototype = {
  constructor: THREE.Face3,
  clone: function() {
    var t = new THREE.Face3(this.a,this.b,this.c);
    t.normal.copy(this.normal),
      t.color.copy(this.color),
      t.centroid.copy(this.centroid),
      t.materialIndex = this.materialIndex;
    var e, i;
    for (e = 0,
           i = this.vertexNormals.length; i > e; e++)
      t.vertexNormals[e] = this.vertexNormals[e].clone();
    for (e = 0,
           i = this.vertexColors.length; i > e; e++)
      t.vertexColors[e] = this.vertexColors[e].clone();
    for (e = 0,
           i = this.vertexTangents.length; i > e; e++)
      t.vertexTangents[e] = this.vertexTangents[e].clone();
    return t
  }
},
THREE.Face4 = function(t, e, i, n, r, s, o) {
  return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),
    new THREE.Face3(t,e,i,r,s,o)
}
,
THREE.Geometry = function() {
  this.id = THREE.GeometryIdCount++,
    this.uuid = THREE.Math.generateUUID(),
    this.name = "",
    this.vertices = [],
    this.colors = [],
    this.faces = [],
    this.faceVertexUvs = [[]],
    this.morphTargets = [],
    this.morphColors = [],
    this.morphNormals = [],
    this.skinWeights = [],
    this.skinIndices = [],
    this.lineDistances = [],
    this.boundingSphere = this.boundingBox = null,
    this.hasTangents = !1,
    this.dynamic = !0,
    this.buffersNeedUpdate = this.lineDistancesNeedUpdate = this.colorsNeedUpdate = this.tangentsNeedUpdate = this.normalsNeedUpdate = this.uvsNeedUpdate = this.elementsNeedUpdate = this.verticesNeedUpdate = !1
}
,
THREE.Geometry.prototype = {
  constructor: THREE.Geometry,
  applyMatrix: function(t) {
    for (var e = (new THREE.Matrix3).getNormalMatrix(t), i = 0, n = this.vertices.length; n > i; i++)
      this.vertices[i].applyMatrix4(t);
    for (i = 0,
           n = this.faces.length; n > i; i++) {
      var r = this.faces[i];
      r.normal.applyMatrix3(e).normalize();
      for (var s = 0, o = r.vertexNormals.length; o > s; s++)
        r.vertexNormals[s].applyMatrix3(e).normalize();
      r.centroid.applyMatrix4(t)
    }
    this.boundingBox instanceof THREE.Box3 && this.computeBoundingBox(),
    this.boundingSphere instanceof THREE.Sphere && this.computeBoundingSphere()
  },
  computeCentroids: function() {
    var t, e, i;
    for (t = 0,
           e = this.faces.length; e > t; t++)
      i = this.faces[t],
        i.centroid.set(0, 0, 0),
        i.centroid.add(this.vertices[i.a]),
        i.centroid.add(this.vertices[i.b]),
        i.centroid.add(this.vertices[i.c]),
        i.centroid.divideScalar(3)
  },
  computeFaceNormals: function() {
    for (var t = new THREE.Vector3, e = new THREE.Vector3, i = 0, n = this.faces.length; n > i; i++) {
      var r = this.faces[i]
        , s = this.vertices[r.a]
        , o = this.vertices[r.b];
      t.subVectors(this.vertices[r.c], o),
        e.subVectors(s, o),
        t.cross(e),
        t.normalize(),
        r.normal.copy(t)
    }
  },
  computeVertexNormals: function(t) {
    var e, i, n;
    for (n = Array(this.vertices.length),
           e = 0,
           i = this.vertices.length; i > e; e++)
      n[e] = new THREE.Vector3;
    if (t) {
      var r, s, o, a = new THREE.Vector3, l = new THREE.Vector3;
      for (new THREE.Vector3,
             new THREE.Vector3,
             new THREE.Vector3,
             t = 0,
             e = this.faces.length; e > t; t++)
        i = this.faces[t],
          r = this.vertices[i.a],
          s = this.vertices[i.b],
          o = this.vertices[i.c],
          a.subVectors(o, s),
          l.subVectors(r, s),
          a.cross(l),
          n[i.a].add(a),
          n[i.b].add(a),
          n[i.c].add(a)
    } else
      for (t = 0,
             e = this.faces.length; e > t; t++)
        i = this.faces[t],
          n[i.a].add(i.normal),
          n[i.b].add(i.normal),
          n[i.c].add(i.normal);
    for (e = 0,
           i = this.vertices.length; i > e; e++)
      n[e].normalize();
    for (t = 0,
           e = this.faces.length; e > t; t++)
      i = this.faces[t],
        i.vertexNormals[0] = n[i.a].clone(),
        i.vertexNormals[1] = n[i.b].clone(),
        i.vertexNormals[2] = n[i.c].clone()
  },
  computeMorphNormals: function() {
    var t, e, i, n, r;
    for (i = 0,
           n = this.faces.length; n > i; i++)
      for (r = this.faces[i],
             r.__originalFaceNormal ? r.__originalFaceNormal.copy(r.normal) : r.__originalFaceNormal = r.normal.clone(),
           r.__originalVertexNormals || (r.__originalVertexNormals = []),
             t = 0,
             e = r.vertexNormals.length; e > t; t++)
        r.__originalVertexNormals[t] ? r.__originalVertexNormals[t].copy(r.vertexNormals[t]) : r.__originalVertexNormals[t] = r.vertexNormals[t].clone();
    var s = new THREE.Geometry;
    for (s.faces = this.faces,
           t = 0,
           e = this.morphTargets.length; e > t; t++) {
      if (!this.morphNormals[t]) {
        this.morphNormals[t] = {},
          this.morphNormals[t].faceNormals = [],
          this.morphNormals[t].vertexNormals = [],
          r = this.morphNormals[t].faceNormals;
        var o, a, l = this.morphNormals[t].vertexNormals;
        for (i = 0,
               n = this.faces.length; n > i; i++)
          o = new THREE.Vector3,
            a = {
              a: new THREE.Vector3,
              b: new THREE.Vector3,
              c: new THREE.Vector3
            },
            r.push(o),
            l.push(a)
      }
      for (l = this.morphNormals[t],
             s.vertices = this.morphTargets[t].vertices,
             s.computeFaceNormals(),
             s.computeVertexNormals(),
             i = 0,
             n = this.faces.length; n > i; i++)
        r = this.faces[i],
          o = l.faceNormals[i],
          a = l.vertexNormals[i],
          o.copy(r.normal),
          a.a.copy(r.vertexNormals[0]),
          a.b.copy(r.vertexNormals[1]),
          a.c.copy(r.vertexNormals[2])
    }
    for (i = 0,
           n = this.faces.length; n > i; i++)
      r = this.faces[i],
        r.normal = r.__originalFaceNormal,
        r.vertexNormals = r.__originalVertexNormals
  },
  computeTangents: function() {
    var t, e, i, n, r, s, o, a, l, h, c, u, p, d, f, m, g, v = [], y = [];
    i = new THREE.Vector3;
    var E = new THREE.Vector3
      , T = new THREE.Vector3
      , x = new THREE.Vector3
      , b = new THREE.Vector3;
    for (t = 0,
           e = this.vertices.length; e > t; t++)
      v[t] = new THREE.Vector3,
        y[t] = new THREE.Vector3;
    for (t = 0,
           e = this.faces.length; e > t; t++)
      r = this.faces[t],
        s = this.faceVertexUvs[0][t],
        n = r.a,
        g = r.b,
        r = r.c,
        o = this.vertices[n],
        a = this.vertices[g],
        l = this.vertices[r],
        h = s[0],
        c = s[1],
        u = s[2],
        s = a.x - o.x,
        p = l.x - o.x,
        d = a.y - o.y,
        f = l.y - o.y,
        a = a.z - o.z,
        o = l.z - o.z,
        l = c.x - h.x,
        m = u.x - h.x,
        c = c.y - h.y,
        h = u.y - h.y,
        u = 1 / (l * h - m * c),
        i.set((h * s - c * p) * u, (h * d - c * f) * u, (h * a - c * o) * u),
        E.set((l * p - m * s) * u, (l * f - m * d) * u, (l * o - m * a) * u),
        v[n].add(i),
        v[g].add(i),
        v[r].add(i),
        y[n].add(E),
        y[g].add(E),
        y[r].add(E);
    for (E = ["a", "b", "c", "d"],
           t = 0,
           e = this.faces.length; e > t; t++)
      for (r = this.faces[t],
             i = 0; i < Math.min(r.vertexNormals.length, 3); i++)
        b.copy(r.vertexNormals[i]),
          n = r[E[i]],
          g = v[n],
          T.copy(g),
          T.sub(b.multiplyScalar(b.dot(g))).normalize(),
          x.crossVectors(r.vertexNormals[i], g),
          n = x.dot(y[n]),
          n = 0 > n ? -1 : 1,
          r.vertexTangents[i] = new THREE.Vector4(T.x,T.y,T.z,n);
    this.hasTangents = !0
  },
  computeLineDistances: function() {
    for (var t = 0, e = this.vertices, i = 0, n = e.length; n > i; i++)
      i > 0 && (t += e[i].distanceTo(e[i - 1])),
        this.lineDistances[i] = t
  },
  computeBoundingBox: function() {
    null === this.boundingBox && (this.boundingBox = new THREE.Box3),
      this.boundingBox.setFromPoints(this.vertices)
  },
  computeBoundingSphere: function() {
    null === this.boundingSphere && (this.boundingSphere = new THREE.Sphere),
      this.boundingSphere.setFromPoints(this.vertices)
  },
  mergeVertices: function() {
    var t, e, i, n = {}, r = [], s = [], o = Math.pow(10, 4);
    for (e = 0,
           i = this.vertices.length; i > e; e++)
      t = this.vertices[e],
        t = Math.round(t.x * o) + "_" + Math.round(t.y * o) + "_" + Math.round(t.z * o),
        void 0 === n[t] ? (n[t] = e,
          r.push(this.vertices[e]),
          s[e] = r.length - 1) : s[e] = s[n[t]];
    for (n = [],
           e = 0,
           i = this.faces.length; i > e; e++)
      for (o = this.faces[e],
             o.a = s[o.a],
             o.b = s[o.b],
             o.c = s[o.c],
             o = [o.a, o.b, o.c],
             t = 0; 3 > t; t++)
        if (o[t] == o[(t + 1) % 3]) {
          n.push(e);
          break
        }
    for (e = n.length - 1; e >= 0; e--)
      for (o = n[e],
             this.faces.splice(o, 1),
             s = 0,
             i = this.faceVertexUvs.length; i > s; s++)
        this.faceVertexUvs[s].splice(o, 1);
    return e = this.vertices.length - r.length,
      this.vertices = r,
      e
  },
  clone: function() {
    for (var t = new THREE.Geometry, e = this.vertices, i = 0, n = e.length; n > i; i++)
      t.vertices.push(e[i].clone());
    for (e = this.faces,
           i = 0,
           n = e.length; n > i; i++)
      t.faces.push(e[i].clone());
    for (e = this.faceVertexUvs[0],
           i = 0,
           n = e.length; n > i; i++) {
      for (var r = e[i], s = [], o = 0, a = r.length; a > o; o++)
        s.push(new THREE.Vector2(r[o].x,r[o].y));
      t.faceVertexUvs[0].push(s)
    }
    return t
  },
  dispose: function() {
    this.dispatchEvent({
      type: "dispose"
    })
  }
},
THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),
THREE.GeometryIdCount = 0,
THREE.BufferGeometry = function() {
  this.id = THREE.GeometryIdCount++,
    this.uuid = THREE.Math.generateUUID(),
    this.name = "",
    this.attributes = {},
    this.dynamic = !0,
    this.offsets = [],
    this.boundingSphere = this.boundingBox = null,
    this.hasTangents = !1,
    this.morphTargets = []
}
,
THREE.BufferGeometry.prototype = {
  constructor: THREE.BufferGeometry,
  addAttribute: function(t, e, i, n) {
    this.attributes[t] = {
      itemSize: n,
      array: new e(i * n)
    }
  },
  applyMatrix: function(t) {
    var e, i;
    this.attributes.position && (e = this.attributes.position.array),
    this.attributes.normal && (i = this.attributes.normal.array),
    void 0 !== e && (t.multiplyVector3Array(e),
      this.verticesNeedUpdate = !0),
    void 0 !== i && ((new THREE.Matrix3).getNormalMatrix(t).multiplyVector3Array(i),
      this.normalizeNormals(),
      this.normalsNeedUpdate = !0)
  },
  computeBoundingBox: function() {
    null === this.boundingBox && (this.boundingBox = new THREE.Box3);
    var t = this.attributes.position.array;
    if (t) {
      var e, i, n, r = this.boundingBox;
      3 <= t.length && (r.min.x = r.max.x = t[0],
        r.min.y = r.max.y = t[1],
        r.min.z = r.max.z = t[2]);
      for (var s = 3, o = t.length; o > s; s += 3)
        e = t[s],
          i = t[s + 1],
          n = t[s + 2],
          e < r.min.x ? r.min.x = e : e > r.max.x && (r.max.x = e),
          i < r.min.y ? r.min.y = i : i > r.max.y && (r.max.y = i),
          n < r.min.z ? r.min.z = n : n > r.max.z && (r.max.z = n)
    }
    (void 0 === t || 0 === t.length) && (this.boundingBox.min.set(0, 0, 0),
      this.boundingBox.max.set(0, 0, 0))
  },
  computeBoundingSphere: function() {
    var t = new THREE.Box3
      , e = new THREE.Vector3;
    return function() {
      null === this.boundingSphere && (this.boundingSphere = new THREE.Sphere);
      var i = this.attributes.position.array;
      if (i) {
        t.makeEmpty();
        for (var n = this.boundingSphere.center, r = 0, s = i.length; s > r; r += 3)
          e.set(i[r], i[r + 1], i[r + 2]),
            t.addPoint(e);
        t.center(n);
        for (var o = 0, r = 0, s = i.length; s > r; r += 3)
          e.set(i[r], i[r + 1], i[r + 2]),
            o = Math.max(o, n.distanceToSquared(e));
        this.boundingSphere.radius = Math.sqrt(o)
      }
    }
  }(),
  computeVertexNormals: function() {
    if (this.attributes.position) {
      var t, e, i, n;
      if (t = this.attributes.position.array.length,
        void 0 === this.attributes.normal)
        this.attributes.normal = {
          itemSize: 3,
          array: new Float32Array(t)
        };
      else
        for (t = 0,
               e = this.attributes.normal.array.length; e > t; t++)
          this.attributes.normal.array[t] = 0;
      var r, s, o, a, l, h, c = this.attributes.position.array, u = this.attributes.normal.array, p = new THREE.Vector3, d = new THREE.Vector3, f = new THREE.Vector3, m = new THREE.Vector3, g = new THREE.Vector3;
      if (this.attributes.index) {
        var v = this.attributes.index.array
          , y = this.offsets;
        for (i = 0,
               n = y.length; n > i; ++i) {
          e = y[i].start,
            r = y[i].count;
          var E = y[i].index;
          for (t = e,
                 e += r; e > t; t += 3)
            r = E + v[t],
              s = E + v[t + 1],
              o = E + v[t + 2],
              a = c[3 * r],
              l = c[3 * r + 1],
              h = c[3 * r + 2],
              p.set(a, l, h),
              a = c[3 * s],
              l = c[3 * s + 1],
              h = c[3 * s + 2],
              d.set(a, l, h),
              a = c[3 * o],
              l = c[3 * o + 1],
              h = c[3 * o + 2],
              f.set(a, l, h),
              m.subVectors(f, d),
              g.subVectors(p, d),
              m.cross(g),
              u[3 * r] += m.x,
              u[3 * r + 1] += m.y,
              u[3 * r + 2] += m.z,
              u[3 * s] += m.x,
              u[3 * s + 1] += m.y,
              u[3 * s + 2] += m.z,
              u[3 * o] += m.x,
              u[3 * o + 1] += m.y,
              u[3 * o + 2] += m.z
        }
      } else
        for (t = 0,
               e = c.length; e > t; t += 9)
          a = c[t],
            l = c[t + 1],
            h = c[t + 2],
            p.set(a, l, h),
            a = c[t + 3],
            l = c[t + 4],
            h = c[t + 5],
            d.set(a, l, h),
            a = c[t + 6],
            l = c[t + 7],
            h = c[t + 8],
            f.set(a, l, h),
            m.subVectors(f, d),
            g.subVectors(p, d),
            m.cross(g),
            u[t] = m.x,
            u[t + 1] = m.y,
            u[t + 2] = m.z,
            u[t + 3] = m.x,
            u[t + 4] = m.y,
            u[t + 5] = m.z,
            u[t + 6] = m.x,
            u[t + 7] = m.y,
            u[t + 8] = m.z;
      this.normalizeNormals(),
        this.normalsNeedUpdate = !0
    }
  },
  normalizeNormals: function() {
    for (var t, e, i, n = this.attributes.normal.array, r = 0, s = n.length; s > r; r += 3)
      t = n[r],
        e = n[r + 1],
        i = n[r + 2],
        t = 1 / Math.sqrt(t * t + e * e + i * i),
        n[r] *= t,
        n[r + 1] *= t,
        n[r + 2] *= t
  },
  computeTangents: function() {
    function t(t) {
      N.x = n[3 * t],
        N.y = n[3 * t + 1],
        N.z = n[3 * t + 2],
        B.copy(N),
        I = a[t],
        z.copy(I),
        z.sub(N.multiplyScalar(N.dot(I))).normalize(),
        F.crossVectors(B, I),
        O = F.dot(l[t]),
        k = 0 > O ? -1 : 1,
        o[4 * t] = z.x,
        o[4 * t + 1] = z.y,
        o[4 * t + 2] = z.z,
        o[4 * t + 3] = k
    }
    if (void 0 === this.attributes.index || void 0 === this.attributes.position || void 0 === this.attributes.normal || void 0 === this.attributes.uv)
      console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");
    else {
      var e = this.attributes.index.array
        , i = this.attributes.position.array
        , n = this.attributes.normal.array
        , r = this.attributes.uv.array
        , s = i.length / 3;
      void 0 === this.attributes.tangent && (this.attributes.tangent = {
        itemSize: 4,
        array: new Float32Array(4 * s)
      });
      for (var o = this.attributes.tangent.array, a = [], l = [], h = 0; s > h; h++)
        a[h] = new THREE.Vector3,
          l[h] = new THREE.Vector3;
      var c, u, p, d, f, m, g, v, y, E, T, x, b, w, _, R, S, H, M, C, P, A, s = new THREE.Vector3, h = new THREE.Vector3, L = this.offsets;
      for (H = 0,
             M = L.length; M > H; ++H) {
        S = L[H].start,
          C = L[H].count;
        var D = L[H].index;
        for (R = S,
               S += C; S > R; R += 3)
          C = D + e[R],
            P = D + e[R + 1],
            A = D + e[R + 2],
            c = i[3 * C],
            u = i[3 * C + 1],
            p = i[3 * C + 2],
            d = i[3 * P],
            f = i[3 * P + 1],
            m = i[3 * P + 2],
            g = i[3 * A],
            v = i[3 * A + 1],
            y = i[3 * A + 2],
            E = r[2 * C],
            T = r[2 * C + 1],
            x = r[2 * P],
            b = r[2 * P + 1],
            w = r[2 * A],
            _ = r[2 * A + 1],
            d -= c,
            c = g - c,
            f -= u,
            u = v - u,
            m -= p,
            p = y - p,
            x -= E,
            E = w - E,
            b -= T,
            T = _ - T,
            _ = 1 / (x * T - E * b),
            s.set((T * d - b * c) * _, (T * f - b * u) * _, (T * m - b * p) * _),
            h.set((x * c - E * d) * _, (x * u - E * f) * _, (x * p - E * m) * _),
            a[C].add(s),
            a[P].add(s),
            a[A].add(s),
            l[C].add(h),
            l[P].add(h),
            l[A].add(h)
      }
      var k, I, O, z = new THREE.Vector3, F = new THREE.Vector3, N = new THREE.Vector3, B = new THREE.Vector3;
      for (H = 0,
             M = L.length; M > H; ++H)
        for (S = L[H].start,
               C = L[H].count,
               D = L[H].index,
               R = S,
               S += C; S > R; R += 3)
          C = D + e[R],
            P = D + e[R + 1],
            A = D + e[R + 2],
            t(C),
            t(P),
            t(A);
      this.tangentsNeedUpdate = this.hasTangents = !0
    }
  },
  clone: function() {
    var t, e = new THREE.BufferGeometry, i = [Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array];
    for (t in this.attributes) {
      for (var n = this.attributes[t], r = n.array, s = {
        itemSize: n.itemSize,
        numItems: n.numItems,
        array: null
      }, n = 0, o = i.length; o > n; n++) {
        var a = i[n];
        if (r instanceof a) {
          s.array = new a(r);
          break
        }
      }
      e.attributes[t] = s
    }
    for (n = 0,
           o = this.offsets.length; o > n; n++)
      i = this.offsets[n],
        e.offsets.push({
          start: i.start,
          index: i.index,
          count: i.count
        });
    return e
  },
  dispose: function() {
    this.dispatchEvent({
      type: "dispose"
    })
  }
},
THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),
THREE.Camera = function() {
  THREE.Object3D.call(this),
    this.matrixWorldInverse = new THREE.Matrix4,
    this.projectionMatrix = new THREE.Matrix4
}
,
THREE.Camera.prototype = Object.create(THREE.Object3D.prototype),
THREE.Camera.prototype.lookAt = function() {
  var t = new THREE.Matrix4;
  return function(e) {
    t.lookAt(this.position, e, this.up),
      this.quaternion.setFromRotationMatrix(t)
  }
}(),
THREE.Camera.prototype.clone = function(t) {
  return void 0 === t && (t = new THREE.Camera),
    THREE.Object3D.prototype.clone.call(this, t),
    t.matrixWorldInverse.copy(this.matrixWorldInverse),
    t.projectionMatrix.copy(this.projectionMatrix),
    t
}
,
THREE.OrthographicCamera = function(t, e, i, n, r, s) {
  THREE.Camera.call(this),
    this.left = t,
    this.right = e,
    this.top = i,
    this.bottom = n,
    this.near = void 0 !== r ? r : .1,
    this.far = void 0 !== s ? s : 2e3,
    this.updateProjectionMatrix()
}
,
THREE.OrthographicCamera.prototype = Object.create(THREE.Camera.prototype),
THREE.OrthographicCamera.prototype.updateProjectionMatrix = function() {
  this.projectionMatrix.makeOrthographic(this.left, this.right, this.top, this.bottom, this.near, this.far)
}
,
THREE.OrthographicCamera.prototype.clone = function() {
  var t = new THREE.OrthographicCamera;
  return THREE.Camera.prototype.clone.call(this, t),
    t.left = this.left,
    t.right = this.right,
    t.top = this.top,
    t.bottom = this.bottom,
    t.near = this.near,
    t.far = this.far,
    t
}
,
THREE.PerspectiveCamera = function(t, e, i, n) {
  THREE.Camera.call(this),
    this.fov = void 0 !== t ? t : 50,
    this.aspect = void 0 !== e ? e : 1,
    this.near = void 0 !== i ? i : .1,
    this.far = void 0 !== n ? n : 2e3,
    this.updateProjectionMatrix()
}
,
THREE.PerspectiveCamera.prototype = Object.create(THREE.Camera.prototype),
THREE.PerspectiveCamera.prototype.setLens = function(t, e) {
  void 0 === e && (e = 24),
    this.fov = 2 * THREE.Math.radToDeg(Math.atan(e / (2 * t))),
    this.updateProjectionMatrix()
}
,
THREE.PerspectiveCamera.prototype.setViewOffset = function(t, e, i, n, r, s) {
  this.fullWidth = t,
    this.fullHeight = e,
    this.x = i,
    this.y = n,
    this.width = r,
    this.height = s,
    this.updateProjectionMatrix()
}
,
THREE.PerspectiveCamera.prototype.updateProjectionMatrix = function() {
  if (this.fullWidth) {
    var t = this.fullWidth / this.fullHeight
      , e = Math.tan(THREE.Math.degToRad(.5 * this.fov)) * this.near
      , i = -e
      , n = t * i
      , t = Math.abs(t * e - n)
      , i = Math.abs(e - i);
    this.projectionMatrix.makeFrustum(n + this.x * t / this.fullWidth, n + (this.x + this.width) * t / this.fullWidth, e - (this.y + this.height) * i / this.fullHeight, e - this.y * i / this.fullHeight, this.near, this.far)
  } else
    this.projectionMatrix.makePerspective(this.fov, this.aspect, this.near, this.far)
}
,
THREE.PerspectiveCamera.prototype.clone = function() {
  var t = new THREE.PerspectiveCamera;
  return THREE.Camera.prototype.clone.call(this, t),
    t.fov = this.fov,
    t.aspect = this.aspect,
    t.near = this.near,
    t.far = this.far,
    t
}
,
THREE.Light = function(t) {
  THREE.Object3D.call(this),
    this.color = new THREE.Color(t)
}
,
THREE.Light.prototype = Object.create(THREE.Object3D.prototype),
THREE.Light.prototype.clone = function(t) {
  return void 0 === t && (t = new THREE.Light),
    THREE.Object3D.prototype.clone.call(this, t),
    t.color.copy(this.color),
    t
}
,
THREE.AmbientLight = function(t) {
  THREE.Light.call(this, t)
}
,
THREE.AmbientLight.prototype = Object.create(THREE.Light.prototype),
THREE.AmbientLight.prototype.clone = function() {
  var t = new THREE.AmbientLight;
  return THREE.Light.prototype.clone.call(this, t),
    t
}
,
THREE.AreaLight = function(t, e) {
  THREE.Light.call(this, t),
    this.normal = new THREE.Vector3(0,-1,0),
    this.right = new THREE.Vector3(1,0,0),
    this.intensity = void 0 !== e ? e : 1,
    this.height = this.width = 1,
    this.constantAttenuation = 1.5,
    this.linearAttenuation = .5,
    this.quadraticAttenuation = .1
}
,
THREE.AreaLight.prototype = Object.create(THREE.Light.prototype),
THREE.DirectionalLight = function(t, e) {
  THREE.Light.call(this, t),
    this.position.set(0, 1, 0),
    this.target = new THREE.Object3D,
    this.intensity = void 0 !== e ? e : 1,
    this.onlyShadow = this.castShadow = !1,
    this.shadowCameraNear = 50,
    this.shadowCameraFar = 5e3,
    this.shadowCameraLeft = -500,
    this.shadowCameraTop = this.shadowCameraRight = 500,
    this.shadowCameraBottom = -500,
    this.shadowCameraVisible = !1,
    this.shadowBias = 0,
    this.shadowDarkness = .5,
    this.shadowMapHeight = this.shadowMapWidth = 512,
    this.shadowCascade = !1,
    this.shadowCascadeOffset = new THREE.Vector3(0,0,-1e3),
    this.shadowCascadeCount = 2,
    this.shadowCascadeBias = [0, 0, 0],
    this.shadowCascadeWidth = [512, 512, 512],
    this.shadowCascadeHeight = [512, 512, 512],
    this.shadowCascadeNearZ = [-1, .99, .998],
    this.shadowCascadeFarZ = [.99, .998, 1],
    this.shadowCascadeArray = [],
    this.shadowMatrix = this.shadowCamera = this.shadowMapSize = this.shadowMap = null
}
,
THREE.DirectionalLight.prototype = Object.create(THREE.Light.prototype),
THREE.DirectionalLight.prototype.clone = function() {
  var t = new THREE.DirectionalLight;
  return THREE.Light.prototype.clone.call(this, t),
    t.target = this.target.clone(),
    t.intensity = this.intensity,
    t.castShadow = this.castShadow,
    t.onlyShadow = this.onlyShadow,
    t
}
,
THREE.HemisphereLight = function(t, e, i) {
  THREE.Light.call(this, t),
    this.position.set(0, 100, 0),
    this.groundColor = new THREE.Color(e),
    this.intensity = void 0 !== i ? i : 1
}
,
THREE.HemisphereLight.prototype = Object.create(THREE.Light.prototype),
THREE.HemisphereLight.prototype.clone = function() {
  var t = new THREE.HemisphereLight;
  return THREE.Light.prototype.clone.call(this, t),
    t.groundColor.copy(this.groundColor),
    t.intensity = this.intensity,
    t
}
,
THREE.PointLight = function(t, e, i) {
  THREE.Light.call(this, t),
    this.intensity = void 0 !== e ? e : 1,
    this.distance = void 0 !== i ? i : 0
}
,
THREE.PointLight.prototype = Object.create(THREE.Light.prototype),
THREE.PointLight.prototype.clone = function() {
  var t = new THREE.PointLight;
  return THREE.Light.prototype.clone.call(this, t),
    t.intensity = this.intensity,
    t.distance = this.distance,
    t
}
,
THREE.SpotLight = function(t, e, i, n, r) {
  THREE.Light.call(this, t),
    this.position.set(0, 1, 0),
    this.target = new THREE.Object3D,
    this.intensity = void 0 !== e ? e : 1,
    this.distance = void 0 !== i ? i : 0,
    this.angle = void 0 !== n ? n : Math.PI / 3,
    this.exponent = void 0 !== r ? r : 10,
    this.onlyShadow = this.castShadow = !1,
    this.shadowCameraNear = 50,
    this.shadowCameraFar = 5e3,
    this.shadowCameraFov = 50,
    this.shadowCameraVisible = !1,
    this.shadowBias = 0,
    this.shadowDarkness = .5,
    this.shadowMapHeight = this.shadowMapWidth = 512,
    this.shadowMatrix = this.shadowCamera = this.shadowMapSize = this.shadowMap = null
}
,
THREE.SpotLight.prototype = Object.create(THREE.Light.prototype),
THREE.SpotLight.prototype.clone = function() {
  var t = new THREE.SpotLight;
  return THREE.Light.prototype.clone.call(this, t),
    t.target = this.target.clone(),
    t.intensity = this.intensity,
    t.distance = this.distance,
    t.angle = this.angle,
    t.exponent = this.exponent,
    t.castShadow = this.castShadow,
    t.onlyShadow = this.onlyShadow,
    t
}
,
THREE.Loader = function(t) {
  this.statusDomElement = (this.showStatus = t) ? THREE.Loader.prototype.addStatusElement() : null,
    this.onLoadStart = function() {}
    ,
    this.onLoadProgress = function() {}
    ,
    this.onLoadComplete = function() {}
}
,
THREE.Loader.prototype = {
  constructor: THREE.Loader,
  crossOrigin: void 0,
  addStatusElement: function() {
    var t = document.createElement("div");
    return t.style.position = "absolute",
      t.style.right = "0px",
      t.style.top = "0px",
      t.style.fontSize = "0.8em",
      t.style.textAlign = "left",
      t.style.background = "rgba(0,0,0,0.25)",
      t.style.color = "#fff",
      t.style.width = "120px",
      t.style.padding = "0.5em 0.5em 0.5em 0.5em",
      t.style.zIndex = 1e3,
      t.innerHTML = "Loading ...",
      t
  },
  updateProgress: function(t) {
    var e = "Loaded "
      , e = t.total ? e + ((100 * t.loaded / t.total).toFixed(0) + "%") : e + ((t.loaded / 1e3).toFixed(2) + " KB");
    this.statusDomElement.innerHTML = e
  },
  extractUrlBase: function(t) {
    return t = t.split("/"),
      t.pop(),
    (1 > t.length ? "." : t.join("/")) + "/"
  },
  initMaterials: function(t, e) {
    for (var i = [], n = 0; n < t.length; ++n)
      i[n] = THREE.Loader.prototype.createMaterial(t[n], e);
    return i
  },
  needsTangents: function(t) {
    for (var e = 0, i = t.length; i > e; e++)
      if (t[e]instanceof THREE.ShaderMaterial)
        return !0;
    return !1
  },
  createMaterial: function(t, e) {
    function i(t) {
      return t = Math.log(t) / Math.LN2,
      Math.floor(t) == t
    }
    function n(t) {
      return t = Math.log(t) / Math.LN2,
        Math.pow(2, Math.round(t))
    }
    function r(t, r, s, a, l, h, c) {
      var u = /\.dds$/i.test(s)
        , p = e + "/" + s;
      if (u) {
        var d = THREE.ImageUtils.loadCompressedTexture(p);
        t[r] = d
      } else
        d = document.createElement("canvas"),
          t[r] = new THREE.Texture(d);
      if (t[r].sourceFile = s,
        a && (t[r].repeat.set(a[0], a[1]),
        1 !== a[0] && (t[r].wrapS = THREE.RepeatWrapping),
        1 !== a[1] && (t[r].wrapT = THREE.RepeatWrapping)),
        l && t[r].offset.set(l[0], l[1]),
        h && (s = {
          repeat: THREE.RepeatWrapping,
          mirror: THREE.MirroredRepeatWrapping
        },
        void 0 !== s[h[0]] && (t[r].wrapS = s[h[0]]),
        void 0 !== s[h[1]] && (t[r].wrapT = s[h[1]])),
        c && (t[r].anisotropy = c),
          !u) {
        var f = t[r]
          , t = new Image;
        t.onload = function() {
          if (i(this.width) && i(this.height))
            f.image = this;
          else {
            var t = n(this.width)
              , e = n(this.height);
            f.image.width = t,
              f.image.height = e,
              f.image.getContext("2d").drawImage(this, 0, 0, t, e)
          }
          f.needsUpdate = !0
        }
          ,
        void 0 !== o.crossOrigin && (t.crossOrigin = o.crossOrigin),
          t.src = p
      }
    }
    function s(t) {
      return (255 * t[0] << 16) + (255 * t[1] << 8) + 255 * t[2]
    }
    var o = this
      , a = "MeshLambertMaterial"
      , l = {
      color: 15658734,
      opacity: 1,
      map: null,
      lightMap: null,
      normalMap: null,
      bumpMap: null,
      wireframe: !1
    };
    if (t.shading) {
      var h = t.shading.toLowerCase();
      "phong" === h ? a = "MeshPhongMaterial" : "basic" === h && (a = "MeshBasicMaterial")
    }
    return void 0 !== t.blending && void 0 !== THREE[t.blending] && (l.blending = THREE[t.blending]),
    (void 0 !== t.transparent || 1 > t.opacity) && (l.transparent = t.transparent),
    void 0 !== t.depthTest && (l.depthTest = t.depthTest),
    void 0 !== t.depthWrite && (l.depthWrite = t.depthWrite),
    void 0 !== t.visible && (l.visible = t.visible),
    void 0 !== t.flipSided && (l.side = THREE.BackSide),
    void 0 !== t.doubleSided && (l.side = THREE.DoubleSide),
    void 0 !== t.wireframe && (l.wireframe = t.wireframe),
    void 0 !== t.vertexColors && ("face" === t.vertexColors ? l.vertexColors = THREE.FaceColors : t.vertexColors && (l.vertexColors = THREE.VertexColors)),
      t.colorDiffuse ? l.color = s(t.colorDiffuse) : t.DbgColor && (l.color = t.DbgColor),
    t.colorSpecular && (l.specular = s(t.colorSpecular)),
    t.colorAmbient && (l.ambient = s(t.colorAmbient)),
    t.transparency && (l.opacity = t.transparency),
    t.specularCoef && (l.shininess = t.specularCoef),
    t.mapDiffuse && e && r(l, "map", t.mapDiffuse, t.mapDiffuseRepeat, t.mapDiffuseOffset, t.mapDiffuseWrap, t.mapDiffuseAnisotropy),
    t.mapLight && e && r(l, "lightMap", t.mapLight, t.mapLightRepeat, t.mapLightOffset, t.mapLightWrap, t.mapLightAnisotropy),
    t.mapBump && e && r(l, "bumpMap", t.mapBump, t.mapBumpRepeat, t.mapBumpOffset, t.mapBumpWrap, t.mapBumpAnisotropy),
    t.mapNormal && e && r(l, "normalMap", t.mapNormal, t.mapNormalRepeat, t.mapNormalOffset, t.mapNormalWrap, t.mapNormalAnisotropy),
    t.mapSpecular && e && r(l, "specularMap", t.mapSpecular, t.mapSpecularRepeat, t.mapSpecularOffset, t.mapSpecularWrap, t.mapSpecularAnisotropy),
    t.mapBumpScale && (l.bumpScale = t.mapBumpScale),
      t.mapNormal ? (a = THREE.ShaderLib.normalmap,
        h = THREE.UniformsUtils.clone(a.uniforms),
        h.tNormal.value = l.normalMap,
      t.mapNormalFactor && h.uNormalScale.value.set(t.mapNormalFactor, t.mapNormalFactor),
      l.map && (h.tDiffuse.value = l.map,
        h.enableDiffuse.value = !0),
      l.specularMap && (h.tSpecular.value = l.specularMap,
        h.enableSpecular.value = !0),
      l.lightMap && (h.tAO.value = l.lightMap,
        h.enableAO.value = !0),
        h.diffuse.value.setHex(l.color),
        h.specular.value.setHex(l.specular),
        h.ambient.value.setHex(l.ambient),
        h.shininess.value = l.shininess,
      void 0 !== l.opacity && (h.opacity.value = l.opacity),
        a = new THREE.ShaderMaterial({
          fragmentShader: a.fragmentShader,
          vertexShader: a.vertexShader,
          uniforms: h,
          lights: !0,
          fog: !0
        }),
      l.transparent && (a.transparent = !0)) : a = new THREE[a](l),
    void 0 !== t.DbgName && (a.name = t.DbgName),
      a
  }
},
THREE.XHRLoader = function(t) {
  this.manager = void 0 !== t ? t : THREE.DefaultLoadingManager
}
,
THREE.XHRLoader.prototype = {
  constructor: THREE.XHRLoader,
  load: function(t, e, i, n) {
    var r = this
      , s = new XMLHttpRequest;
    void 0 !== e && s.addEventListener("load", function(i) {
      e(i.target.responseText),
        r.manager.itemEnd(t)
    }, !1),
    void 0 !== i && s.addEventListener("progress", function(t) {
      i(t)
    }, !1),
    void 0 !== n && s.addEventListener("error", function(t) {
      n(t)
    }, !1),
    void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin),
      s.open("GET", t, !0),
      s.send(null),
      r.manager.itemStart(t)
  },
  setCrossOrigin: function(t) {
    this.crossOrigin = t
  }
},
THREE.ImageLoader = function(t) {
  this.manager = void 0 !== t ? t : THREE.DefaultLoadingManager
}
,
THREE.ImageLoader.prototype = {
  constructor: THREE.ImageLoader,
  load: function(t, e, i, n) {
    var r = this
      , s = document.createElement("img");
    return void 0 !== e && s.addEventListener("load", function() {
      r.manager.itemEnd(t),
        e(this)
    }, !1),
    void 0 !== i && s.addEventListener("progress", function(t) {
      i(t)
    }, !1),
    void 0 !== n && s.addEventListener("error", function(t) {
      n(t)
    }, !1),
    void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin),
      s.src = t,
      r.manager.itemStart(t),
      s
  },
  setCrossOrigin: function(t) {
    this.crossOrigin = t
  }
},
THREE.JSONLoader = function(t) {
  THREE.Loader.call(this, t),
    this.withCredentials = !1
}
,
THREE.JSONLoader.prototype = Object.create(THREE.Loader.prototype),
THREE.JSONLoader.prototype.load = function(t, e, i) {
  i = i && "string" == typeof i ? i : this.extractUrlBase(t),
    this.onLoadStart(),
    this.loadAjaxJSON(this, t, e, i)
}
,
THREE.JSONLoader.prototype.loadAjaxJSON = function(t, e, i, n, r) {
  var s = new XMLHttpRequest
    , o = 0;
  s.onreadystatechange = function() {
    if (s.readyState === s.DONE)
      if (200 === s.status || 0 === s.status) {
        if (s.responseText) {
          var a = JSON.parse(s.responseText)
            , a = t.parse(a, n);
          i(a.geometry, a.materials)
        } else
          console.warn("THREE.JSONLoader: [" + e + "] seems to be unreachable or file there is empty");
        t.onLoadComplete()
      } else
        console.error("THREE.JSONLoader: Couldn't load [" + e + "] [" + s.status + "]");
    else
      s.readyState === s.LOADING ? r && (0 === o && (o = s.getResponseHeader("Content-Length")),
        r({
          total: o,
          loaded: s.responseText.length
        })) : s.readyState === s.HEADERS_RECEIVED && void 0 !== r && (o = s.getResponseHeader("Content-Length"))
  }
    ,
    s.open("GET", e, !0),
    s.withCredentials = this.withCredentials,
    s.send(null)
}
,
THREE.JSONLoader.prototype.parse = function(t, e) {
  var i, n, r, s, o, a, l, h, c, u, p, d, f, m, g = new THREE.Geometry, v = void 0 !== t.scale ? 1 / t.scale : 1, y = t.faces;
  c = t.vertices;
  var E = t.normals
    , T = t.colors
    , x = 0;
  if (void 0 !== t.uvs) {
    for (i = 0; i < t.uvs.length; i++)
      t.uvs[i].length && x++;
    for (i = 0; x > i; i++)
      g.faceVertexUvs[i] = []
  }
  for (s = 0,
         o = c.length; o > s; )
    a = new THREE.Vector3,
      a.x = c[s++] * v,
      a.y = c[s++] * v,
      a.z = c[s++] * v,
      g.vertices.push(a);
  for (s = 0,
         o = y.length; o > s; )
    if (c = y[s++],
        u = 1 & c,
        r = 2 & c,
        i = 8 & c,
        l = 16 & c,
        p = 32 & c,
        a = 64 & c,
        c &= 128,
        u) {
      if (u = new THREE.Face3,
          u.a = y[s],
          u.b = y[s + 1],
          u.c = y[s + 3],
          d = new THREE.Face3,
          d.a = y[s + 1],
          d.b = y[s + 2],
          d.c = y[s + 3],
          s += 4,
        r && (r = y[s++],
          u.materialIndex = r,
          d.materialIndex = r),
          r = g.faces.length,
          i)
        for (i = 0; x > i; i++)
          for (f = t.uvs[i],
                 g.faceVertexUvs[i][r] = [],
                 g.faceVertexUvs[i][r + 1] = [],
                 n = 0; 4 > n; n++)
            h = y[s++],
              m = f[2 * h],
              h = f[2 * h + 1],
              m = new THREE.Vector2(m,h),
            2 !== n && g.faceVertexUvs[i][r].push(m),
            0 !== n && g.faceVertexUvs[i][r + 1].push(m);
      if (l && (l = 3 * y[s++],
          u.normal.set(E[l++], E[l++], E[l]),
          d.normal.copy(u.normal)),
          p)
        for (i = 0; 4 > i; i++)
          l = 3 * y[s++],
            p = new THREE.Vector3(E[l++],E[l++],E[l]),
          2 !== i && u.vertexNormals.push(p),
          0 !== i && d.vertexNormals.push(p);
      if (a && (a = y[s++],
          a = T[a],
          u.color.setHex(a),
          d.color.setHex(a)),
          c)
        for (i = 0; 4 > i; i++)
          a = y[s++],
            a = T[a],
          2 !== i && u.vertexColors.push(new THREE.Color(a)),
          0 !== i && d.vertexColors.push(new THREE.Color(a));
      g.faces.push(u),
        g.faces.push(d)
    } else {
      if (u = new THREE.Face3,
          u.a = y[s++],
          u.b = y[s++],
          u.c = y[s++],
        r && (r = y[s++],
          u.materialIndex = r),
          r = g.faces.length,
          i)
        for (i = 0; x > i; i++)
          for (f = t.uvs[i],
                 g.faceVertexUvs[i][r] = [],
                 n = 0; 3 > n; n++)
            h = y[s++],
              m = f[2 * h],
              h = f[2 * h + 1],
              m = new THREE.Vector2(m,h),
              g.faceVertexUvs[i][r].push(m);
      if (l && (l = 3 * y[s++],
          u.normal.set(E[l++], E[l++], E[l])),
          p)
        for (i = 0; 3 > i; i++)
          l = 3 * y[s++],
            p = new THREE.Vector3(E[l++],E[l++],E[l]),
            u.vertexNormals.push(p);
      if (a && (a = y[s++],
          u.color.setHex(T[a])),
          c)
        for (i = 0; 3 > i; i++)
          a = y[s++],
            u.vertexColors.push(new THREE.Color(T[a]));
      g.faces.push(u)
    }
  if (t.skinWeights)
    for (s = 0,
           o = t.skinWeights.length; o > s; s += 2)
      y = t.skinWeights[s],
        E = t.skinWeights[s + 1],
        g.skinWeights.push(new THREE.Vector4(y,E,0,0));
  if (t.skinIndices)
    for (s = 0,
           o = t.skinIndices.length; o > s; s += 2)
      y = t.skinIndices[s],
        E = t.skinIndices[s + 1],
        g.skinIndices.push(new THREE.Vector4(y,E,0,0));
  if (g.bones = t.bones,
      g.animation = t.animation,
      g.animations = t.animations,
    void 0 !== t.morphTargets)
    for (s = 0,
           o = t.morphTargets.length; o > s; s++)
      for (g.morphTargets[s] = {},
             g.morphTargets[s].name = t.morphTargets[s].name,
             g.morphTargets[s].vertices = [],
             T = g.morphTargets[s].vertices,
             x = t.morphTargets[s].vertices,
             y = 0,
             E = x.length; E > y; y += 3)
        c = new THREE.Vector3,
          c.x = x[y] * v,
          c.y = x[y + 1] * v,
          c.z = x[y + 2] * v,
          T.push(c);
  if (void 0 !== t.morphColors)
    for (s = 0,
           o = t.morphColors.length; o > s; s++)
      for (g.morphColors[s] = {},
             g.morphColors[s].name = t.morphColors[s].name,
             g.morphColors[s].colors = [],
             E = g.morphColors[s].colors,
             T = t.morphColors[s].colors,
             v = 0,
             y = T.length; y > v; v += 3)
        x = new THREE.Color(16755200),
          x.setRGB(T[v], T[v + 1], T[v + 2]),
          E.push(x);
  return g.computeCentroids(),
    g.computeFaceNormals(),
    g.computeBoundingSphere(),
    void 0 === t.materials ? {
      geometry: g
    } : (v = this.initMaterials(t.materials, e),
    this.needsTangents(v) && g.computeTangents(),
      {
        geometry: g,
        materials: v
      })
}
,
THREE.LoadingManager = function(t, e, i) {
  var n = this
    , r = 0
    , s = 0;
  this.onLoad = t,
    this.onProgress = e,
    this.onError = i,
    this.itemStart = function() {
      s++
    }
    ,
    this.itemEnd = function(t) {
      r++,
      void 0 !== n.onProgress && n.onProgress(t, r, s),
      r === s && void 0 !== n.onLoad && n.onLoad()
    }
}
,
THREE.DefaultLoadingManager = new THREE.LoadingManager,
THREE.BufferGeometryLoader = function(t) {
  this.manager = void 0 !== t ? t : THREE.DefaultLoadingManager
}
,
THREE.BufferGeometryLoader.prototype = {
  constructor: THREE.BufferGeometryLoader,
  load: function(t, e) {
    var i = this
      , n = new THREE.XHRLoader;
    n.setCrossOrigin(this.crossOrigin),
      n.load(t, function(t) {
        e(i.parse(JSON.parse(t)))
      })
  },
  setCrossOrigin: function(t) {
    this.crossOrigin = t
  },
  parse: function(t) {
    var e, i = new THREE.BufferGeometry, n = t.attributes, r = t.offsets, t = t.boundingSphere;
    for (e in n) {
      var s = n[e];
      i.attributes[e] = {
        itemSize: s.itemSize,
        array: new self[s.type](s.array)
      }
    }
    return void 0 !== r && (i.offsets = JSON.parse(JSON.stringify(r))),
    void 0 !== t && (i.boundingSphere = new THREE.Sphere((new THREE.Vector3).fromArray(void 0 !== t.center ? t.center : [0, 0, 0]),t.radius)),
      i
  }
},
THREE.GeometryLoader = function(t) {
  this.manager = void 0 !== t ? t : THREE.DefaultLoadingManager
}
,
THREE.GeometryLoader.prototype = {
  constructor: THREE.GeometryLoader,
  load: function(t, e) {
    var i = this
      , n = new THREE.XHRLoader;
    n.setCrossOrigin(this.crossOrigin),
      n.load(t, function(t) {
        e(i.parse(JSON.parse(t)))
      })
  },
  setCrossOrigin: function(t) {
    this.crossOrigin = t
  },
  parse: function() {}
},
THREE.MaterialLoader = function(t) {
  this.manager = void 0 !== t ? t : THREE.DefaultLoadingManager
}
,
THREE.MaterialLoader.prototype = {
  constructor: THREE.MaterialLoader,
  load: function(t, e) {
    var i = this
      , n = new THREE.XHRLoader;
    n.setCrossOrigin(this.crossOrigin),
      n.load(t, function(t) {
        e(i.parse(JSON.parse(t)))
      })
  },
  setCrossOrigin: function(t) {
    this.crossOrigin = t
  },
  parse: function(t) {
    var e = new THREE[t.type];
    if (void 0 !== t.color && e.color.setHex(t.color),
      void 0 !== t.ambient && e.ambient.setHex(t.ambient),
      void 0 !== t.emissive && e.emissive.setHex(t.emissive),
      void 0 !== t.specular && e.specular.setHex(t.specular),
      void 0 !== t.shininess && (e.shininess = t.shininess),
      void 0 !== t.vertexColors && (e.vertexColors = t.vertexColors),
      void 0 !== t.blending && (e.blending = t.blending),
      void 0 !== t.side && (e.side = t.side),
      void 0 !== t.opacity && (e.opacity = t.opacity),
      void 0 !== t.transparent && (e.transparent = t.transparent),
      void 0 !== t.wireframe && (e.wireframe = t.wireframe),
      void 0 !== t.materials)
      for (var i = 0, n = t.materials.length; n > i; i++)
        e.materials.push(this.parse(t.materials[i]));
    return e
  }
},
THREE.ObjectLoader = function(t) {
  this.manager = void 0 !== t ? t : THREE.DefaultLoadingManager
}
,
THREE.ObjectLoader.prototype = {
  constructor: THREE.ObjectLoader,
  load: function(t, e) {
    var i = this
      , n = new THREE.XHRLoader(i.manager);
    n.setCrossOrigin(this.crossOrigin),
      n.load(t, function(t) {
        e(i.parse(JSON.parse(t)))
      })
  },
  setCrossOrigin: function(t) {
    this.crossOrigin = t
  },
  parse: function(t) {
    var e = this.parseGeometries(t.geometries)
      , i = this.parseMaterials(t.materials);
    return this.parseObject(t.object, e, i)
  },
  parseGeometries: function(t) {
    var e = {};
    if (void 0 !== t)
      for (var i = new THREE.JSONLoader, n = new THREE.BufferGeometryLoader, r = 0, s = t.length; s > r; r++) {
        var o, a = t[r];
        switch (a.type) {
          case "PlaneGeometry":
            o = new THREE.PlaneGeometry(a.width,a.height,a.widthSegments,a.heightSegments);
            break;
          case "CircleGeometry":
            o = new THREE.CircleGeometry(a.radius,a.segments);
            break;
          case "CubeGeometry":
            o = new THREE.CubeGeometry(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);
            break;
          case "CylinderGeometry":
            o = new THREE.CylinderGeometry(a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded);
            break;
          case "SphereGeometry":
            o = new THREE.SphereGeometry(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);
            break;
          case "IcosahedronGeometry":
            o = new THREE.IcosahedronGeometry(a.radius,a.detail);
            break;
          case "TorusGeometry":
            o = new THREE.TorusGeometry(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);
            break;
          case "TorusKnotGeometry":
            o = new THREE.TorusKnotGeometry(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.p,a.q,a.heightScale);
            break;
          case "BufferGeometry":
            o = n.parse(a.data);
            break;
          case "Geometry":
            o = i.parse(a.data).geometry
        }
        o.uuid = a.uuid,
        void 0 !== a.name && (o.name = a.name),
          e[a.uuid] = o
      }
    return e
  },
  parseMaterials: function(t) {
    var e = {};
    if (void 0 !== t)
      for (var i = new THREE.MaterialLoader, n = 0, r = t.length; r > n; n++) {
        var s = t[n]
          , o = i.parse(s);
        o.uuid = s.uuid,
        void 0 !== s.name && (o.name = s.name),
          e[s.uuid] = o
      }
    return e
  },
  parseObject: function() {
    var t = new THREE.Matrix4;
    return function(e, i, n) {
      var r;
      switch (e.type) {
        case "Scene":
          r = new THREE.Scene;
          break;
        case "PerspectiveCamera":
          r = new THREE.PerspectiveCamera(e.fov,e.aspect,e.near,e.far);
          break;
        case "OrthographicCamera":
          r = new THREE.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);
          break;
        case "AmbientLight":
          r = new THREE.AmbientLight(e.color);
          break;
        case "DirectionalLight":
          r = new THREE.DirectionalLight(e.color,e.intensity);
          break;
        case "PointLight":
          r = new THREE.PointLight(e.color,e.intensity,e.distance);
          break;
        case "SpotLight":
          r = new THREE.SpotLight(e.color,e.intensity,e.distance,e.angle,e.exponent);
          break;
        case "HemisphereLight":
          r = new THREE.HemisphereLight(e.color,e.groundColor,e.intensity);
          break;
        case "Mesh":
          r = i[e.geometry];
          var s = n[e.material];
          void 0 === r && console.error("THREE.ObjectLoader: Undefined geometry " + e.geometry),
          void 0 === s && console.error("THREE.ObjectLoader: Undefined material " + e.material),
            r = new THREE.Mesh(r,s);
          break;
        case "Sprite":
          s = n[e.material],
          void 0 === s && console.error("THREE.ObjectLoader: Undefined material " + e.material),
            r = new THREE.Sprite(s);
          break;
        default:
          r = new THREE.Object3D
      }
      if (r.uuid = e.uuid,
        void 0 !== e.name && (r.name = e.name),
          void 0 !== e.matrix ? (t.fromArray(e.matrix),
            t.decompose(r.position, r.quaternion, r.scale)) : (void 0 !== e.position && r.position.fromArray(e.position),
          void 0 !== e.rotation && r.rotation.fromArray(e.rotation),
          void 0 !== e.scale && r.scale.fromArray(e.scale)),
        void 0 !== e.visible && (r.visible = e.visible),
        void 0 !== e.userData && (r.userData = e.userData),
        void 0 !== e.children)
        for (var o in e.children)
          r.add(this.parseObject(e.children[o], i, n));
      return r
    }
  }()
},
THREE.SceneLoader = function() {
  this.onLoadStart = function() {}
    ,
    this.onLoadProgress = function() {}
    ,
    this.onLoadComplete = function() {}
    ,
    this.callbackSync = function() {}
    ,
    this.callbackProgress = function() {}
    ,
    this.geometryHandlers = {},
    this.hierarchyHandlers = {},
    this.addGeometryHandler("ascii", THREE.JSONLoader)
}
,
THREE.SceneLoader.prototype = {
  constructor: THREE.SceneLoader,
  load: function(t, e) {
    var i = this
      , n = new THREE.XHRLoader(i.manager);
    n.setCrossOrigin(this.crossOrigin),
      n.load(t, function(n) {
        i.parse(JSON.parse(n), e, t)
      })
  },
  setCrossOrigin: function(t) {
    this.crossOrigin = t
  },
  addGeometryHandler: function(t, e) {
    this.geometryHandlers[t] = {
      loaderClass: e
    }
  },
  addHierarchyHandler: function(t, e) {
    this.hierarchyHandlers[t] = {
      loaderClass: e
    }
  },
  parse: function(t, e, i) {
    function n(t, e) {
      return "relativeToHTML" == e ? t : _ + "/" + t
    }
    function r() {
      s(x.scene, S.objects)
    }
    function s(t, e) {
      var i, r, o, l, h, c;
      for (c in e) {
        var f = x.objects[c]
          , m = e[c];
        if (void 0 === f) {
          if (m.type && m.type in w.hierarchyHandlers) {
            if (void 0 === m.loading) {
              i = {
                type: 1,
                url: 1,
                material: 1,
                position: 1,
                rotation: 1,
                scale: 1,
                visible: 1,
                children: 1,
                userData: 1,
                skin: 1,
                morph: 1,
                mirroredLoop: 1,
                duration: 1
              };
              var v, y = {};
              for (v in m)
                v in i || (y[v] = m[v]);
              p = x.materials[m.material],
                m.loading = !0,
                i = w.hierarchyHandlers[m.type].loaderObject,
                i.options ? i.load(n(m.url, S.urlBaseType), a(c, t, p, m)) : i.load(n(m.url, S.urlBaseType), a(c, t, p, m), y)
            }
          } else if (void 0 !== m.geometry) {
            if (u = x.geometries[m.geometry]) {
              if (f = !1,
                  p = x.materials[m.material],
                  f = p instanceof THREE.ShaderMaterial,
                  r = m.position,
                  o = m.rotation,
                  l = m.scale,
                  i = m.matrix,
                  h = m.quaternion,
                m.material || (p = new THREE.MeshFaceMaterial(x.face_materials[m.geometry])),
                p instanceof THREE.MeshFaceMaterial && 0 === p.materials.length && (p = new THREE.MeshFaceMaterial(x.face_materials[m.geometry])),
                p instanceof THREE.MeshFaceMaterial)
                for (y = 0; y < p.materials.length; y++)
                  f = f || p.materials[y]instanceof THREE.ShaderMaterial;
              f && u.computeTangents(),
                m.skin ? f = new THREE.SkinnedMesh(u,p) : m.morph ? (f = new THREE.MorphAnimMesh(u,p),
                void 0 !== m.duration && (f.duration = m.duration),
                void 0 !== m.time && (f.time = m.time),
                void 0 !== m.mirroredLoop && (f.mirroredLoop = m.mirroredLoop),
                p.morphNormals && u.computeMorphNormals()) : f = new THREE.Mesh(u,p),
                f.name = c,
                i ? (f.matrixAutoUpdate = !1,
                  f.matrix.set(i[0], i[1], i[2], i[3], i[4], i[5], i[6], i[7], i[8], i[9], i[10], i[11], i[12], i[13], i[14], i[15])) : (f.position.fromArray(r),
                  h ? f.quaternion.fromArray(h) : f.rotation.fromArray(o),
                  f.scale.fromArray(l)),
                f.visible = m.visible,
                f.castShadow = m.castShadow,
                f.receiveShadow = m.receiveShadow,
                t.add(f),
                x.objects[c] = f
            }
          } else if ("AmbientLight" === m.type || "PointLight" === m.type || "DirectionalLight" === m.type || "SpotLight" === m.type || "HemisphereLight" === m.type || "AreaLight" === m.type) {
            switch (y = m.color,
              i = m.intensity,
              r = m.distance,
              o = m.position,
              l = m.rotation,
              m.type) {
              case "AmbientLight":
                g = new THREE.AmbientLight(y);
                break;
              case "PointLight":
                g = new THREE.PointLight(y,i,r),
                  g.position.fromArray(o);
                break;
              case "DirectionalLight":
                g = new THREE.DirectionalLight(y,i),
                  g.position.fromArray(m.direction);
                break;
              case "SpotLight":
                g = new THREE.SpotLight(y,i,r,1),
                  g.angle = m.angle,
                  g.position.fromArray(o),
                  g.target.set(o[0], o[1] - r, o[2]),
                  g.target.applyEuler(new THREE.Euler(l[0],l[1],l[2],"XYZ"));
                break;
              case "HemisphereLight":
                g = new THREE.DirectionalLight(y,i,r),
                  g.target.set(o[0], o[1] - r, o[2]),
                  g.target.applyEuler(new THREE.Euler(l[0],l[1],l[2],"XYZ"));
                break;
              case "AreaLight":
                g = new THREE.AreaLight(y,i),
                  g.position.fromArray(o),
                  g.width = m.size,
                  g.height = m.size_y
            }
            t.add(g),
              g.name = c,
              x.lights[c] = g,
              x.objects[c] = g
          } else
            "PerspectiveCamera" === m.type || "OrthographicCamera" === m.type ? (r = m.position,
              o = m.rotation,
              h = m.quaternion,
              "PerspectiveCamera" === m.type ? d = new THREE.PerspectiveCamera(m.fov,m.aspect,m.near,m.far) : "OrthographicCamera" === m.type && (d = new THREE.OrthographicCamera(m.left,m.right,m.top,m.bottom,m.near,m.far)),
              d.name = c,
              d.position.fromArray(r),
              void 0 !== h ? d.quaternion.fromArray(h) : void 0 !== o && d.rotation.fromArray(o),
              t.add(d),
              x.cameras[c] = d,
              x.objects[c] = d) : (r = m.position,
              o = m.rotation,
              l = m.scale,
              h = m.quaternion,
              f = new THREE.Object3D,
              f.name = c,
              f.position.fromArray(r),
              h ? f.quaternion.fromArray(h) : f.rotation.fromArray(o),
              f.scale.fromArray(l),
              f.visible = void 0 !== m.visible ? m.visible : !1,
              t.add(f),
              x.objects[c] = f,
              x.empties[c] = f);
          if (f) {
            if (void 0 !== m.userData)
              for (var E in m.userData)
                f.userData[E] = m.userData[E];
            if (void 0 !== m.groups)
              for (y = 0; y < m.groups.length; y++)
                i = m.groups[y],
                void 0 === x.groups[i] && (x.groups[i] = []),
                  x.groups[i].push(c)
          }
        }
        void 0 !== f && void 0 !== m.children && s(f, m.children)
      }
    }
    function o(t) {
      return function(e, i) {
        e.name = t,
          x.geometries[t] = e,
          x.face_materials[t] = i,
          r(),
          v -= 1,
          w.onLoadComplete(),
          h()
      }
    }
    function a(t, e, i, n) {
      return function(s) {
        var s = s.content ? s.content : s.dae ? s.scene : s
          , o = n.rotation
          , a = n.quaternion
          , l = n.scale;
        s.position.fromArray(n.position),
          a ? s.quaternion.fromArray(a) : s.rotation.fromArray(o),
          s.scale.fromArray(l),
        i && s.traverse(function(t) {
          t.material = i
        });
        var c = void 0 !== n.visible ? n.visible : !0;
        s.traverse(function(t) {
          t.visible = c
        }),
          e.add(s),
          s.name = t,
          x.objects[t] = s,
          r(),
          v -= 1,
          w.onLoadComplete(),
          h()
      }
    }
    function l(t) {
      return function(e, i) {
        e.name = t,
          x.geometries[t] = e,
          x.face_materials[t] = i
      }
    }
    function h() {
      if (w.callbackProgress({
          totalModels: E,
          totalTextures: T,
          loadedModels: E - v,
          loadedTextures: T - y
        }, x),
          w.onLoadProgress(),
        0 === v && 0 === y) {
        for (var t = 0; t < R.length; t++) {
          var i = R[t]
            , n = x.objects[i.targetName];
          n ? i.object.target = n : (i.object.target = new THREE.Object3D,
            x.scene.add(i.object.target)),
            i.object.target.userData.targetInverse = i.object
        }
        e(x)
      }
    }
    function c(t, e) {
      if (e(t),
        void 0 !== t.children)
        for (var i in t.children)
          c(t.children[i], e)
    }
    var u, p, d, f, m, g, v, y, E, T, x, b, w = this, _ = THREE.Loader.prototype.extractUrlBase(i), R = [], S = t;
    for (b in this.geometryHandlers)
      t = this.geometryHandlers[b].loaderClass,
        this.geometryHandlers[b].loaderObject = new t;
    for (b in this.hierarchyHandlers)
      t = this.hierarchyHandlers[b].loaderClass,
        this.hierarchyHandlers[b].loaderObject = new t;
    y = v = 0,
      x = {
        scene: new THREE.Scene,
        geometries: {},
        face_materials: {},
        materials: {},
        textures: {},
        objects: {},
        cameras: {},
        lights: {},
        fogs: {},
        empties: {},
        groups: {}
      },
    S.transform && (b = S.transform.position,
      t = S.transform.rotation,
      i = S.transform.scale,
    b && x.scene.position.fromArray(b),
    t && x.scene.rotation.fromArray(t),
    i && x.scene.scale.fromArray(i),
    b || t || i) && (x.scene.updateMatrix(),
      x.scene.updateMatrixWorld()),
      b = function(t) {
        return function() {
          y -= t,
            h(),
            w.onLoadComplete()
        }
      }
    ;
    for (var H in S.fogs)
      t = S.fogs[H],
        "linear" === t.type ? f = new THREE.Fog(0,t.near,t.far) : "exp2" === t.type && (f = new THREE.FogExp2(0,t.density)),
        t = t.color,
        f.color.setRGB(t[0], t[1], t[2]),
        x.fogs[H] = f;
    for (var M in S.geometries)
      f = S.geometries[M],
      f.type in this.geometryHandlers && (v += 1,
        w.onLoadStart());
    for (var C in S.objects)
      c(S.objects[C], function(t) {
        t.type && t.type in w.hierarchyHandlers && (v += 1,
          w.onLoadStart())
      });
    E = v;
    for (M in S.geometries)
      if (f = S.geometries[M],
        "cube" === f.type)
        u = new THREE.CubeGeometry(f.width,f.height,f.depth,f.widthSegments,f.heightSegments,f.depthSegments),
          u.name = M,
          x.geometries[M] = u;
      else if ("plane" === f.type)
        u = new THREE.PlaneGeometry(f.width,f.height,f.widthSegments,f.heightSegments),
          u.name = M,
          x.geometries[M] = u;
      else if ("sphere" === f.type)
        u = new THREE.SphereGeometry(f.radius,f.widthSegments,f.heightSegments),
          u.name = M,
          x.geometries[M] = u;
      else if ("cylinder" === f.type)
        u = new THREE.CylinderGeometry(f.topRad,f.botRad,f.height,f.radSegs,f.heightSegs),
          u.name = M,
          x.geometries[M] = u;
      else if ("torus" === f.type)
        u = new THREE.TorusGeometry(f.radius,f.tube,f.segmentsR,f.segmentsT),
          u.name = M,
          x.geometries[M] = u;
      else if ("icosahedron" === f.type)
        u = new THREE.IcosahedronGeometry(f.radius,f.subdivisions),
          u.name = M,
          x.geometries[M] = u;
      else if (f.type in this.geometryHandlers) {
        C = {};
        for (m in f)
          "type" !== m && "url" !== m && (C[m] = f[m]);
        this.geometryHandlers[f.type].loaderObject.load(n(f.url, S.urlBaseType), o(M), C)
      } else
        "embedded" === f.type && (C = S.embeds[f.id],
          C.metadata = S.metadata,
        C && (C = this.geometryHandlers.ascii.loaderObject.parse(C, ""),
          l(M)(C.geometry, C.materials)));
    for (var P in S.textures)
      if (M = S.textures[P],
        M.url instanceof Array)
        for (y += M.url.length,
               m = 0; m < M.url.length; m++)
          w.onLoadStart();
      else
        y += 1,
          w.onLoadStart();
    T = y;
    for (P in S.textures) {
      if (M = S.textures[P],
        void 0 !== M.mapping && void 0 !== THREE[M.mapping] && (M.mapping = new THREE[M.mapping]),
        M.url instanceof Array) {
        for (C = M.url.length,
               f = [],
               m = 0; C > m; m++)
          f[m] = n(M.url[m], S.urlBaseType);
        m = (m = /\.dds$/i.test(f[0])) ? THREE.ImageUtils.loadCompressedTextureCube(f, M.mapping, b(C)) : THREE.ImageUtils.loadTextureCube(f, M.mapping, b(C))
      } else
        m = /\.dds$/i.test(M.url),
          C = n(M.url, S.urlBaseType),
          f = b(1),
          m = m ? THREE.ImageUtils.loadCompressedTexture(C, M.mapping, f) : THREE.ImageUtils.loadTexture(C, M.mapping, f),
        void 0 !== THREE[M.minFilter] && (m.minFilter = THREE[M.minFilter]),
        void 0 !== THREE[M.magFilter] && (m.magFilter = THREE[M.magFilter]),
        M.anisotropy && (m.anisotropy = M.anisotropy),
        M.repeat && (m.repeat.set(M.repeat[0], M.repeat[1]),
        1 !== M.repeat[0] && (m.wrapS = THREE.RepeatWrapping),
        1 !== M.repeat[1] && (m.wrapT = THREE.RepeatWrapping)),
        M.offset && m.offset.set(M.offset[0], M.offset[1]),
        M.wrap && (C = {
          repeat: THREE.RepeatWrapping,
          mirror: THREE.MirroredRepeatWrapping
        },
        void 0 !== C[M.wrap[0]] && (m.wrapS = C[M.wrap[0]]),
        void 0 !== C[M.wrap[1]] && (m.wrapT = C[M.wrap[1]]));
      x.textures[P] = m
    }
    var A, L;
    for (A in S.materials) {
      P = S.materials[A];
      for (L in P.parameters)
        "envMap" === L || "map" === L || "lightMap" === L || "bumpMap" === L ? P.parameters[L] = x.textures[P.parameters[L]] : "shading" === L ? P.parameters[L] = "flat" === P.parameters[L] ? THREE.FlatShading : THREE.SmoothShading : "side" === L ? P.parameters[L] = "double" == P.parameters[L] ? THREE.DoubleSide : "back" == P.parameters[L] ? THREE.BackSide : THREE.FrontSide : "blending" === L ? P.parameters[L] = P.parameters[L]in THREE ? THREE[P.parameters[L]] : THREE.NormalBlending : "combine" === L ? P.parameters[L] = P.parameters[L]in THREE ? THREE[P.parameters[L]] : THREE.MultiplyOperation : "vertexColors" === L ? "face" == P.parameters[L] ? P.parameters[L] = THREE.FaceColors : P.parameters[L] && (P.parameters[L] = THREE.VertexColors) : "wrapRGB" === L && (b = P.parameters[L],
          P.parameters[L] = new THREE.Vector3(b[0],b[1],b[2]));
      void 0 !== P.parameters.opacity && 1 > P.parameters.opacity && (P.parameters.transparent = !0),
        P.parameters.normalMap ? (b = THREE.ShaderLib.normalmap,
          M = THREE.UniformsUtils.clone(b.uniforms),
          m = P.parameters.color,
          C = P.parameters.specular,
          f = P.parameters.ambient,
          H = P.parameters.shininess,
          M.tNormal.value = x.textures[P.parameters.normalMap],
        P.parameters.normalScale && M.uNormalScale.value.set(P.parameters.normalScale[0], P.parameters.normalScale[1]),
        P.parameters.map && (M.tDiffuse.value = P.parameters.map,
          M.enableDiffuse.value = !0),
        P.parameters.envMap && (M.tCube.value = P.parameters.envMap,
          M.enableReflection.value = !0,
          M.reflectivity.value = P.parameters.reflectivity),
        P.parameters.lightMap && (M.tAO.value = P.parameters.lightMap,
          M.enableAO.value = !0),
        P.parameters.specularMap && (M.tSpecular.value = x.textures[P.parameters.specularMap],
          M.enableSpecular.value = !0),
        P.parameters.displacementMap && (M.tDisplacement.value = x.textures[P.parameters.displacementMap],
          M.enableDisplacement.value = !0,
          M.uDisplacementBias.value = P.parameters.displacementBias,
          M.uDisplacementScale.value = P.parameters.displacementScale),
          M.diffuse.value.setHex(m),
          M.specular.value.setHex(C),
          M.ambient.value.setHex(f),
          M.shininess.value = H,
        P.parameters.opacity && (M.opacity.value = P.parameters.opacity),
          p = new THREE.ShaderMaterial({
            fragmentShader: b.fragmentShader,
            vertexShader: b.vertexShader,
            uniforms: M,
            lights: !0,
            fog: !0
          })) : p = new THREE[P.type](P.parameters),
        p.name = A,
        x.materials[A] = p
    }
    for (A in S.materials)
      if (P = S.materials[A],
          P.parameters.materials) {
        for (L = [],
               m = 0; m < P.parameters.materials.length; m++)
          L.push(x.materials[P.parameters.materials[m]]);
        x.materials[A].materials = L
      }
    r(),
    x.cameras && S.defaults.camera && (x.currentCamera = x.cameras[S.defaults.camera]),
    x.fogs && S.defaults.fog && (x.scene.fog = x.fogs[S.defaults.fog]),
      w.callbackSync(x),
      h()
  }
},
THREE.TextureLoader = function(t) {
  this.manager = void 0 !== t ? t : THREE.DefaultLoadingManager
}
,
THREE.TextureLoader.prototype = {
  constructor: THREE.TextureLoader,
  load: function(t, e) {
    var i = new THREE.ImageLoader(this.manager);
    i.setCrossOrigin(this.crossOrigin),
      i.load(t, function(t) {
        t = new THREE.Texture(t),
          t.needsUpdate = !0,
        void 0 !== e && e(t)
      })
  },
  setCrossOrigin: function(t) {
    this.crossOrigin = t
  }
},
THREE.Material = function() {
  this.id = THREE.MaterialIdCount++,
    this.uuid = THREE.Math.generateUUID(),
    this.name = "",
    this.side = THREE.FrontSide,
    this.opacity = 1,
    this.transparent = !1,
    this.blending = THREE.NormalBlending,
    this.blendSrc = THREE.SrcAlphaFactor,
    this.blendDst = THREE.OneMinusSrcAlphaFactor,
    this.blendEquation = THREE.AddEquation,
    this.depthWrite = this.depthTest = !0,
    this.polygonOffset = !1,
    this.overdraw = this.alphaTest = this.polygonOffsetUnits = this.polygonOffsetFactor = 0,
    this.needsUpdate = this.visible = !0
}
,
THREE.Material.prototype = {
  constructor: THREE.Material,
  setValues: function(t) {
    if (void 0 !== t)
      for (var e in t) {
        var i = t[e];
        if (void 0 === i)
          console.warn("THREE.Material: '" + e + "' parameter is undefined.");
        else if (e in this) {
          var n = this[e];
          n instanceof THREE.Color ? n.set(i) : n instanceof THREE.Vector3 && i instanceof THREE.Vector3 ? n.copy(i) : this[e] = "overdraw" == e ? Number(i) : i
        }
      }
  },
  clone: function(t) {
    return void 0 === t && (t = new THREE.Material),
      t.name = this.name,
      t.side = this.side,
      t.opacity = this.opacity,
      t.transparent = this.transparent,
      t.blending = this.blending,
      t.blendSrc = this.blendSrc,
      t.blendDst = this.blendDst,
      t.blendEquation = this.blendEquation,
      t.depthTest = this.depthTest,
      t.depthWrite = this.depthWrite,
      t.polygonOffset = this.polygonOffset,
      t.polygonOffsetFactor = this.polygonOffsetFactor,
      t.polygonOffsetUnits = this.polygonOffsetUnits,
      t.alphaTest = this.alphaTest,
      t.overdraw = this.overdraw,
      t.visible = this.visible,
      t
  },
  dispose: function() {
    this.dispatchEvent({
      type: "dispose"
    })
  }
},
THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),
THREE.MaterialIdCount = 0,
THREE.LineBasicMaterial = function(t) {
  THREE.Material.call(this),
    this.color = new THREE.Color(16777215),
    this.linewidth = 1,
    this.linejoin = this.linecap = "round",
    this.vertexColors = !1,
    this.fog = !0,
    this.setValues(t)
}
,
THREE.LineBasicMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.LineBasicMaterial.prototype.clone = function() {
  var t = new THREE.LineBasicMaterial;
  return THREE.Material.prototype.clone.call(this, t),
    t.color.copy(this.color),
    t.linewidth = this.linewidth,
    t.linecap = this.linecap,
    t.linejoin = this.linejoin,
    t.vertexColors = this.vertexColors,
    t.fog = this.fog,
    t
}
,
THREE.LineDashedMaterial = function(t) {
  THREE.Material.call(this),
    this.color = new THREE.Color(16777215),
    this.scale = this.linewidth = 1,
    this.dashSize = 3,
    this.gapSize = 1,
    this.vertexColors = !1,
    this.fog = !0,
    this.setValues(t)
}
,
THREE.LineDashedMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.LineDashedMaterial.prototype.clone = function() {
  var t = new THREE.LineDashedMaterial;
  return THREE.Material.prototype.clone.call(this, t),
    t.color.copy(this.color),
    t.linewidth = this.linewidth,
    t.scale = this.scale,
    t.dashSize = this.dashSize,
    t.gapSize = this.gapSize,
    t.vertexColors = this.vertexColors,
    t.fog = this.fog,
    t
}
,
THREE.MeshBasicMaterial = function(t) {
  THREE.Material.call(this),
    this.color = new THREE.Color(16777215),
    this.envMap = this.specularMap = this.lightMap = this.map = null,
    this.combine = THREE.MultiplyOperation,
    this.reflectivity = 1,
    this.refractionRatio = .98,
    this.fog = !0,
    this.shading = THREE.SmoothShading,
    this.wireframe = !1,
    this.wireframeLinewidth = 1,
    this.wireframeLinejoin = this.wireframeLinecap = "round",
    this.vertexColors = THREE.NoColors,
    this.morphTargets = this.skinning = !1,
    this.setValues(t)
}
,
THREE.MeshBasicMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.MeshBasicMaterial.prototype.clone = function() {
  var t = new THREE.MeshBasicMaterial;
  return THREE.Material.prototype.clone.call(this, t),
    t.color.copy(this.color),
    t.map = this.map,
    t.lightMap = this.lightMap,
    t.specularMap = this.specularMap,
    t.envMap = this.envMap,
    t.combine = this.combine,
    t.reflectivity = this.reflectivity,
    t.refractionRatio = this.refractionRatio,
    t.fog = this.fog,
    t.shading = this.shading,
    t.wireframe = this.wireframe,
    t.wireframeLinewidth = this.wireframeLinewidth,
    t.wireframeLinecap = this.wireframeLinecap,
    t.wireframeLinejoin = this.wireframeLinejoin,
    t.vertexColors = this.vertexColors,
    t.skinning = this.skinning,
    t.morphTargets = this.morphTargets,
    t
}
,
THREE.MeshLambertMaterial = function(t) {
  THREE.Material.call(this),
    this.color = new THREE.Color(16777215),
    this.ambient = new THREE.Color(16777215),
    this.emissive = new THREE.Color(0),
    this.wrapAround = !1,
    this.wrapRGB = new THREE.Vector3(1,1,1),
    this.envMap = this.specularMap = this.lightMap = this.map = null,
    this.combine = THREE.MultiplyOperation,
    this.reflectivity = 1,
    this.refractionRatio = .98,
    this.fog = !0,
    this.shading = THREE.SmoothShading,
    this.wireframe = !1,
    this.wireframeLinewidth = 1,
    this.wireframeLinejoin = this.wireframeLinecap = "round",
    this.vertexColors = THREE.NoColors,
    this.morphNormals = this.morphTargets = this.skinning = !1,
    this.setValues(t)
}
,
THREE.MeshLambertMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.MeshLambertMaterial.prototype.clone = function() {
  var t = new THREE.MeshLambertMaterial;
  return THREE.Material.prototype.clone.call(this, t),
    t.color.copy(this.color),
    t.ambient.copy(this.ambient),
    t.emissive.copy(this.emissive),
    t.wrapAround = this.wrapAround,
    t.wrapRGB.copy(this.wrapRGB),
    t.map = this.map,
    t.lightMap = this.lightMap,
    t.specularMap = this.specularMap,
    t.envMap = this.envMap,
    t.combine = this.combine,
    t.reflectivity = this.reflectivity,
    t.refractionRatio = this.refractionRatio,
    t.fog = this.fog,
    t.shading = this.shading,
    t.wireframe = this.wireframe,
    t.wireframeLinewidth = this.wireframeLinewidth,
    t.wireframeLinecap = this.wireframeLinecap,
    t.wireframeLinejoin = this.wireframeLinejoin,
    t.vertexColors = this.vertexColors,
    t.skinning = this.skinning,
    t.morphTargets = this.morphTargets,
    t.morphNormals = this.morphNormals,
    t
}
,
THREE.MeshPhongMaterial = function(t) {
  THREE.Material.call(this),
    this.color = new THREE.Color(16777215),
    this.ambient = new THREE.Color(16777215),
    this.emissive = new THREE.Color(0),
    this.specular = new THREE.Color(1118481),
    this.shininess = 30,
    this.metal = !1,
    this.perPixel = !0,
    this.wrapAround = !1,
    this.wrapRGB = new THREE.Vector3(1,1,1),
    this.bumpMap = this.lightMap = this.map = null,
    this.bumpScale = 1,
    this.normalMap = null,
    this.normalScale = new THREE.Vector2(1,1),
    this.envMap = this.specularMap = null,
    this.combine = THREE.MultiplyOperation,
    this.reflectivity = 1,
    this.refractionRatio = .98,
    this.fog = !0,
    this.shading = THREE.SmoothShading,
    this.wireframe = !1,
    this.wireframeLinewidth = 1,
    this.wireframeLinejoin = this.wireframeLinecap = "round",
    this.vertexColors = THREE.NoColors,
    this.morphNormals = this.morphTargets = this.skinning = !1,
    this.setValues(t)
}
,
THREE.MeshPhongMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.MeshPhongMaterial.prototype.clone = function() {
  var t = new THREE.MeshPhongMaterial;
  return THREE.Material.prototype.clone.call(this, t),
    t.color.copy(this.color),
    t.ambient.copy(this.ambient),
    t.emissive.copy(this.emissive),
    t.specular.copy(this.specular),
    t.shininess = this.shininess,
    t.metal = this.metal,
    t.perPixel = this.perPixel,
    t.wrapAround = this.wrapAround,
    t.wrapRGB.copy(this.wrapRGB),
    t.map = this.map,
    t.lightMap = this.lightMap,
    t.bumpMap = this.bumpMap,
    t.bumpScale = this.bumpScale,
    t.normalMap = this.normalMap,
    t.normalScale.copy(this.normalScale),
    t.specularMap = this.specularMap,
    t.envMap = this.envMap,
    t.combine = this.combine,
    t.reflectivity = this.reflectivity,
    t.refractionRatio = this.refractionRatio,
    t.fog = this.fog,
    t.shading = this.shading,
    t.wireframe = this.wireframe,
    t.wireframeLinewidth = this.wireframeLinewidth,
    t.wireframeLinecap = this.wireframeLinecap,
    t.wireframeLinejoin = this.wireframeLinejoin,
    t.vertexColors = this.vertexColors,
    t.skinning = this.skinning,
    t.morphTargets = this.morphTargets,
    t.morphNormals = this.morphNormals,
    t
}
,
THREE.MeshDepthMaterial = function(t) {
  THREE.Material.call(this),
    this.wireframe = !1,
    this.wireframeLinewidth = 1,
    this.setValues(t)
}
,
THREE.MeshDepthMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.MeshDepthMaterial.prototype.clone = function() {
  var t = new THREE.MeshDepthMaterial;
  return THREE.Material.prototype.clone.call(this, t),
    t.wireframe = this.wireframe,
    t.wireframeLinewidth = this.wireframeLinewidth,
    t
}
,
THREE.MeshNormalMaterial = function(t) {
  THREE.Material.call(this, t),
    this.shading = THREE.FlatShading,
    this.wireframe = !1,
    this.wireframeLinewidth = 1,
    this.morphTargets = !1,
    this.setValues(t)
}
,
THREE.MeshNormalMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.MeshNormalMaterial.prototype.clone = function() {
  var t = new THREE.MeshNormalMaterial;
  return THREE.Material.prototype.clone.call(this, t),
    t.shading = this.shading,
    t.wireframe = this.wireframe,
    t.wireframeLinewidth = this.wireframeLinewidth,
    t
}
,
THREE.MeshFaceMaterial = function(t) {
  this.materials = t instanceof Array ? t : []
}
,
THREE.MeshFaceMaterial.prototype.clone = function() {
  for (var t = new THREE.MeshFaceMaterial, e = 0; e < this.materials.length; e++)
    t.materials.push(this.materials[e].clone());
  return t
}
,
THREE.ParticleSystemMaterial = function(t) {
  THREE.Material.call(this),
    this.color = new THREE.Color(16777215),
    this.map = null,
    this.size = 1,
    this.sizeAttenuation = !0,
    this.vertexColors = !1,
    this.fog = !0,
    this.setValues(t)
}
,
THREE.ParticleSystemMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.ParticleSystemMaterial.prototype.clone = function() {
  var t = new THREE.ParticleSystemMaterial;
  return THREE.Material.prototype.clone.call(this, t),
    t.color.copy(this.color),
    t.map = this.map,
    t.size = this.size,
    t.sizeAttenuation = this.sizeAttenuation,
    t.vertexColors = this.vertexColors,
    t.fog = this.fog,
    t
}
,
THREE.ParticleBasicMaterial = THREE.ParticleSystemMaterial,
THREE.ShaderMaterial = function(t) {
  THREE.Material.call(this),
    this.vertexShader = this.fragmentShader = "void main() {}",
    this.uniforms = {},
    this.defines = {},
    this.attributes = null,
    this.shading = THREE.SmoothShading,
    this.linewidth = 1,
    this.wireframe = !1,
    this.wireframeLinewidth = 1,
    this.lights = this.fog = !1,
    this.vertexColors = THREE.NoColors,
    this.morphNormals = this.morphTargets = this.skinning = !1,
    this.defaultAttributeValues = {
      color: [1, 1, 1],
      uv: [0, 0],
      uv2: [0, 0]
    },
    this.index0AttributeName = "position",
    this.setValues(t)
}
,
THREE.ShaderMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.ShaderMaterial.prototype.clone = function() {
  var t = new THREE.ShaderMaterial;
  return THREE.Material.prototype.clone.call(this, t),
    t.fragmentShader = this.fragmentShader,
    t.vertexShader = this.vertexShader,
    t.uniforms = THREE.UniformsUtils.clone(this.uniforms),
    t.attributes = this.attributes,
    t.defines = this.defines,
    t.shading = this.shading,
    t.wireframe = this.wireframe,
    t.wireframeLinewidth = this.wireframeLinewidth,
    t.fog = this.fog,
    t.lights = this.lights,
    t.vertexColors = this.vertexColors,
    t.skinning = this.skinning,
    t.morphTargets = this.morphTargets,
    t.morphNormals = this.morphNormals,
    t
}
,
THREE.SpriteMaterial = function(t) {
  THREE.Material.call(this),
    this.color = new THREE.Color(16777215),
    this.map = null,
    this.rotation = 0,
    this.fog = !1,
    this.setValues(t)
}
,
THREE.SpriteMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.SpriteMaterial.prototype.clone = function() {
  var t = new THREE.SpriteMaterial;
  return THREE.Material.prototype.clone.call(this, t),
    t.color.copy(this.color),
    t.map = this.map,
    t.rotation = this.rotation,
    t.fog = this.fog,
    t
}
,
THREE.SpriteCanvasMaterial = function(t) {
  THREE.Material.call(this),
    this.color = new THREE.Color(16777215),
    this.program = function() {}
    ,
    this.setValues(t)
}
,
THREE.SpriteCanvasMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.SpriteCanvasMaterial.prototype.clone = function() {
  var t = new THREE.SpriteCanvasMaterial;
  return THREE.Material.prototype.clone.call(this, t),
    t.color.copy(this.color),
    t.program = this.program,
    t
}
,
THREE.ParticleCanvasMaterial = THREE.SpriteCanvasMaterial,
THREE.Texture = function(t, e, i, n, r, s, o, a, l) {
  this.id = THREE.TextureIdCount++,
    this.uuid = THREE.Math.generateUUID(),
    this.name = "",
    this.image = t,
    this.mipmaps = [],
    this.mapping = void 0 !== e ? e : new THREE.UVMapping,
    this.wrapS = void 0 !== i ? i : THREE.ClampToEdgeWrapping,
    this.wrapT = void 0 !== n ? n : THREE.ClampToEdgeWrapping,
    this.magFilter = void 0 !== r ? r : THREE.LinearFilter,
    this.minFilter = void 0 !== s ? s : THREE.LinearMipMapLinearFilter,
    this.anisotropy = void 0 !== l ? l : 1,
    this.format = void 0 !== o ? o : THREE.RGBAFormat,
    this.type = void 0 !== a ? a : THREE.UnsignedByteType,
    this.offset = new THREE.Vector2(0,0),
    this.repeat = new THREE.Vector2(1,1),
    this.generateMipmaps = !0,
    this.premultiplyAlpha = !1,
    this.flipY = !0,
    this.unpackAlignment = 4,
    this._needsUpdate = !1,
    this.onUpdate = null
}
,
THREE.Texture.prototype = {
  constructor: THREE.Texture,
  get needsUpdate() {
    return this._needsUpdate
  },
  set needsUpdate(t) {
    !0 === t && this.update(),
      this._needsUpdate = t
  },
  clone: function(t) {
    return void 0 === t && (t = new THREE.Texture),
      t.image = this.image,
      t.mipmaps = this.mipmaps.slice(0),
      t.mapping = this.mapping,
      t.wrapS = this.wrapS,
      t.wrapT = this.wrapT,
      t.magFilter = this.magFilter,
      t.minFilter = this.minFilter,
      t.anisotropy = this.anisotropy,
      t.format = this.format,
      t.type = this.type,
      t.offset.copy(this.offset),
      t.repeat.copy(this.repeat),
      t.generateMipmaps = this.generateMipmaps,
      t.premultiplyAlpha = this.premultiplyAlpha,
      t.flipY = this.flipY,
      t.unpackAlignment = this.unpackAlignment,
      t
  },
  update: function() {
    this.dispatchEvent({
      type: "update"
    })
  },
  dispose: function() {
    this.dispatchEvent({
      type: "dispose"
    })
  }
},
THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),
THREE.TextureIdCount = 0,
THREE.CompressedTexture = function(t, e, i, n, r, s, o, a, l, h, c) {
  THREE.Texture.call(this, null, s, o, a, l, h, n, r, c),
    this.image = {
      width: e,
      height: i
    },
    this.mipmaps = t,
    this.generateMipmaps = !1
}
,
THREE.CompressedTexture.prototype = Object.create(THREE.Texture.prototype),
THREE.CompressedTexture.prototype.clone = function() {
  var t = new THREE.CompressedTexture;
  return THREE.Texture.prototype.clone.call(this, t),
    t
}
,
THREE.DataTexture = function(t, e, i, n, r, s, o, a, l, h, c) {
  THREE.Texture.call(this, null, s, o, a, l, h, n, r, c),
    this.image = {
      data: t,
      width: e,
      height: i
    }
}
,
THREE.DataTexture.prototype = Object.create(THREE.Texture.prototype),
THREE.DataTexture.prototype.clone = function() {
  var t = new THREE.DataTexture;
  return THREE.Texture.prototype.clone.call(this, t),
    t
}
,
THREE.ParticleSystem = function(t, e) {
  THREE.Object3D.call(this),
    this.geometry = void 0 !== t ? t : new THREE.Geometry,
    this.material = void 0 !== e ? e : new THREE.ParticleSystemMaterial({
      color: 16777215 * Math.random()
    }),
    this.frustumCulled = this.sortParticles = !1
}
,
THREE.ParticleSystem.prototype = Object.create(THREE.Object3D.prototype),
THREE.ParticleSystem.prototype.clone = function(t) {
  return void 0 === t && (t = new THREE.ParticleSystem(this.geometry,this.material)),
    t.sortParticles = this.sortParticles,
    THREE.Object3D.prototype.clone.call(this, t),
    t
}
,
THREE.Line = function(t, e, i) {
  THREE.Object3D.call(this),
    this.geometry = void 0 !== t ? t : new THREE.Geometry,
    this.material = void 0 !== e ? e : new THREE.LineBasicMaterial({
      color: 16777215 * Math.random()
    }),
    this.type = void 0 !== i ? i : THREE.LineStrip
}
,
THREE.LineStrip = 0,
THREE.LinePieces = 1,
THREE.Line.prototype = Object.create(THREE.Object3D.prototype),
THREE.Line.prototype.clone = function(t) {
  return void 0 === t && (t = new THREE.Line(this.geometry,this.material,this.type)),
    THREE.Object3D.prototype.clone.call(this, t),
    t
}
,
THREE.Mesh = function(t, e) {
  THREE.Object3D.call(this),
    this.geometry = void 0 !== t ? t : new THREE.Geometry,
    this.material = void 0 !== e ? e : new THREE.MeshBasicMaterial({
      color: 16777215 * Math.random()
    }),
    this.updateMorphTargets()
}
,
THREE.Mesh.prototype = Object.create(THREE.Object3D.prototype),
THREE.Mesh.prototype.updateMorphTargets = function() {
  if (0 < this.geometry.morphTargets.length) {
    this.morphTargetBase = -1,
      this.morphTargetForcedOrder = [],
      this.morphTargetInfluences = [],
      this.morphTargetDictionary = {};
    for (var t = 0, e = this.geometry.morphTargets.length; e > t; t++)
      this.morphTargetInfluences.push(0),
        this.morphTargetDictionary[this.geometry.morphTargets[t].name] = t
  }
}
,
THREE.Mesh.prototype.getMorphTargetIndexByName = function(t) {
  return void 0 !== this.morphTargetDictionary[t] ? this.morphTargetDictionary[t] : (console.log("THREE.Mesh.getMorphTargetIndexByName: morph target " + t + " does not exist. Returning 0."),
    0)
}
,
THREE.Mesh.prototype.clone = function(t) {
  return void 0 === t && (t = new THREE.Mesh(this.geometry,this.material)),
    THREE.Object3D.prototype.clone.call(this, t),
    t
}
,
THREE.Bone = function(t) {
  THREE.Object3D.call(this),
    this.skin = t,
    this.skinMatrix = new THREE.Matrix4
}
,
THREE.Bone.prototype = Object.create(THREE.Object3D.prototype),
THREE.Bone.prototype.update = function(t, e) {
  this.matrixAutoUpdate && (e |= this.updateMatrix()),
  (e || this.matrixWorldNeedsUpdate) && (t ? this.skinMatrix.multiplyMatrices(t, this.matrix) : this.skinMatrix.copy(this.matrix),
    this.matrixWorldNeedsUpdate = !1,
    e = !0);
  var i, n = this.children.length;
  for (i = 0; n > i; i++)
    this.children[i].update(this.skinMatrix, e)
}
,
THREE.SkinnedMesh = function(t, e, i) {
  THREE.Mesh.call(this, t, e),
    this.useVertexTexture = void 0 !== i ? i : !0,
    this.identityMatrix = new THREE.Matrix4,
    this.bones = [],
    this.boneMatrices = [];
  var n, r, s;
  if (this.geometry && void 0 !== this.geometry.bones) {
    for (t = 0; t < this.geometry.bones.length; t++)
      i = this.geometry.bones[t],
        n = i.pos,
        r = i.rotq,
        s = i.scl,
        e = this.addBone(),
        e.name = i.name,
        e.position.set(n[0], n[1], n[2]),
        e.quaternion.set(r[0], r[1], r[2], r[3]),
        void 0 !== s ? e.scale.set(s[0], s[1], s[2]) : e.scale.set(1, 1, 1);
    for (t = 0; t < this.bones.length; t++)
      i = this.geometry.bones[t],
        e = this.bones[t],
        -1 === i.parent ? this.add(e) : this.bones[i.parent].add(e);
    t = this.bones.length,
      this.useVertexTexture ? (this.boneTextureHeight = this.boneTextureWidth = t = t > 256 ? 64 : t > 64 ? 32 : t > 16 ? 16 : 8,
        this.boneMatrices = new Float32Array(4 * this.boneTextureWidth * this.boneTextureHeight),
        this.boneTexture = new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),
        this.boneTexture.minFilter = THREE.NearestFilter,
        this.boneTexture.magFilter = THREE.NearestFilter,
        this.boneTexture.generateMipmaps = !1,
        this.boneTexture.flipY = !1) : this.boneMatrices = new Float32Array(16 * t),
      this.pose()
  }
}
,
THREE.SkinnedMesh.prototype = Object.create(THREE.Mesh.prototype),
THREE.SkinnedMesh.prototype.addBone = function(t) {
  return void 0 === t && (t = new THREE.Bone(this)),
    this.bones.push(t),
    t
}
,
THREE.SkinnedMesh.prototype.updateMatrixWorld = function() {
  var t = new THREE.Matrix4;
  return function(e) {
    this.matrixAutoUpdate && this.updateMatrix(),
    (this.matrixWorldNeedsUpdate || e) && (this.parent ? this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix) : this.matrixWorld.copy(this.matrix),
      this.matrixWorldNeedsUpdate = !1);
    for (var e = 0, i = this.children.length; i > e; e++) {
      var n = this.children[e];
      n instanceof THREE.Bone ? n.update(this.identityMatrix, !1) : n.updateMatrixWorld(!0)
    }
    if (void 0 == this.boneInverses)
      for (this.boneInverses = [],
             e = 0,
             i = this.bones.length; i > e; e++)
        n = new THREE.Matrix4,
          n.getInverse(this.bones[e].skinMatrix),
          this.boneInverses.push(n);
    for (e = 0,
           i = this.bones.length; i > e; e++)
      t.multiplyMatrices(this.bones[e].skinMatrix, this.boneInverses[e]),
        t.flattenToArrayOffset(this.boneMatrices, 16 * e);
    this.useVertexTexture && (this.boneTexture.needsUpdate = !0)
  }
}(),
THREE.SkinnedMesh.prototype.pose = function() {
  this.updateMatrixWorld(!0),
    this.normalizeSkinWeights()
}
,
THREE.SkinnedMesh.prototype.normalizeSkinWeights = function() {
  if (this.geometry instanceof THREE.Geometry)
    for (var t = 0; t < this.geometry.skinIndices.length; t++) {
      var e = this.geometry.skinWeights[t]
        , i = 1 / e.lengthManhattan();
      1 / 0 !== i ? e.multiplyScalar(i) : e.set(1)
    }
}
,
THREE.SkinnedMesh.prototype.clone = function(t) {
  return void 0 === t && (t = new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),
    THREE.Mesh.prototype.clone.call(this, t),
    t
}
,
THREE.MorphAnimMesh = function(t, e) {
  THREE.Mesh.call(this, t, e),
    this.duration = 1e3,
    this.mirroredLoop = !1,
    this.currentKeyframe = this.lastKeyframe = this.time = 0,
    this.direction = 1,
    this.directionBackwards = !1,
    this.setFrameRange(0, this.geometry.morphTargets.length - 1)
}
,
THREE.MorphAnimMesh.prototype = Object.create(THREE.Mesh.prototype),
THREE.MorphAnimMesh.prototype.setFrameRange = function(t, e) {
  this.startKeyframe = t,
    this.endKeyframe = e,
    this.length = this.endKeyframe - this.startKeyframe + 1
}
,
THREE.MorphAnimMesh.prototype.setDirectionForward = function() {
  this.direction = 1,
    this.directionBackwards = !1
}
,
THREE.MorphAnimMesh.prototype.setDirectionBackward = function() {
  this.direction = -1,
    this.directionBackwards = !0
}
,
THREE.MorphAnimMesh.prototype.parseAnimations = function() {
  var t = this.geometry;
  t.animations || (t.animations = {});
  for (var e, i = t.animations, n = /([a-z]+)(\d+)/, r = 0, s = t.morphTargets.length; s > r; r++) {
    var o = t.morphTargets[r].name.match(n);
    if (o && 1 < o.length) {
      o = o[1],
      i[o] || (i[o] = {
        start: 1 / 0,
        end: -1 / 0
      });
      var a = i[o];
      r < a.start && (a.start = r),
      r > a.end && (a.end = r),
      e || (e = o)
    }
  }
  t.firstAnimation = e
}
,
THREE.MorphAnimMesh.prototype.setAnimationLabel = function(t, e, i) {
  this.geometry.animations || (this.geometry.animations = {}),
    this.geometry.animations[t] = {
      start: e,
      end: i
    }
}
,
THREE.MorphAnimMesh.prototype.playAnimation = function(t, e) {
  var i = this.geometry.animations[t];
  i ? (this.setFrameRange(i.start, i.end),
    this.duration = 1e3 * ((i.end - i.start) / e),
    this.time = 0) : console.warn("animation[" + t + "] undefined")
}
,
THREE.MorphAnimMesh.prototype.updateAnimation = function(t) {
  var e = this.duration / this.length;
  this.time += this.direction * t,
    this.mirroredLoop ? (this.time > this.duration || 0 > this.time) && (this.direction *= -1,
    this.time > this.duration && (this.time = this.duration,
      this.directionBackwards = !0),
    0 > this.time && (this.time = 0,
      this.directionBackwards = !1)) : (this.time %= this.duration,
    0 > this.time && (this.time += this.duration)),
    t = this.startKeyframe + THREE.Math.clamp(Math.floor(this.time / e), 0, this.length - 1),
  t !== this.currentKeyframe && (this.morphTargetInfluences[this.lastKeyframe] = 0,
    this.morphTargetInfluences[this.currentKeyframe] = 1,
    this.morphTargetInfluences[t] = 0,
    this.lastKeyframe = this.currentKeyframe,
    this.currentKeyframe = t),
    e = this.time % e / e,
  this.directionBackwards && (e = 1 - e),
    this.morphTargetInfluences[this.currentKeyframe] = e,
    this.morphTargetInfluences[this.lastKeyframe] = 1 - e
}
,
THREE.MorphAnimMesh.prototype.clone = function(t) {
  return void 0 === t && (t = new THREE.MorphAnimMesh(this.geometry,this.material)),
    t.duration = this.duration,
    t.mirroredLoop = this.mirroredLoop,
    t.time = this.time,
    t.lastKeyframe = this.lastKeyframe,
    t.currentKeyframe = this.currentKeyframe,
    t.direction = this.direction,
    t.directionBackwards = this.directionBackwards,
    THREE.Mesh.prototype.clone.call(this, t),
    t
}
,
THREE.LOD = function() {
  THREE.Object3D.call(this),
    this.objects = []
}
,
THREE.LOD.prototype = Object.create(THREE.Object3D.prototype),
THREE.LOD.prototype.addLevel = function(t, e) {
  void 0 === e && (e = 0);
  for (var e = Math.abs(e), i = 0; i < this.objects.length && !(e < this.objects[i].distance); i++)
    ;
  this.objects.splice(i, 0, {
    distance: e,
    object: t
  }),
    this.add(t)
}
,
THREE.LOD.prototype.getObjectForDistance = function(t) {
  for (var e = 1, i = this.objects.length; i > e && !(t < this.objects[e].distance); e++)
    ;
  return this.objects[e - 1].object
}
,
THREE.LOD.prototype.update = function() {
  var t = new THREE.Vector3
    , e = new THREE.Vector3;
  return function(i) {
    if (1 < this.objects.length) {
      t.setFromMatrixPosition(i.matrixWorld),
        e.setFromMatrixPosition(this.matrixWorld),
        i = t.distanceTo(e),
        this.objects[0].object.visible = !0;
      for (var n = 1, r = this.objects.length; r > n && i >= this.objects[n].distance; n++)
        this.objects[n - 1].object.visible = !1,
          this.objects[n].object.visible = !0;
      for (; r > n; n++)
        this.objects[n].object.visible = !1
    }
  }
}(),
THREE.LOD.prototype.clone = function() {}
,
THREE.Sprite = function(t) {
  THREE.Object3D.call(this),
    this.material = void 0 !== t ? t : new THREE.SpriteMaterial
}
,
THREE.Sprite.prototype = Object.create(THREE.Object3D.prototype),
THREE.Sprite.prototype.updateMatrix = function() {
  this.matrix.compose(this.position, this.quaternion, this.scale),
    this.matrixWorldNeedsUpdate = !0
}
,
THREE.Sprite.prototype.clone = function(t) {
  return void 0 === t && (t = new THREE.Sprite(this.material)),
    THREE.Object3D.prototype.clone.call(this, t),
    t
}
,
THREE.Particle = THREE.Sprite,
THREE.Scene = function() {
  THREE.Object3D.call(this),
    this.overrideMaterial = this.fog = null,
    this.autoUpdate = !0,
    this.matrixAutoUpdate = !1,
    this.__lights = [],
    this.__objectsAdded = [],
    this.__objectsRemoved = []
}
,
THREE.Scene.prototype = Object.create(THREE.Object3D.prototype),
THREE.Scene.prototype.__addObject = function(t) {
  if (t instanceof THREE.Light)
    -1 === this.__lights.indexOf(t) && this.__lights.push(t),
    t.target && void 0 === t.target.parent && this.add(t.target);
  else if (!(t instanceof THREE.Camera || t instanceof THREE.Bone)) {
    this.__objectsAdded.push(t);
    var e = this.__objectsRemoved.indexOf(t);
    -1 !== e && this.__objectsRemoved.splice(e, 1)
  }
  for (this.dispatchEvent({
    type: "objectAdded",
    object: t
  }),
         t.dispatchEvent({
           type: "addedToScene",
           scene: this
         }),
         e = 0; e < t.children.length; e++)
    this.__addObject(t.children[e])
}
,
THREE.Scene.prototype.__removeObject = function(t) {
  if (t instanceof THREE.Light) {
    var e = this.__lights.indexOf(t);
    if (-1 !== e && this.__lights.splice(e, 1),
        t.shadowCascadeArray)
      for (e = 0; e < t.shadowCascadeArray.length; e++)
        this.__removeObject(t.shadowCascadeArray[e])
  } else
    t instanceof THREE.Camera || (this.__objectsRemoved.push(t),
      e = this.__objectsAdded.indexOf(t),
    -1 !== e && this.__objectsAdded.splice(e, 1));
  for (this.dispatchEvent({
    type: "objectRemoved",
    object: t
  }),
         t.dispatchEvent({
           type: "removedFromScene",
           scene: this
         }),
         e = 0; e < t.children.length; e++)
    this.__removeObject(t.children[e])
}
,
THREE.Scene.prototype.clone = function(t) {
  return void 0 === t && (t = new THREE.Scene),
    THREE.Object3D.prototype.clone.call(this, t),
  null !== this.fog && (t.fog = this.fog.clone()),
  null !== this.overrideMaterial && (t.overrideMaterial = this.overrideMaterial.clone()),
    t.autoUpdate = this.autoUpdate,
    t.matrixAutoUpdate = this.matrixAutoUpdate,
    t
}
,
THREE.Fog = function(t, e, i) {
  this.name = "",
    this.color = new THREE.Color(t),
    this.near = void 0 !== e ? e : 1,
    this.far = void 0 !== i ? i : 1e3
}
,
THREE.Fog.prototype.clone = function() {
  return new THREE.Fog(this.color.getHex(),this.near,this.far)
}
,
THREE.FogExp2 = function(t, e) {
  this.name = "",
    this.color = new THREE.Color(t),
    this.density = void 0 !== e ? e : 25e-5
}
,
THREE.FogExp2.prototype.clone = function() {
  return new THREE.FogExp2(this.color.getHex(),this.density)
}
,
THREE.CanvasRenderer = function(t) {
  function e(t, e, i) {
    for (var n = 0, r = T.length; r > n; n++) {
      var s = T[n];
      if (Te.copy(s.color),
        s instanceof THREE.DirectionalLight) {
        var o = Me.setFromMatrixPosition(s.matrixWorld).normalize()
          , a = e.dot(o);
        0 >= a || (a *= s.intensity,
          i.add(Te.multiplyScalar(a)))
      } else
        s instanceof THREE.PointLight && (o = Me.setFromMatrixPosition(s.matrixWorld),
          a = e.dot(Me.subVectors(o, t).normalize()),
        0 >= a || (a *= 0 == s.distance ? 1 : 1 - Math.min(t.distanceTo(o) / s.distance, 1),
        0 != a && (a *= s.intensity,
          i.add(Te.multiplyScalar(a)))))
    }
  }
  function i(t, e, i, n) {
    p(e),
      d(i),
      f(n),
      m(t.getStyle()),
      D.stroke(),
      _e.expandByScalar(2 * e)
  }
  function n(t) {
    g(t.getStyle()),
      D.fill()
  }
  function r(t) {
    s(t.target)
  }
  function s(t) {
    var e = t.wrapS === THREE.RepeatWrapping
      , i = t.wrapT === THREE.RepeatWrapping
      , n = t.image
      , r = document.createElement("canvas");
    r.width = n.width,
      r.height = n.height;
    var s = r.getContext("2d");
    s.setTransform(1, 0, 0, -1, 0, n.height),
      s.drawImage(n, 0, 0),
      xe[t.id] = D.createPattern(r, !0 === e && !0 === i ? "repeat" : !0 === e && !1 === i ? "repeat-x" : !1 === e && !0 === i ? "repeat-y" : "no-repeat")
  }
  function o(t, e, i, n, o, a, l, h, c, u, p, d, f) {
    if (!(f instanceof THREE.DataTexture)) {
      !1 === f.hasEventListener("update", r) && (void 0 !== f.image && 0 < f.image.width && s(f),
        f.addEventListener("update", r));
      var m = xe[f.id];
      if (void 0 !== m) {
        g(m);
        var m = f.offset.x / f.repeat.x
          , v = f.offset.y / f.repeat.y
          , y = f.image.width * f.repeat.x
          , f = f.image.height * f.repeat.y
          , l = (l + m) * y
          , h = (h + v) * f
          , i = i - t
          , n = n - e
          , o = o - t
          , a = a - e
          , c = (c + m) * y - l
          , u = (u + v) * f - h
          , p = (p + m) * y - l
          , d = (d + v) * f - h
          , f = c * d - p * u;
        0 !== f && (m = 1 / f,
          f = (d * i - u * o) * m,
          u = (d * n - u * a) * m,
          i = (c * o - p * i) * m,
          n = (c * a - p * n) * m,
          t = t - f * l - i * h,
          e = e - u * l - n * h,
          D.save(),
          D.transform(f, u, i, n, t, e),
          D.fill(),
          D.restore())
      } else
        g("rgba(0,0,0,1)"),
          D.fill()
    }
  }
  function a(t, e, i, n, r, s, o, a, l, h, c, u, p) {
    var d, f;
    d = p.width - 1,
      f = p.height - 1,
      o *= d,
      a *= f,
      i -= t,
      n -= e,
      r -= t,
      s -= e,
      l = l * d - o,
      h = h * f - a,
      c = c * d - o,
      u = u * f - a,
      f = 1 / (l * u - c * h),
      d = (u * i - h * r) * f,
      h = (u * n - h * s) * f,
      i = (l * r - c * i) * f,
      n = (l * s - c * n) * f,
      t = t - d * o - i * a,
      e = e - h * o - n * a,
      D.save(),
      D.transform(d, h, i, n, t, e),
      D.clip(),
      D.drawImage(p, 0, 0),
      D.restore()
  }
  function l(t, e, i, n) {
    return ce[0] = 255 * t.r | 0,
      ce[1] = 255 * t.g | 0,
      ce[2] = 255 * t.b | 0,
      ce[4] = 255 * e.r | 0,
      ce[5] = 255 * e.g | 0,
      ce[6] = 255 * e.b | 0,
      ce[8] = 255 * i.r | 0,
      ce[9] = 255 * i.g | 0,
      ce[10] = 255 * i.b | 0,
      ce[12] = 255 * n.r | 0,
      ce[13] = 255 * n.g | 0,
      ce[14] = 255 * n.b | 0,
      le.putImageData(he, 0, 0),
      pe.drawImage(ae, 0, 0),
      ue
  }
  function h(t, e, i) {
    var n = e.x - t.x
      , r = e.y - t.y
      , s = n * n + r * r;
    0 !== s && (i /= Math.sqrt(s),
      n *= i,
      r *= i,
      e.x += n,
      e.y += r,
      t.x -= n,
      t.y -= r)
  }
  function c(t) {
    O !== t && (O = D.globalAlpha = t)
  }
  function u(t) {
    z !== t && (t === THREE.NormalBlending ? D.globalCompositeOperation = "source-over" : t === THREE.AdditiveBlending ? D.globalCompositeOperation = "lighter" : t === THREE.SubtractiveBlending && (D.globalCompositeOperation = "darker"),
      z = t)
  }
  function p(t) {
    B !== t && (B = D.lineWidth = t)
  }
  function d(t) {
    V !== t && (V = D.lineCap = t)
  }
  function f(t) {
    U !== t && (U = D.lineJoin = t)
  }
  function m(t) {
    F !== t && (F = D.strokeStyle = t)
  }
  function g(t) {
    N !== t && (N = D.fillStyle = t)
  }
  function v(t, e) {
    (G !== t || W !== e) && (D.setLineDash([t, e]),
      G = t,
      W = e)
  }
  console.log("THREE.CanvasRenderer", THREE.REVISION);
  var y, E, T, x, b, w, _, R = THREE.Math.smoothstep, t = t || {}, S = this, H = new THREE.Projector, M = void 0 !== t.canvas ? t.canvas : document.createElement("canvas"), C = M.width, P = M.height, A = Math.floor(C / 2), L = Math.floor(P / 2), D = M.getContext("2d"), k = new THREE.Color(0), I = 0, O = 1, z = 0, F = null, N = null, B = null, V = null, U = null, G = null, W = 0;
  new THREE.RenderableVertex,
    new THREE.RenderableVertex;
  var j, X, Y, q, $, K, Q, Z, J, te, ee, ie, ne, re, se, oe, ae, le, he, ce, ue, pe, de = new THREE.Color, fe = new THREE.Color, me = new THREE.Color, ge = new THREE.Color, ve = new THREE.Color, ye = new THREE.Color, Ee = new THREE.Color, Te = new THREE.Color, xe = {}, be = new THREE.Box2, we = new THREE.Box2, _e = new THREE.Box2, Re = new THREE.Color, Se = new THREE.Color, He = new THREE.Color, Me = new THREE.Vector3, Ce = 16;
  ae = document.createElement("canvas"),
    ae.width = ae.height = 2,
    le = ae.getContext("2d"),
    le.fillStyle = "rgba(0,0,0,1)",
    le.fillRect(0, 0, 2, 2),
    he = le.getImageData(0, 0, 2, 2),
    ce = he.data,
    ue = document.createElement("canvas"),
    ue.width = ue.height = Ce,
    pe = ue.getContext("2d"),
    pe.translate(-Ce / 2, -Ce / 2),
    pe.scale(Ce, Ce),
    Ce--,
  void 0 === D.setLineDash && (D.setLineDash = void 0 !== D.mozDash ? function(t) {
        D.mozDash = null !== t[0] ? t : null
      }
      : function() {}
  ),
    this.domElement = M,
    this.devicePixelRatio = void 0 !== t.devicePixelRatio ? t.devicePixelRatio : void 0 !== self.devicePixelRatio ? self.devicePixelRatio : 1,
    this.sortElements = this.sortObjects = this.autoClear = !0,
    this.info = {
      render: {
        vertices: 0,
        faces: 0
      }
    },
    this.supportsVertexTextures = function() {}
    ,
    this.setFaceCulling = function() {}
    ,
    this.setSize = function(t, e, i) {
      C = t * this.devicePixelRatio,
        P = e * this.devicePixelRatio,
        A = Math.floor(C / 2),
        L = Math.floor(P / 2),
        M.width = C,
        M.height = P,
      1 !== this.devicePixelRatio && !1 !== i && (M.style.width = t + "px",
        M.style.height = e + "px"),
        be.set(new THREE.Vector2(-A,-L), new THREE.Vector2(A,L)),
        we.set(new THREE.Vector2(-A,-L), new THREE.Vector2(A,L)),
        O = 1,
        z = 0,
        U = V = B = N = F = null
    }
    ,
    this.setClearColor = function(t, e) {
      k.set(t),
        I = void 0 !== e ? e : 1,
        we.set(new THREE.Vector2(-A,-L), new THREE.Vector2(A,L))
    }
    ,
    this.setClearColorHex = function(t, e) {
      console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."),
        this.setClearColor(t, e)
    }
    ,
    this.getMaxAnisotropy = function() {
      return 0
    }
    ,
    this.clear = function() {
      D.setTransform(1, 0, 0, -1, A, L),
      !1 === we.empty() && (we.intersect(be),
        we.expandByScalar(2),
      1 > I && D.clearRect(0 | we.min.x, 0 | we.min.y, we.max.x - we.min.x | 0, we.max.y - we.min.y | 0),
      I > 0 && (u(THREE.NormalBlending),
        c(1),
        g("rgba(" + Math.floor(255 * k.r) + "," + Math.floor(255 * k.g) + "," + Math.floor(255 * k.b) + "," + I + ")"),
        D.fillRect(0 | we.min.x, 0 | we.min.y, we.max.x - we.min.x | 0, we.max.y - we.min.y | 0)),
        we.makeEmpty())
    }
    ,
    this.clearColor = function() {}
    ,
    this.clearDepth = function() {}
    ,
    this.clearStencil = function() {}
    ,
    this.render = function(t, M) {
      if (!1 == M instanceof THREE.Camera)
        console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");
      else {
        !0 === this.autoClear && this.clear(),
          D.setTransform(1, 0, 0, -1, A, L),
          S.info.render.vertices = 0,
          S.info.render.faces = 0,
          y = H.projectScene(t, M, this.sortObjects, this.sortElements),
          E = y.elements,
          T = y.lights,
          x = M,
          Re.setRGB(0, 0, 0),
          Se.setRGB(0, 0, 0),
          He.setRGB(0, 0, 0);
        for (var C = 0, P = T.length; P > C; C++) {
          var k = T[C]
            , I = k.color;
          k instanceof THREE.AmbientLight ? Re.add(I) : k instanceof THREE.DirectionalLight ? Se.add(I) : k instanceof THREE.PointLight && He.add(I)
        }
        for (C = 0,
               P = E.length; P > C; C++) {
          var O = E[C]
            , z = O.material;
          if (void 0 !== z && !1 !== z.visible) {
            if (_e.makeEmpty(),
              O instanceof THREE.RenderableSprite) {
              b = O,
                b.x *= A,
                b.y *= L,
                k = b,
                I = z,
                c(I.opacity),
                u(I.blending);
              var F = O.scale.x * A
                , O = O.scale.y * L
                , z = .5 * Math.sqrt(F * F + O * O);
              if (_e.min.set(k.x - z, k.y - z),
                  _e.max.set(k.x + z, k.y + z),
                !1 === be.isIntersectionBox(_e))
                _e.makeEmpty();
              else if (I instanceof THREE.SpriteMaterial || I instanceof THREE.ParticleSystemMaterial) {
                var N = I.map;
                if (null !== N) {
                  !1 === N.hasEventListener("update", r) && (void 0 !== N.image && 0 < N.image.width && s(N),
                    N.addEventListener("update", r)),
                    z = xe[N.id],
                    g(void 0 !== z ? z : "rgba( 0, 0, 0, 1 )");
                  var B = N.image
                    , z = B.width * N.offset.x
                    , V = B.height * N.offset.y
                    , U = B.width * N.repeat.x
                    , N = B.height * N.repeat.y
                    , B = F / U
                    , G = O / N;
                  D.save(),
                    D.translate(k.x, k.y),
                  0 !== I.rotation && D.rotate(I.rotation),
                    D.translate(-F / 2, -O / 2),
                    D.scale(B, G),
                    D.translate(-z, -V),
                    D.fillRect(z, V, U, N)
                } else
                  g(I.color.getStyle()),
                    D.save(),
                    D.translate(k.x, k.y),
                  0 !== I.rotation && D.rotate(I.rotation),
                    D.scale(F, -O),
                    D.fillRect(-.5, -.5, 1, 1);
                D.restore()
              } else
                I instanceof THREE.SpriteCanvasMaterial && (m(I.color.getStyle()),
                  g(I.color.getStyle()),
                  D.save(),
                  D.translate(k.x, k.y),
                0 !== I.rotation && D.rotate(I.rotation),
                  D.scale(F, O),
                  I.program(D),
                  D.restore())
            } else if (O instanceof THREE.RenderableLine) {
              if (b = O.v1,
                  w = O.v2,
                  b.positionScreen.x *= A,
                  b.positionScreen.y *= L,
                  w.positionScreen.x *= A,
                  w.positionScreen.y *= L,
                  _e.setFromPoints([b.positionScreen, w.positionScreen]),
                !0 === be.isIntersectionBox(_e))
                if (k = b,
                    I = w,
                    F = O,
                    O = z,
                    c(O.opacity),
                    u(O.blending),
                    D.beginPath(),
                    D.moveTo(k.positionScreen.x, k.positionScreen.y),
                    D.lineTo(I.positionScreen.x, I.positionScreen.y),
                  O instanceof THREE.LineBasicMaterial) {
                  if (p(O.linewidth),
                      d(O.linecap),
                      f(O.linejoin),
                    O.vertexColors !== THREE.VertexColors)
                    m(O.color.getStyle());
                  else if (z = F.vertexColors[0].getStyle(),
                      F = F.vertexColors[1].getStyle(),
                    z === F)
                    m(z);
                  else {
                    try {
                      var W = D.createLinearGradient(k.positionScreen.x, k.positionScreen.y, I.positionScreen.x, I.positionScreen.y);
                      W.addColorStop(0, z),
                        W.addColorStop(1, F)
                    } catch (ae) {
                      W = z
                    }
                    m(W)
                  }
                  D.stroke(),
                    _e.expandByScalar(2 * O.linewidth)
                } else
                  O instanceof THREE.LineDashedMaterial && (p(O.linewidth),
                    d(O.linecap),
                    f(O.linejoin),
                    m(O.color.getStyle()),
                    v(O.dashSize, O.gapSize),
                    D.stroke(),
                    _e.expandByScalar(2 * O.linewidth),
                    v(null, null))
            } else if (O instanceof THREE.RenderableFace3) {
              if (b = O.v1,
                  w = O.v2,
                  _ = O.v3,
                -1 > b.positionScreen.z || 1 < b.positionScreen.z)
                continue;
              if (-1 > w.positionScreen.z || 1 < w.positionScreen.z)
                continue;
              if (-1 > _.positionScreen.z || 1 < _.positionScreen.z)
                continue;
              if (b.positionScreen.x *= A,
                  b.positionScreen.y *= L,
                  w.positionScreen.x *= A,
                  w.positionScreen.y *= L,
                  _.positionScreen.x *= A,
                  _.positionScreen.y *= L,
                0 < z.overdraw && (h(b.positionScreen, w.positionScreen, z.overdraw),
                  h(w.positionScreen, _.positionScreen, z.overdraw),
                  h(_.positionScreen, b.positionScreen, z.overdraw)),
                  _e.setFromPoints([b.positionScreen, w.positionScreen, _.positionScreen]),
                !0 === be.isIntersectionBox(_e)) {
                k = b,
                  I = w,
                  F = _,
                  S.info.render.vertices += 3,
                  S.info.render.faces++,
                  c(z.opacity),
                  u(z.blending),
                  j = k.positionScreen.x,
                  X = k.positionScreen.y,
                  Y = I.positionScreen.x,
                  q = I.positionScreen.y,
                  $ = F.positionScreen.x,
                  K = F.positionScreen.y;
                var V = j
                  , U = X
                  , N = Y
                  , B = q
                  , G = $
                  , le = K;
                D.beginPath(),
                  D.moveTo(V, U),
                  D.lineTo(N, B),
                  D.lineTo(G, le),
                  D.closePath(),
                  (z instanceof THREE.MeshLambertMaterial || z instanceof THREE.MeshPhongMaterial) && null === z.map ? (ye.copy(z.color),
                    Ee.copy(z.emissive),
                  z.vertexColors === THREE.FaceColors && ye.multiply(O.color),
                    !1 === z.wireframe && z.shading === THREE.SmoothShading && 3 === O.vertexNormalsLength ? (fe.copy(Re),
                      me.copy(Re),
                      ge.copy(Re),
                      e(O.v1.positionWorld, O.vertexNormalsModel[0], fe),
                      e(O.v2.positionWorld, O.vertexNormalsModel[1], me),
                      e(O.v3.positionWorld, O.vertexNormalsModel[2], ge),
                      fe.multiply(ye).add(Ee),
                      me.multiply(ye).add(Ee),
                      ge.multiply(ye).add(Ee),
                      ve.addColors(me, ge).multiplyScalar(.5),
                      J = l(fe, me, ge, ve),
                      a(j, X, Y, q, $, K, 0, 0, 1, 0, 0, 1, J)) : (de.copy(Re),
                      e(O.centroidModel, O.normalModel, de),
                      de.multiply(ye).add(Ee),
                      !0 === z.wireframe ? i(de, z.wireframeLinewidth, z.wireframeLinecap, z.wireframeLinejoin) : n(de))) : z instanceof THREE.MeshBasicMaterial || z instanceof THREE.MeshLambertMaterial || z instanceof THREE.MeshPhongMaterial ? null !== z.map ? z.map.mapping instanceof THREE.UVMapping && (te = O.uvs[0],
                    o(j, X, Y, q, $, K, te[0].x, te[0].y, te[1].x, te[1].y, te[2].x, te[2].y, z.map)) : null !== z.envMap ? z.envMap.mapping instanceof THREE.SphericalReflectionMapping && (Me.copy(O.vertexNormalsModelView[0]),
                    ee = .5 * Me.x + .5,
                    ie = .5 * Me.y + .5,
                    Me.copy(O.vertexNormalsModelView[1]),
                    ne = .5 * Me.x + .5,
                    re = .5 * Me.y + .5,
                    Me.copy(O.vertexNormalsModelView[2]),
                    se = .5 * Me.x + .5,
                    oe = .5 * Me.y + .5,
                    o(j, X, Y, q, $, K, ee, ie, ne, re, se, oe, z.envMap)) : (de.copy(z.color),
                  z.vertexColors === THREE.FaceColors && de.multiply(O.color),
                    !0 === z.wireframe ? i(de, z.wireframeLinewidth, z.wireframeLinecap, z.wireframeLinejoin) : n(de)) : z instanceof THREE.MeshDepthMaterial ? (Q = x.near,
                    Z = x.far,
                    fe.r = fe.g = fe.b = 1 - R(k.positionScreen.z * k.positionScreen.w, Q, Z),
                    me.r = me.g = me.b = 1 - R(I.positionScreen.z * I.positionScreen.w, Q, Z),
                    ge.r = ge.g = ge.b = 1 - R(F.positionScreen.z * F.positionScreen.w, Q, Z),
                    ve.addColors(me, ge).multiplyScalar(.5),
                    J = l(fe, me, ge, ve),
                    a(j, X, Y, q, $, K, 0, 0, 1, 0, 0, 1, J)) : z instanceof THREE.MeshNormalMaterial && (k = void 0,
                    z.shading === THREE.FlatShading ? (k = O.normalModelView,
                      de.setRGB(k.x, k.y, k.z).multiplyScalar(.5).addScalar(.5),
                      !0 === z.wireframe ? i(de, z.wireframeLinewidth, z.wireframeLinecap, z.wireframeLinejoin) : n(de)) : z.shading === THREE.SmoothShading && (k = O.vertexNormalsModelView[0],
                      fe.setRGB(k.x, k.y, k.z).multiplyScalar(.5).addScalar(.5),
                      k = O.vertexNormalsModelView[1],
                      me.setRGB(k.x, k.y, k.z).multiplyScalar(.5).addScalar(.5),
                      k = O.vertexNormalsModelView[2],
                      ge.setRGB(k.x, k.y, k.z).multiplyScalar(.5).addScalar(.5),
                      ve.addColors(me, ge).multiplyScalar(.5),
                      J = l(fe, me, ge, ve),
                      a(j, X, Y, q, $, K, 0, 0, 1, 0, 0, 1, J)))
              }
            }
            we.union(_e)
          }
        }
        D.setTransform(1, 0, 0, 1, 0, 0)
      }
    }
}
,
THREE.ShaderChunk = {
  fog_pars_fragment: "#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",
  fog_fragment: "#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",
  envmap_pars_fragment: "#ifdef USE_ENVMAP\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nuniform bool useRefract;\nuniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif",
  envmap_fragment: "#ifdef USE_ENVMAP\nvec3 reflectVec;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nreflectVec = refract( cameraToVertex, normal, refractionRatio );\n} else { \nreflectVec = reflect( cameraToVertex, normal );\n}\n#else\nreflectVec = vReflect;\n#endif\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n} else if ( combine == 2 ) {\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n} else {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n}\n#endif",
  envmap_pars_vertex: "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif",
  worldpos_vertex: "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n#ifdef USE_SKINNING\nvec4 worldPosition = modelMatrix * skinned;\n#endif\n#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n#endif\n#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n#endif\n#endif",
  envmap_vertex: "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\nworldNormal = normalize( worldNormal );\nvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, worldNormal );\n}\n#endif",
  map_particle_pars_fragment: "#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
  map_particle_fragment: "#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif",
  map_pars_vertex: "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif",
  map_pars_fragment: "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
  map_vertex: "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",
  map_fragment: "#ifdef USE_MAP\nvec4 texelColor = texture2D( map, vUv );\n#ifdef GAMMA_INPUT\ntexelColor.xyz *= texelColor.xyz;\n#endif\ngl_FragColor = gl_FragColor * texelColor;\n#endif",
  lightmap_pars_fragment: "#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",
  lightmap_pars_vertex: "#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",
  lightmap_fragment: "#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",
  lightmap_vertex: "#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",
  bumpmap_pars_fragment: "#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;\nuniform float bumpScale;\nvec2 dHdxy_fwd() {\nvec2 dSTdx = dFdx( vUv );\nvec2 dSTdy = dFdy( vUv );\nfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\nfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\nfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\nreturn vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\nvec3 vSigmaX = dFdx( surf_pos );\nvec3 vSigmaY = dFdy( surf_pos );\nvec3 vN = surf_norm;\nvec3 R1 = cross( vSigmaY, vN );\nvec3 R2 = cross( vN, vSigmaX );\nfloat fDet = dot( vSigmaX, R1 );\nvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\nreturn normalize( abs( fDet ) * surf_norm - vGrad );\n}\n#endif",
  normalmap_pars_fragment: "#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;\nuniform vec2 normalScale;\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\nvec3 q0 = dFdx( eye_pos.xyz );\nvec3 q1 = dFdy( eye_pos.xyz );\nvec2 st0 = dFdx( vUv.st );\nvec2 st1 = dFdy( vUv.st );\nvec3 S = normalize(  q0 * st1.t - q1 * st0.t );\nvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\nvec3 N = normalize( surf_norm );\nvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\nmapN.xy = normalScale * mapN.xy;\nmat3 tsn = mat3( S, T, N );\nreturn normalize( tsn * mapN );\n}\n#endif",
  specularmap_pars_fragment: "#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",
  specularmap_fragment: "float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular = texture2D( specularMap, vUv );\nspecularStrength = texelSpecular.r;\n#else\nspecularStrength = 1.0;\n#endif",
  lights_lambert_pars_vertex: "uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif",
  lights_lambert_vertex: "vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\nvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n#ifdef DOUBLE_SIDED\nvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n#endif\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif",
  lights_phong_pars_vertex: "#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif",
  lights_phong_vertex: "#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvWorldPosition = worldPosition.xyz;\n#endif",
  lights_phong_pars_fragment: "uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",
  lights_phong_fragment: "vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#ifdef USE_NORMALMAP\nnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\nnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += diffuse * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",
  color_pars_fragment: "#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",
  color_fragment: "#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n#endif",
  color_pars_vertex: "#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",
  color_vertex: "#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",
  skinning_pars_vertex: "#ifdef USE_SKINNING\n#ifdef BONE_TEXTURE\nuniform sampler2D boneTexture;\nuniform int boneTextureWidth;\nuniform int boneTextureHeight;\nmat4 getBoneMatrix( const in float i ) {\nfloat j = i * 4.0;\nfloat x = mod( j, float( boneTextureWidth ) );\nfloat y = floor( j / float( boneTextureWidth ) );\nfloat dx = 1.0 / float( boneTextureWidth );\nfloat dy = 1.0 / float( boneTextureHeight );\ny = dy * ( y + 0.5 );\nvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\nvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\nvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\nvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\nmat4 bone = mat4( v1, v2, v3, v4 );\nreturn bone;\n}\n#else\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\nmat4 getBoneMatrix( const in float i ) {\nmat4 bone = boneGlobalMatrices[ int(i) ];\nreturn bone;\n}\n#endif\n#endif",
  skinbase_vertex: "#ifdef USE_SKINNING\nmat4 boneMatX = getBoneMatrix( skinIndex.x );\nmat4 boneMatY = getBoneMatrix( skinIndex.y );\n#endif",
  skinning_vertex: "#ifdef USE_SKINNING\n#ifdef USE_MORPHTARGETS\nvec4 skinVertex = vec4( morphed, 1.0 );\n#else\nvec4 skinVertex = vec4( position, 1.0 );\n#endif\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned 	  += boneMatY * skinVertex * skinWeight.y;\n#endif",
  morphtarget_pars_vertex: "#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif",
  morphtarget_vertex: "#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\n#endif",
  default_vertex: "vec4 mvPosition;\n#ifdef USE_SKINNING\nmvPosition = modelViewMatrix * skinned;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( position, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;",
  morphnormal_vertex: "#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\n#endif",
  skinnormal_vertex: "#ifdef USE_SKINNING\nmat4 skinMatrix = skinWeight.x * boneMatX;\nskinMatrix 	+= skinWeight.y * boneMatY;\n#ifdef USE_MORPHNORMALS\nvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n#else\nvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n#endif\n#endif",
  defaultnormal_vertex: "vec3 objectNormal;\n#ifdef USE_SKINNING\nobjectNormal = skinnedNormal.xyz;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\nobjectNormal = morphedNormal;\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\nobjectNormal = normal;\n#endif\n#ifdef FLIP_SIDED\nobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;",
  shadowmap_pars_fragment: "#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",
  shadowmap_fragment: "#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#if defined( SHADOWMAP_TYPE_PCF )\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\nfloat shadow = 0.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.0 * xPixelOffset;\nfloat dy0 = -1.0 * yPixelOffset;\nfloat dx1 = 1.0 * xPixelOffset;\nfloat dy1 = 1.0 * yPixelOffset;\nmat3 shadowKernel;\nmat3 depthKernel;\ndepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\ndepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\ndepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\ndepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\ndepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\ndepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\ndepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\ndepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\ndepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nvec3 shadowZ = vec3( shadowCoord.z );\nshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\nshadowKernel[0] *= vec3(0.25);\nshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\nshadowKernel[1] *= vec3(0.25);\nshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\nshadowKernel[2] *= vec3(0.25);\nvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\nshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\nshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\nvec4 shadowValues;\nshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\nshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\nshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\nshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\nshadow = dot( shadowValues, vec4( 1.0 ) );\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",
  shadowmap_pars_vertex: "#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",
  shadowmap_vertex: "#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif",
  alphatest_fragment: "#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",
  linear_to_gamma_fragment: "#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif"
},
THREE.UniformsUtils = {
  merge: function(t) {
    var e, i, n, r = {};
    for (e = 0; e < t.length; e++)
      for (i in n = this.clone(t[e]))
        r[i] = n[i];
    return r
  },
  clone: function(t) {
    var e, i, n, r = {};
    for (e in t)
      for (i in r[e] = {},
        t[e])
        n = t[e][i],
          r[e][i] = n instanceof THREE.Color || n instanceof THREE.Vector2 || n instanceof THREE.Vector3 || n instanceof THREE.Vector4 || n instanceof THREE.Matrix4 || n instanceof THREE.Texture ? n.clone() : n instanceof Array ? n.slice() : n;
    return r
  }
},
THREE.UniformsLib = {
  common: {
    diffuse: {
      type: "c",
      value: new THREE.Color(15658734)
    },
    opacity: {
      type: "f",
      value: 1
    },
    map: {
      type: "t",
      value: null
    },
    offsetRepeat: {
      type: "v4",
      value: new THREE.Vector4(0,0,1,1)
    },
    lightMap: {
      type: "t",
      value: null
    },
    specularMap: {
      type: "t",
      value: null
    },
    envMap: {
      type: "t",
      value: null
    },
    flipEnvMap: {
      type: "f",
      value: -1
    },
    useRefract: {
      type: "i",
      value: 0
    },
    reflectivity: {
      type: "f",
      value: 1
    },
    refractionRatio: {
      type: "f",
      value: .98
    },
    combine: {
      type: "i",
      value: 0
    },
    morphTargetInfluences: {
      type: "f",
      value: 0
    }
  },
  bump: {
    bumpMap: {
      type: "t",
      value: null
    },
    bumpScale: {
      type: "f",
      value: 1
    }
  },
  normalmap: {
    normalMap: {
      type: "t",
      value: null
    },
    normalScale: {
      type: "v2",
      value: new THREE.Vector2(1,1)
    }
  },
  fog: {
    fogDensity: {
      type: "f",
      value: 25e-5
    },
    fogNear: {
      type: "f",
      value: 1
    },
    fogFar: {
      type: "f",
      value: 2e3
    },
    fogColor: {
      type: "c",
      value: new THREE.Color(16777215)
    }
  },
  lights: {
    ambientLightColor: {
      type: "fv",
      value: []
    },
    directionalLightDirection: {
      type: "fv",
      value: []
    },
    directionalLightColor: {
      type: "fv",
      value: []
    },
    hemisphereLightDirection: {
      type: "fv",
      value: []
    },
    hemisphereLightSkyColor: {
      type: "fv",
      value: []
    },
    hemisphereLightGroundColor: {
      type: "fv",
      value: []
    },
    pointLightColor: {
      type: "fv",
      value: []
    },
    pointLightPosition: {
      type: "fv",
      value: []
    },
    pointLightDistance: {
      type: "fv1",
      value: []
    },
    spotLightColor: {
      type: "fv",
      value: []
    },
    spotLightPosition: {
      type: "fv",
      value: []
    },
    spotLightDirection: {
      type: "fv",
      value: []
    },
    spotLightDistance: {
      type: "fv1",
      value: []
    },
    spotLightAngleCos: {
      type: "fv1",
      value: []
    },
    spotLightExponent: {
      type: "fv1",
      value: []
    }
  },
  particle: {
    psColor: {
      type: "c",
      value: new THREE.Color(15658734)
    },
    opacity: {
      type: "f",
      value: 1
    },
    size: {
      type: "f",
      value: 1
    },
    scale: {
      type: "f",
      value: 1
    },
    map: {
      type: "t",
      value: null
    },
    fogDensity: {
      type: "f",
      value: 25e-5
    },
    fogNear: {
      type: "f",
      value: 1
    },
    fogFar: {
      type: "f",
      value: 2e3
    },
    fogColor: {
      type: "c",
      value: new THREE.Color(16777215)
    }
  },
  shadowmap: {
    shadowMap: {
      type: "tv",
      value: []
    },
    shadowMapSize: {
      type: "v2v",
      value: []
    },
    shadowBias: {
      type: "fv1",
      value: []
    },
    shadowDarkness: {
      type: "fv1",
      value: []
    },
    shadowMatrix: {
      type: "m4v",
      value: []
    }
  }
},
THREE.ShaderLib = {
  basic: {
    uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, THREE.UniformsLib.shadowmap]),
    vertexShader: [THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.skinbase_vertex, "#ifdef USE_ENVMAP", THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, "#endif", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
    fragmentShader: ["uniform vec3 diffuse;\nuniform float opacity;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, "void main() {\ngl_FragColor = vec4( diffuse, opacity );", THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
  },
  lambert: {
    uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
      ambient: {
        type: "c",
        value: new THREE.Color(16777215)
      },
      emissive: {
        type: "c",
        value: new THREE.Color(0)
      },
      wrapRGB: {
        type: "v3",
        value: new THREE.Vector3(1,1,1)
      }
    }]),
    vertexShader: ["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif", THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.lights_lambert_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.lights_lambert_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
    fragmentShader: ["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, "void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );", THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, "#ifdef DOUBLE_SIDED\nif ( gl_FrontFacing )\ngl_FragColor.xyz *= vLightFront;\nelse\ngl_FragColor.xyz *= vLightBack;\n#else\ngl_FragColor.xyz *= vLightFront;\n#endif", THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
  },
  phong: {
    uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.bump, THREE.UniformsLib.normalmap, THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
      ambient: {
        type: "c",
        value: new THREE.Color(16777215)
      },
      emissive: {
        type: "c",
        value: new THREE.Color(0)
      },
      specular: {
        type: "c",
        value: new THREE.Color(1118481)
      },
      shininess: {
        type: "f",
        value: 30
      },
      wrapRGB: {
        type: "v3",
        value: new THREE.Vector3(1,1,1)
      }
    }]),
    vertexShader: ["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;", THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.lights_phong_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, "vNormal = normalize( transformedNormal );", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, "vViewPosition = -mvPosition.xyz;", THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.lights_phong_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
    fragmentShader: ["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.lights_phong_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.bumpmap_pars_fragment, THREE.ShaderChunk.normalmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, "void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );", THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, THREE.ShaderChunk.lights_phong_fragment, THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
  },
  particle_basic: {
    uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.particle, THREE.UniformsLib.shadowmap]),
    vertexShader: ["uniform float size;\nuniform float scale;", THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.color_vertex, "vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#else\ngl_PointSize = size;\n#endif\ngl_Position = projectionMatrix * mvPosition;", THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
    fragmentShader: ["uniform vec3 psColor;\nuniform float opacity;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_particle_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, "void main() {\ngl_FragColor = vec4( psColor, opacity );", THREE.ShaderChunk.map_particle_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
  },
  dashed: {
    uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, {
      scale: {
        type: "f",
        value: 1
      },
      dashSize: {
        type: "f",
        value: 1
      },
      totalSize: {
        type: "f",
        value: 2
      }
    }]),
    vertexShader: ["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;", THREE.ShaderChunk.color_pars_vertex, "void main() {", THREE.ShaderChunk.color_vertex, "vLineDistance = scale * lineDistance;\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n}"].join("\n"),
    fragmentShader: ["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, "void main() {\nif ( mod( vLineDistance, totalSize ) > dashSize ) {\ndiscard;\n}\ngl_FragColor = vec4( diffuse, opacity );", THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
  },
  depth: {
    uniforms: {
      mNear: {
        type: "f",
        value: 1
      },
      mFar: {
        type: "f",
        value: 2e3
      },
      opacity: {
        type: "f",
        value: 1
      }
    },
    vertexShader: "void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
    fragmentShader: "uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"
  },
  normal: {
    uniforms: {
      opacity: {
        type: "f",
        value: 1
      }
    },
    vertexShader: ["varying vec3 vNormal;", THREE.ShaderChunk.morphtarget_pars_vertex, "void main() {\nvNormal = normalize( normalMatrix * normal );", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.default_vertex, "}"].join("\n"),
    fragmentShader: "uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"
  },
  normalmap: {
    uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
      enableAO: {
        type: "i",
        value: 0
      },
      enableDiffuse: {
        type: "i",
        value: 0
      },
      enableSpecular: {
        type: "i",
        value: 0
      },
      enableReflection: {
        type: "i",
        value: 0
      },
      enableDisplacement: {
        type: "i",
        value: 0
      },
      tDisplacement: {
        type: "t",
        value: null
      },
      tDiffuse: {
        type: "t",
        value: null
      },
      tCube: {
        type: "t",
        value: null
      },
      tNormal: {
        type: "t",
        value: null
      },
      tSpecular: {
        type: "t",
        value: null
      },
      tAO: {
        type: "t",
        value: null
      },
      uNormalScale: {
        type: "v2",
        value: new THREE.Vector2(1,1)
      },
      uDisplacementBias: {
        type: "f",
        value: 0
      },
      uDisplacementScale: {
        type: "f",
        value: 1
      },
      diffuse: {
        type: "c",
        value: new THREE.Color(16777215)
      },
      specular: {
        type: "c",
        value: new THREE.Color(1118481)
      },
      ambient: {
        type: "c",
        value: new THREE.Color(16777215)
      },
      shininess: {
        type: "f",
        value: 30
      },
      opacity: {
        type: "f",
        value: 1
      },
      useRefract: {
        type: "i",
        value: 0
      },
      refractionRatio: {
        type: "f",
        value: .98
      },
      reflectivity: {
        type: "f",
        value: .5
      },
      uOffset: {
        type: "v2",
        value: new THREE.Vector2(0,0)
      },
      uRepeat: {
        type: "v2",
        value: new THREE.Vector2(1,1)
      },
      wrapRGB: {
        type: "v3",
        value: new THREE.Vector3(1,1,1)
      }
    }]),
    fragmentShader: ["uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float refractionRatio;\nuniform float reflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;", THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, "void main() {\ngl_FragColor = vec4( vec3( 1.0 ), opacity );\nvec3 specularTex = vec3( 1.0 );\nvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\nnormalTex.xy *= uNormalScale;\nnormalTex = normalize( normalTex );\nif( enableDiffuse ) {\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( tDiffuse, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n#endif\n}\nif( enableAO ) {\n#ifdef GAMMA_INPUT\nvec4 aoColor = texture2D( tAO, vUv );\naoColor.xyz *= aoColor.xyz;\ngl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n#endif\n}\nif( enableSpecular )\nspecularTex = texture2D( tSpecular, vUv ).xyz;\nmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\nvec3 finalNormal = tsb * normalTex;\n#ifdef FLIP_SIDED\nfinalNormal = -finalNormal;\n#endif\nvec3 normal = normalize( finalNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\nfloat pointDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\npointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\npointVector = normalize( pointVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n#endif\npointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;\nvec3 pointHalfVector = normalize( pointVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\nfloat spotDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\nspotVector = normalize( spotVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n#endif\nspotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;\nvec3 spotHalfVector = normalize( spotVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\n#ifdef WRAP_AROUND\nfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\nfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n#endif\ndirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += diffuse * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif\nif ( enableReflection ) {\nvec3 vReflect;\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, normal, refractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, normal );\n}\nvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );\n}", THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n"),
    vertexShader: ["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\nuniform sampler2D tDisplacement;\nuniform float uDisplacementScale;\nuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;", THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, "#ifdef USE_SKINNING\nvNormal = normalize( normalMatrix * skinnedNormal.xyz );\nvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\nvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n#else\nvNormal = normalize( normalMatrix * normal );\nvTangent = normalize( normalMatrix * tangent.xyz );\n#endif\nvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\nvUv = uv * uRepeat + uOffset;\nvec3 displacedPosition;\n#ifdef VERTEX_TEXTURES\nif ( enableDisplacement ) {\nvec3 dv = texture2D( tDisplacement, uv ).xyz;\nfloat df = uDisplacementScale * dv.x + uDisplacementBias;\ndisplacedPosition = position + normalize( normal ) * df;\n} else {\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned 	  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n}\n#else\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned 	  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n#endif\nvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\nvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\nvWorldPosition = worldPosition.xyz;\nvViewPosition = -mvPosition.xyz;\n#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif\n}"].join("\n")
  },
  cube: {
    uniforms: {
      tCube: {
        type: "t",
        value: null
      },
      tFlip: {
        type: "f",
        value: -1
      }
    },
    vertexShader: "varying vec3 vWorldPosition;\nvoid main() {\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvWorldPosition = worldPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
    fragmentShader: "uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\nvoid main() {\ngl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n}"
  },
  depthRGBA: {
    uniforms: {},
    vertexShader: [THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, "void main() {", THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, "}"].join("\n"),
    fragmentShader: "vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"
  }
},
THREE.WebGLRenderer = function(t) {
  function e(t, e) {
    var i = t.vertices.length
      , n = e.material;
    if (n.attributes) {
      void 0 === t.__webglCustomAttributesList && (t.__webglCustomAttributesList = []);
      for (var r in n.attributes) {
        var s = n.attributes[r];
        if (!s.__webglInitialized || s.createUniqueBuffers) {
          s.__webglInitialized = !0;
          var o = 1;
          "v2" === s.type ? o = 2 : "v3" === s.type ? o = 3 : "v4" === s.type ? o = 4 : "c" === s.type && (o = 3),
            s.size = o,
            s.array = new Float32Array(i * o),
            s.buffer = V.createBuffer(),
            s.buffer.belongsToAttribute = r,
            s.needsUpdate = !0
        }
        t.__webglCustomAttributesList.push(s)
      }
    }
  }
  function i(t, e) {
    var i = e.geometry
      , o = t.faces3
      , a = 3 * o.length
      , l = 1 * o.length
      , h = 3 * o.length
      , o = n(e, t)
      , c = s(o)
      , u = r(o)
      , p = o.vertexColors ? o.vertexColors : !1;
    if (t.__vertexArray = new Float32Array(3 * a),
      u && (t.__normalArray = new Float32Array(3 * a)),
      i.hasTangents && (t.__tangentArray = new Float32Array(4 * a)),
      p && (t.__colorArray = new Float32Array(3 * a)),
      c && (0 < i.faceVertexUvs.length && (t.__uvArray = new Float32Array(2 * a)),
      1 < i.faceVertexUvs.length && (t.__uv2Array = new Float32Array(2 * a))),
      e.geometry.skinWeights.length && e.geometry.skinIndices.length && (t.__skinIndexArray = new Float32Array(4 * a),
        t.__skinWeightArray = new Float32Array(4 * a)),
        t.__faceArray = new Uint16Array(3 * l),
        t.__lineArray = new Uint16Array(2 * h),
        t.numMorphTargets)
      for (t.__morphTargetsArrays = [],
             i = 0,
             c = t.numMorphTargets; c > i; i++)
        t.__morphTargetsArrays.push(new Float32Array(3 * a));
    if (t.numMorphNormals)
      for (t.__morphNormalsArrays = [],
             i = 0,
             c = t.numMorphNormals; c > i; i++)
        t.__morphNormalsArrays.push(new Float32Array(3 * a));
    if (t.__webglFaceCount = 3 * l,
        t.__webglLineCount = 2 * h,
        o.attributes) {
      void 0 === t.__webglCustomAttributesList && (t.__webglCustomAttributesList = []);
      for (var d in o.attributes) {
        var f, l = o.attributes[d], h = {};
        for (f in l)
          h[f] = l[f];
        (!h.__webglInitialized || h.createUniqueBuffers) && (h.__webglInitialized = !0,
          i = 1,
          "v2" === h.type ? i = 2 : "v3" === h.type ? i = 3 : "v4" === h.type ? i = 4 : "c" === h.type && (i = 3),
          h.size = i,
          h.array = new Float32Array(a * i),
          h.buffer = V.createBuffer(),
          h.buffer.belongsToAttribute = d,
          l.needsUpdate = !0,
          h.__original = l),
          t.__webglCustomAttributesList.push(h)
      }
    }
    t.__inittedArrays = !0
  }
  function n(t, e) {
    return t.material instanceof THREE.MeshFaceMaterial ? t.material.materials[e.materialIndex] : t.material
  }
  function r(t) {
    return t instanceof THREE.MeshBasicMaterial && !t.envMap || t instanceof THREE.MeshDepthMaterial ? !1 : t && void 0 !== t.shading && t.shading === THREE.SmoothShading ? THREE.SmoothShading : THREE.FlatShading
  }
  function s(t) {
    return t.map || t.lightMap || t.bumpMap || t.normalMap || t.specularMap || t instanceof THREE.ShaderMaterial ? !0 : !1
  }
  function o(t) {
    Te[t] || (V.enableVertexAttribArray(t),
      Te[t] = !0)
  }
  function a() {
    for (var t in Te)
      Te[t] && (V.disableVertexAttribArray(t),
        Te[t] = !1)
  }
  function l(t, e) {
    return t.z !== e.z ? e.z - t.z : t.id - e.id
  }
  function h(t, e) {
    return e[0] - t[0]
  }
  function c(t, e, i) {
    if (t.length)
      for (var n = 0, r = t.length; r > n; n++)
        J = $ = null,
          Q = Z = ne = ie = he = le = re = -1,
          Se = !0,
          t[n].render(e, i, ye, Ee),
          J = $ = null,
          Q = Z = ne = ie = he = le = re = -1,
          Se = !0
  }
  function u(t, e, i, n, r, s, o, a) {
    var l, h, c, u;
    e ? (h = t.length - 1,
      u = e = -1) : (h = 0,
      e = t.length,
      u = 1);
    for (var p = h; p !== e; p += u)
      if (l = t[p],
          l.render) {
        if (h = l.object,
            c = l.buffer,
            a)
          l = a;
        else {
          if (l = l[i],
              !l)
            continue;
          o && X.setBlending(l.blending, l.blendEquation, l.blendSrc, l.blendDst),
            X.setDepthTest(l.depthTest),
            X.setDepthWrite(l.depthWrite),
            R(l.polygonOffset, l.polygonOffsetFactor, l.polygonOffsetUnits)
        }
        X.setMaterialFaces(l),
          c instanceof THREE.BufferGeometry ? X.renderBufferDirect(n, r, s, l, c, h) : X.renderBuffer(n, r, s, l, c, h)
      }
  }
  function p(t, e, i, n, r, s, o) {
    for (var a, l, h = 0, c = t.length; c > h; h++)
      if (a = t[h],
          l = a.object,
          l.visible) {
        if (o)
          a = o;
        else {
          if (a = a[e],
              !a)
            continue;
          s && X.setBlending(a.blending, a.blendEquation, a.blendSrc, a.blendDst),
            X.setDepthTest(a.depthTest),
            X.setDepthWrite(a.depthWrite),
            R(a.polygonOffset, a.polygonOffsetFactor, a.polygonOffsetUnits)
        }
        X.renderImmediateObject(i, n, r, a, l)
      }
  }
  function d(t, n) {
    var r, s, o, a;
    if (void 0 === t.__webglInit && (t.__webglInit = !0,
        t._modelViewMatrix = new THREE.Matrix4,
        t._normalMatrix = new THREE.Matrix3,
      void 0 !== t.geometry && void 0 === t.geometry.__webglInit && (t.geometry.__webglInit = !0,
        t.geometry.addEventListener("dispose", Ue)),
        s = t.geometry,
      void 0 !== s))
      if (s instanceof THREE.BufferGeometry) {
        var l, h;
        for (l in s.attributes)
          h = "index" === l ? V.ELEMENT_ARRAY_BUFFER : V.ARRAY_BUFFER,
            a = s.attributes[l],
          void 0 === a.numItems && (a.numItems = a.array.length),
            a.buffer = V.createBuffer(),
            V.bindBuffer(h, a.buffer),
            V.bufferData(h, a.array, V.STATIC_DRAW)
      } else if (t instanceof THREE.Mesh) {
        if (o = t.material,
          void 0 === s.geometryGroups) {
          l = s;
          var c, u, p;
          h = {};
          var d = l.morphTargets.length
            , m = l.morphNormals.length
            , g = o instanceof THREE.MeshFaceMaterial;
          for (l.geometryGroups = {},
                 o = 0,
                 c = l.faces.length; c > o; o++)
            u = l.faces[o],
              u = g ? u.materialIndex : 0,
            void 0 === h[u] && (h[u] = {
              hash: u,
              counter: 0
            }),
              p = h[u].hash + "_" + h[u].counter,
            void 0 === l.geometryGroups[p] && (l.geometryGroups[p] = {
              faces3: [],
              materialIndex: u,
              vertices: 0,
              numMorphTargets: d,
              numMorphNormals: m
            }),
            65535 < l.geometryGroups[p].vertices + 3 && (h[u].counter += 1,
              p = h[u].hash + "_" + h[u].counter,
            void 0 === l.geometryGroups[p] && (l.geometryGroups[p] = {
              faces3: [],
              materialIndex: u,
              vertices: 0,
              numMorphTargets: d,
              numMorphNormals: m
            })),
              l.geometryGroups[p].faces3.push(o),
              l.geometryGroups[p].vertices += 3;
          l.geometryGroupsList = [];
          for (a in l.geometryGroups)
            l.geometryGroups[a].id = te++,
              l.geometryGroupsList.push(l.geometryGroups[a])
        }
        for (r in s.geometryGroups)
          if (a = s.geometryGroups[r],
              !a.__webglVertexBuffer) {
            if (l = a,
                l.__webglVertexBuffer = V.createBuffer(),
                l.__webglNormalBuffer = V.createBuffer(),
                l.__webglTangentBuffer = V.createBuffer(),
                l.__webglColorBuffer = V.createBuffer(),
                l.__webglUVBuffer = V.createBuffer(),
                l.__webglUV2Buffer = V.createBuffer(),
                l.__webglSkinIndicesBuffer = V.createBuffer(),
                l.__webglSkinWeightsBuffer = V.createBuffer(),
                l.__webglFaceBuffer = V.createBuffer(),
                l.__webglLineBuffer = V.createBuffer(),
                d = h = void 0,
                l.numMorphTargets)
              for (l.__webglMorphTargetsBuffers = [],
                     h = 0,
                     d = l.numMorphTargets; d > h; h++)
                l.__webglMorphTargetsBuffers.push(V.createBuffer());
            if (l.numMorphNormals)
              for (l.__webglMorphNormalsBuffers = [],
                     h = 0,
                     d = l.numMorphNormals; d > h; h++)
                l.__webglMorphNormalsBuffers.push(V.createBuffer());
            X.info.memory.geometries++,
              i(a, t),
              s.verticesNeedUpdate = !0,
              s.morphTargetsNeedUpdate = !0,
              s.elementsNeedUpdate = !0,
              s.uvsNeedUpdate = !0,
              s.normalsNeedUpdate = !0,
              s.tangentsNeedUpdate = !0,
              s.colorsNeedUpdate = !0
          }
      } else
        t instanceof THREE.Line ? s.__webglVertexBuffer || (a = s,
          a.__webglVertexBuffer = V.createBuffer(),
          a.__webglColorBuffer = V.createBuffer(),
          a.__webglLineDistanceBuffer = V.createBuffer(),
          X.info.memory.geometries++,
          a = s,
          l = a.vertices.length,
          a.__vertexArray = new Float32Array(3 * l),
          a.__colorArray = new Float32Array(3 * l),
          a.__lineDistanceArray = new Float32Array(1 * l),
          a.__webglLineCount = l,
          e(a, t),
          s.verticesNeedUpdate = !0,
          s.colorsNeedUpdate = !0,
          s.lineDistancesNeedUpdate = !0) : t instanceof THREE.ParticleSystem && !s.__webglVertexBuffer && (a = s,
          a.__webglVertexBuffer = V.createBuffer(),
          a.__webglColorBuffer = V.createBuffer(),
          X.info.memory.geometries++,
          a = s,
          l = a.vertices.length,
          a.__vertexArray = new Float32Array(3 * l),
          a.__colorArray = new Float32Array(3 * l),
          a.__sortArray = [],
          a.__webglParticleCount = l,
          e(a, t),
          s.verticesNeedUpdate = !0,
          s.colorsNeedUpdate = !0);
    if (void 0 === t.__webglActive) {
      if (t instanceof THREE.Mesh) {
        if (s = t.geometry,
          s instanceof THREE.BufferGeometry)
          f(n.__webglObjects, s, t);
        else if (s instanceof THREE.Geometry)
          for (r in s.geometryGroups)
            a = s.geometryGroups[r],
              f(n.__webglObjects, a, t)
      } else
        t instanceof THREE.Line || t instanceof THREE.ParticleSystem ? (s = t.geometry,
          f(n.__webglObjects, s, t)) : t instanceof THREE.ImmediateRenderObject || t.immediateRenderCallback ? n.__webglObjectsImmediate.push({
          id: null,
          object: t,
          opaque: null,
          transparent: null,
          z: 0
        }) : t instanceof THREE.Sprite ? n.__webglSprites.push(t) : t instanceof THREE.LensFlare && n.__webglFlares.push(t);
      t.__webglActive = !0
    }
  }
  function f(t, e, i) {
    t.push({
      id: null,
      buffer: e,
      object: i,
      opaque: null,
      transparent: null,
      z: 0
    })
  }
  function m(t) {
    for (var e in t.attributes)
      if (t.attributes[e].needsUpdate)
        return !0;
    return !1
  }
  function g(t) {
    for (var e in t.attributes)
      t.attributes[e].needsUpdate = !1
  }
  function v(t, e) {
    t instanceof THREE.Mesh || t instanceof THREE.ParticleSystem || t instanceof THREE.Line ? y(e.__webglObjects, t) : t instanceof THREE.Sprite ? E(e.__webglSprites, t) : t instanceof THREE.LensFlare ? E(e.__webglFlares, t) : (t instanceof THREE.ImmediateRenderObject || t.immediateRenderCallback) && y(e.__webglObjectsImmediate, t),
      delete t.__webglActive
  }
  function y(t, e) {
    for (var i = t.length - 1; i >= 0; i--)
      t[i].object === e && t.splice(i, 1)
  }
  function E(t, e) {
    for (var i = t.length - 1; i >= 0; i--)
      t[i] === e && t.splice(i, 1)
  }
  function T(t, e, i, n, r) {
    ee = 0,
    n.needsUpdate && (n.program && Ye(n),
      X.initMaterial(n, e, i, r),
      n.needsUpdate = !1),
    n.morphTargets && !r.__webglMorphTargetInfluences && (r.__webglMorphTargetInfluences = new Float32Array(X.maxMorphTargets));
    var s = !1
      , o = n.program
      , a = o.uniforms
      , l = n.uniforms;
    if (o !== $ && (V.useProgram(o),
        $ = o,
        s = !0),
      n.id !== Q && (Q = n.id,
        s = !0),
      (s || t !== J) && (V.uniformMatrix4fv(a.projectionMatrix, !1, t.projectionMatrix.elements),
      t !== J && (J = t)),
        n.skinning)
      if (Ie && r.useVertexTexture) {
        if (null !== a.boneTexture) {
          var h = x();
          V.uniform1i(a.boneTexture, h),
            X.setTexture(r.boneTexture, h)
        }
        null !== a.boneTextureWidth && V.uniform1i(a.boneTextureWidth, r.boneTextureWidth),
        null !== a.boneTextureHeight && V.uniform1i(a.boneTextureHeight, r.boneTextureHeight)
      } else
        null !== a.boneGlobalMatrices && V.uniformMatrix4fv(a.boneGlobalMatrices, !1, r.boneMatrices);
    if (s) {
      if (i && n.fog && (l.fogColor.value = i.color,
          i instanceof THREE.Fog ? (l.fogNear.value = i.near,
            l.fogFar.value = i.far) : i instanceof THREE.FogExp2 && (l.fogDensity.value = i.density)),
        n instanceof THREE.MeshPhongMaterial || n instanceof THREE.MeshLambertMaterial || n.lights) {
        if (Se) {
          for (var c, u, p, d, f = h = 0, m = 0, g = He, v = g.directional.colors, y = g.directional.positions, E = g.point.colors, T = g.point.positions, _ = g.point.distances, R = g.spot.colors, S = g.spot.positions, H = g.spot.distances, C = g.spot.directions, P = g.spot.anglesCos, D = g.spot.exponents, k = g.hemi.skyColors, I = g.hemi.groundColors, O = g.hemi.positions, z = 0, F = 0, N = 0, B = 0, U = 0, G = 0, W = 0, j = 0, Y = c = 0, i = d = Y = 0, s = e.length; s > i; i++)
            c = e[i],
            c.onlyShadow || (u = c.color,
              p = c.intensity,
              d = c.distance,
              c instanceof THREE.AmbientLight ? c.visible && (X.gammaInput ? (h += u.r * u.r,
                f += u.g * u.g,
                m += u.b * u.b) : (h += u.r,
                f += u.g,
                m += u.b)) : c instanceof THREE.DirectionalLight ? (U += 1,
              c.visible && (Re.setFromMatrixPosition(c.matrixWorld),
                _e.setFromMatrixPosition(c.target.matrixWorld),
                Re.sub(_e),
                Re.normalize(),
              0 === Re.x && 0 === Re.y && 0 === Re.z || (c = 3 * z,
                y[c] = Re.x,
                y[c + 1] = Re.y,
                y[c + 2] = Re.z,
                X.gammaInput ? b(v, c, u, p * p) : w(v, c, u, p),
                z += 1))) : c instanceof THREE.PointLight ? (G += 1,
              c.visible && (Y = 3 * F,
                X.gammaInput ? b(E, Y, u, p * p) : w(E, Y, u, p),
                _e.setFromMatrixPosition(c.matrixWorld),
                T[Y] = _e.x,
                T[Y + 1] = _e.y,
                T[Y + 2] = _e.z,
                _[F] = d,
                F += 1)) : c instanceof THREE.SpotLight ? (W += 1,
              c.visible && (Y = 3 * N,
                X.gammaInput ? b(R, Y, u, p * p) : w(R, Y, u, p),
                _e.setFromMatrixPosition(c.matrixWorld),
                S[Y] = _e.x,
                S[Y + 1] = _e.y,
                S[Y + 2] = _e.z,
                H[N] = d,
                Re.copy(_e),
                _e.setFromMatrixPosition(c.target.matrixWorld),
                Re.sub(_e),
                Re.normalize(),
                C[Y] = Re.x,
                C[Y + 1] = Re.y,
                C[Y + 2] = Re.z,
                P[N] = Math.cos(c.angle),
                D[N] = c.exponent,
                N += 1)) : c instanceof THREE.HemisphereLight && (j += 1,
              c.visible && (Re.setFromMatrixPosition(c.matrixWorld),
                Re.normalize(),
              0 === Re.x && 0 === Re.y && 0 === Re.z || (d = 3 * B,
                O[d] = Re.x,
                O[d + 1] = Re.y,
                O[d + 2] = Re.z,
                u = c.color,
                c = c.groundColor,
                X.gammaInput ? (p *= p,
                  b(k, d, u, p),
                  b(I, d, c, p)) : (w(k, d, u, p),
                  w(I, d, c, p)),
                B += 1))));
          for (i = 3 * z,
                 s = Math.max(v.length, 3 * U); s > i; i++)
            v[i] = 0;
          for (i = 3 * F,
                 s = Math.max(E.length, 3 * G); s > i; i++)
            E[i] = 0;
          for (i = 3 * N,
                 s = Math.max(R.length, 3 * W); s > i; i++)
            R[i] = 0;
          for (i = 3 * B,
                 s = Math.max(k.length, 3 * j); s > i; i++)
            k[i] = 0;
          for (i = 3 * B,
                 s = Math.max(I.length, 3 * j); s > i; i++)
            I[i] = 0;
          g.directional.length = z,
            g.point.length = F,
            g.spot.length = N,
            g.hemi.length = B,
            g.ambient[0] = h,
            g.ambient[1] = f,
            g.ambient[2] = m,
            Se = !1
        }
        i = He,
          l.ambientLightColor.value = i.ambient,
          l.directionalLightColor.value = i.directional.colors,
          l.directionalLightDirection.value = i.directional.positions,
          l.pointLightColor.value = i.point.colors,
          l.pointLightPosition.value = i.point.positions,
          l.pointLightDistance.value = i.point.distances,
          l.spotLightColor.value = i.spot.colors,
          l.spotLightPosition.value = i.spot.positions,
          l.spotLightDistance.value = i.spot.distances,
          l.spotLightDirection.value = i.spot.directions,
          l.spotLightAngleCos.value = i.spot.anglesCos,
          l.spotLightExponent.value = i.spot.exponents,
          l.hemisphereLightSkyColor.value = i.hemi.skyColors,
          l.hemisphereLightGroundColor.value = i.hemi.groundColors,
          l.hemisphereLightDirection.value = i.hemi.positions
      }
      if (n instanceof THREE.MeshBasicMaterial || n instanceof THREE.MeshLambertMaterial || n instanceof THREE.MeshPhongMaterial) {
        l.opacity.value = n.opacity,
          X.gammaInput ? l.diffuse.value.copyGammaToLinear(n.color) : l.diffuse.value = n.color,
          l.map.value = n.map,
          l.lightMap.value = n.lightMap,
          l.specularMap.value = n.specularMap,
        n.bumpMap && (l.bumpMap.value = n.bumpMap,
          l.bumpScale.value = n.bumpScale),
        n.normalMap && (l.normalMap.value = n.normalMap,
          l.normalScale.value.copy(n.normalScale));
        var q;
        n.map ? q = n.map : n.specularMap ? q = n.specularMap : n.normalMap ? q = n.normalMap : n.bumpMap && (q = n.bumpMap),
        void 0 !== q && (i = q.offset,
          q = q.repeat,
          l.offsetRepeat.value.set(i.x, i.y, q.x, q.y)),
          l.envMap.value = n.envMap,
          l.flipEnvMap.value = n.envMap instanceof THREE.WebGLRenderTargetCube ? 1 : -1,
          l.reflectivity.value = n.reflectivity,
          l.refractionRatio.value = n.refractionRatio,
          l.combine.value = n.combine,
          l.useRefract.value = n.envMap && n.envMap.mapping instanceof THREE.CubeRefractionMapping
      }
      if (n instanceof THREE.LineBasicMaterial ? (l.diffuse.value = n.color,
          l.opacity.value = n.opacity) : n instanceof THREE.LineDashedMaterial ? (l.diffuse.value = n.color,
          l.opacity.value = n.opacity,
          l.dashSize.value = n.dashSize,
          l.totalSize.value = n.dashSize + n.gapSize,
          l.scale.value = n.scale) : n instanceof THREE.ParticleSystemMaterial ? (l.psColor.value = n.color,
          l.opacity.value = n.opacity,
          l.size.value = n.size,
          l.scale.value = L.height / 2,
          l.map.value = n.map) : n instanceof THREE.MeshPhongMaterial ? (l.shininess.value = n.shininess,
          X.gammaInput ? (l.ambient.value.copyGammaToLinear(n.ambient),
            l.emissive.value.copyGammaToLinear(n.emissive),
            l.specular.value.copyGammaToLinear(n.specular)) : (l.ambient.value = n.ambient,
            l.emissive.value = n.emissive,
            l.specular.value = n.specular),
        n.wrapAround && l.wrapRGB.value.copy(n.wrapRGB)) : n instanceof THREE.MeshLambertMaterial ? (X.gammaInput ? (l.ambient.value.copyGammaToLinear(n.ambient),
          l.emissive.value.copyGammaToLinear(n.emissive)) : (l.ambient.value = n.ambient,
          l.emissive.value = n.emissive),
        n.wrapAround && l.wrapRGB.value.copy(n.wrapRGB)) : n instanceof THREE.MeshDepthMaterial ? (l.mNear.value = t.near,
          l.mFar.value = t.far,
          l.opacity.value = n.opacity) : n instanceof THREE.MeshNormalMaterial && (l.opacity.value = n.opacity),
        r.receiveShadow && !n._shadowPass && l.shadowMatrix)
        for (i = q = 0,
               s = e.length; s > i; i++)
          h = e[i],
          h.castShadow && (h instanceof THREE.SpotLight || h instanceof THREE.DirectionalLight && !h.shadowCascade) && (l.shadowMap.value[q] = h.shadowMap,
            l.shadowMapSize.value[q] = h.shadowMapSize,
            l.shadowMatrix.value[q] = h.shadowMatrix,
            l.shadowDarkness.value[q] = h.shadowDarkness,
            l.shadowBias.value[q] = h.shadowBias,
            q++);
      for (e = n.uniformsList,
             l = 0,
             q = e.length; q > l; l++)
        if (s = o.uniforms[e[l][1]])
          if (i = e[l][0],
              f = i.type,
              h = i.value,
            "i" === f)
            V.uniform1i(s, h);
          else if ("f" === f)
            V.uniform1f(s, h);
          else if ("v2" === f)
            V.uniform2f(s, h.x, h.y);
          else if ("v3" === f)
            V.uniform3f(s, h.x, h.y, h.z);
          else if ("v4" === f)
            V.uniform4f(s, h.x, h.y, h.z, h.w);
          else if ("c" === f)
            V.uniform3f(s, h.r, h.g, h.b);
          else if ("iv1" === f)
            V.uniform1iv(s, h);
          else if ("iv" === f)
            V.uniform3iv(s, h);
          else if ("fv1" === f)
            V.uniform1fv(s, h);
          else if ("fv" === f)
            V.uniform3fv(s, h);
          else if ("v2v" === f) {
            for (void 0 === i._array && (i._array = new Float32Array(2 * h.length)),
                   f = 0,
                   m = h.length; m > f; f++)
              g = 2 * f,
                i._array[g] = h[f].x,
                i._array[g + 1] = h[f].y;
            V.uniform2fv(s, i._array)
          } else if ("v3v" === f) {
            for (void 0 === i._array && (i._array = new Float32Array(3 * h.length)),
                   f = 0,
                   m = h.length; m > f; f++)
              g = 3 * f,
                i._array[g] = h[f].x,
                i._array[g + 1] = h[f].y,
                i._array[g + 2] = h[f].z;
            V.uniform3fv(s, i._array)
          } else if ("v4v" === f) {
            for (void 0 === i._array && (i._array = new Float32Array(4 * h.length)),
                   f = 0,
                   m = h.length; m > f; f++)
              g = 4 * f,
                i._array[g] = h[f].x,
                i._array[g + 1] = h[f].y,
                i._array[g + 2] = h[f].z,
                i._array[g + 3] = h[f].w;
            V.uniform4fv(s, i._array)
          } else if ("m4" === f)
            void 0 === i._array && (i._array = new Float32Array(16)),
              h.flattenToArray(i._array),
              V.uniformMatrix4fv(s, !1, i._array);
          else if ("m4v" === f) {
            for (void 0 === i._array && (i._array = new Float32Array(16 * h.length)),
                   f = 0,
                   m = h.length; m > f; f++)
              h[f].flattenToArrayOffset(i._array, 16 * f);
            V.uniformMatrix4fv(s, !1, i._array)
          } else if ("t" === f) {
            if (g = h,
                h = x(),
                V.uniform1i(s, h),
                g)
              if (g.image instanceof Array && 6 === g.image.length) {
                if (i = g,
                    s = h,
                  6 === i.image.length)
                  if (i.needsUpdate) {
                    for (i.image.__webglTextureCube || (i.addEventListener("dispose", Ge),
                      i.image.__webglTextureCube = V.createTexture(),
                      X.info.memory.textures++),
                           V.activeTexture(V.TEXTURE0 + s),
                           V.bindTexture(V.TEXTURE_CUBE_MAP, i.image.__webglTextureCube),
                           V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL, i.flipY),
                           s = i instanceof THREE.CompressedTexture,
                           h = [],
                           f = 0; 6 > f; f++)
                      X.autoScaleCubemaps && !s ? (m = h,
                        g = f,
                        v = i.image[f],
                        E = Le,
                      v.width <= E && v.height <= E || (T = Math.max(v.width, v.height),
                        y = Math.floor(v.width * E / T),
                        E = Math.floor(v.height * E / T),
                        T = document.createElement("canvas"),
                        T.width = y,
                        T.height = E,
                        T.getContext("2d").drawImage(v, 0, 0, v.width, v.height, 0, 0, y, E),
                        v = T),
                        m[g] = v) : h[f] = i.image[f];
                    for (f = h[0],
                           m = 0 === (f.width & f.width - 1) && 0 === (f.height & f.height - 1),
                           g = A(i.format),
                           v = A(i.type),
                           M(V.TEXTURE_CUBE_MAP, i, m),
                           f = 0; 6 > f; f++)
                      if (s)
                        for (E = h[f].mipmaps,
                               T = 0,
                               _ = E.length; _ > T; T++)
                          y = E[T],
                            i.format !== THREE.RGBAFormat ? V.compressedTexImage2D(V.TEXTURE_CUBE_MAP_POSITIVE_X + f, T, g, y.width, y.height, 0, y.data) : V.texImage2D(V.TEXTURE_CUBE_MAP_POSITIVE_X + f, T, g, y.width, y.height, 0, g, v, y.data);
                      else
                        V.texImage2D(V.TEXTURE_CUBE_MAP_POSITIVE_X + f, 0, g, g, v, h[f]);
                    i.generateMipmaps && m && V.generateMipmap(V.TEXTURE_CUBE_MAP),
                      i.needsUpdate = !1,
                    i.onUpdate && i.onUpdate()
                  } else
                    V.activeTexture(V.TEXTURE0 + s),
                      V.bindTexture(V.TEXTURE_CUBE_MAP, i.image.__webglTextureCube)
              } else
                g instanceof THREE.WebGLRenderTargetCube ? (i = g,
                  V.activeTexture(V.TEXTURE0 + h),
                  V.bindTexture(V.TEXTURE_CUBE_MAP, i.__webglTexture)) : X.setTexture(g, h)
          } else if ("tv" === f) {
            for (void 0 === i._array && (i._array = []),
                   f = 0,
                   m = i.value.length; m > f; f++)
              i._array[f] = x();
            for (V.uniform1iv(s, i._array),
                   f = 0,
                   m = i.value.length; m > f; f++)
              g = i.value[f],
                h = i._array[f],
              g && X.setTexture(g, h)
          } else
            console.warn("THREE.WebGLRenderer: Unknown uniform type: " + f);
      (n instanceof THREE.ShaderMaterial || n instanceof THREE.MeshPhongMaterial || n.envMap) && null !== a.cameraPosition && (_e.setFromMatrixPosition(t.matrixWorld),
        V.uniform3f(a.cameraPosition, _e.x, _e.y, _e.z)),
      (n instanceof THREE.MeshPhongMaterial || n instanceof THREE.MeshLambertMaterial || n instanceof THREE.ShaderMaterial || n.skinning) && null !== a.viewMatrix && V.uniformMatrix4fv(a.viewMatrix, !1, t.matrixWorldInverse.elements)
    }
    return V.uniformMatrix4fv(a.modelViewMatrix, !1, r._modelViewMatrix.elements),
    a.normalMatrix && V.uniformMatrix3fv(a.normalMatrix, !1, r._normalMatrix.elements),
    null !== a.modelMatrix && V.uniformMatrix4fv(a.modelMatrix, !1, r.matrixWorld.elements),
      o
  }
  function x() {
    var t = ee;
    return t >= Pe && console.warn("WebGLRenderer: trying to use " + t + " texture units while this GPU supports only " + Pe),
      ee += 1,
      t
  }
  function b(t, e, i, n) {
    t[e] = i.r * i.r * n,
      t[e + 1] = i.g * i.g * n,
      t[e + 2] = i.b * i.b * n
  }
  function w(t, e, i, n) {
    t[e] = i.r * n,
      t[e + 1] = i.g * n,
      t[e + 2] = i.b * n
  }
  function _(t) {
    t !== de && (V.lineWidth(t),
      de = t)
  }
  function R(t, e, i) {
    ce !== t && (t ? V.enable(V.POLYGON_OFFSET_FILL) : V.disable(V.POLYGON_OFFSET_FILL),
      ce = t),
    !t || ue === e && pe === i || (V.polygonOffset(e, i),
      ue = e,
      pe = i)
  }
  function S(t) {
    for (var t = t.split("\n"), e = 0, i = t.length; i > e; e++)
      t[e] = e + 1 + ": " + t[e];
    return t.join("\n")
  }
  function H(t, e) {
    var i;
    return "fragment" === t ? i = V.createShader(V.FRAGMENT_SHADER) : "vertex" === t && (i = V.createShader(V.VERTEX_SHADER)),
      V.shaderSource(i, e),
      V.compileShader(i),
      V.getShaderParameter(i, V.COMPILE_STATUS) ? i : (console.error(V.getShaderInfoLog(i)),
        console.error(S(e)),
        null)
  }
  function M(t, e, i) {
    i ? (V.texParameteri(t, V.TEXTURE_WRAP_S, A(e.wrapS)),
      V.texParameteri(t, V.TEXTURE_WRAP_T, A(e.wrapT)),
      V.texParameteri(t, V.TEXTURE_MAG_FILTER, A(e.magFilter)),
      V.texParameteri(t, V.TEXTURE_MIN_FILTER, A(e.minFilter))) : (V.texParameteri(t, V.TEXTURE_WRAP_S, V.CLAMP_TO_EDGE),
      V.texParameteri(t, V.TEXTURE_WRAP_T, V.CLAMP_TO_EDGE),
      V.texParameteri(t, V.TEXTURE_MAG_FILTER, P(e.magFilter)),
      V.texParameteri(t, V.TEXTURE_MIN_FILTER, P(e.minFilter))),
    W && e.type !== THREE.FloatType && (1 < e.anisotropy || e.__oldAnisotropy) && (V.texParameterf(t, W.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(e.anisotropy, De)),
      e.__oldAnisotropy = e.anisotropy)
  }
  function C(t, e) {
    V.bindRenderbuffer(V.RENDERBUFFER, t),
      e.depthBuffer && !e.stencilBuffer ? (V.renderbufferStorage(V.RENDERBUFFER, V.DEPTH_COMPONENT16, e.width, e.height),
        V.framebufferRenderbuffer(V.FRAMEBUFFER, V.DEPTH_ATTACHMENT, V.RENDERBUFFER, t)) : e.depthBuffer && e.stencilBuffer ? (V.renderbufferStorage(V.RENDERBUFFER, V.DEPTH_STENCIL, e.width, e.height),
        V.framebufferRenderbuffer(V.FRAMEBUFFER, V.DEPTH_STENCIL_ATTACHMENT, V.RENDERBUFFER, t)) : V.renderbufferStorage(V.RENDERBUFFER, V.RGBA4, e.width, e.height)
  }
  function P(t) {
    return t === THREE.NearestFilter || t === THREE.NearestMipMapNearestFilter || t === THREE.NearestMipMapLinearFilter ? V.NEAREST : V.LINEAR
  }
  function A(t) {
    if (t === THREE.RepeatWrapping)
      return V.REPEAT;
    if (t === THREE.ClampToEdgeWrapping)
      return V.CLAMP_TO_EDGE;
    if (t === THREE.MirroredRepeatWrapping)
      return V.MIRRORED_REPEAT;
    if (t === THREE.NearestFilter)
      return V.NEAREST;
    if (t === THREE.NearestMipMapNearestFilter)
      return V.NEAREST_MIPMAP_NEAREST;
    if (t === THREE.NearestMipMapLinearFilter)
      return V.NEAREST_MIPMAP_LINEAR;
    if (t === THREE.LinearFilter)
      return V.LINEAR;
    if (t === THREE.LinearMipMapNearestFilter)
      return V.LINEAR_MIPMAP_NEAREST;
    if (t === THREE.LinearMipMapLinearFilter)
      return V.LINEAR_MIPMAP_LINEAR;
    if (t === THREE.UnsignedByteType)
      return V.UNSIGNED_BYTE;
    if (t === THREE.UnsignedShort4444Type)
      return V.UNSIGNED_SHORT_4_4_4_4;
    if (t === THREE.UnsignedShort5551Type)
      return V.UNSIGNED_SHORT_5_5_5_1;
    if (t === THREE.UnsignedShort565Type)
      return V.UNSIGNED_SHORT_5_6_5;
    if (t === THREE.ByteType)
      return V.BYTE;
    if (t === THREE.ShortType)
      return V.SHORT;
    if (t === THREE.UnsignedShortType)
      return V.UNSIGNED_SHORT;
    if (t === THREE.IntType)
      return V.INT;
    if (t === THREE.UnsignedIntType)
      return V.UNSIGNED_INT;
    if (t === THREE.FloatType)
      return V.FLOAT;
    if (t === THREE.AlphaFormat)
      return V.ALPHA;
    if (t === THREE.RGBFormat)
      return V.RGB;
    if (t === THREE.RGBAFormat)
      return V.RGBA;
    if (t === THREE.LuminanceFormat)
      return V.LUMINANCE;
    if (t === THREE.LuminanceAlphaFormat)
      return V.LUMINANCE_ALPHA;
    if (t === THREE.AddEquation)
      return V.FUNC_ADD;
    if (t === THREE.SubtractEquation)
      return V.FUNC_SUBTRACT;
    if (t === THREE.ReverseSubtractEquation)
      return V.FUNC_REVERSE_SUBTRACT;
    if (t === THREE.ZeroFactor)
      return V.ZERO;
    if (t === THREE.OneFactor)
      return V.ONE;
    if (t === THREE.SrcColorFactor)
      return V.SRC_COLOR;
    if (t === THREE.OneMinusSrcColorFactor)
      return V.ONE_MINUS_SRC_COLOR;
    if (t === THREE.SrcAlphaFactor)
      return V.SRC_ALPHA;
    if (t === THREE.OneMinusSrcAlphaFactor)
      return V.ONE_MINUS_SRC_ALPHA;
    if (t === THREE.DstAlphaFactor)
      return V.DST_ALPHA;
    if (t === THREE.OneMinusDstAlphaFactor)
      return V.ONE_MINUS_DST_ALPHA;
    if (t === THREE.DstColorFactor)
      return V.DST_COLOR;
    if (t === THREE.OneMinusDstColorFactor)
      return V.ONE_MINUS_DST_COLOR;
    if (t === THREE.SrcAlphaSaturateFactor)
      return V.SRC_ALPHA_SATURATE;
    if (void 0 !== j) {
      if (t === THREE.RGB_S3TC_DXT1_Format)
        return j.COMPRESSED_RGB_S3TC_DXT1_EXT;
      if (t === THREE.RGBA_S3TC_DXT1_Format)
        return j.COMPRESSED_RGBA_S3TC_DXT1_EXT;
      if (t === THREE.RGBA_S3TC_DXT3_Format)
        return j.COMPRESSED_RGBA_S3TC_DXT3_EXT;
      if (t === THREE.RGBA_S3TC_DXT5_Format)
        return j.COMPRESSED_RGBA_S3TC_DXT5_EXT
    }
    return 0
  }
  console.log("THREE.WebGLRenderer", THREE.REVISION);
  var t = t || {}
    , L = void 0 !== t.canvas ? t.canvas : document.createElement("canvas")
    , D = void 0 !== t.precision ? t.precision : "highp"
    , k = void 0 !== t.alpha ? t.alpha : !1
    , I = void 0 !== t.premultipliedAlpha ? t.premultipliedAlpha : !0
    , O = void 0 !== t.antialias ? t.antialias : !1
    , z = void 0 !== t.stencil ? t.stencil : !0
    , F = void 0 !== t.preserveDrawingBuffer ? t.preserveDrawingBuffer : !1
    , N = new THREE.Color(0)
    , B = 0;
  this.domElement = L,
    this.context = null,
    this.devicePixelRatio = void 0 !== t.devicePixelRatio ? t.devicePixelRatio : void 0 !== self.devicePixelRatio ? self.devicePixelRatio : 1,
    this.autoUpdateObjects = this.sortObjects = this.autoClearStencil = this.autoClearDepth = this.autoClearColor = this.autoClear = !0,
    this.shadowMapEnabled = this.gammaOutput = this.gammaInput = !1,
    this.shadowMapAutoUpdate = !0,
    this.shadowMapType = THREE.PCFShadowMap,
    this.shadowMapCullFace = THREE.CullFaceFront,
    this.shadowMapCascade = this.shadowMapDebug = !1,
    this.maxMorphTargets = 8,
    this.maxMorphNormals = 4,
    this.autoScaleCubemaps = !0,
    this.renderPluginsPre = [],
    this.renderPluginsPost = [],
    this.info = {
      memory: {
        programs: 0,
        geometries: 0,
        textures: 0
      },
      render: {
        calls: 0,
        vertices: 0,
        faces: 0,
        points: 0
      }
    };
  var V, U, G, W, j, X = this, Y = [], q = 0, $ = null, K = null, Q = -1, Z = null, J = null, te = 0, ee = 0, ie = -1, ne = -1, re = -1, se = -1, oe = -1, ae = -1, le = -1, he = -1, ce = null, ue = null, pe = null, de = null, fe = 0, me = 0, ge = L.width, ve = L.height, ye = 0, Ee = 0, Te = {}, xe = new THREE.Frustum, be = new THREE.Matrix4, we = new THREE.Matrix4, _e = new THREE.Vector3, Re = new THREE.Vector3, Se = !0, He = {
    ambient: [0, 0, 0],
    directional: {
      length: 0,
      colors: [],
      positions: []
    },
    point: {
      length: 0,
      colors: [],
      positions: [],
      distances: []
    },
    spot: {
      length: 0,
      colors: [],
      positions: [],
      distances: [],
      directions: [],
      anglesCos: [],
      exponents: []
    },
    hemi: {
      length: 0,
      skyColors: [],
      groundColors: [],
      positions: []
    }
  };
  try {
    var Me = {
      alpha: k,
      premultipliedAlpha: I,
      antialias: O,
      stencil: z,
      preserveDrawingBuffer: F
    };
    if (V = L.getContext("webgl", Me) || L.getContext("experimental-webgl", Me),
      null === V)
      throw "Error creating WebGL context."
  } catch (Ce) {
    console.error(Ce)
  }
  U = V.getExtension("OES_texture_float"),
    V.getExtension("OES_texture_float_linear"),
    G = V.getExtension("OES_standard_derivatives"),
    W = V.getExtension("EXT_texture_filter_anisotropic") || V.getExtension("MOZ_EXT_texture_filter_anisotropic") || V.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),
    j = V.getExtension("WEBGL_compressed_texture_s3tc") || V.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || V.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),
  U || console.log("THREE.WebGLRenderer: Float textures not supported."),
  G || console.log("THREE.WebGLRenderer: Standard derivatives not supported."),
  W || console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported."),
  j || console.log("THREE.WebGLRenderer: S3TC compressed textures not supported."),
  void 0 === V.getShaderPrecisionFormat && (V.getShaderPrecisionFormat = function() {
      return {
        rangeMin: 1,
        rangeMax: 1,
        precision: 1
      }
    }
  ),
    V.clearColor(0, 0, 0, 1),
    V.clearDepth(1),
    V.clearStencil(0),
    V.enable(V.DEPTH_TEST),
    V.depthFunc(V.LEQUAL),
    V.frontFace(V.CCW),
    V.cullFace(V.BACK),
    V.enable(V.CULL_FACE),
    V.enable(V.BLEND),
    V.blendEquation(V.FUNC_ADD),
    V.blendFunc(V.SRC_ALPHA, V.ONE_MINUS_SRC_ALPHA),
    V.viewport(fe, me, ge, ve),
    V.clearColor(N.r, N.g, N.b, B),
    this.context = V;
  var Pe = V.getParameter(V.MAX_TEXTURE_IMAGE_UNITS)
    , Ae = V.getParameter(V.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
  V.getParameter(V.MAX_TEXTURE_SIZE);
  var Le = V.getParameter(V.MAX_CUBE_MAP_TEXTURE_SIZE)
    , De = W ? V.getParameter(W.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
    , ke = Ae > 0
    , Ie = ke && U;
  j && V.getParameter(V.COMPRESSED_TEXTURE_FORMATS);
  var Oe = V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.HIGH_FLOAT)
    , ze = V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.MEDIUM_FLOAT);
  V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.LOW_FLOAT);
  var Fe = V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.HIGH_FLOAT)
    , Ne = V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.MEDIUM_FLOAT);
  V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.LOW_FLOAT),
    V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.HIGH_INT),
    V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.MEDIUM_INT),
    V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.LOW_INT),
    V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.HIGH_INT),
    V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.MEDIUM_INT),
    V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.LOW_INT);
  var Be = 0 < Oe.precision && 0 < Fe.precision
    , Ve = 0 < ze.precision && 0 < Ne.precision;
  "highp" === D && !Be && (Ve ? (D = "mediump",
    console.warn("WebGLRenderer: highp not supported, using mediump")) : (D = "lowp",
    console.warn("WebGLRenderer: highp and mediump not supported, using lowp"))),
  "mediump" === D && !Ve && (D = "lowp",
    console.warn("WebGLRenderer: mediump not supported, using lowp")),
    this.getContext = function() {
      return V
    }
    ,
    this.supportsVertexTextures = function() {
      return ke
    }
    ,
    this.supportsFloatTextures = function() {
      return U
    }
    ,
    this.supportsStandardDerivatives = function() {
      return G
    }
    ,
    this.supportsCompressedTextureS3TC = function() {
      return j
    }
    ,
    this.getMaxAnisotropy = function() {
      return De
    }
    ,
    this.getPrecision = function() {
      return D
    }
    ,
    this.setSize = function(t, e, i) {
      L.width = t * this.devicePixelRatio,
        L.height = e * this.devicePixelRatio,
      1 !== this.devicePixelRatio && !1 !== i && (L.style.width = t + "px",
        L.style.height = e + "px"),
        this.setViewport(0, 0, L.width, L.height)
    }
    ,
    this.setViewport = function(t, e, i, n) {
      fe = void 0 !== t ? t : 0,
        me = void 0 !== e ? e : 0,
        ge = void 0 !== i ? i : L.width,
        ve = void 0 !== n ? n : L.height,
        V.viewport(fe, me, ge, ve)
    }
    ,
    this.setScissor = function(t, e, i, n) {
      V.scissor(t, e, i, n)
    }
    ,
    this.enableScissorTest = function(t) {
      t ? V.enable(V.SCISSOR_TEST) : V.disable(V.SCISSOR_TEST)
    }
    ,
    this.setClearColor = function(t, e) {
      N.set(t),
        B = void 0 !== e ? e : 1,
        V.clearColor(N.r, N.g, N.b, B)
    }
    ,
    this.setClearColorHex = function(t, e) {
      console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."),
        this.setClearColor(t, e)
    }
    ,
    this.getClearColor = function() {
      return N
    }
    ,
    this.getClearAlpha = function() {
      return B
    }
    ,
    this.clear = function(t, e, i) {
      var n = 0;
      (void 0 === t || t) && (n |= V.COLOR_BUFFER_BIT),
      (void 0 === e || e) && (n |= V.DEPTH_BUFFER_BIT),
      (void 0 === i || i) && (n |= V.STENCIL_BUFFER_BIT),
        V.clear(n)
    }
    ,
    this.clearColor = function() {
      V.clear(V.COLOR_BUFFER_BIT)
    }
    ,
    this.clearDepth = function() {
      V.clear(V.DEPTH_BUFFER_BIT)
    }
    ,
    this.clearStencil = function() {
      V.clear(V.STENCIL_BUFFER_BIT)
    }
    ,
    this.clearTarget = function(t, e, i, n) {
      this.setRenderTarget(t),
        this.clear(e, i, n)
    }
    ,
    this.addPostPlugin = function(t) {
      t.init(this),
        this.renderPluginsPost.push(t)
    }
    ,
    this.addPrePlugin = function(t) {
      t.init(this),
        this.renderPluginsPre.push(t)
    }
    ,
    this.updateShadowMap = function(t, e) {
      $ = null,
        Q = Z = he = le = re = -1,
        Se = !0,
        ne = ie = -1,
        this.shadowMapPlugin.update(t, e)
    }
  ;
  var Ue = function(t) {
    if (t = t.target,
        t.removeEventListener("dispose", Ue),
        t.__webglInit = void 0,
      t instanceof THREE.BufferGeometry) {
      var e, i = t.attributes;
      for (e in i)
        void 0 !== i[e].buffer && V.deleteBuffer(i[e].buffer);
      X.info.memory.geometries--
    } else if (void 0 !== t.geometryGroups)
      for (i in t.geometryGroups) {
        if (e = t.geometryGroups[i],
          void 0 !== e.numMorphTargets)
          for (var n = 0, r = e.numMorphTargets; r > n; n++)
            V.deleteBuffer(e.__webglMorphTargetsBuffers[n]);
        if (void 0 !== e.numMorphNormals)
          for (n = 0,
                 r = e.numMorphNormals; r > n; n++)
            V.deleteBuffer(e.__webglMorphNormalsBuffers[n]);
        Xe(e)
      }
    else
      Xe(t)
  }
    , Ge = function(t) {
    t = t.target,
      t.removeEventListener("dispose", Ge),
      t.image && t.image.__webglTextureCube ? V.deleteTexture(t.image.__webglTextureCube) : t.__webglInit && (t.__webglInit = !1,
        V.deleteTexture(t.__webglTexture)),
      X.info.memory.textures--
  }
    , We = function(t) {
    if (t = t.target,
        t.removeEventListener("dispose", We),
      t && t.__webglTexture)
      if (V.deleteTexture(t.__webglTexture),
        t instanceof THREE.WebGLRenderTargetCube)
        for (var e = 0; 6 > e; e++)
          V.deleteFramebuffer(t.__webglFramebuffer[e]),
            V.deleteRenderbuffer(t.__webglRenderbuffer[e]);
      else
        V.deleteFramebuffer(t.__webglFramebuffer),
          V.deleteRenderbuffer(t.__webglRenderbuffer);
    X.info.memory.textures--
  }
    , je = function(t) {
    t = t.target,
      t.removeEventListener("dispose", je),
      Ye(t)
  }
    , Xe = function(t) {
    if (void 0 !== t.__webglVertexBuffer && V.deleteBuffer(t.__webglVertexBuffer),
      void 0 !== t.__webglNormalBuffer && V.deleteBuffer(t.__webglNormalBuffer),
      void 0 !== t.__webglTangentBuffer && V.deleteBuffer(t.__webglTangentBuffer),
      void 0 !== t.__webglColorBuffer && V.deleteBuffer(t.__webglColorBuffer),
      void 0 !== t.__webglUVBuffer && V.deleteBuffer(t.__webglUVBuffer),
      void 0 !== t.__webglUV2Buffer && V.deleteBuffer(t.__webglUV2Buffer),
      void 0 !== t.__webglSkinIndicesBuffer && V.deleteBuffer(t.__webglSkinIndicesBuffer),
      void 0 !== t.__webglSkinWeightsBuffer && V.deleteBuffer(t.__webglSkinWeightsBuffer),
      void 0 !== t.__webglFaceBuffer && V.deleteBuffer(t.__webglFaceBuffer),
      void 0 !== t.__webglLineBuffer && V.deleteBuffer(t.__webglLineBuffer),
      void 0 !== t.__webglLineDistanceBuffer && V.deleteBuffer(t.__webglLineDistanceBuffer),
      void 0 !== t.__webglCustomAttributesList)
      for (var e in t.__webglCustomAttributesList)
        V.deleteBuffer(t.__webglCustomAttributesList[e].buffer);
    X.info.memory.geometries--
  }
    , Ye = function(t) {
    var e = t.program;
    if (void 0 !== e) {
      t.program = void 0;
      var i, n, r = !1, t = 0;
      for (i = Y.length; i > t; t++)
        if (n = Y[t],
          n.program === e) {
          n.usedTimes--,
          0 === n.usedTimes && (r = !0);
          break
        }
      if (!0 === r) {
        for (r = [],
               t = 0,
               i = Y.length; i > t; t++)
          n = Y[t],
          n.program !== e && r.push(n);
        Y = r,
          V.deleteProgram(e),
          X.info.memory.programs--
      }
    }
  };
  this.renderBufferImmediate = function(t, e, i) {
    if (t.hasPositions && !t.__webglVertexBuffer && (t.__webglVertexBuffer = V.createBuffer()),
      t.hasNormals && !t.__webglNormalBuffer && (t.__webglNormalBuffer = V.createBuffer()),
      t.hasUvs && !t.__webglUvBuffer && (t.__webglUvBuffer = V.createBuffer()),
      t.hasColors && !t.__webglColorBuffer && (t.__webglColorBuffer = V.createBuffer()),
      t.hasPositions && (V.bindBuffer(V.ARRAY_BUFFER, t.__webglVertexBuffer),
        V.bufferData(V.ARRAY_BUFFER, t.positionArray, V.DYNAMIC_DRAW),
        V.enableVertexAttribArray(e.attributes.position),
        V.vertexAttribPointer(e.attributes.position, 3, V.FLOAT, !1, 0, 0)),
        t.hasNormals) {
      if (V.bindBuffer(V.ARRAY_BUFFER, t.__webglNormalBuffer),
        i.shading === THREE.FlatShading) {
        var n, r, s, o, a, l, h, c, u, p, d, f = 3 * t.count;
        for (d = 0; f > d; d += 9)
          p = t.normalArray,
            n = p[d],
            r = p[d + 1],
            s = p[d + 2],
            o = p[d + 3],
            l = p[d + 4],
            c = p[d + 5],
            a = p[d + 6],
            h = p[d + 7],
            u = p[d + 8],
            n = (n + o + a) / 3,
            r = (r + l + h) / 3,
            s = (s + c + u) / 3,
            p[d] = n,
            p[d + 1] = r,
            p[d + 2] = s,
            p[d + 3] = n,
            p[d + 4] = r,
            p[d + 5] = s,
            p[d + 6] = n,
            p[d + 7] = r,
            p[d + 8] = s
      }
      V.bufferData(V.ARRAY_BUFFER, t.normalArray, V.DYNAMIC_DRAW),
        V.enableVertexAttribArray(e.attributes.normal),
        V.vertexAttribPointer(e.attributes.normal, 3, V.FLOAT, !1, 0, 0)
    }
    t.hasUvs && i.map && (V.bindBuffer(V.ARRAY_BUFFER, t.__webglUvBuffer),
      V.bufferData(V.ARRAY_BUFFER, t.uvArray, V.DYNAMIC_DRAW),
      V.enableVertexAttribArray(e.attributes.uv),
      V.vertexAttribPointer(e.attributes.uv, 2, V.FLOAT, !1, 0, 0)),
    t.hasColors && i.vertexColors !== THREE.NoColors && (V.bindBuffer(V.ARRAY_BUFFER, t.__webglColorBuffer),
      V.bufferData(V.ARRAY_BUFFER, t.colorArray, V.DYNAMIC_DRAW),
      V.enableVertexAttribArray(e.attributes.color),
      V.vertexAttribPointer(e.attributes.color, 3, V.FLOAT, !1, 0, 0)),
      V.drawArrays(V.TRIANGLES, 0, t.count),
      t.count = 0
  }
    ,
    this.renderBufferDirect = function(t, e, i, n, r, s) {
      if (!1 !== n.visible) {
        var l, h, c, u;
        if (l = T(t, e, i, n, s),
            e = l.attributes,
            t = r.attributes,
            i = !1,
            l = 16777215 * r.id + 2 * l.id + (n.wireframe ? 1 : 0),
          l !== Z && (Z = l,
            i = !0),
          i && a(),
          s instanceof THREE.Mesh)
          if (s = t.index) {
            r = r.offsets,
            1 < r.length && (i = !0);
            for (var p = 0, d = r.length; d > p; p++) {
              var f = r[p].index;
              if (i) {
                for (h in e)
                  c = e[h],
                    l = t[h],
                  c >= 0 && (l ? (u = l.itemSize,
                    V.bindBuffer(V.ARRAY_BUFFER, l.buffer),
                    o(c),
                    V.vertexAttribPointer(c, u, V.FLOAT, !1, 0, 4 * f * u)) : n.defaultAttributeValues && (2 === n.defaultAttributeValues[h].length ? V.vertexAttrib2fv(c, n.defaultAttributeValues[h]) : 3 === n.defaultAttributeValues[h].length && V.vertexAttrib3fv(c, n.defaultAttributeValues[h])));
                V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, s.buffer)
              }
              V.drawElements(V.TRIANGLES, r[p].count, V.UNSIGNED_SHORT, 2 * r[p].start),
                X.info.render.calls++,
                X.info.render.vertices += r[p].count,
                X.info.render.faces += r[p].count / 3
            }
          } else {
            if (i)
              for (h in e)
                "index" !== h && (c = e[h],
                  l = t[h],
                c >= 0 && (l ? (u = l.itemSize,
                  V.bindBuffer(V.ARRAY_BUFFER, l.buffer),
                  o(c),
                  V.vertexAttribPointer(c, u, V.FLOAT, !1, 0, 0)) : n.defaultAttributeValues && n.defaultAttributeValues[h] && (2 === n.defaultAttributeValues[h].length ? V.vertexAttrib2fv(c, n.defaultAttributeValues[h]) : 3 === n.defaultAttributeValues[h].length && V.vertexAttrib3fv(c, n.defaultAttributeValues[h]))));
            n = r.attributes.position,
              V.drawArrays(V.TRIANGLES, 0, n.numItems / 3),
              X.info.render.calls++,
              X.info.render.vertices += n.numItems / 3,
              X.info.render.faces += n.numItems / 3 / 3
          }
        else if (s instanceof THREE.ParticleSystem) {
          if (i)
            for (h in e)
              c = e[h],
                l = t[h],
              c >= 0 && (l ? (u = l.itemSize,
                V.bindBuffer(V.ARRAY_BUFFER, l.buffer),
                o(c),
                V.vertexAttribPointer(c, u, V.FLOAT, !1, 0, 0)) : n.defaultAttributeValues && n.defaultAttributeValues[h] && (2 === n.defaultAttributeValues[h].length ? V.vertexAttrib2fv(c, n.defaultAttributeValues[h]) : 3 === n.defaultAttributeValues[h].length && V.vertexAttrib3fv(c, n.defaultAttributeValues[h])));
          n = t.position,
            V.drawArrays(V.POINTS, 0, n.numItems / 3),
            X.info.render.calls++,
            X.info.render.points += n.numItems / 3
        } else if (s instanceof THREE.Line) {
          if (i)
            for (h in e)
              c = e[h],
                l = t[h],
              c >= 0 && (l ? (u = l.itemSize,
                V.bindBuffer(V.ARRAY_BUFFER, l.buffer),
                o(c),
                V.vertexAttribPointer(c, u, V.FLOAT, !1, 0, 0)) : n.defaultAttributeValues && n.defaultAttributeValues[h] && (2 === n.defaultAttributeValues[h].length ? V.vertexAttrib2fv(c, n.defaultAttributeValues[h]) : 3 === n.defaultAttributeValues[h].length && V.vertexAttrib3fv(c, n.defaultAttributeValues[h])));
          h = s.type === THREE.LineStrip ? V.LINE_STRIP : V.LINES,
            _(n.linewidth),
            n = t.position,
            V.drawArrays(h, 0, n.numItems / 3),
            X.info.render.calls++,
            X.info.render.points += n.numItems
        }
      }
    }
    ,
    this.renderBuffer = function(t, e, i, n, r, s) {
      if (!1 !== n.visible) {
        var l, c, i = T(t, e, i, n, s), t = i.attributes, e = !1, i = 16777215 * r.id + 2 * i.id + (n.wireframe ? 1 : 0);
        if (i !== Z && (Z = i,
            e = !0),
          e && a(),
          !n.morphTargets && 0 <= t.position)
          e && (V.bindBuffer(V.ARRAY_BUFFER, r.__webglVertexBuffer),
            o(t.position),
            V.vertexAttribPointer(t.position, 3, V.FLOAT, !1, 0, 0));
        else if (s.morphTargetBase) {
          if (i = n.program.attributes,
              -1 !== s.morphTargetBase && 0 <= i.position ? (V.bindBuffer(V.ARRAY_BUFFER, r.__webglMorphTargetsBuffers[s.morphTargetBase]),
                o(i.position),
                V.vertexAttribPointer(i.position, 3, V.FLOAT, !1, 0, 0)) : 0 <= i.position && (V.bindBuffer(V.ARRAY_BUFFER, r.__webglVertexBuffer),
                o(i.position),
                V.vertexAttribPointer(i.position, 3, V.FLOAT, !1, 0, 0)),
              s.morphTargetForcedOrder.length) {
            var u = 0;
            for (c = s.morphTargetForcedOrder,
                   l = s.morphTargetInfluences; u < n.numSupportedMorphTargets && u < c.length; )
              0 <= i["morphTarget" + u] && (V.bindBuffer(V.ARRAY_BUFFER, r.__webglMorphTargetsBuffers[c[u]]),
                o(i["morphTarget" + u]),
                V.vertexAttribPointer(i["morphTarget" + u], 3, V.FLOAT, !1, 0, 0)),
              0 <= i["morphNormal" + u] && n.morphNormals && (V.bindBuffer(V.ARRAY_BUFFER, r.__webglMorphNormalsBuffers[c[u]]),
                o(i["morphNormal" + u]),
                V.vertexAttribPointer(i["morphNormal" + u], 3, V.FLOAT, !1, 0, 0)),
                s.__webglMorphTargetInfluences[u] = l[c[u]],
                u++
          } else {
            c = [],
              l = s.morphTargetInfluences;
            var p, d = l.length;
            for (p = 0; d > p; p++)
              u = l[p],
              u > 0 && c.push([u, p]);
            for (c.length > n.numSupportedMorphTargets ? (c.sort(h),
              c.length = n.numSupportedMorphTargets) : c.length > n.numSupportedMorphNormals ? c.sort(h) : 0 === c.length && c.push([0, 0]),
                   u = 0; u < n.numSupportedMorphTargets; )
              c[u] ? (p = c[u][1],
              0 <= i["morphTarget" + u] && (V.bindBuffer(V.ARRAY_BUFFER, r.__webglMorphTargetsBuffers[p]),
                o(i["morphTarget" + u]),
                V.vertexAttribPointer(i["morphTarget" + u], 3, V.FLOAT, !1, 0, 0)),
              0 <= i["morphNormal" + u] && n.morphNormals && (V.bindBuffer(V.ARRAY_BUFFER, r.__webglMorphNormalsBuffers[p]),
                o(i["morphNormal" + u]),
                V.vertexAttribPointer(i["morphNormal" + u], 3, V.FLOAT, !1, 0, 0)),
                s.__webglMorphTargetInfluences[u] = l[p]) : s.__webglMorphTargetInfluences[u] = 0,
                u++
          }
          null !== n.program.uniforms.morphTargetInfluences && V.uniform1fv(n.program.uniforms.morphTargetInfluences, s.__webglMorphTargetInfluences)
        }
        if (e) {
          if (r.__webglCustomAttributesList)
            for (l = 0,
                   c = r.__webglCustomAttributesList.length; c > l; l++)
              i = r.__webglCustomAttributesList[l],
              0 <= t[i.buffer.belongsToAttribute] && (V.bindBuffer(V.ARRAY_BUFFER, i.buffer),
                o(t[i.buffer.belongsToAttribute]),
                V.vertexAttribPointer(t[i.buffer.belongsToAttribute], i.size, V.FLOAT, !1, 0, 0));
          0 <= t.color && (0 < s.geometry.colors.length || 0 < s.geometry.faces.length ? (V.bindBuffer(V.ARRAY_BUFFER, r.__webglColorBuffer),
            o(t.color),
            V.vertexAttribPointer(t.color, 3, V.FLOAT, !1, 0, 0)) : n.defaultAttributeValues && V.vertexAttrib3fv(t.color, n.defaultAttributeValues.color)),
          0 <= t.normal && (V.bindBuffer(V.ARRAY_BUFFER, r.__webglNormalBuffer),
            o(t.normal),
            V.vertexAttribPointer(t.normal, 3, V.FLOAT, !1, 0, 0)),
          0 <= t.tangent && (V.bindBuffer(V.ARRAY_BUFFER, r.__webglTangentBuffer),
            o(t.tangent),
            V.vertexAttribPointer(t.tangent, 4, V.FLOAT, !1, 0, 0)),
          0 <= t.uv && (s.geometry.faceVertexUvs[0] ? (V.bindBuffer(V.ARRAY_BUFFER, r.__webglUVBuffer),
            o(t.uv),
            V.vertexAttribPointer(t.uv, 2, V.FLOAT, !1, 0, 0)) : n.defaultAttributeValues && V.vertexAttrib2fv(t.uv, n.defaultAttributeValues.uv)),
          0 <= t.uv2 && (s.geometry.faceVertexUvs[1] ? (V.bindBuffer(V.ARRAY_BUFFER, r.__webglUV2Buffer),
            o(t.uv2),
            V.vertexAttribPointer(t.uv2, 2, V.FLOAT, !1, 0, 0)) : n.defaultAttributeValues && V.vertexAttrib2fv(t.uv2, n.defaultAttributeValues.uv2)),
          n.skinning && 0 <= t.skinIndex && 0 <= t.skinWeight && (V.bindBuffer(V.ARRAY_BUFFER, r.__webglSkinIndicesBuffer),
            o(t.skinIndex),
            V.vertexAttribPointer(t.skinIndex, 4, V.FLOAT, !1, 0, 0),
            V.bindBuffer(V.ARRAY_BUFFER, r.__webglSkinWeightsBuffer),
            o(t.skinWeight),
            V.vertexAttribPointer(t.skinWeight, 4, V.FLOAT, !1, 0, 0)),
          0 <= t.lineDistance && (V.bindBuffer(V.ARRAY_BUFFER, r.__webglLineDistanceBuffer),
            o(t.lineDistance),
            V.vertexAttribPointer(t.lineDistance, 1, V.FLOAT, !1, 0, 0))
        }
        s instanceof THREE.Mesh ? (n.wireframe ? (_(n.wireframeLinewidth),
        e && V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, r.__webglLineBuffer),
          V.drawElements(V.LINES, r.__webglLineCount, V.UNSIGNED_SHORT, 0)) : (e && V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, r.__webglFaceBuffer),
          V.drawElements(V.TRIANGLES, r.__webglFaceCount, V.UNSIGNED_SHORT, 0)),
          X.info.render.calls++,
          X.info.render.vertices += r.__webglFaceCount,
          X.info.render.faces += r.__webglFaceCount / 3) : s instanceof THREE.Line ? (s = s.type === THREE.LineStrip ? V.LINE_STRIP : V.LINES,
          _(n.linewidth),
          V.drawArrays(s, 0, r.__webglLineCount),
          X.info.render.calls++) : s instanceof THREE.ParticleSystem && (V.drawArrays(V.POINTS, 0, r.__webglParticleCount),
          X.info.render.calls++,
          X.info.render.points += r.__webglParticleCount)
      }
    }
    ,
    this.render = function(t, e, i, n) {
      if (!1 == e instanceof THREE.Camera)
        console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
      else {
        var r, s, o, a, h = t.__lights, d = t.fog;
        for (Q = -1,
               Se = !0,
             !0 === t.autoUpdate && t.updateMatrixWorld(),
             void 0 === e.parent && e.updateMatrixWorld(),
               e.matrixWorldInverse.getInverse(e.matrixWorld),
               be.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse),
               xe.setFromMatrix(be),
             this.autoUpdateObjects && this.initWebGLObjects(t),
               c(this.renderPluginsPre, t, e),
               X.info.render.calls = 0,
               X.info.render.vertices = 0,
               X.info.render.faces = 0,
               X.info.render.points = 0,
               this.setRenderTarget(i),
             (this.autoClear || n) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil),
               a = t.__webglObjects,
               n = 0,
               r = a.length; r > n; n++)
          if (s = a[n],
              o = s.object,
              s.id = n,
              s.render = !1,
            o.visible && (!(o instanceof THREE.Mesh || o instanceof THREE.ParticleSystem) || !o.frustumCulled || xe.intersectsObject(o))) {
            var f = o;
            f._modelViewMatrix.multiplyMatrices(e.matrixWorldInverse, f.matrixWorld),
              f._normalMatrix.getNormalMatrix(f._modelViewMatrix);
            var f = s
              , m = f.buffer
              , g = void 0
              , v = g = void 0
              , v = f.object.material;
            v instanceof THREE.MeshFaceMaterial ? (g = m.materialIndex,
              g = v.materials[g],
              g.transparent ? (f.transparent = g,
                f.opaque = null) : (f.opaque = g,
                f.transparent = null)) : (g = v) && (g.transparent ? (f.transparent = g,
              f.opaque = null) : (f.opaque = g,
              f.transparent = null)),
              s.render = !0,
            !0 === this.sortObjects && (null !== o.renderDepth ? s.z = o.renderDepth : (_e.setFromMatrixPosition(o.matrixWorld),
              _e.applyProjection(be),
              s.z = _e.z))
          }
        for (this.sortObjects && a.sort(l),
               a = t.__webglObjectsImmediate,
               n = 0,
               r = a.length; r > n; n++)
          s = a[n],
            o = s.object,
          o.visible && (o._modelViewMatrix.multiplyMatrices(e.matrixWorldInverse, o.matrixWorld),
            o._normalMatrix.getNormalMatrix(o._modelViewMatrix),
            o = s.object.material,
            o.transparent ? (s.transparent = o,
              s.opaque = null) : (s.opaque = o,
              s.transparent = null));
        t.overrideMaterial ? (n = t.overrideMaterial,
          this.setBlending(n.blending, n.blendEquation, n.blendSrc, n.blendDst),
          this.setDepthTest(n.depthTest),
          this.setDepthWrite(n.depthWrite),
          R(n.polygonOffset, n.polygonOffsetFactor, n.polygonOffsetUnits),
          u(t.__webglObjects, !1, "", e, h, d, !0, n),
          p(t.__webglObjectsImmediate, "", e, h, d, !1, n)) : (n = null,
          this.setBlending(THREE.NoBlending),
          u(t.__webglObjects, !0, "opaque", e, h, d, !1, n),
          p(t.__webglObjectsImmediate, "opaque", e, h, d, !1, n),
          u(t.__webglObjects, !1, "transparent", e, h, d, !0, n),
          p(t.__webglObjectsImmediate, "transparent", e, h, d, !0, n)),
          c(this.renderPluginsPost, t, e),
        i && i.generateMipmaps && i.minFilter !== THREE.NearestFilter && i.minFilter !== THREE.LinearFilter && (i instanceof THREE.WebGLRenderTargetCube ? (V.bindTexture(V.TEXTURE_CUBE_MAP, i.__webglTexture),
          V.generateMipmap(V.TEXTURE_CUBE_MAP),
          V.bindTexture(V.TEXTURE_CUBE_MAP, null)) : (V.bindTexture(V.TEXTURE_2D, i.__webglTexture),
          V.generateMipmap(V.TEXTURE_2D),
          V.bindTexture(V.TEXTURE_2D, null))),
          this.setDepthTest(!0),
          this.setDepthWrite(!0)
      }
    }
    ,
    this.renderImmediateObject = function(t, e, i, n, r) {
      var s = T(t, e, i, n, r);
      Z = -1,
        X.setMaterialFaces(n),
        r.immediateRenderCallback ? r.immediateRenderCallback(s, V, xe) : r.render(function(t) {
          X.renderBufferImmediate(t, s, n)
        })
    }
    ,
    this.initWebGLObjects = function(t) {
      for (t.__webglObjects || (t.__webglObjects = [],
        t.__webglObjectsImmediate = [],
        t.__webglSprites = [],
        t.__webglFlares = []); t.__objectsAdded.length; )
        d(t.__objectsAdded[0], t),
          t.__objectsAdded.splice(0, 1);
      for (; t.__objectsRemoved.length; )
        v(t.__objectsRemoved[0], t),
          t.__objectsRemoved.splice(0, 1);
      for (var e = 0, o = t.__webglObjects.length; o > e; e++) {
        var a = t.__webglObjects[e].object;
        void 0 === a.__webglInit && (void 0 !== a.__webglActive && v(a, t),
          d(a, t));
        var l = a
          , c = l.geometry
          , u = void 0
          , p = void 0
          , f = void 0;
        if (c instanceof THREE.BufferGeometry) {
          var y = V.DYNAMIC_DRAW
            , E = !c.dynamic
            , T = c.attributes
            , x = void 0
            , b = void 0;
          for (x in T)
            b = T[x],
            b.needsUpdate && ("index" === x ? (V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, b.buffer),
              V.bufferData(V.ELEMENT_ARRAY_BUFFER, b.array, y)) : (V.bindBuffer(V.ARRAY_BUFFER, b.buffer),
              V.bufferData(V.ARRAY_BUFFER, b.array, y)),
              b.needsUpdate = !1),
            E && !b.dynamic && (b.array = null)
        } else if (l instanceof THREE.Mesh) {
          for (var w = 0, _ = c.geometryGroupsList.length; _ > w; w++)
            if (u = c.geometryGroupsList[w],
                f = n(l, u),
              c.buffersNeedUpdate && i(u, l),
                p = f.attributes && m(f),
              c.verticesNeedUpdate || c.morphTargetsNeedUpdate || c.elementsNeedUpdate || c.uvsNeedUpdate || c.normalsNeedUpdate || c.colorsNeedUpdate || c.tangentsNeedUpdate || p) {
              var R = u
                , S = l
                , H = V.DYNAMIC_DRAW
                , M = !c.dynamic
                , C = f;
              if (R.__inittedArrays) {
                var P = r(C)
                  , A = C.vertexColors ? C.vertexColors : !1
                  , L = s(C)
                  , D = P === THREE.SmoothShading
                  , k = void 0
                  , I = void 0
                  , O = void 0
                  , z = void 0
                  , F = void 0
                  , N = void 0
                  , B = void 0
                  , U = void 0
                  , G = void 0
                  , W = void 0
                  , j = void 0
                  , X = void 0
                  , Y = void 0
                  , q = void 0
                  , $ = void 0
                  , K = void 0
                  , Q = void 0
                  , Z = void 0
                  , J = void 0
                  , te = void 0
                  , ee = void 0
                  , ie = void 0
                  , ne = void 0
                  , re = void 0
                  , se = void 0
                  , oe = void 0
                  , ae = void 0
                  , le = void 0
                  , he = void 0
                  , ce = void 0
                  , ue = void 0
                  , pe = void 0
                  , de = void 0
                  , fe = void 0
                  , me = void 0
                  , ge = void 0
                  , ve = void 0
                  , ye = void 0
                  , Ee = void 0
                  , Te = void 0
                  , xe = 0
                  , Re = 0
                  , Se = 0
                  , He = 0
                  , Me = 0
                  , Ce = 0
                  , Pe = 0
                  , Ae = 0
                  , Le = 0
                  , De = 0
                  , ke = 0
                  , Ie = 0
                  , Oe = void 0
                  , ze = R.__vertexArray
                  , Fe = R.__uvArray
                  , Ne = R.__uv2Array
                  , Be = R.__normalArray
                  , Ve = R.__tangentArray
                  , Ue = R.__colorArray
                  , Ge = R.__skinIndexArray
                  , We = R.__skinWeightArray
                  , je = R.__morphTargetsArrays
                  , Xe = R.__morphNormalsArrays
                  , Ye = R.__webglCustomAttributesList
                  , qe = void 0
                  , $e = R.__faceArray
                  , Ke = R.__lineArray
                  , Qe = S.geometry
                  , Ze = Qe.elementsNeedUpdate
                  , Je = Qe.uvsNeedUpdate
                  , ti = Qe.normalsNeedUpdate
                  , ei = Qe.tangentsNeedUpdate
                  , ii = Qe.colorsNeedUpdate
                  , ni = Qe.morphTargetsNeedUpdate
                  , ri = Qe.vertices
                  , si = R.faces3
                  , oi = Qe.faces
                  , ai = Qe.faceVertexUvs[0]
                  , li = Qe.faceVertexUvs[1]
                  , hi = Qe.skinIndices
                  , ci = Qe.skinWeights
                  , ui = Qe.morphTargets
                  , pi = Qe.morphNormals;
                if (Qe.verticesNeedUpdate) {
                  for (k = 0,
                         I = si.length; I > k; k++)
                    z = oi[si[k]],
                      X = ri[z.a],
                      Y = ri[z.b],
                      q = ri[z.c],
                      ze[Re] = X.x,
                      ze[Re + 1] = X.y,
                      ze[Re + 2] = X.z,
                      ze[Re + 3] = Y.x,
                      ze[Re + 4] = Y.y,
                      ze[Re + 5] = Y.z,
                      ze[Re + 6] = q.x,
                      ze[Re + 7] = q.y,
                      ze[Re + 8] = q.z,
                      Re += 9;
                  V.bindBuffer(V.ARRAY_BUFFER, R.__webglVertexBuffer),
                    V.bufferData(V.ARRAY_BUFFER, ze, H)
                }
                if (ni)
                  for (me = 0,
                         ge = ui.length; ge > me; me++) {
                    for (k = ke = 0,
                           I = si.length; I > k; k++)
                      Ee = si[k],
                        z = oi[Ee],
                        X = ui[me].vertices[z.a],
                        Y = ui[me].vertices[z.b],
                        q = ui[me].vertices[z.c],
                        ve = je[me],
                        ve[ke] = X.x,
                        ve[ke + 1] = X.y,
                        ve[ke + 2] = X.z,
                        ve[ke + 3] = Y.x,
                        ve[ke + 4] = Y.y,
                        ve[ke + 5] = Y.z,
                        ve[ke + 6] = q.x,
                        ve[ke + 7] = q.y,
                        ve[ke + 8] = q.z,
                      C.morphNormals && (D ? (Te = pi[me].vertexNormals[Ee],
                        Z = Te.a,
                        J = Te.b,
                        te = Te.c) : te = J = Z = pi[me].faceNormals[Ee],
                        ye = Xe[me],
                        ye[ke] = Z.x,
                        ye[ke + 1] = Z.y,
                        ye[ke + 2] = Z.z,
                        ye[ke + 3] = J.x,
                        ye[ke + 4] = J.y,
                        ye[ke + 5] = J.z,
                        ye[ke + 6] = te.x,
                        ye[ke + 7] = te.y,
                        ye[ke + 8] = te.z),
                        ke += 9;
                    V.bindBuffer(V.ARRAY_BUFFER, R.__webglMorphTargetsBuffers[me]),
                      V.bufferData(V.ARRAY_BUFFER, je[me], H),
                    C.morphNormals && (V.bindBuffer(V.ARRAY_BUFFER, R.__webglMorphNormalsBuffers[me]),
                      V.bufferData(V.ARRAY_BUFFER, Xe[me], H))
                  }
                if (ci.length) {
                  for (k = 0,
                         I = si.length; I > k; k++)
                    z = oi[si[k]],
                      re = ci[z.a],
                      se = ci[z.b],
                      oe = ci[z.c],
                      We[De] = re.x,
                      We[De + 1] = re.y,
                      We[De + 2] = re.z,
                      We[De + 3] = re.w,
                      We[De + 4] = se.x,
                      We[De + 5] = se.y,
                      We[De + 6] = se.z,
                      We[De + 7] = se.w,
                      We[De + 8] = oe.x,
                      We[De + 9] = oe.y,
                      We[De + 10] = oe.z,
                      We[De + 11] = oe.w,
                      ae = hi[z.a],
                      le = hi[z.b],
                      he = hi[z.c],
                      Ge[De] = ae.x,
                      Ge[De + 1] = ae.y,
                      Ge[De + 2] = ae.z,
                      Ge[De + 3] = ae.w,
                      Ge[De + 4] = le.x,
                      Ge[De + 5] = le.y,
                      Ge[De + 6] = le.z,
                      Ge[De + 7] = le.w,
                      Ge[De + 8] = he.x,
                      Ge[De + 9] = he.y,
                      Ge[De + 10] = he.z,
                      Ge[De + 11] = he.w,
                      De += 12;
                  De > 0 && (V.bindBuffer(V.ARRAY_BUFFER, R.__webglSkinIndicesBuffer),
                    V.bufferData(V.ARRAY_BUFFER, Ge, H),
                    V.bindBuffer(V.ARRAY_BUFFER, R.__webglSkinWeightsBuffer),
                    V.bufferData(V.ARRAY_BUFFER, We, H))
                }
                if (ii && A) {
                  for (k = 0,
                         I = si.length; I > k; k++)
                    z = oi[si[k]],
                      B = z.vertexColors,
                      U = z.color,
                      3 === B.length && A === THREE.VertexColors ? (ee = B[0],
                        ie = B[1],
                        ne = B[2]) : ne = ie = ee = U,
                      Ue[Le] = ee.r,
                      Ue[Le + 1] = ee.g,
                      Ue[Le + 2] = ee.b,
                      Ue[Le + 3] = ie.r,
                      Ue[Le + 4] = ie.g,
                      Ue[Le + 5] = ie.b,
                      Ue[Le + 6] = ne.r,
                      Ue[Le + 7] = ne.g,
                      Ue[Le + 8] = ne.b,
                      Le += 9;
                  Le > 0 && (V.bindBuffer(V.ARRAY_BUFFER, R.__webglColorBuffer),
                    V.bufferData(V.ARRAY_BUFFER, Ue, H))
                }
                if (ei && Qe.hasTangents) {
                  for (k = 0,
                         I = si.length; I > k; k++)
                    z = oi[si[k]],
                      G = z.vertexTangents,
                      $ = G[0],
                      K = G[1],
                      Q = G[2],
                      Ve[Pe] = $.x,
                      Ve[Pe + 1] = $.y,
                      Ve[Pe + 2] = $.z,
                      Ve[Pe + 3] = $.w,
                      Ve[Pe + 4] = K.x,
                      Ve[Pe + 5] = K.y,
                      Ve[Pe + 6] = K.z,
                      Ve[Pe + 7] = K.w,
                      Ve[Pe + 8] = Q.x,
                      Ve[Pe + 9] = Q.y,
                      Ve[Pe + 10] = Q.z,
                      Ve[Pe + 11] = Q.w,
                      Pe += 12;
                  V.bindBuffer(V.ARRAY_BUFFER, R.__webglTangentBuffer),
                    V.bufferData(V.ARRAY_BUFFER, Ve, H)
                }
                if (ti && P) {
                  for (k = 0,
                         I = si.length; I > k; k++)
                    if (z = oi[si[k]],
                        F = z.vertexNormals,
                        N = z.normal,
                      3 === F.length && D)
                      for (ce = 0; 3 > ce; ce++)
                        pe = F[ce],
                          Be[Ce] = pe.x,
                          Be[Ce + 1] = pe.y,
                          Be[Ce + 2] = pe.z,
                          Ce += 3;
                    else
                      for (ce = 0; 3 > ce; ce++)
                        Be[Ce] = N.x,
                          Be[Ce + 1] = N.y,
                          Be[Ce + 2] = N.z,
                          Ce += 3;
                  V.bindBuffer(V.ARRAY_BUFFER, R.__webglNormalBuffer),
                    V.bufferData(V.ARRAY_BUFFER, Be, H)
                }
                if (Je && ai && L) {
                  for (k = 0,
                         I = si.length; I > k; k++)
                    if (O = si[k],
                        W = ai[O],
                      void 0 !== W)
                      for (ce = 0; 3 > ce; ce++)
                        de = W[ce],
                          Fe[Se] = de.x,
                          Fe[Se + 1] = de.y,
                          Se += 2;
                  Se > 0 && (V.bindBuffer(V.ARRAY_BUFFER, R.__webglUVBuffer),
                    V.bufferData(V.ARRAY_BUFFER, Fe, H))
                }
                if (Je && li && L) {
                  for (k = 0,
                         I = si.length; I > k; k++)
                    if (O = si[k],
                        j = li[O],
                      void 0 !== j)
                      for (ce = 0; 3 > ce; ce++)
                        fe = j[ce],
                          Ne[He] = fe.x,
                          Ne[He + 1] = fe.y,
                          He += 2;
                  He > 0 && (V.bindBuffer(V.ARRAY_BUFFER, R.__webglUV2Buffer),
                    V.bufferData(V.ARRAY_BUFFER, Ne, H))
                }
                if (Ze) {
                  for (k = 0,
                         I = si.length; I > k; k++)
                    $e[Me] = xe,
                      $e[Me + 1] = xe + 1,
                      $e[Me + 2] = xe + 2,
                      Me += 3,
                      Ke[Ae] = xe,
                      Ke[Ae + 1] = xe + 1,
                      Ke[Ae + 2] = xe,
                      Ke[Ae + 3] = xe + 2,
                      Ke[Ae + 4] = xe + 1,
                      Ke[Ae + 5] = xe + 2,
                      Ae += 6,
                      xe += 3;
                  V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, R.__webglFaceBuffer),
                    V.bufferData(V.ELEMENT_ARRAY_BUFFER, $e, H),
                    V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, R.__webglLineBuffer),
                    V.bufferData(V.ELEMENT_ARRAY_BUFFER, Ke, H)
                }
                if (Ye)
                  for (ce = 0,
                         ue = Ye.length; ue > ce; ce++)
                    if (qe = Ye[ce],
                        qe.__original.needsUpdate) {
                      if (Ie = 0,
                        1 === qe.size) {
                        if (void 0 === qe.boundTo || "vertices" === qe.boundTo)
                          for (k = 0,
                                 I = si.length; I > k; k++)
                            z = oi[si[k]],
                              qe.array[Ie] = qe.value[z.a],
                              qe.array[Ie + 1] = qe.value[z.b],
                              qe.array[Ie + 2] = qe.value[z.c],
                              Ie += 3;
                        else if ("faces" === qe.boundTo)
                          for (k = 0,
                                 I = si.length; I > k; k++)
                            Oe = qe.value[si[k]],
                              qe.array[Ie] = Oe,
                              qe.array[Ie + 1] = Oe,
                              qe.array[Ie + 2] = Oe,
                              Ie += 3
                      } else if (2 === qe.size) {
                        if (void 0 === qe.boundTo || "vertices" === qe.boundTo)
                          for (k = 0,
                                 I = si.length; I > k; k++)
                            z = oi[si[k]],
                              X = qe.value[z.a],
                              Y = qe.value[z.b],
                              q = qe.value[z.c],
                              qe.array[Ie] = X.x,
                              qe.array[Ie + 1] = X.y,
                              qe.array[Ie + 2] = Y.x,
                              qe.array[Ie + 3] = Y.y,
                              qe.array[Ie + 4] = q.x,
                              qe.array[Ie + 5] = q.y,
                              Ie += 6;
                        else if ("faces" === qe.boundTo)
                          for (k = 0,
                                 I = si.length; I > k; k++)
                            q = Y = X = Oe = qe.value[si[k]],
                              qe.array[Ie] = X.x,
                              qe.array[Ie + 1] = X.y,
                              qe.array[Ie + 2] = Y.x,
                              qe.array[Ie + 3] = Y.y,
                              qe.array[Ie + 4] = q.x,
                              qe.array[Ie + 5] = q.y,
                              Ie += 6
                      } else if (3 === qe.size) {
                        var di;
                        if (di = "c" === qe.type ? ["r", "g", "b"] : ["x", "y", "z"],
                          void 0 === qe.boundTo || "vertices" === qe.boundTo)
                          for (k = 0,
                                 I = si.length; I > k; k++)
                            z = oi[si[k]],
                              X = qe.value[z.a],
                              Y = qe.value[z.b],
                              q = qe.value[z.c],
                              qe.array[Ie] = X[di[0]],
                              qe.array[Ie + 1] = X[di[1]],
                              qe.array[Ie + 2] = X[di[2]],
                              qe.array[Ie + 3] = Y[di[0]],
                              qe.array[Ie + 4] = Y[di[1]],
                              qe.array[Ie + 5] = Y[di[2]],
                              qe.array[Ie + 6] = q[di[0]],
                              qe.array[Ie + 7] = q[di[1]],
                              qe.array[Ie + 8] = q[di[2]],
                              Ie += 9;
                        else if ("faces" === qe.boundTo)
                          for (k = 0,
                                 I = si.length; I > k; k++)
                            q = Y = X = Oe = qe.value[si[k]],
                              qe.array[Ie] = X[di[0]],
                              qe.array[Ie + 1] = X[di[1]],
                              qe.array[Ie + 2] = X[di[2]],
                              qe.array[Ie + 3] = Y[di[0]],
                              qe.array[Ie + 4] = Y[di[1]],
                              qe.array[Ie + 5] = Y[di[2]],
                              qe.array[Ie + 6] = q[di[0]],
                              qe.array[Ie + 7] = q[di[1]],
                              qe.array[Ie + 8] = q[di[2]],
                              Ie += 9;
                        else if ("faceVertices" === qe.boundTo)
                          for (k = 0,
                                 I = si.length; I > k; k++)
                            Oe = qe.value[si[k]],
                              X = Oe[0],
                              Y = Oe[1],
                              q = Oe[2],
                              qe.array[Ie] = X[di[0]],
                              qe.array[Ie + 1] = X[di[1]],
                              qe.array[Ie + 2] = X[di[2]],
                              qe.array[Ie + 3] = Y[di[0]],
                              qe.array[Ie + 4] = Y[di[1]],
                              qe.array[Ie + 5] = Y[di[2]],
                              qe.array[Ie + 6] = q[di[0]],
                              qe.array[Ie + 7] = q[di[1]],
                              qe.array[Ie + 8] = q[di[2]],
                              Ie += 9
                      } else if (4 === qe.size)
                        if (void 0 === qe.boundTo || "vertices" === qe.boundTo)
                          for (k = 0,
                                 I = si.length; I > k; k++)
                            z = oi[si[k]],
                              X = qe.value[z.a],
                              Y = qe.value[z.b],
                              q = qe.value[z.c],
                              qe.array[Ie] = X.x,
                              qe.array[Ie + 1] = X.y,
                              qe.array[Ie + 2] = X.z,
                              qe.array[Ie + 3] = X.w,
                              qe.array[Ie + 4] = Y.x,
                              qe.array[Ie + 5] = Y.y,
                              qe.array[Ie + 6] = Y.z,
                              qe.array[Ie + 7] = Y.w,
                              qe.array[Ie + 8] = q.x,
                              qe.array[Ie + 9] = q.y,
                              qe.array[Ie + 10] = q.z,
                              qe.array[Ie + 11] = q.w,
                              Ie += 12;
                        else if ("faces" === qe.boundTo)
                          for (k = 0,
                                 I = si.length; I > k; k++)
                            q = Y = X = Oe = qe.value[si[k]],
                              qe.array[Ie] = X.x,
                              qe.array[Ie + 1] = X.y,
                              qe.array[Ie + 2] = X.z,
                              qe.array[Ie + 3] = X.w,
                              qe.array[Ie + 4] = Y.x,
                              qe.array[Ie + 5] = Y.y,
                              qe.array[Ie + 6] = Y.z,
                              qe.array[Ie + 7] = Y.w,
                              qe.array[Ie + 8] = q.x,
                              qe.array[Ie + 9] = q.y,
                              qe.array[Ie + 10] = q.z,
                              qe.array[Ie + 11] = q.w,
                              Ie += 12;
                        else if ("faceVertices" === qe.boundTo)
                          for (k = 0,
                                 I = si.length; I > k; k++)
                            Oe = qe.value[si[k]],
                              X = Oe[0],
                              Y = Oe[1],
                              q = Oe[2],
                              qe.array[Ie] = X.x,
                              qe.array[Ie + 1] = X.y,
                              qe.array[Ie + 2] = X.z,
                              qe.array[Ie + 3] = X.w,
                              qe.array[Ie + 4] = Y.x,
                              qe.array[Ie + 5] = Y.y,
                              qe.array[Ie + 6] = Y.z,
                              qe.array[Ie + 7] = Y.w,
                              qe.array[Ie + 8] = q.x,
                              qe.array[Ie + 9] = q.y,
                              qe.array[Ie + 10] = q.z,
                              qe.array[Ie + 11] = q.w,
                              Ie += 12;
                      V.bindBuffer(V.ARRAY_BUFFER, qe.buffer),
                        V.bufferData(V.ARRAY_BUFFER, qe.array, H)
                    }
                M && (delete R.__inittedArrays,
                  delete R.__colorArray,
                  delete R.__normalArray,
                  delete R.__tangentArray,
                  delete R.__uvArray,
                  delete R.__uv2Array,
                  delete R.__faceArray,
                  delete R.__vertexArray,
                  delete R.__lineArray,
                  delete R.__skinIndexArray,
                  delete R.__skinWeightArray)
              }
            }
          c.verticesNeedUpdate = !1,
            c.morphTargetsNeedUpdate = !1,
            c.elementsNeedUpdate = !1,
            c.uvsNeedUpdate = !1,
            c.normalsNeedUpdate = !1,
            c.colorsNeedUpdate = !1,
            c.tangentsNeedUpdate = !1,
            c.buffersNeedUpdate = !1,
          f.attributes && g(f)
        } else if (l instanceof THREE.Line) {
          if (f = n(l, c),
              p = f.attributes && m(f),
            c.verticesNeedUpdate || c.colorsNeedUpdate || c.lineDistancesNeedUpdate || p) {
            var fi = c
              , mi = V.DYNAMIC_DRAW
              , gi = void 0
              , vi = void 0
              , yi = void 0
              , Ei = void 0
              , Ti = void 0
              , xi = void 0
              , bi = fi.vertices
              , wi = fi.colors
              , _i = fi.lineDistances
              , Ri = bi.length
              , Si = wi.length
              , Hi = _i.length
              , Mi = fi.__vertexArray
              , Ci = fi.__colorArray
              , Pi = fi.__lineDistanceArray
              , Ai = fi.colorsNeedUpdate
              , Li = fi.lineDistancesNeedUpdate
              , Di = fi.__webglCustomAttributesList
              , ki = void 0
              , Ii = void 0
              , Oi = void 0
              , zi = void 0
              , Fi = void 0
              , Ni = void 0;
            if (fi.verticesNeedUpdate) {
              for (gi = 0; Ri > gi; gi++)
                Ei = bi[gi],
                  Ti = 3 * gi,
                  Mi[Ti] = Ei.x,
                  Mi[Ti + 1] = Ei.y,
                  Mi[Ti + 2] = Ei.z;
              V.bindBuffer(V.ARRAY_BUFFER, fi.__webglVertexBuffer),
                V.bufferData(V.ARRAY_BUFFER, Mi, mi)
            }
            if (Ai) {
              for (vi = 0; Si > vi; vi++)
                xi = wi[vi],
                  Ti = 3 * vi,
                  Ci[Ti] = xi.r,
                  Ci[Ti + 1] = xi.g,
                  Ci[Ti + 2] = xi.b;
              V.bindBuffer(V.ARRAY_BUFFER, fi.__webglColorBuffer),
                V.bufferData(V.ARRAY_BUFFER, Ci, mi)
            }
            if (Li) {
              for (yi = 0; Hi > yi; yi++)
                Pi[yi] = _i[yi];
              V.bindBuffer(V.ARRAY_BUFFER, fi.__webglLineDistanceBuffer),
                V.bufferData(V.ARRAY_BUFFER, Pi, mi)
            }
            if (Di)
              for (ki = 0,
                     Ii = Di.length; Ii > ki; ki++)
                if (Ni = Di[ki],
                  Ni.needsUpdate && (void 0 === Ni.boundTo || "vertices" === Ni.boundTo)) {
                  if (Ti = 0,
                      zi = Ni.value.length,
                    1 === Ni.size)
                    for (Oi = 0; zi > Oi; Oi++)
                      Ni.array[Oi] = Ni.value[Oi];
                  else if (2 === Ni.size)
                    for (Oi = 0; zi > Oi; Oi++)
                      Fi = Ni.value[Oi],
                        Ni.array[Ti] = Fi.x,
                        Ni.array[Ti + 1] = Fi.y,
                        Ti += 2;
                  else if (3 === Ni.size)
                    if ("c" === Ni.type)
                      for (Oi = 0; zi > Oi; Oi++)
                        Fi = Ni.value[Oi],
                          Ni.array[Ti] = Fi.r,
                          Ni.array[Ti + 1] = Fi.g,
                          Ni.array[Ti + 2] = Fi.b,
                          Ti += 3;
                    else
                      for (Oi = 0; zi > Oi; Oi++)
                        Fi = Ni.value[Oi],
                          Ni.array[Ti] = Fi.x,
                          Ni.array[Ti + 1] = Fi.y,
                          Ni.array[Ti + 2] = Fi.z,
                          Ti += 3;
                  else if (4 === Ni.size)
                    for (Oi = 0; zi > Oi; Oi++)
                      Fi = Ni.value[Oi],
                        Ni.array[Ti] = Fi.x,
                        Ni.array[Ti + 1] = Fi.y,
                        Ni.array[Ti + 2] = Fi.z,
                        Ni.array[Ti + 3] = Fi.w,
                        Ti += 4;
                  V.bindBuffer(V.ARRAY_BUFFER, Ni.buffer),
                    V.bufferData(V.ARRAY_BUFFER, Ni.array, mi)
                }
          }
          c.verticesNeedUpdate = !1,
            c.colorsNeedUpdate = !1,
            c.lineDistancesNeedUpdate = !1,
          f.attributes && g(f)
        } else if (l instanceof THREE.ParticleSystem) {
          if (f = n(l, c),
              p = f.attributes && m(f),
            c.verticesNeedUpdate || c.colorsNeedUpdate || l.sortParticles || p) {
            var Bi = c
              , Vi = V.DYNAMIC_DRAW
              , Ui = l
              , Gi = void 0
              , Wi = void 0
              , ji = void 0
              , Xi = void 0
              , Yi = void 0
              , qi = void 0
              , $i = Bi.vertices
              , Ki = $i.length
              , Qi = Bi.colors
              , Zi = Qi.length
              , Ji = Bi.__vertexArray
              , tn = Bi.__colorArray
              , en = Bi.__sortArray
              , nn = Bi.verticesNeedUpdate
              , rn = Bi.colorsNeedUpdate
              , sn = Bi.__webglCustomAttributesList
              , on = void 0
              , an = void 0
              , ln = void 0
              , hn = void 0
              , cn = void 0
              , un = void 0;
            if (Ui.sortParticles) {
              for (we.copy(be),
                     we.multiply(Ui.matrixWorld),
                     Gi = 0; Ki > Gi; Gi++)
                ji = $i[Gi],
                  _e.copy(ji),
                  _e.applyProjection(we),
                  en[Gi] = [_e.z, Gi];
              for (en.sort(h),
                     Gi = 0; Ki > Gi; Gi++)
                ji = $i[en[Gi][1]],
                  Xi = 3 * Gi,
                  Ji[Xi] = ji.x,
                  Ji[Xi + 1] = ji.y,
                  Ji[Xi + 2] = ji.z;
              for (Wi = 0; Zi > Wi; Wi++)
                Xi = 3 * Wi,
                  qi = Qi[en[Wi][1]],
                  tn[Xi] = qi.r,
                  tn[Xi + 1] = qi.g,
                  tn[Xi + 2] = qi.b;
              if (sn)
                for (on = 0,
                       an = sn.length; an > on; on++)
                  if (un = sn[on],
                    void 0 === un.boundTo || "vertices" === un.boundTo)
                    if (Xi = 0,
                        hn = un.value.length,
                      1 === un.size)
                      for (ln = 0; hn > ln; ln++)
                        Yi = en[ln][1],
                          un.array[ln] = un.value[Yi];
                    else if (2 === un.size)
                      for (ln = 0; hn > ln; ln++)
                        Yi = en[ln][1],
                          cn = un.value[Yi],
                          un.array[Xi] = cn.x,
                          un.array[Xi + 1] = cn.y,
                          Xi += 2;
                    else if (3 === un.size)
                      if ("c" === un.type)
                        for (ln = 0; hn > ln; ln++)
                          Yi = en[ln][1],
                            cn = un.value[Yi],
                            un.array[Xi] = cn.r,
                            un.array[Xi + 1] = cn.g,
                            un.array[Xi + 2] = cn.b,
                            Xi += 3;
                      else
                        for (ln = 0; hn > ln; ln++)
                          Yi = en[ln][1],
                            cn = un.value[Yi],
                            un.array[Xi] = cn.x,
                            un.array[Xi + 1] = cn.y,
                            un.array[Xi + 2] = cn.z,
                            Xi += 3;
                    else if (4 === un.size)
                      for (ln = 0; hn > ln; ln++)
                        Yi = en[ln][1],
                          cn = un.value[Yi],
                          un.array[Xi] = cn.x,
                          un.array[Xi + 1] = cn.y,
                          un.array[Xi + 2] = cn.z,
                          un.array[Xi + 3] = cn.w,
                          Xi += 4
            } else {
              if (nn)
                for (Gi = 0; Ki > Gi; Gi++)
                  ji = $i[Gi],
                    Xi = 3 * Gi,
                    Ji[Xi] = ji.x,
                    Ji[Xi + 1] = ji.y,
                    Ji[Xi + 2] = ji.z;
              if (rn)
                for (Wi = 0; Zi > Wi; Wi++)
                  qi = Qi[Wi],
                    Xi = 3 * Wi,
                    tn[Xi] = qi.r,
                    tn[Xi + 1] = qi.g,
                    tn[Xi + 2] = qi.b;
              if (sn)
                for (on = 0,
                       an = sn.length; an > on; on++)
                  if (un = sn[on],
                    un.needsUpdate && (void 0 === un.boundTo || "vertices" === un.boundTo))
                    if (hn = un.value.length,
                        Xi = 0,
                      1 === un.size)
                      for (ln = 0; hn > ln; ln++)
                        un.array[ln] = un.value[ln];
                    else if (2 === un.size)
                      for (ln = 0; hn > ln; ln++)
                        cn = un.value[ln],
                          un.array[Xi] = cn.x,
                          un.array[Xi + 1] = cn.y,
                          Xi += 2;
                    else if (3 === un.size)
                      if ("c" === un.type)
                        for (ln = 0; hn > ln; ln++)
                          cn = un.value[ln],
                            un.array[Xi] = cn.r,
                            un.array[Xi + 1] = cn.g,
                            un.array[Xi + 2] = cn.b,
                            Xi += 3;
                      else
                        for (ln = 0; hn > ln; ln++)
                          cn = un.value[ln],
                            un.array[Xi] = cn.x,
                            un.array[Xi + 1] = cn.y,
                            un.array[Xi + 2] = cn.z,
                            Xi += 3;
                    else if (4 === un.size)
                      for (ln = 0; hn > ln; ln++)
                        cn = un.value[ln],
                          un.array[Xi] = cn.x,
                          un.array[Xi + 1] = cn.y,
                          un.array[Xi + 2] = cn.z,
                          un.array[Xi + 3] = cn.w,
                          Xi += 4
            }
            if ((nn || Ui.sortParticles) && (V.bindBuffer(V.ARRAY_BUFFER, Bi.__webglVertexBuffer),
                V.bufferData(V.ARRAY_BUFFER, Ji, Vi)),
              (rn || Ui.sortParticles) && (V.bindBuffer(V.ARRAY_BUFFER, Bi.__webglColorBuffer),
                V.bufferData(V.ARRAY_BUFFER, tn, Vi)),
                sn)
              for (on = 0,
                     an = sn.length; an > on; on++)
                un = sn[on],
                (un.needsUpdate || Ui.sortParticles) && (V.bindBuffer(V.ARRAY_BUFFER, un.buffer),
                  V.bufferData(V.ARRAY_BUFFER, un.array, Vi))
          }
          c.verticesNeedUpdate = !1,
            c.colorsNeedUpdate = !1,
          f.attributes && g(f)
        }
      }
    }
    ,
    this.initMaterial = function(t, e, i, n) {
      var r, s, o, a;
      t.addEventListener("dispose", je);
      var l, h, c, u, p;
      if (t instanceof THREE.MeshDepthMaterial ? p = "depth" : t instanceof THREE.MeshNormalMaterial ? p = "normal" : t instanceof THREE.MeshBasicMaterial ? p = "basic" : t instanceof THREE.MeshLambertMaterial ? p = "lambert" : t instanceof THREE.MeshPhongMaterial ? p = "phong" : t instanceof THREE.LineBasicMaterial ? p = "basic" : t instanceof THREE.LineDashedMaterial ? p = "dashed" : t instanceof THREE.ParticleSystemMaterial && (p = "particle_basic"),
          p) {
        var d = THREE.ShaderLib[p];
        t.uniforms = THREE.UniformsUtils.clone(d.uniforms),
          t.vertexShader = d.vertexShader,
          t.fragmentShader = d.fragmentShader
      }
      var f = r = 0
        , m = 0
        , g = d = 0;
      for (s = e.length; s > g; g++)
        o = e[g],
        o.onlyShadow || (o instanceof THREE.DirectionalLight && r++,
        o instanceof THREE.PointLight && f++,
        o instanceof THREE.SpotLight && m++,
        o instanceof THREE.HemisphereLight && d++);
      for (s = f,
             o = m,
             a = d,
             m = d = 0,
             f = e.length; f > m; m++)
        g = e[m],
        g.castShadow && (g instanceof THREE.SpotLight && d++,
        g instanceof THREE.DirectionalLight && !g.shadowCascade && d++);
      u = d,
        Ie && n && n.useVertexTexture ? c = 1024 : (e = V.getParameter(V.MAX_VERTEX_UNIFORM_VECTORS),
          e = Math.floor((e - 20) / 4),
        void 0 !== n && n instanceof THREE.SkinnedMesh && (e = Math.min(n.bones.length, e),
        e < n.bones.length && console.warn("WebGLRenderer: too many bones - " + n.bones.length + ", this GPU supports just " + e + " (try OpenGL instead of ANGLE)")),
          c = e);
      t: {
        var v, y, E, m = t.fragmentShader, f = t.vertexShader, d = t.uniforms, e = t.attributes, g = t.defines, i = {
          map: !!t.map,
          envMap: !!t.envMap,
          lightMap: !!t.lightMap,
          bumpMap: !!t.bumpMap,
          normalMap: !!t.normalMap,
          specularMap: !!t.specularMap,
          vertexColors: t.vertexColors,
          fog: i,
          useFog: t.fog,
          fogExp: i instanceof THREE.FogExp2,
          sizeAttenuation: t.sizeAttenuation,
          skinning: t.skinning,
          maxBones: c,
          useVertexTexture: Ie && n && n.useVertexTexture,
          morphTargets: t.morphTargets,
          morphNormals: t.morphNormals,
          maxMorphTargets: this.maxMorphTargets,
          maxMorphNormals: this.maxMorphNormals,
          maxDirLights: r,
          maxPointLights: s,
          maxSpotLights: o,
          maxHemiLights: a,
          maxShadows: u,
          shadowMapEnabled: this.shadowMapEnabled && n.receiveShadow,
          shadowMapType: this.shadowMapType,
          shadowMapDebug: this.shadowMapDebug,
          shadowMapCascade: this.shadowMapCascade,
          alphaTest: t.alphaTest,
          metal: t.metal,
          perPixel: t.perPixel,
          wrapAround: t.wrapAround,
          doubleSided: t.side === THREE.DoubleSide,
          flipSided: t.side === THREE.BackSide
        }, n = t.index0AttributeName;
        r = [],
          p ? r.push(p) : (r.push(m),
            r.push(f));
        for (y in g)
          r.push(y),
            r.push(g[y]);
        for (v in i)
          r.push(v),
            r.push(i[v]);
        for (p = r.join(),
               v = 0,
               y = Y.length; y > v; v++)
          if (r = Y[v],
            r.code === p) {
            r.usedTimes++,
              h = r.program;
            break t
          }
        v = "SHADOWMAP_TYPE_BASIC",
          i.shadowMapType === THREE.PCFShadowMap ? v = "SHADOWMAP_TYPE_PCF" : i.shadowMapType === THREE.PCFSoftShadowMap && (v = "SHADOWMAP_TYPE_PCF_SOFT"),
          y = [];
        for (E in g)
          r = g[E],
          !1 !== r && (r = "#define " + E + " " + r,
            y.push(r));
        r = y.join("\n"),
          E = V.createProgram(),
          y = ["precision " + D + " float;", "precision " + D + " int;", r, ke ? "#define VERTEX_TEXTURES" : "", X.gammaInput ? "#define GAMMA_INPUT" : "", X.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define MAX_DIR_LIGHTS " + i.maxDirLights, "#define MAX_POINT_LIGHTS " + i.maxPointLights, "#define MAX_SPOT_LIGHTS " + i.maxSpotLights, "#define MAX_HEMI_LIGHTS " + i.maxHemiLights, "#define MAX_SHADOWS " + i.maxShadows, "#define MAX_BONES " + i.maxBones, i.map ? "#define USE_MAP" : "", i.envMap ? "#define USE_ENVMAP" : "", i.lightMap ? "#define USE_LIGHTMAP" : "", i.bumpMap ? "#define USE_BUMPMAP" : "", i.normalMap ? "#define USE_NORMALMAP" : "", i.specularMap ? "#define USE_SPECULARMAP" : "", i.vertexColors ? "#define USE_COLOR" : "", i.skinning ? "#define USE_SKINNING" : "", i.useVertexTexture ? "#define BONE_TEXTURE" : "", i.morphTargets ? "#define USE_MORPHTARGETS" : "", i.morphNormals ? "#define USE_MORPHNORMALS" : "", i.perPixel ? "#define PHONG_PER_PIXEL" : "", i.wrapAround ? "#define WRAP_AROUND" : "", i.doubleSided ? "#define DOUBLE_SIDED" : "", i.flipSided ? "#define FLIP_SIDED" : "", i.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", i.shadowMapEnabled ? "#define " + v : "", i.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", i.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", i.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", "uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\nattribute vec3 morphTarget0;\nattribute vec3 morphTarget1;\nattribute vec3 morphTarget2;\nattribute vec3 morphTarget3;\n#ifdef USE_MORPHNORMALS\nattribute vec3 morphNormal0;\nattribute vec3 morphNormal1;\nattribute vec3 morphNormal2;\nattribute vec3 morphNormal3;\n#else\nattribute vec3 morphTarget4;\nattribute vec3 morphTarget5;\nattribute vec3 morphTarget6;\nattribute vec3 morphTarget7;\n#endif\n#endif\n#ifdef USE_SKINNING\nattribute vec4 skinIndex;\nattribute vec4 skinWeight;\n#endif\n"].join("\n"),
          v = ["precision " + D + " float;", "precision " + D + " int;", i.bumpMap || i.normalMap ? "#extension GL_OES_standard_derivatives : enable" : "", r, "#define MAX_DIR_LIGHTS " + i.maxDirLights, "#define MAX_POINT_LIGHTS " + i.maxPointLights, "#define MAX_SPOT_LIGHTS " + i.maxSpotLights, "#define MAX_HEMI_LIGHTS " + i.maxHemiLights, "#define MAX_SHADOWS " + i.maxShadows, i.alphaTest ? "#define ALPHATEST " + i.alphaTest : "", X.gammaInput ? "#define GAMMA_INPUT" : "", X.gammaOutput ? "#define GAMMA_OUTPUT" : "", i.useFog && i.fog ? "#define USE_FOG" : "", i.useFog && i.fogExp ? "#define FOG_EXP2" : "", i.map ? "#define USE_MAP" : "", i.envMap ? "#define USE_ENVMAP" : "", i.lightMap ? "#define USE_LIGHTMAP" : "", i.bumpMap ? "#define USE_BUMPMAP" : "", i.normalMap ? "#define USE_NORMALMAP" : "", i.specularMap ? "#define USE_SPECULARMAP" : "", i.vertexColors ? "#define USE_COLOR" : "", i.metal ? "#define METAL" : "", i.perPixel ? "#define PHONG_PER_PIXEL" : "", i.wrapAround ? "#define WRAP_AROUND" : "", i.doubleSided ? "#define DOUBLE_SIDED" : "", i.flipSided ? "#define FLIP_SIDED" : "", i.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", i.shadowMapEnabled ? "#define " + v : "", i.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", i.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", "uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n"),
          y = H("vertex", y + f),
          v = H("fragment", v + m),
          V.attachShader(E, y),
          V.attachShader(E, v),
        n && V.bindAttribLocation(E, 0, n),
          V.linkProgram(E),
        V.getProgramParameter(E, V.LINK_STATUS) || (console.error("Could not initialise shader\nVALIDATE_STATUS: " + V.getProgramParameter(E, V.VALIDATE_STATUS) + ", gl error [" + V.getError() + "]"),
          console.error("Program Info Log: " + V.getProgramInfoLog(E))),
          V.deleteShader(v),
          V.deleteShader(y),
          E.uniforms = {},
          E.attributes = {};
        var T;
        v = "viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences".split(" "),
          i.useVertexTexture ? (v.push("boneTexture"),
            v.push("boneTextureWidth"),
            v.push("boneTextureHeight")) : v.push("boneGlobalMatrices");
        for (T in d)
          v.push(T);
        for (T = v,
               v = 0,
               y = T.length; y > v; v++)
          d = T[v],
            E.uniforms[d] = V.getUniformLocation(E, d);
        for (v = "position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" "),
               T = 0; T < i.maxMorphTargets; T++)
          v.push("morphTarget" + T);
        for (T = 0; T < i.maxMorphNormals; T++)
          v.push("morphNormal" + T);
        for (h in e)
          v.push(h);
        for (h = v,
               T = 0,
               e = h.length; e > T; T++)
          v = h[T],
            E.attributes[v] = V.getAttribLocation(E, v);
        E.id = q++,
          Y.push({
            program: E,
            code: p,
            usedTimes: 1
          }),
          X.info.memory.programs = Y.length,
          h = E
      }
      if (t.program = h,
          T = t.program.attributes,
          t.morphTargets)
        for (t.numSupportedMorphTargets = 0,
               e = "morphTarget",
               h = 0; h < this.maxMorphTargets; h++)
          E = e + h,
          0 <= T[E] && t.numSupportedMorphTargets++;
      if (t.morphNormals)
        for (t.numSupportedMorphNormals = 0,
               e = "morphNormal",
               h = 0; h < this.maxMorphNormals; h++)
          E = e + h,
          0 <= T[E] && t.numSupportedMorphNormals++;
      t.uniformsList = [];
      for (l in t.uniforms)
        t.uniformsList.push([t.uniforms[l], l])
    }
    ,
    this.setFaceCulling = function(t, e) {
      t === THREE.CullFaceNone ? V.disable(V.CULL_FACE) : (V.frontFace(e === THREE.FrontFaceDirectionCW ? V.CW : V.CCW),
        V.cullFace(t === THREE.CullFaceBack ? V.BACK : t === THREE.CullFaceFront ? V.FRONT : V.FRONT_AND_BACK),
        V.enable(V.CULL_FACE))
    }
    ,
    this.setMaterialFaces = function(t) {
      var e = t.side === THREE.DoubleSide
        , t = t.side === THREE.BackSide;
      ie !== e && (e ? V.disable(V.CULL_FACE) : V.enable(V.CULL_FACE),
        ie = e),
      ne !== t && (V.frontFace(t ? V.CW : V.CCW),
        ne = t)
    }
    ,
    this.setDepthTest = function(t) {
      le !== t && (t ? V.enable(V.DEPTH_TEST) : V.disable(V.DEPTH_TEST),
        le = t)
    }
    ,
    this.setDepthWrite = function(t) {
      he !== t && (V.depthMask(t),
        he = t)
    }
    ,
    this.setBlending = function(t, e, i, n) {
      t !== re && (t === THREE.NoBlending ? V.disable(V.BLEND) : t === THREE.AdditiveBlending ? (V.enable(V.BLEND),
        V.blendEquation(V.FUNC_ADD),
        V.blendFunc(V.SRC_ALPHA, V.ONE)) : t === THREE.SubtractiveBlending ? (V.enable(V.BLEND),
        V.blendEquation(V.FUNC_ADD),
        V.blendFunc(V.ZERO, V.ONE_MINUS_SRC_COLOR)) : t === THREE.MultiplyBlending ? (V.enable(V.BLEND),
        V.blendEquation(V.FUNC_ADD),
        V.blendFunc(V.ZERO, V.SRC_COLOR)) : t === THREE.CustomBlending ? V.enable(V.BLEND) : (V.enable(V.BLEND),
        V.blendEquationSeparate(V.FUNC_ADD, V.FUNC_ADD),
        V.blendFuncSeparate(V.SRC_ALPHA, V.ONE_MINUS_SRC_ALPHA, V.ONE, V.ONE_MINUS_SRC_ALPHA)),
        re = t),
        t === THREE.CustomBlending ? (e !== se && (V.blendEquation(A(e)),
          se = e),
        (i !== oe || n !== ae) && (V.blendFunc(A(i), A(n)),
          oe = i,
          ae = n)) : ae = oe = se = null
    }
    ,
    this.setTexture = function(t, e) {
      if (t.needsUpdate) {
        t.__webglInit || (t.__webglInit = !0,
          t.addEventListener("dispose", Ge),
          t.__webglTexture = V.createTexture(),
          X.info.memory.textures++),
          V.activeTexture(V.TEXTURE0 + e),
          V.bindTexture(V.TEXTURE_2D, t.__webglTexture),
          V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL, t.flipY),
          V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.premultiplyAlpha),
          V.pixelStorei(V.UNPACK_ALIGNMENT, t.unpackAlignment);
        var i = t.image
          , n = 0 === (i.width & i.width - 1) && 0 === (i.height & i.height - 1)
          , r = A(t.format)
          , s = A(t.type);
        M(V.TEXTURE_2D, t, n);
        var o = t.mipmaps;
        if (t instanceof THREE.DataTexture)
          if (0 < o.length && n) {
            for (var a = 0, l = o.length; l > a; a++)
              i = o[a],
                V.texImage2D(V.TEXTURE_2D, a, r, i.width, i.height, 0, r, s, i.data);
            t.generateMipmaps = !1
          } else
            V.texImage2D(V.TEXTURE_2D, 0, r, i.width, i.height, 0, r, s, i.data);
        else if (t instanceof THREE.CompressedTexture)
          for (a = 0,
                 l = o.length; l > a; a++)
            i = o[a],
              t.format !== THREE.RGBAFormat ? V.compressedTexImage2D(V.TEXTURE_2D, a, r, i.width, i.height, 0, i.data) : V.texImage2D(V.TEXTURE_2D, a, r, i.width, i.height, 0, r, s, i.data);
        else if (0 < o.length && n) {
          for (a = 0,
                 l = o.length; l > a; a++)
            i = o[a],
              V.texImage2D(V.TEXTURE_2D, a, r, r, s, i);
          t.generateMipmaps = !1
        } else
          V.texImage2D(V.TEXTURE_2D, 0, r, r, s, t.image);
        t.generateMipmaps && n && V.generateMipmap(V.TEXTURE_2D),
          t.needsUpdate = !1,
        t.onUpdate && t.onUpdate()
      } else
        V.activeTexture(V.TEXTURE0 + e),
          V.bindTexture(V.TEXTURE_2D, t.__webglTexture)
    }
    ,
    this.setRenderTarget = function(t) {
      var e = t instanceof THREE.WebGLRenderTargetCube;
      if (t && !t.__webglFramebuffer) {
        void 0 === t.depthBuffer && (t.depthBuffer = !0),
        void 0 === t.stencilBuffer && (t.stencilBuffer = !0),
          t.addEventListener("dispose", We),
          t.__webglTexture = V.createTexture(),
          X.info.memory.textures++;
        var i = 0 === (t.width & t.width - 1) && 0 === (t.height & t.height - 1)
          , n = A(t.format)
          , r = A(t.type);
        if (e) {
          t.__webglFramebuffer = [],
            t.__webglRenderbuffer = [],
            V.bindTexture(V.TEXTURE_CUBE_MAP, t.__webglTexture),
            M(V.TEXTURE_CUBE_MAP, t, i);
          for (var s = 0; 6 > s; s++) {
            t.__webglFramebuffer[s] = V.createFramebuffer(),
              t.__webglRenderbuffer[s] = V.createRenderbuffer(),
              V.texImage2D(V.TEXTURE_CUBE_MAP_POSITIVE_X + s, 0, n, t.width, t.height, 0, n, r, null);
            var o = t
              , a = V.TEXTURE_CUBE_MAP_POSITIVE_X + s;
            V.bindFramebuffer(V.FRAMEBUFFER, t.__webglFramebuffer[s]),
              V.framebufferTexture2D(V.FRAMEBUFFER, V.COLOR_ATTACHMENT0, a, o.__webglTexture, 0),
              C(t.__webglRenderbuffer[s], t)
          }
          i && V.generateMipmap(V.TEXTURE_CUBE_MAP)
        } else
          t.__webglFramebuffer = V.createFramebuffer(),
            t.__webglRenderbuffer = t.shareDepthFrom ? t.shareDepthFrom.__webglRenderbuffer : V.createRenderbuffer(),
            V.bindTexture(V.TEXTURE_2D, t.__webglTexture),
            M(V.TEXTURE_2D, t, i),
            V.texImage2D(V.TEXTURE_2D, 0, n, t.width, t.height, 0, n, r, null),
            n = V.TEXTURE_2D,
            V.bindFramebuffer(V.FRAMEBUFFER, t.__webglFramebuffer),
            V.framebufferTexture2D(V.FRAMEBUFFER, V.COLOR_ATTACHMENT0, n, t.__webglTexture, 0),
            t.shareDepthFrom ? t.depthBuffer && !t.stencilBuffer ? V.framebufferRenderbuffer(V.FRAMEBUFFER, V.DEPTH_ATTACHMENT, V.RENDERBUFFER, t.__webglRenderbuffer) : t.depthBuffer && t.stencilBuffer && V.framebufferRenderbuffer(V.FRAMEBUFFER, V.DEPTH_STENCIL_ATTACHMENT, V.RENDERBUFFER, t.__webglRenderbuffer) : C(t.__webglRenderbuffer, t),
          i && V.generateMipmap(V.TEXTURE_2D);
        e ? V.bindTexture(V.TEXTURE_CUBE_MAP, null) : V.bindTexture(V.TEXTURE_2D, null),
          V.bindRenderbuffer(V.RENDERBUFFER, null),
          V.bindFramebuffer(V.FRAMEBUFFER, null)
      }
      t ? (e = e ? t.__webglFramebuffer[t.activeCubeFace] : t.__webglFramebuffer,
        i = t.width,
        t = t.height,
        r = n = 0) : (e = null,
        i = ge,
        t = ve,
        n = fe,
        r = me),
      e !== K && (V.bindFramebuffer(V.FRAMEBUFFER, e),
        V.viewport(n, r, i, t),
        K = e),
        ye = i,
        Ee = t
    }
    ,
    this.shadowMapPlugin = new THREE.ShadowMapPlugin,
    this.addPrePlugin(this.shadowMapPlugin),
    this.addPostPlugin(new THREE.SpritePlugin),
    this.addPostPlugin(new THREE.LensFlarePlugin)
}
,
THREE.WebGLRenderTarget = function(t, e, i) {
  this.width = t,
    this.height = e,
    i = i || {},
    this.wrapS = void 0 !== i.wrapS ? i.wrapS : THREE.ClampToEdgeWrapping,
    this.wrapT = void 0 !== i.wrapT ? i.wrapT : THREE.ClampToEdgeWrapping,
    this.magFilter = void 0 !== i.magFilter ? i.magFilter : THREE.LinearFilter,
    this.minFilter = void 0 !== i.minFilter ? i.minFilter : THREE.LinearMipMapLinearFilter,
    this.anisotropy = void 0 !== i.anisotropy ? i.anisotropy : 1,
    this.offset = new THREE.Vector2(0,0),
    this.repeat = new THREE.Vector2(1,1),
    this.format = void 0 !== i.format ? i.format : THREE.RGBAFormat,
    this.type = void 0 !== i.type ? i.type : THREE.UnsignedByteType,
    this.depthBuffer = void 0 !== i.depthBuffer ? i.depthBuffer : !0,
    this.stencilBuffer = void 0 !== i.stencilBuffer ? i.stencilBuffer : !0,
    this.generateMipmaps = !0,
    this.shareDepthFrom = null
}
,
THREE.WebGLRenderTarget.prototype = {
  constructor: THREE.WebGLRenderTarget,
  clone: function() {
    var t = new THREE.WebGLRenderTarget(this.width,this.height);
    return t.wrapS = this.wrapS,
      t.wrapT = this.wrapT,
      t.magFilter = this.magFilter,
      t.minFilter = this.minFilter,
      t.anisotropy = this.anisotropy,
      t.offset.copy(this.offset),
      t.repeat.copy(this.repeat),
      t.format = this.format,
      t.type = this.type,
      t.depthBuffer = this.depthBuffer,
      t.stencilBuffer = this.stencilBuffer,
      t.generateMipmaps = this.generateMipmaps,
      t.shareDepthFrom = this.shareDepthFrom,
      t
  },
  dispose: function() {
    this.dispatchEvent({
      type: "dispose"
    })
  }
},
THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),
THREE.WebGLRenderTargetCube = function(t, e, i) {
  THREE.WebGLRenderTarget.call(this, t, e, i),
    this.activeCubeFace = 0
}
,
THREE.WebGLRenderTargetCube.prototype = Object.create(THREE.WebGLRenderTarget.prototype),
THREE.RenderableVertex = function() {
  this.position = new THREE.Vector3,
    this.positionWorld = new THREE.Vector3,
    this.positionScreen = new THREE.Vector4,
    this.visible = !0
}
,
THREE.RenderableVertex.prototype.copy = function(t) {
  this.positionWorld.copy(t.positionWorld),
    this.positionScreen.copy(t.positionScreen)
}
,
THREE.RenderableFace3 = function() {
  this.id = 0,
    this.v1 = new THREE.RenderableVertex,
    this.v2 = new THREE.RenderableVertex,
    this.v3 = new THREE.RenderableVertex,
    this.centroidModel = new THREE.Vector3,
    this.normalModel = new THREE.Vector3,
    this.normalModelView = new THREE.Vector3,
    this.vertexNormalsLength = 0,
    this.vertexNormalsModel = [new THREE.Vector3, new THREE.Vector3, new THREE.Vector3],
    this.vertexNormalsModelView = [new THREE.Vector3, new THREE.Vector3, new THREE.Vector3],
    this.material = this.color = null,
    this.uvs = [[]],
    this.z = 0
}
,
THREE.RenderableObject = function() {
  this.id = 0,
    this.object = null,
    this.z = 0
}
,
THREE.RenderableSprite = function() {
  this.id = 0,
    this.object = null,
    this.rotation = this.z = this.y = this.x = 0,
    this.scale = new THREE.Vector2,
    this.material = null
}
,
THREE.RenderableLine = function() {
  this.id = 0,
    this.v1 = new THREE.RenderableVertex,
    this.v2 = new THREE.RenderableVertex,
    this.vertexColors = [new THREE.Color, new THREE.Color],
    this.material = null,
    this.z = 0
}
,
THREE.GeometryUtils = {
  merge: function(t, e, i) {
    var n, r, s = t.vertices.length, o = e instanceof THREE.Mesh ? e.geometry : e, a = t.vertices, l = o.vertices, h = t.faces, c = o.faces, t = t.faceVertexUvs[0], o = o.faceVertexUvs[0];
    void 0 === i && (i = 0),
    e instanceof THREE.Mesh && (e.matrixAutoUpdate && e.updateMatrix(),
      n = e.matrix,
      r = (new THREE.Matrix3).getNormalMatrix(n));
    for (var e = 0, u = l.length; u > e; e++) {
      var p = l[e].clone();
      n && p.applyMatrix4(n),
        a.push(p)
    }
    for (e = 0,
           u = c.length; u > e; e++) {
      var d, f, p = c[e], m = p.vertexNormals, g = p.vertexColors;
      for (d = new THREE.Face3(p.a + s,p.b + s,p.c + s),
             d.normal.copy(p.normal),
           r && d.normal.applyMatrix3(r).normalize(),
             a = 0,
             l = m.length; l > a; a++)
        f = m[a].clone(),
        r && f.applyMatrix3(r).normalize(),
          d.vertexNormals.push(f);
      for (d.color.copy(p.color),
             a = 0,
             l = g.length; l > a; a++)
        f = g[a],
          d.vertexColors.push(f.clone());
      d.materialIndex = p.materialIndex + i,
        d.centroid.copy(p.centroid),
      n && d.centroid.applyMatrix4(n),
        h.push(d)
    }
    for (e = 0,
           u = o.length; u > e; e++) {
      for (i = o[e],
             n = [],
             a = 0,
             l = i.length; l > a; a++)
        n.push(new THREE.Vector2(i[a].x,i[a].y));
      t.push(n)
    }
  },
  randomPointInTriangle: function() {
    var t = new THREE.Vector3;
    return function(e, i, n) {
      var r = new THREE.Vector3
        , s = THREE.Math.random16()
        , o = THREE.Math.random16();
      s + o > 1 && (s = 1 - s,
        o = 1 - o);
      var a = 1 - s - o;
      return r.copy(e),
        r.multiplyScalar(s),
        t.copy(i),
        t.multiplyScalar(o),
        r.add(t),
        t.copy(n),
        t.multiplyScalar(a),
        r.add(t),
        r
    }
  }(),
  randomPointInFace: function(t, e) {
    return THREE.GeometryUtils.randomPointInTriangle(e.vertices[t.a], e.vertices[t.b], e.vertices[t.c])
  },
  randomPointsInGeometry: function(t, e) {
    function i(t) {
      function e(i, n) {
        if (i > n)
          return i;
        var r = i + Math.floor((n - i) / 2);
        return p[r] > t ? e(i, r - 1) : p[r] < t ? e(r + 1, n) : r
      }
      return e(0, p.length - 1)
    }
    var n, r, s, o, a, l = t.faces, h = t.vertices, c = l.length, u = 0, p = [];
    for (r = 0; c > r; r++)
      n = l[r],
        s = h[n.a],
        o = h[n.b],
        a = h[n.c],
        n._area = THREE.GeometryUtils.triangleArea(s, o, a),
        u += n._area,
        p[r] = u;
    for (n = [],
           r = 0; e > r; r++)
      h = THREE.Math.random16() * u,
        h = i(h),
        n[r] = THREE.GeometryUtils.randomPointInFace(l[h], t, !0);
    return n
  },
  triangleArea: function() {
    var t = new THREE.Vector3
      , e = new THREE.Vector3;
    return function(i, n, r) {
      return t.subVectors(n, i),
        e.subVectors(r, i),
        t.cross(e),
      .5 * t.length()
    }
  }(),
  center: function(t) {
    t.computeBoundingBox();
    var e = t.boundingBox
      , i = new THREE.Vector3;
    return i.addVectors(e.min, e.max),
      i.multiplyScalar(-.5),
      t.applyMatrix((new THREE.Matrix4).makeTranslation(i.x, i.y, i.z)),
      t.computeBoundingBox(),
      i
  },
  triangulateQuads: function(t) {
    var e, i, n, r, s = [], o = [];
    for (e = 0,
           i = t.faceVertexUvs.length; i > e; e++)
      o[e] = [];
    for (e = 0,
           i = t.faces.length; i > e; e++)
      for (s.push(t.faces[e]),
             n = 0,
             r = t.faceVertexUvs.length; r > n; n++)
        o[n].push(t.faceVertexUvs[n][e]);
    t.faces = s,
      t.faceVertexUvs = o,
      t.computeCentroids(),
      t.computeFaceNormals(),
      t.computeVertexNormals(),
    t.hasTangents && t.computeTangents()
  }
},
THREE.ImageUtils = {
  crossOrigin: void 0,
  loadTexture: function(t, e, i) {
    var n = new THREE.ImageLoader;
    n.crossOrigin = this.crossOrigin;
    var r = new THREE.Texture(void 0,e)
      , e = n.load(t, function() {
      r.needsUpdate = !0,
      i && i(r)
    });
    return r.image = e,
      r.sourceFile = t,
      r
  },
  loadCompressedTexture: function(t, e, i, n) {
    var r = new THREE.CompressedTexture;
    r.mapping = e;
    var s = new XMLHttpRequest;
    return s.onload = function() {
      var t = THREE.ImageUtils.parseDDS(s.response, !0);
      r.format = t.format,
        r.mipmaps = t.mipmaps,
        r.image.width = t.width,
        r.image.height = t.height,
        r.generateMipmaps = !1,
        r.needsUpdate = !0,
      i && i(r)
    }
      ,
      s.onerror = n,
      s.open("GET", t, !0),
      s.responseType = "arraybuffer",
      s.send(null),
      r
  },
  loadTextureCube: function(t, e, i, n) {
    var r = [];
    r.loadCount = 0;
    var s = new THREE.Texture;
    s.image = r,
    void 0 !== e && (s.mapping = e),
      s.flipY = !1;
    for (var e = 0, o = t.length; o > e; ++e) {
      var a = new Image;
      r[e] = a,
        a.onload = function() {
          r.loadCount += 1,
          6 === r.loadCount && (s.needsUpdate = !0,
          i && i(s))
        }
        ,
        a.onerror = n,
        a.crossOrigin = this.crossOrigin,
        a.src = t[e]
    }
    return s
  },
  loadCompressedTextureCube: function(t, e, i, n) {
    var r = [];
    r.loadCount = 0;
    var s = new THREE.CompressedTexture;
    if (s.image = r,
      void 0 !== e && (s.mapping = e),
        s.flipY = !1,
        s.generateMipmaps = !1,
        e = function(t, e) {
          return function() {
            var n = THREE.ImageUtils.parseDDS(t.response, !0);
            e.format = n.format,
              e.mipmaps = n.mipmaps,
              e.width = n.width,
              e.height = n.height,
              r.loadCount += 1,
            6 === r.loadCount && (s.format = n.format,
              s.needsUpdate = !0,
            i && i(s))
          }
        }
        ,
      t instanceof Array)
      for (var o = 0, a = t.length; a > o; ++o) {
        var l = {};
        r[o] = l;
        var h = new XMLHttpRequest;
        h.onload = e(h, l),
          h.onerror = n,
          l = t[o],
          h.open("GET", l, !0),
          h.responseType = "arraybuffer",
          h.send(null)
      }
    else
      h = new XMLHttpRequest,
        h.onload = function() {
          var t = THREE.ImageUtils.parseDDS(h.response, !0);
          if (t.isCubemap) {
            for (var e = t.mipmaps.length / t.mipmapCount, n = 0; e > n; n++) {
              r[n] = {
                mipmaps: []
              };
              for (var o = 0; o < t.mipmapCount; o++)
                r[n].mipmaps.push(t.mipmaps[n * t.mipmapCount + o]),
                  r[n].format = t.format,
                  r[n].width = t.width,
                  r[n].height = t.height
            }
            s.format = t.format,
              s.needsUpdate = !0,
            i && i(s)
          }
        }
        ,
        h.onerror = n,
        h.open("GET", t, !0),
        h.responseType = "arraybuffer",
        h.send(null);
    return s
  },
  loadDDSTexture: function(t, e, i, n) {
    var r = [];
    r.loadCount = 0;
    var s = new THREE.CompressedTexture;
    s.image = r,
    void 0 !== e && (s.mapping = e),
      s.flipY = !1,
      s.generateMipmaps = !1;
    var o = new XMLHttpRequest;
    return o.onload = function() {
      var t = THREE.ImageUtils.parseDDS(o.response, !0);
      if (t.isCubemap)
        for (var e = t.mipmaps.length / t.mipmapCount, n = 0; e > n; n++) {
          r[n] = {
            mipmaps: []
          };
          for (var a = 0; a < t.mipmapCount; a++)
            r[n].mipmaps.push(t.mipmaps[n * t.mipmapCount + a]),
              r[n].format = t.format,
              r[n].width = t.width,
              r[n].height = t.height
        }
      else
        s.image.width = t.width,
          s.image.height = t.height,
          s.mipmaps = t.mipmaps;
      s.format = t.format,
        s.needsUpdate = !0,
      i && i(s)
    }
      ,
      o.onerror = n,
      o.open("GET", t, !0),
      o.responseType = "arraybuffer",
      o.send(null),
      s
  },
  parseDDS: function(t, e) {
    function i(t) {
      return t.charCodeAt(0) + (t.charCodeAt(1) << 8) + (t.charCodeAt(2) << 16) + (t.charCodeAt(3) << 24)
    }
    var n = {
      mipmaps: [],
      width: 0,
      height: 0,
      format: null,
      mipmapCount: 1
    }
      , r = i("DXT1")
      , s = i("DXT3")
      , o = i("DXT5")
      , a = new Int32Array(t,0,31);
    if (542327876 !== a[0])
      return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),
        n;
    if (4 & !a[20])
      return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),
        n;
    var l = a[21]
      , h = !1;
    switch (l) {
      case r:
        r = 8,
          n.format = THREE.RGB_S3TC_DXT1_Format;
        break;
      case s:
        r = 16,
          n.format = THREE.RGBA_S3TC_DXT3_Format;
        break;
      case o:
        r = 16,
          n.format = THREE.RGBA_S3TC_DXT5_Format;
        break;
      default:
        if (!(32 == a[22] && 16711680 & a[23] && 65280 & a[24] && 255 & a[25] && 4278190080 & a[26]))
          return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ", String.fromCharCode(255 & l, l >> 8 & 255, l >> 16 & 255, l >> 24 & 255)),
            n;
        h = !0,
          r = 64,
          n.format = THREE.RGBAFormat
    }
    n.mipmapCount = 1,
    131072 & a[2] && !1 !== e && (n.mipmapCount = Math.max(1, a[7])),
      n.isCubemap = 512 & a[28] ? !0 : !1,
      n.width = a[4],
      n.height = a[3];
    for (var a = a[1] + 4, s = n.width, o = n.height, l = n.isCubemap ? 6 : 1, c = 0; l > c; c++) {
      for (var u = 0; u < n.mipmapCount; u++) {
        if (h) {
          var p;
          p = s;
          for (var d = o, f = 4 * p * d, m = new Uint8Array(t,a,f), f = new Uint8Array(f), g = 0, v = 0, y = 0; d > y; y++)
            for (var E = 0; p > E; E++) {
              var T = m[v];
              v++;
              var x = m[v];
              v++;
              var b = m[v];
              v++;
              var w = m[v];
              v++,
                f[g] = b,
                g++,
                f[g] = x,
                g++,
                f[g] = T,
                g++,
                f[g] = w,
                g++
            }
          p = f,
            d = p.length
        } else
          d = Math.max(4, s) / 4 * Math.max(4, o) / 4 * r,
            p = new Uint8Array(t,a,d);
        n.mipmaps.push({
          data: p,
          width: s,
          height: o
        }),
          a += d,
          s = Math.max(.5 * s, 1),
          o = Math.max(.5 * o, 1)
      }
      s = n.width,
        o = n.height
    }
    return n
  },
  getNormalMap: function(t, e) {
    var i = function(t) {
      var e = Math.sqrt(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]);
      return [t[0] / e, t[1] / e, t[2] / e]
    }
      , e = 1 | e
      , n = t.width
      , r = t.height
      , s = document.createElement("canvas");
    s.width = n,
      s.height = r;
    var o = s.getContext("2d");
    o.drawImage(t, 0, 0);
    for (var a = o.getImageData(0, 0, n, r).data, l = o.createImageData(n, r), h = l.data, c = 0; n > c; c++)
      for (var u = 0; r > u; u++) {
        var p = 0 > u - 1 ? 0 : u - 1
          , d = u + 1 > r - 1 ? r - 1 : u + 1
          , f = 0 > c - 1 ? 0 : c - 1
          , m = c + 1 > n - 1 ? n - 1 : c + 1
          , g = []
          , v = [0, 0, a[4 * (u * n + c)] / 255 * e];
        for (g.push([-1, 0, a[4 * (u * n + f)] / 255 * e]),
               g.push([-1, -1, a[4 * (p * n + f)] / 255 * e]),
               g.push([0, -1, a[4 * (p * n + c)] / 255 * e]),
               g.push([1, -1, a[4 * (p * n + m)] / 255 * e]),
               g.push([1, 0, a[4 * (u * n + m)] / 255 * e]),
               g.push([1, 1, a[4 * (d * n + m)] / 255 * e]),
               g.push([0, 1, a[4 * (d * n + c)] / 255 * e]),
               g.push([-1, 1, a[4 * (d * n + f)] / 255 * e]),
               p = [],
               f = g.length,
               d = 0; f > d; d++) {
          var m = g[d]
            , y = g[(d + 1) % f]
            , m = [m[0] - v[0], m[1] - v[1], m[2] - v[2]]
            , y = [y[0] - v[0], y[1] - v[1], y[2] - v[2]];
          p.push(i([m[1] * y[2] - m[2] * y[1], m[2] * y[0] - m[0] * y[2], m[0] * y[1] - m[1] * y[0]]))
        }
        for (g = [0, 0, 0],
               d = 0; d < p.length; d++)
          g[0] += p[d][0],
            g[1] += p[d][1],
            g[2] += p[d][2];
        g[0] /= p.length,
          g[1] /= p.length,
          g[2] /= p.length,
          v = 4 * (u * n + c),
          h[v] = 255 * ((g[0] + 1) / 2) | 0,
          h[v + 1] = 255 * ((g[1] + 1) / 2) | 0,
          h[v + 2] = 255 * g[2] | 0,
          h[v + 3] = 255
      }
    return o.putImageData(l, 0, 0),
      s
  },
  generateDataTexture: function(t, e, i) {
    for (var n = t * e, r = new Uint8Array(3 * n), s = Math.floor(255 * i.r), o = Math.floor(255 * i.g), i = Math.floor(255 * i.b), a = 0; n > a; a++)
      r[3 * a] = s,
        r[3 * a + 1] = o,
        r[3 * a + 2] = i;
    return t = new THREE.DataTexture(r,t,e,THREE.RGBFormat),
      t.needsUpdate = !0,
      t
  }
},
THREE.SceneUtils = {
  createMultiMaterialObject: function(t, e) {
    for (var i = new THREE.Object3D, n = 0, r = e.length; r > n; n++)
      i.add(new THREE.Mesh(t,e[n]));
    return i
  },
  detach: function(t, e, i) {
    t.applyMatrix(e.matrixWorld),
      e.remove(t),
      i.add(t)
  },
  attach: function(t, e, i) {
    var n = new THREE.Matrix4;
    n.getInverse(i.matrixWorld),
      t.applyMatrix(n),
      e.remove(t),
      i.add(t)
  }
},
THREE.FontUtils = {
  faces: {},
  face: "helvetiker",
  weight: "normal",
  style: "normal",
  size: 150,
  divisions: 10,
  getFace: function() {
    return this.faces[this.face][this.weight][this.style]
  },
  loadFace: function(t) {
    var e = t.familyName.toLowerCase();
    return this.faces[e] = this.faces[e] || {},
      this.faces[e][t.cssFontWeight] = this.faces[e][t.cssFontWeight] || {},
      this.faces[e][t.cssFontWeight][t.cssFontStyle] = t,
      this.faces[e][t.cssFontWeight][t.cssFontStyle] = t
  },
  drawText: function(t) {
    for (var e = this.getFace(), i = this.size / e.resolution, n = 0, r = String(t).split(""), s = r.length, o = [], t = 0; s > t; t++) {
      var a = new THREE.Path
        , a = this.extractGlyphPoints(r[t], e, i, n, a)
        , n = n + a.offset;
      o.push(a.path)
    }
    return {
      paths: o,
      offset: n / 2
    }
  },
  extractGlyphPoints: function(t, e, i, n, r) {
    var s, o, a, l, h, c, u, p, d, f, m, g = [], v = e.glyphs[t] || e.glyphs["?"];
    if (v) {
      if (v.o)
        for (e = v._cachedOutline || (v._cachedOutline = v.o.split(" ")),
               l = e.length,
               t = 0; l > t; )
          switch (a = e[t++]) {
            case "m":
              a = e[t++] * i + n,
                h = e[t++] * i,
                r.moveTo(a, h);
              break;
            case "l":
              a = e[t++] * i + n,
                h = e[t++] * i,
                r.lineTo(a, h);
              break;
            case "q":
              if (a = e[t++] * i + n,
                  h = e[t++] * i,
                  p = e[t++] * i + n,
                  d = e[t++] * i,
                  r.quadraticCurveTo(p, d, a, h),
                  s = g[g.length - 1])
                for (c = s.x,
                       u = s.y,
                       s = 1,
                       o = this.divisions; o >= s; s++) {
                  var y = s / o;
                  THREE.Shape.Utils.b2(y, c, p, a),
                    THREE.Shape.Utils.b2(y, u, d, h)
                }
              break;
            case "b":
              if (a = e[t++] * i + n,
                  h = e[t++] * i,
                  p = e[t++] * i + n,
                  d = e[t++] * -i,
                  f = e[t++] * i + n,
                  m = e[t++] * -i,
                  r.bezierCurveTo(a, h, p, d, f, m),
                  s = g[g.length - 1])
                for (c = s.x,
                       u = s.y,
                       s = 1,
                       o = this.divisions; o >= s; s++)
                  y = s / o,
                    THREE.Shape.Utils.b3(y, c, p, f, a),
                    THREE.Shape.Utils.b3(y, u, d, m, h)
          }
      return {
        offset: v.ha * i,
        path: r
      }
    }
  }
},
THREE.FontUtils.generateShapes = function(t, e) {
  var e = e || {}
    , i = void 0 !== e.curveSegments ? e.curveSegments : 4
    , n = void 0 !== e.font ? e.font : "helvetiker"
    , r = void 0 !== e.weight ? e.weight : "normal"
    , s = void 0 !== e.style ? e.style : "normal";
  for (THREE.FontUtils.size = void 0 !== e.size ? e.size : 100,
         THREE.FontUtils.divisions = i,
         THREE.FontUtils.face = n,
         THREE.FontUtils.weight = r,
         THREE.FontUtils.style = s,
         i = THREE.FontUtils.drawText(t).paths,
         n = [],
         r = 0,
         s = i.length; s > r; r++)
    Array.prototype.push.apply(n, i[r].toShapes());
  return n
}
,
function(t) {
  var e = function(t) {
    for (var e = t.length, i = 0, n = e - 1, r = 0; e > r; n = r++)
      i += t[n].x * t[r].y - t[r].x * t[n].y;
    return .5 * i
  };
  return t.Triangulate = function(t, i) {
    var n = t.length;
    if (3 > n)
      return null;
    var r, s, o, a = [], l = [], h = [];
    if (0 < e(t))
      for (s = 0; n > s; s++)
        l[s] = s;
    else
      for (s = 0; n > s; s++)
        l[s] = n - 1 - s;
    var c = 2 * n;
    for (s = n - 1; n > 2; ) {
      if (0 >= c--) {
        console.log("Warning, unable to triangulate polygon!");
        break
      }
      r = s,
      r >= n && (r = 0),
        s = r + 1,
      s >= n && (s = 0),
        o = s + 1,
      o >= n && (o = 0);
      var u;
      t: {
        var p = u = void 0
          , d = void 0
          , f = void 0
          , m = void 0
          , g = void 0
          , v = void 0
          , y = void 0
          , E = void 0
          , p = t[l[r]].x
          , d = t[l[r]].y
          , f = t[l[s]].x
          , m = t[l[s]].y
          , g = t[l[o]].x
          , v = t[l[o]].y;
        if (1e-10 > (f - p) * (v - d) - (m - d) * (g - p))
          u = !1;
        else {
          var T = void 0
            , x = void 0
            , b = void 0
            , w = void 0
            , _ = void 0
            , R = void 0
            , S = void 0
            , H = void 0
            , M = void 0
            , C = void 0
            , M = H = S = E = y = void 0
            , T = g - f
            , x = v - m
            , b = p - g
            , w = d - v
            , _ = f - p
            , R = m - d;
          for (u = 0; n > u; u++)
            if (u !== r && u !== s && u !== o && (y = t[l[u]].x,
                E = t[l[u]].y,
                S = y - p,
                H = E - d,
                M = y - f,
                C = E - m,
                y -= g,
                E -= v,
                M = T * C - x * M,
                S = _ * H - R * S,
                H = b * E - w * y,
              M >= -1e-10 && H >= -1e-10 && S >= -1e-10)) {
              u = !1;
              break t
            }
          u = !0
        }
      }
      if (u) {
        for (a.push([t[l[r]], t[l[s]], t[l[o]]]),
               h.push([l[r], l[s], l[o]]),
               r = s,
               o = s + 1; n > o; r++,
               o++)
          l[r] = l[o];
        n--,
          c = 2 * n
      }
    }
    return i ? h : a
  }
    ,
    t.Triangulate.area = e,
    t
}(THREE.FontUtils),
self._typeface_js = {
  faces: THREE.FontUtils.faces,
  loadFace: THREE.FontUtils.loadFace
},
THREE.typeface_js = self._typeface_js,
THREE.Curve = function() {}
,
THREE.Curve.prototype.getPoint = function() {
  return console.log("Warning, getPoint() not implemented!"),
    null
}
,
THREE.Curve.prototype.getPointAt = function(t) {
  return t = this.getUtoTmapping(t),
    this.getPoint(t)
}
,
THREE.Curve.prototype.getPoints = function(t) {
  t || (t = 5);
  var e, i = [];
  for (e = 0; t >= e; e++)
    i.push(this.getPoint(e / t));
  return i
}
,
THREE.Curve.prototype.getSpacedPoints = function(t) {
  t || (t = 5);
  var e, i = [];
  for (e = 0; t >= e; e++)
    i.push(this.getPointAt(e / t));
  return i
}
,
THREE.Curve.prototype.getLength = function() {
  var t = this.getLengths();
  return t[t.length - 1]
}
,
THREE.Curve.prototype.getLengths = function(t) {
  if (t || (t = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200),
    this.cacheArcLengths && this.cacheArcLengths.length == t + 1 && !this.needsUpdate)
    return this.cacheArcLengths;
  this.needsUpdate = !1;
  var e, i, n = [], r = this.getPoint(0), s = 0;
  for (n.push(0),
         i = 1; t >= i; i++)
    e = this.getPoint(i / t),
      s += e.distanceTo(r),
      n.push(s),
      r = e;
  return this.cacheArcLengths = n
}
,
THREE.Curve.prototype.updateArcLengths = function() {
  this.needsUpdate = !0,
    this.getLengths()
}
,
THREE.Curve.prototype.getUtoTmapping = function(t, e) {
  var i, n = this.getLengths(), r = 0, s = n.length;
  i = e ? e : t * n[s - 1];
  for (var o, a = 0, l = s - 1; l >= a; )
    if (r = Math.floor(a + (l - a) / 2),
        o = n[r] - i,
      0 > o)
      a = r + 1;
    else {
      if (!(o > 0)) {
        l = r;
        break
      }
      l = r - 1
    }
  return r = l,
    n[r] == i ? r / (s - 1) : (a = n[r],
      n = (r + (i - a) / (n[r + 1] - a)) / (s - 1))
}
,
THREE.Curve.prototype.getTangent = function(t) {
  var e = t - 1e-4
    , t = t + 1e-4;
  return 0 > e && (e = 0),
  t > 1 && (t = 1),
    e = this.getPoint(e),
    this.getPoint(t).clone().sub(e).normalize()
}
,
THREE.Curve.prototype.getTangentAt = function(t) {
  return t = this.getUtoTmapping(t),
    this.getTangent(t)
}
,
THREE.Curve.Utils = {
  tangentQuadraticBezier: function(t, e, i, n) {
    return 2 * (1 - t) * (i - e) + 2 * t * (n - i)
  },
  tangentCubicBezier: function(t, e, i, n, r) {
    return -3 * e * (1 - t) * (1 - t) + 3 * i * (1 - t) * (1 - t) - 6 * t * i * (1 - t) + 6 * t * n * (1 - t) - 3 * t * t * n + 3 * t * t * r
  },
  tangentSpline: function(t) {
    return 6 * t * t - 6 * t + (3 * t * t - 4 * t + 1) + (-6 * t * t + 6 * t) + (3 * t * t - 2 * t)
  },
  interpolate: function(t, e, i, n, r) {
    var t = .5 * (i - t)
      , n = .5 * (n - e)
      , s = r * r;
    return (2 * e - 2 * i + t + n) * r * s + (-3 * e + 3 * i - 2 * t - n) * s + t * r + e
  }
},
THREE.Curve.create = function(t, e) {
  return t.prototype = Object.create(THREE.Curve.prototype),
    t.prototype.getPoint = e,
    t
}
,
THREE.CurvePath = function() {
  this.curves = [],
    this.bends = [],
    this.autoClose = !1
}
,
THREE.CurvePath.prototype = Object.create(THREE.Curve.prototype),
THREE.CurvePath.prototype.add = function(t) {
  this.curves.push(t)
}
,
THREE.CurvePath.prototype.checkConnection = function() {}
,
THREE.CurvePath.prototype.closePath = function() {
  var t = this.curves[0].getPoint(0)
    , e = this.curves[this.curves.length - 1].getPoint(1);
  t.equals(e) || this.curves.push(new THREE.LineCurve(e,t))
}
,
THREE.CurvePath.prototype.getPoint = function(t) {
  for (var e = t * this.getLength(), i = this.getCurveLengths(), t = 0; t < i.length; ) {
    if (i[t] >= e)
      return e = i[t] - e,
        t = this.curves[t],
        e = 1 - e / t.getLength(),
        t.getPointAt(e);
    t++
  }
  return null
}
,
THREE.CurvePath.prototype.getLength = function() {
  var t = this.getCurveLengths();
  return t[t.length - 1]
}
,
THREE.CurvePath.prototype.getCurveLengths = function() {
  if (this.cacheLengths && this.cacheLengths.length == this.curves.length)
    return this.cacheLengths;
  var t, e = [], i = 0, n = this.curves.length;
  for (t = 0; n > t; t++)
    i += this.curves[t].getLength(),
      e.push(i);
  return this.cacheLengths = e
}
,
THREE.CurvePath.prototype.getBoundingBox = function() {
  var t, e, i, n, r, s, o = this.getPoints();
  t = e = Number.NEGATIVE_INFINITY,
    n = r = Number.POSITIVE_INFINITY;
  var a, l, h, c, u = o[0]instanceof THREE.Vector3;
  for (c = u ? new THREE.Vector3 : new THREE.Vector2,
         l = 0,
         h = o.length; h > l; l++)
    a = o[l],
      a.x > t ? t = a.x : a.x < n && (n = a.x),
      a.y > e ? e = a.y : a.y < r && (r = a.y),
    u && (a.z > i ? i = a.z : a.z < s && (s = a.z)),
      c.add(a);
  return o = {
    minX: n,
    minY: r,
    maxX: t,
    maxY: e,
    centroid: c.divideScalar(h)
  },
  u && (o.maxZ = i,
    o.minZ = s),
    o
}
,
THREE.CurvePath.prototype.createPointsGeometry = function(t) {
  return t = this.getPoints(t, !0),
    this.createGeometry(t)
}
,
THREE.CurvePath.prototype.createSpacedPointsGeometry = function(t) {
  return t = this.getSpacedPoints(t, !0),
    this.createGeometry(t)
}
,
THREE.CurvePath.prototype.createGeometry = function(t) {
  for (var e = new THREE.Geometry, i = 0; i < t.length; i++)
    e.vertices.push(new THREE.Vector3(t[i].x,t[i].y,t[i].z || 0));
  return e
}
,
THREE.CurvePath.prototype.addWrapPath = function(t) {
  this.bends.push(t)
}
,
THREE.CurvePath.prototype.getTransformedPoints = function(t, e) {
  var i, n, r = this.getPoints(t);
  for (e || (e = this.bends),
         i = 0,
         n = e.length; n > i; i++)
    r = this.getWrapPoints(r, e[i]);
  return r
}
,
THREE.CurvePath.prototype.getTransformedSpacedPoints = function(t, e) {
  var i, n, r = this.getSpacedPoints(t);
  for (e || (e = this.bends),
         i = 0,
         n = e.length; n > i; i++)
    r = this.getWrapPoints(r, e[i]);
  return r
}
,
THREE.CurvePath.prototype.getWrapPoints = function(t, e) {
  var i, n, r, s, o, a, l = this.getBoundingBox();
  for (i = 0,
         n = t.length; n > i; i++)
    r = t[i],
      s = r.x,
      o = r.y,
      a = s / l.maxX,
      a = e.getUtoTmapping(a, s),
      s = e.getPoint(a),
      a = e.getTangent(a),
      a.set(-a.y, a.x).multiplyScalar(o),
      r.x = s.x + a.x,
      r.y = s.y + a.y;
  return t
}
,
THREE.Gyroscope = function() {
  THREE.Object3D.call(this)
}
,
THREE.Gyroscope.prototype = Object.create(THREE.Object3D.prototype),
THREE.Gyroscope.prototype.updateMatrixWorld = function(t) {
  this.matrixAutoUpdate && this.updateMatrix(),
  (this.matrixWorldNeedsUpdate || t) && (this.parent ? (this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix),
    this.matrixWorld.decompose(this.translationWorld, this.quaternionWorld, this.scaleWorld),
    this.matrix.decompose(this.translationObject, this.quaternionObject, this.scaleObject),
    this.matrixWorld.compose(this.translationWorld, this.quaternionObject, this.scaleWorld)) : this.matrixWorld.copy(this.matrix),
    this.matrixWorldNeedsUpdate = !1,
    t = !0);
  for (var e = 0, i = this.children.length; i > e; e++)
    this.children[e].updateMatrixWorld(t)
}
,
THREE.Gyroscope.prototype.translationWorld = new THREE.Vector3,
THREE.Gyroscope.prototype.translationObject = new THREE.Vector3,
THREE.Gyroscope.prototype.quaternionWorld = new THREE.Quaternion,
THREE.Gyroscope.prototype.quaternionObject = new THREE.Quaternion,
THREE.Gyroscope.prototype.scaleWorld = new THREE.Vector3,
THREE.Gyroscope.prototype.scaleObject = new THREE.Vector3,
THREE.Path = function(t) {
  THREE.CurvePath.call(this),
    this.actions = [],
  t && this.fromPoints(t)
}
,
THREE.Path.prototype = Object.create(THREE.CurvePath.prototype),
THREE.PathActions = {
  MOVE_TO: "moveTo",
  LINE_TO: "lineTo",
  QUADRATIC_CURVE_TO: "quadraticCurveTo",
  BEZIER_CURVE_TO: "bezierCurveTo",
  CSPLINE_THRU: "splineThru",
  ARC: "arc",
  ELLIPSE: "ellipse"
},
THREE.Path.prototype.fromPoints = function(t) {
  this.moveTo(t[0].x, t[0].y);
  for (var e = 1, i = t.length; i > e; e++)
    this.lineTo(t[e].x, t[e].y)
}
,
THREE.Path.prototype.moveTo = function() {
  var t = Array.prototype.slice.call(arguments);
  this.actions.push({
    action: THREE.PathActions.MOVE_TO,
    args: t
  })
}
,
THREE.Path.prototype.lineTo = function(t, e) {
  var i = Array.prototype.slice.call(arguments)
    , n = this.actions[this.actions.length - 1].args
    , n = new THREE.LineCurve(new THREE.Vector2(n[n.length - 2],n[n.length - 1]),new THREE.Vector2(t,e));
  this.curves.push(n),
    this.actions.push({
      action: THREE.PathActions.LINE_TO,
      args: i
    })
}
,
THREE.Path.prototype.quadraticCurveTo = function(t, e, i, n) {
  var r = Array.prototype.slice.call(arguments)
    , s = this.actions[this.actions.length - 1].args
    , s = new THREE.QuadraticBezierCurve(new THREE.Vector2(s[s.length - 2],s[s.length - 1]),new THREE.Vector2(t,e),new THREE.Vector2(i,n));
  this.curves.push(s),
    this.actions.push({
      action: THREE.PathActions.QUADRATIC_CURVE_TO,
      args: r
    })
}
,
THREE.Path.prototype.bezierCurveTo = function(t, e, i, n, r, s) {
  var o = Array.prototype.slice.call(arguments)
    , a = this.actions[this.actions.length - 1].args
    , a = new THREE.CubicBezierCurve(new THREE.Vector2(a[a.length - 2],a[a.length - 1]),new THREE.Vector2(t,e),new THREE.Vector2(i,n),new THREE.Vector2(r,s));
  this.curves.push(a),
    this.actions.push({
      action: THREE.PathActions.BEZIER_CURVE_TO,
      args: o
    })
}
,
THREE.Path.prototype.splineThru = function(t) {
  var e = Array.prototype.slice.call(arguments)
    , i = this.actions[this.actions.length - 1].args
    , i = [new THREE.Vector2(i[i.length - 2],i[i.length - 1])];
  Array.prototype.push.apply(i, t),
    i = new THREE.SplineCurve(i),
    this.curves.push(i),
    this.actions.push({
      action: THREE.PathActions.CSPLINE_THRU,
      args: e
    })
}
,
THREE.Path.prototype.arc = function(t, e, i, n, r, s) {
  var o = this.actions[this.actions.length - 1].args;
  this.absarc(t + o[o.length - 2], e + o[o.length - 1], i, n, r, s)
}
,
THREE.Path.prototype.absarc = function(t, e, i, n, r, s) {
  this.absellipse(t, e, i, i, n, r, s)
}
,
THREE.Path.prototype.ellipse = function(t, e, i, n, r, s, o) {
  var a = this.actions[this.actions.length - 1].args;
  this.absellipse(t + a[a.length - 2], e + a[a.length - 1], i, n, r, s, o)
}
,
THREE.Path.prototype.absellipse = function(t, e, i, n, r, s, o) {
  var a = Array.prototype.slice.call(arguments)
    , l = new THREE.EllipseCurve(t,e,i,n,r,s,o);
  this.curves.push(l),
    l = l.getPoint(1),
    a.push(l.x),
    a.push(l.y),
    this.actions.push({
      action: THREE.PathActions.ELLIPSE,
      args: a
    })
}
,
THREE.Path.prototype.getSpacedPoints = function(t) {
  t || (t = 40);
  for (var e = [], i = 0; t > i; i++)
    e.push(this.getPoint(i / t));
  return e
}
,
THREE.Path.prototype.getPoints = function(t, e) {
  if (this.useSpacedPoints)
    return console.log("tata"),
      this.getSpacedPoints(t, e);
  var i, n, r, s, o, a, l, h, c, u, p, d, f, t = t || 12, m = [];
  for (i = 0,
         n = this.actions.length; n > i; i++)
    switch (r = this.actions[i],
      s = r.action,
      r = r.args,
      s) {
      case THREE.PathActions.MOVE_TO:
        m.push(new THREE.Vector2(r[0],r[1]));
        break;
      case THREE.PathActions.LINE_TO:
        m.push(new THREE.Vector2(r[0],r[1]));
        break;
      case THREE.PathActions.QUADRATIC_CURVE_TO:
        for (o = r[2],
               a = r[3],
               c = r[0],
               u = r[1],
               0 < m.length ? (s = m[m.length - 1],
                 p = s.x,
                 d = s.y) : (s = this.actions[i - 1].args,
                 p = s[s.length - 2],
                 d = s[s.length - 1]),
               r = 1; t >= r; r++)
          f = r / t,
            s = THREE.Shape.Utils.b2(f, p, c, o),
            f = THREE.Shape.Utils.b2(f, d, u, a),
            m.push(new THREE.Vector2(s,f));
        break;
      case THREE.PathActions.BEZIER_CURVE_TO:
        for (o = r[4],
               a = r[5],
               c = r[0],
               u = r[1],
               l = r[2],
               h = r[3],
               0 < m.length ? (s = m[m.length - 1],
                 p = s.x,
                 d = s.y) : (s = this.actions[i - 1].args,
                 p = s[s.length - 2],
                 d = s[s.length - 1]),
               r = 1; t >= r; r++)
          f = r / t,
            s = THREE.Shape.Utils.b3(f, p, c, l, o),
            f = THREE.Shape.Utils.b3(f, d, u, h, a),
            m.push(new THREE.Vector2(s,f));
        break;
      case THREE.PathActions.CSPLINE_THRU:
        for (s = this.actions[i - 1].args,
               f = [new THREE.Vector2(s[s.length - 2],s[s.length - 1])],
               s = t * r[0].length,
               f = f.concat(r[0]),
               f = new THREE.SplineCurve(f),
               r = 1; s >= r; r++)
          m.push(f.getPointAt(r / s));
        break;
      case THREE.PathActions.ARC:
        for (o = r[0],
               a = r[1],
               u = r[2],
               l = r[3],
               s = r[4],
               c = !!r[5],
               p = s - l,
               d = 2 * t,
               r = 1; d >= r; r++)
          f = r / d,
          c || (f = 1 - f),
            f = l + f * p,
            s = o + u * Math.cos(f),
            f = a + u * Math.sin(f),
            m.push(new THREE.Vector2(s,f));
        break;
      case THREE.PathActions.ELLIPSE:
        for (o = r[0],
               a = r[1],
               u = r[2],
               h = r[3],
               l = r[4],
               s = r[5],
               c = !!r[6],
               p = s - l,
               d = 2 * t,
               r = 1; d >= r; r++)
          f = r / d,
          c || (f = 1 - f),
            f = l + f * p,
            s = o + u * Math.cos(f),
            f = a + h * Math.sin(f),
            m.push(new THREE.Vector2(s,f))
    }
  return i = m[m.length - 1],
  1e-10 > Math.abs(i.x - m[0].x) && 1e-10 > Math.abs(i.y - m[0].y) && m.splice(m.length - 1, 1),
  e && m.push(m[0]),
    m
}
,
THREE.Path.prototype.toShapes = function(t) {
  var e, i, n, r, s = [], o = new THREE.Path;
  for (e = 0,
         i = this.actions.length; i > e; e++)
    n = this.actions[e],
      r = n.args,
      n = n.action,
    n == THREE.PathActions.MOVE_TO && 0 != o.actions.length && (s.push(o),
      o = new THREE.Path),
      o[n].apply(o, r);
  if (0 != o.actions.length && s.push(o),
    0 == s.length)
    return [];
  var a;
  if (r = [],
    1 == s.length)
    return n = s[0],
      a = new THREE.Shape,
      a.actions = n.actions,
      a.curves = n.curves,
      r.push(a),
      r;
  if (e = !THREE.Shape.Utils.isClockWise(s[0].getPoints()),
      t ? !e : e)
    for (a = new THREE.Shape,
           e = 0,
           i = s.length; i > e; e++)
      n = s[e],
        o = THREE.Shape.Utils.isClockWise(n.getPoints()),
        (o = t ? !o : o) ? (a.actions = n.actions,
          a.curves = n.curves,
          r.push(a),
          a = new THREE.Shape) : a.holes.push(n);
  else {
    for (a = void 0,
           e = 0,
           i = s.length; i > e; e++)
      n = s[e],
        o = THREE.Shape.Utils.isClockWise(n.getPoints()),
        (o = t ? !o : o) ? (a && r.push(a),
          a = new THREE.Shape,
          a.actions = n.actions,
          a.curves = n.curves) : a.holes.push(n);
    r.push(a)
  }
  return r
}
,
THREE.Shape = function() {
  THREE.Path.apply(this, arguments),
    this.holes = []
}
,
THREE.Shape.prototype = Object.create(THREE.Path.prototype),
THREE.Shape.prototype.extrude = function(t) {
  return new THREE.ExtrudeGeometry(this,t)
}
,
THREE.Shape.prototype.makeGeometry = function(t) {
  return new THREE.ShapeGeometry(this,t)
}
,
THREE.Shape.prototype.getPointsHoles = function(t) {
  var e, i = this.holes.length, n = [];
  for (e = 0; i > e; e++)
    n[e] = this.holes[e].getTransformedPoints(t, this.bends);
  return n
}
,
THREE.Shape.prototype.getSpacedPointsHoles = function(t) {
  var e, i = this.holes.length, n = [];
  for (e = 0; i > e; e++)
    n[e] = this.holes[e].getTransformedSpacedPoints(t, this.bends);
  return n
}
,
THREE.Shape.prototype.extractAllPoints = function(t) {
  return {
    shape: this.getTransformedPoints(t),
    holes: this.getPointsHoles(t)
  }
}
,
THREE.Shape.prototype.extractPoints = function(t) {
  return this.useSpacedPoints ? this.extractAllSpacedPoints(t) : this.extractAllPoints(t)
}
,
THREE.Shape.prototype.extractAllSpacedPoints = function(t) {
  return {
    shape: this.getTransformedSpacedPoints(t),
    holes: this.getSpacedPointsHoles(t)
  }
}
,
THREE.Shape.Utils = {
  removeHoles: function(t, e) {
    var i, n, r, s, o, a, l, h, c, u, p = t.concat(), d = p.concat(), f = [];
    for (o = 0; o < e.length; o++) {
      for (a = e[o],
             Array.prototype.push.apply(d, a),
             n = Number.POSITIVE_INFINITY,
             i = 0; i < a.length; i++)
        for (c = a[i],
               u = [],
               h = 0; h < p.length; h++)
          l = p[h],
            l = c.distanceToSquared(l),
            u.push(l),
          n > l && (n = l,
            r = i,
            s = h);
      i = s - 1 >= 0 ? s - 1 : p.length - 1,
        n = r - 1 >= 0 ? r - 1 : a.length - 1;
      var m = [a[r], p[s], p[i]];
      h = THREE.FontUtils.Triangulate.area(m);
      var g = [a[r], a[n], p[s]];
      c = THREE.FontUtils.Triangulate.area(g),
        u = s,
        l = r,
        s += 1,
        r += -1,
      0 > s && (s += p.length),
        s %= p.length,
      0 > r && (r += a.length),
        r %= a.length,
        i = s - 1 >= 0 ? s - 1 : p.length - 1,
        n = r - 1 >= 0 ? r - 1 : a.length - 1,
        m = [a[r], p[s], p[i]],
        m = THREE.FontUtils.Triangulate.area(m),
        g = [a[r], a[n], p[s]],
        g = THREE.FontUtils.Triangulate.area(g),
      h + c > m + g && (s = u,
        r = l,
      0 > s && (s += p.length),
        s %= p.length,
      0 > r && (r += a.length),
        r %= a.length,
        i = s - 1 >= 0 ? s - 1 : p.length - 1,
        n = r - 1 >= 0 ? r - 1 : a.length - 1),
        h = p.slice(0, s),
        c = p.slice(s),
        u = a.slice(r),
        l = a.slice(0, r),
        n = [a[r], a[n], p[s]],
        f.push([a[r], p[s], p[i]]),
        f.push(n),
        p = h.concat(u).concat(l).concat(c)
    }
    return {
      shape: p,
      isolatedPts: f,
      allpoints: d
    }
  },
  triangulateShape: function(t, e) {
    var i, n, r, s, o = THREE.Shape.Utils.removeHoles(t, e), a = o.allpoints, l = o.isolatedPts, o = THREE.FontUtils.Triangulate(o.shape, !1), h = {};
    for (i = 0,
           n = a.length; n > i; i++)
      s = a[i].x + ":" + a[i].y,
      void 0 !== h[s] && console.log("Duplicate point", s),
        h[s] = i;
    for (i = 0,
           n = o.length; n > i; i++)
      for (r = o[i],
             a = 0; 3 > a; a++)
        s = r[a].x + ":" + r[a].y,
          s = h[s],
        void 0 !== s && (r[a] = s);
    for (i = 0,
           n = l.length; n > i; i++)
      for (r = l[i],
             a = 0; 3 > a; a++)
        s = r[a].x + ":" + r[a].y,
          s = h[s],
        void 0 !== s && (r[a] = s);
    return o.concat(l)
  },
  isClockWise: function(t) {
    return 0 > THREE.FontUtils.Triangulate.area(t)
  },
  b2p0: function(t, e) {
    var i = 1 - t;
    return i * i * e
  },
  b2p1: function(t, e) {
    return 2 * (1 - t) * t * e
  },
  b2p2: function(t, e) {
    return t * t * e
  },
  b2: function(t, e, i, n) {
    return this.b2p0(t, e) + this.b2p1(t, i) + this.b2p2(t, n)
  },
  b3p0: function(t, e) {
    var i = 1 - t;
    return i * i * i * e
  },
  b3p1: function(t, e) {
    var i = 1 - t;
    return 3 * i * i * t * e
  },
  b3p2: function(t, e) {
    return 3 * (1 - t) * t * t * e
  },
  b3p3: function(t, e) {
    return t * t * t * e
  },
  b3: function(t, e, i, n, r) {
    return this.b3p0(t, e) + this.b3p1(t, i) + this.b3p2(t, n) + this.b3p3(t, r)
  }
},
THREE.LineCurve = function(t, e) {
  this.v1 = t,
    this.v2 = e
}
,
THREE.LineCurve.prototype = Object.create(THREE.Curve.prototype),
THREE.LineCurve.prototype.getPoint = function(t) {
  var e = this.v2.clone().sub(this.v1);
  return e.multiplyScalar(t).add(this.v1),
    e
}
,
THREE.LineCurve.prototype.getPointAt = function(t) {
  return this.getPoint(t)
}
,
THREE.LineCurve.prototype.getTangent = function() {
  return this.v2.clone().sub(this.v1).normalize()
}
,
THREE.QuadraticBezierCurve = function(t, e, i) {
  this.v0 = t,
    this.v1 = e,
    this.v2 = i
}
,
THREE.QuadraticBezierCurve.prototype = Object.create(THREE.Curve.prototype),
THREE.QuadraticBezierCurve.prototype.getPoint = function(t) {
  var e;
  return e = THREE.Shape.Utils.b2(t, this.v0.x, this.v1.x, this.v2.x),
    t = THREE.Shape.Utils.b2(t, this.v0.y, this.v1.y, this.v2.y),
    new THREE.Vector2(e,t)
}
,
THREE.QuadraticBezierCurve.prototype.getTangent = function(t) {
  var e;
  return e = THREE.Curve.Utils.tangentQuadraticBezier(t, this.v0.x, this.v1.x, this.v2.x),
    t = THREE.Curve.Utils.tangentQuadraticBezier(t, this.v0.y, this.v1.y, this.v2.y),
    e = new THREE.Vector2(e,t),
    e.normalize(),
    e
}
,
THREE.CubicBezierCurve = function(t, e, i, n) {
  this.v0 = t,
    this.v1 = e,
    this.v2 = i,
    this.v3 = n
}
,
THREE.CubicBezierCurve.prototype = Object.create(THREE.Curve.prototype),
THREE.CubicBezierCurve.prototype.getPoint = function(t) {
  var e;
  return e = THREE.Shape.Utils.b3(t, this.v0.x, this.v1.x, this.v2.x, this.v3.x),
    t = THREE.Shape.Utils.b3(t, this.v0.y, this.v1.y, this.v2.y, this.v3.y),
    new THREE.Vector2(e,t)
}
,
THREE.CubicBezierCurve.prototype.getTangent = function(t) {
  var e;
  return e = THREE.Curve.Utils.tangentCubicBezier(t, this.v0.x, this.v1.x, this.v2.x, this.v3.x),
    t = THREE.Curve.Utils.tangentCubicBezier(t, this.v0.y, this.v1.y, this.v2.y, this.v3.y),
    e = new THREE.Vector2(e,t),
    e.normalize(),
    e
}
,
THREE.SplineCurve = function(t) {
  this.points = void 0 == t ? [] : t
}
,
THREE.SplineCurve.prototype = Object.create(THREE.Curve.prototype),
THREE.SplineCurve.prototype.getPoint = function(t) {
  var e, i = new THREE.Vector2, n = [], r = this.points;
  return e = (r.length - 1) * t,
    t = Math.floor(e),
    e -= t,
    n[0] = 0 == t ? t : t - 1,
    n[1] = t,
    n[2] = t > r.length - 2 ? r.length - 1 : t + 1,
    n[3] = t > r.length - 3 ? r.length - 1 : t + 2,
    i.x = THREE.Curve.Utils.interpolate(r[n[0]].x, r[n[1]].x, r[n[2]].x, r[n[3]].x, e),
    i.y = THREE.Curve.Utils.interpolate(r[n[0]].y, r[n[1]].y, r[n[2]].y, r[n[3]].y, e),
    i
}
,
THREE.EllipseCurve = function(t, e, i, n, r, s, o) {
  this.aX = t,
    this.aY = e,
    this.xRadius = i,
    this.yRadius = n,
    this.aStartAngle = r,
    this.aEndAngle = s,
    this.aClockwise = o
}
,
THREE.EllipseCurve.prototype = Object.create(THREE.Curve.prototype),
THREE.EllipseCurve.prototype.getPoint = function(t) {
  var e;
  return e = this.aEndAngle - this.aStartAngle,
  0 > e && (e += 2 * Math.PI),
  e > 2 * Math.PI && (e -= 2 * Math.PI),
    e = !0 === this.aClockwise ? this.aEndAngle + (1 - t) * (2 * Math.PI - e) : this.aStartAngle + t * e,
    t = this.aX + this.xRadius * Math.cos(e),
    e = this.aY + this.yRadius * Math.sin(e),
    new THREE.Vector2(t,e)
}
,
THREE.ArcCurve = function(t, e, i, n, r, s) {
  THREE.EllipseCurve.call(this, t, e, i, i, n, r, s)
}
,
THREE.ArcCurve.prototype = Object.create(THREE.EllipseCurve.prototype),
THREE.LineCurve3 = THREE.Curve.create(function(t, e) {
  this.v1 = t,
    this.v2 = e
}, function(t) {
  var e = new THREE.Vector3;
  return e.subVectors(this.v2, this.v1),
    e.multiplyScalar(t),
    e.add(this.v1),
    e
}),
THREE.QuadraticBezierCurve3 = THREE.Curve.create(function(t, e, i) {
  this.v0 = t,
    this.v1 = e,
    this.v2 = i
}, function(t) {
  var e, i;
  return e = THREE.Shape.Utils.b2(t, this.v0.x, this.v1.x, this.v2.x),
    i = THREE.Shape.Utils.b2(t, this.v0.y, this.v1.y, this.v2.y),
    t = THREE.Shape.Utils.b2(t, this.v0.z, this.v1.z, this.v2.z),
    new THREE.Vector3(e,i,t)
}),
THREE.CubicBezierCurve3 = THREE.Curve.create(function(t, e, i, n) {
  this.v0 = t,
    this.v1 = e,
    this.v2 = i,
    this.v3 = n
}, function(t) {
  var e, i;
  return e = THREE.Shape.Utils.b3(t, this.v0.x, this.v1.x, this.v2.x, this.v3.x),
    i = THREE.Shape.Utils.b3(t, this.v0.y, this.v1.y, this.v2.y, this.v3.y),
    t = THREE.Shape.Utils.b3(t, this.v0.z, this.v1.z, this.v2.z, this.v3.z),
    new THREE.Vector3(e,i,t)
}),
THREE.SplineCurve3 = THREE.Curve.create(function(t) {
  this.points = void 0 == t ? [] : t
}, function(t) {
  var e, i = new THREE.Vector3, n = [], r = this.points, t = (r.length - 1) * t;
  e = Math.floor(t),
    t -= e,
    n[0] = 0 == e ? e : e - 1,
    n[1] = e,
    n[2] = e > r.length - 2 ? r.length - 1 : e + 1,
    n[3] = e > r.length - 3 ? r.length - 1 : e + 2,
    e = r[n[0]];
  var s = r[n[1]]
    , o = r[n[2]]
    , n = r[n[3]];
  return i.x = THREE.Curve.Utils.interpolate(e.x, s.x, o.x, n.x, t),
    i.y = THREE.Curve.Utils.interpolate(e.y, s.y, o.y, n.y, t),
    i.z = THREE.Curve.Utils.interpolate(e.z, s.z, o.z, n.z, t),
    i
}),
THREE.ClosedSplineCurve3 = THREE.Curve.create(function(t) {
  this.points = void 0 == t ? [] : t
}, function(t) {
  var e, i = new THREE.Vector3, n = [], r = this.points;
  return e = (r.length - 0) * t,
    t = Math.floor(e),
    e -= t,
    t += t > 0 ? 0 : (Math.floor(Math.abs(t) / r.length) + 1) * r.length,
    n[0] = (t - 1) % r.length,
    n[1] = t % r.length,
    n[2] = (t + 1) % r.length,
    n[3] = (t + 2) % r.length,
    i.x = THREE.Curve.Utils.interpolate(r[n[0]].x, r[n[1]].x, r[n[2]].x, r[n[3]].x, e),
    i.y = THREE.Curve.Utils.interpolate(r[n[0]].y, r[n[1]].y, r[n[2]].y, r[n[3]].y, e),
    i.z = THREE.Curve.Utils.interpolate(r[n[0]].z, r[n[1]].z, r[n[2]].z, r[n[3]].z, e),
    i
}),
THREE.AnimationHandler = function() {
  var t = []
    , e = {}
    , i = {
    update: function(e) {
      for (var i = 0; i < t.length; i++)
        t[i].update(e)
    },
    addToUpdate: function(e) {
      -1 === t.indexOf(e) && t.push(e)
    },
    removeFromUpdate: function(e) {
      e = t.indexOf(e),
      -1 !== e && t.splice(e, 1)
    },
    add: function(t) {
      if (void 0 !== e[t.name] && console.log("THREE.AnimationHandler.add: Warning! " + t.name + " already exists in library. Overwriting."),
          e[t.name] = t,
        !0 !== t.initialized) {
        for (var i = 0; i < t.hierarchy.length; i++) {
          for (var n = 0; n < t.hierarchy[i].keys.length; n++)
            if (0 > t.hierarchy[i].keys[n].time && (t.hierarchy[i].keys[n].time = 0),
              void 0 !== t.hierarchy[i].keys[n].rot && !(t.hierarchy[i].keys[n].rot instanceof THREE.Quaternion)) {
              var r = t.hierarchy[i].keys[n].rot;
              t.hierarchy[i].keys[n].rot = new THREE.Quaternion(r[0],r[1],r[2],r[3])
            }
          if (t.hierarchy[i].keys.length && void 0 !== t.hierarchy[i].keys[0].morphTargets) {
            for (r = {},
                   n = 0; n < t.hierarchy[i].keys.length; n++)
              for (var s = 0; s < t.hierarchy[i].keys[n].morphTargets.length; s++) {
                var o = t.hierarchy[i].keys[n].morphTargets[s];
                r[o] = -1
              }
            for (t.hierarchy[i].usedMorphTargets = r,
                   n = 0; n < t.hierarchy[i].keys.length; n++) {
              var a = {};
              for (o in r) {
                for (s = 0; s < t.hierarchy[i].keys[n].morphTargets.length; s++)
                  if (t.hierarchy[i].keys[n].morphTargets[s] === o) {
                    a[o] = t.hierarchy[i].keys[n].morphTargetsInfluences[s];
                    break
                  }
                s === t.hierarchy[i].keys[n].morphTargets.length && (a[o] = 0)
              }
              t.hierarchy[i].keys[n].morphTargetsInfluences = a
            }
          }
          for (n = 1; n < t.hierarchy[i].keys.length; n++)
            t.hierarchy[i].keys[n].time === t.hierarchy[i].keys[n - 1].time && (t.hierarchy[i].keys.splice(n, 1),
              n--);
          for (n = 0; n < t.hierarchy[i].keys.length; n++)
            t.hierarchy[i].keys[n].index = n
        }
        for (n = parseInt(t.length * t.fps, 10),
               t.JIT = {},
               t.JIT.hierarchy = [],
               i = 0; i < t.hierarchy.length; i++)
          t.JIT.hierarchy.push(Array(n));
        t.initialized = !0
      }
    },
    get: function(t) {
      return "string" == typeof t ? e[t] ? e[t] : (console.log("THREE.AnimationHandler.get: Couldn't find animation " + t),
        null) : void 0
    },
    parse: function(t) {
      var e = [];
      if (t instanceof THREE.SkinnedMesh)
        for (var i = 0; i < t.bones.length; i++)
          e.push(t.bones[i]);
      else
        n(t, e);
      return e
    }
  }
    , n = function(t, e) {
    e.push(t);
    for (var i = 0; i < t.children.length; i++)
      n(t.children[i], e)
  };
  return i.LINEAR = 0,
    i.CATMULLROM = 1,
    i.CATMULLROM_FORWARD = 2,
    i
}(),
THREE.Animation = function(t, e, i) {
  this.root = t,
    this.data = THREE.AnimationHandler.get(e),
    this.hierarchy = THREE.AnimationHandler.parse(t),
    this.currentTime = 0,
    this.timeScale = 1,
    this.isPlaying = !1,
    this.loop = this.isPaused = !0,
    this.interpolationType = void 0 !== i ? i : THREE.AnimationHandler.LINEAR,
    this.points = [],
    this.target = new THREE.Vector3
}
,
THREE.Animation.prototype.play = function(t, e) {
  if (!1 === this.isPlaying) {
    this.isPlaying = !0,
      this.loop = void 0 !== t ? t : !0,
      this.currentTime = void 0 !== e ? e : 0;
    var i, n, r = this.hierarchy.length;
    for (i = 0; r > i; i++) {
      n = this.hierarchy[i],
        n.matrixAutoUpdate = !0,
      void 0 === n.animationCache && (n.animationCache = {},
        n.animationCache.prevKey = {
          pos: 0,
          rot: 0,
          scl: 0
        },
        n.animationCache.nextKey = {
          pos: 0,
          rot: 0,
          scl: 0
        },
        n.animationCache.originalMatrix = n instanceof THREE.Bone ? n.skinMatrix : n.matrix);
      var s = n.animationCache.prevKey;
      n = n.animationCache.nextKey,
        s.pos = this.data.hierarchy[i].keys[0],
        s.rot = this.data.hierarchy[i].keys[0],
        s.scl = this.data.hierarchy[i].keys[0],
        n.pos = this.getNextKeyWith("pos", i, 1),
        n.rot = this.getNextKeyWith("rot", i, 1),
        n.scl = this.getNextKeyWith("scl", i, 1)
    }
    this.update(0)
  }
  this.isPaused = !1,
    THREE.AnimationHandler.addToUpdate(this)
}
,
THREE.Animation.prototype.pause = function() {
  !0 === this.isPaused ? THREE.AnimationHandler.addToUpdate(this) : THREE.AnimationHandler.removeFromUpdate(this),
    this.isPaused = !this.isPaused
}
,
THREE.Animation.prototype.stop = function() {
  this.isPaused = this.isPlaying = !1,
    THREE.AnimationHandler.removeFromUpdate(this)
}
,
THREE.Animation.prototype.update = function(t) {
  if (!1 !== this.isPlaying) {
    var e, i, n, r, s, o, a, l, h, c = ["pos", "rot", "scl"];
    for (h = this.currentTime += t * this.timeScale; this.currentTime > this.data.length; )
      this.currentTime -= this.data.length;
    l = this.currentTime %= this.data.length,
      parseInt(Math.min(l * this.data.fps, this.data.length * this.data.fps), 10);
    for (var u = 0, p = this.hierarchy.length; p > u; u++) {
      t = this.hierarchy[u],
        a = t.animationCache;
      for (var d = 0; 3 > d; d++) {
        if (e = c[d],
            s = a.prevKey[e],
            o = a.nextKey[e],
          o.time <= h) {
          if (h >= l) {
            if (!this.loop)
              return void this.stop();
            for (s = this.data.hierarchy[u].keys[0],
                   o = this.getNextKeyWith(e, u, 1); null !== o && o.time < l && o.index > s.index; )
              s = o,
                o = this.getNextKeyWith(e, u, o.index + 1)
          } else
            do
              s = o,
                o = this.getNextKeyWith(e, u, o.index + 1);
            while (null !== o && o.time < l && o.index > s.index);a.prevKey[e] = s,
            a.nextKey[e] = o
        }
        t.matrixAutoUpdate = !0,
          t.matrixWorldNeedsUpdate = !0,
          i = (l - s.time) / (o.time - s.time),
          n = s[e],
          r = o[e],
        (0 > i || i > 1) && (console.log("THREE.Animation.update: Warning! Scale out of bounds:" + i + " on bone " + u),
          i = 0 > i ? 0 : 1),
          "pos" === e ? (e = t.position,
            this.interpolationType === THREE.AnimationHandler.LINEAR ? (e.x = n[0] + (r[0] - n[0]) * i,
              e.y = n[1] + (r[1] - n[1]) * i,
              e.z = n[2] + (r[2] - n[2]) * i) : (this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD) && (this.points[0] = this.getPrevKeyWith("pos", u, s.index - 1).pos,
              this.points[1] = n,
              this.points[2] = r,
              this.points[3] = this.getNextKeyWith("pos", u, o.index + 1).pos,
              i = .33 * i + .33,
              n = this.interpolateCatmullRom(this.points, i),
              e.x = n[0],
              e.y = n[1],
              e.z = n[2],
            this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD && (i = this.interpolateCatmullRom(this.points, 1.01 * i),
              this.target.set(i[0], i[1], i[2]),
              this.target.sub(e),
              this.target.y = 0,
              this.target.normalize(),
              i = Math.atan2(this.target.x, this.target.z),
              t.rotation.set(0, i, 0)))) : "rot" === e ? THREE.Quaternion.slerp(n, r, t.quaternion, i) : "scl" === e && (e = t.scale,
            e.x = n[0] + (r[0] - n[0]) * i,
            e.y = n[1] + (r[1] - n[1]) * i,
            e.z = n[2] + (r[2] - n[2]) * i)
      }
    }
  }
}
,
THREE.Animation.prototype.interpolateCatmullRom = function(t, e) {
  var i, n, r, s, o, a, l = [], h = [];
  return i = (t.length - 1) * e,
    n = Math.floor(i),
    i -= n,
    l[0] = 0 === n ? n : n - 1,
    l[1] = n,
    l[2] = n > t.length - 2 ? n : n + 1,
    l[3] = n > t.length - 3 ? n : n + 2,
    n = t[l[0]],
    s = t[l[1]],
    o = t[l[2]],
    a = t[l[3]],
    l = i * i,
    r = i * l,
    h[0] = this.interpolate(n[0], s[0], o[0], a[0], i, l, r),
    h[1] = this.interpolate(n[1], s[1], o[1], a[1], i, l, r),
    h[2] = this.interpolate(n[2], s[2], o[2], a[2], i, l, r),
    h
}
,
THREE.Animation.prototype.interpolate = function(t, e, i, n, r, s, o) {
  return t = .5 * (i - t),
    n = .5 * (n - e),
  (2 * (e - i) + t + n) * o + (-3 * (e - i) - 2 * t - n) * s + t * r + e
}
,
THREE.Animation.prototype.getNextKeyWith = function(t, e, i) {
  for (var n = this.data.hierarchy[e].keys, i = this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ? i < n.length - 1 ? i : n.length - 1 : i % n.length; i < n.length; i++)
    if (void 0 !== n[i][t])
      return n[i];
  return this.data.hierarchy[e].keys[0]
}
,
THREE.Animation.prototype.getPrevKeyWith = function(t, e, i) {
  for (var n = this.data.hierarchy[e].keys, i = this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ? i > 0 ? i : 0 : i >= 0 ? i : i + n.length; i >= 0; i--)
    if (void 0 !== n[i][t])
      return n[i];
  return this.data.hierarchy[e].keys[n.length - 1]
}
,
THREE.KeyFrameAnimation = function(t, e, i) {
  for (this.root = t,
         this.data = THREE.AnimationHandler.get(e),
         this.hierarchy = THREE.AnimationHandler.parse(t),
         this.currentTime = 0,
         this.timeScale = .001,
         this.isPlaying = !1,
         this.loop = this.isPaused = !0,
         this.JITCompile = void 0 !== i ? i : !0,
         t = 0,
         e = this.hierarchy.length; e > t; t++) {
    var i = this.data.hierarchy[t].sids
      , n = this.hierarchy[t];
    if (this.data.hierarchy[t].keys.length && i) {
      for (var r = 0; r < i.length; r++) {
        var s = i[r]
          , o = this.getNextKeyWith(s, t, 0);
        o && o.apply(s)
      }
      n.matrixAutoUpdate = !1,
        this.data.hierarchy[t].node.updateMatrix(),
        n.matrixWorldNeedsUpdate = !0
    }
  }
}
,
THREE.KeyFrameAnimation.prototype.play = function(t, e) {
  if (!this.isPlaying) {
    this.isPlaying = !0,
      this.loop = void 0 !== t ? t : !0,
      this.currentTime = void 0 !== e ? e : 0,
      this.startTimeMs = e,
      this.startTime = 1e7,
      this.endTime = -this.startTime;
    var i, n, r, s = this.hierarchy.length;
    for (i = 0; s > i; i++)
      n = this.hierarchy[i],
        r = this.data.hierarchy[i],
      void 0 === r.animationCache && (r.animationCache = {},
        r.animationCache.prevKey = null,
        r.animationCache.nextKey = null,
        r.animationCache.originalMatrix = n instanceof THREE.Bone ? n.skinMatrix : n.matrix),
        n = this.data.hierarchy[i].keys,
      n.length && (r.animationCache.prevKey = n[0],
        r.animationCache.nextKey = n[1],
        this.startTime = Math.min(n[0].time, this.startTime),
        this.endTime = Math.max(n[n.length - 1].time, this.endTime));
    this.update(0)
  }
  this.isPaused = !1,
    THREE.AnimationHandler.addToUpdate(this)
}
,
THREE.KeyFrameAnimation.prototype.pause = function() {
  this.isPaused ? THREE.AnimationHandler.addToUpdate(this) : THREE.AnimationHandler.removeFromUpdate(this),
    this.isPaused = !this.isPaused
}
,
THREE.KeyFrameAnimation.prototype.stop = function() {
  this.isPaused = this.isPlaying = !1,
    THREE.AnimationHandler.removeFromUpdate(this);
  for (var t = 0; t < this.data.hierarchy.length; t++) {
    var e = this.hierarchy[t]
      , i = this.data.hierarchy[t];
    if (void 0 !== i.animationCache) {
      var n = i.animationCache.originalMatrix;
      e instanceof THREE.Bone ? (n.copy(e.skinMatrix),
        e.skinMatrix = n) : (n.copy(e.matrix),
        e.matrix = n),
        delete i.animationCache
    }
  }
}
,
THREE.KeyFrameAnimation.prototype.update = function(t) {
  if (this.isPlaying) {
    var e, i, n, r, s, o, a, l = this.data.JIT.hierarchy;
    if (o = this.currentTime += t * this.timeScale,
        s = this.currentTime %= this.data.length,
      s < this.startTimeMs && (s = this.currentTime = this.startTimeMs + s),
        r = parseInt(Math.min(s * this.data.fps, this.data.length * this.data.fps), 10),
      (a = o > s) && !this.loop) {
      for (var t = 0, h = this.hierarchy.length; h > t; t++) {
        var c = this.data.hierarchy[t].keys
          , l = this.data.hierarchy[t].sids;
        if (n = c.length - 1,
            r = this.hierarchy[t],
            c.length) {
          for (c = 0; c < l.length; c++)
            s = l[c],
            (o = this.getPrevKeyWith(s, t, n)) && o.apply(s);
          this.data.hierarchy[t].node.updateMatrix(),
            r.matrixWorldNeedsUpdate = !0
        }
      }
      this.stop()
    } else if (!(s < this.startTime)) {
      for (t = 0,
             h = this.hierarchy.length; h > t; t++) {
        n = this.hierarchy[t],
          e = this.data.hierarchy[t];
        var c = e.keys
          , u = e.animationCache;
        if (this.JITCompile && void 0 !== l[t][r])
          n instanceof THREE.Bone ? (n.skinMatrix = l[t][r],
            n.matrixWorldNeedsUpdate = !1) : (n.matrix = l[t][r],
            n.matrixWorldNeedsUpdate = !0);
        else if (c.length) {
          if (this.JITCompile && u && (n instanceof THREE.Bone ? n.skinMatrix = u.originalMatrix : n.matrix = u.originalMatrix),
              e = u.prevKey,
              i = u.nextKey,
            e && i) {
            if (i.time <= o) {
              if (a && this.loop)
                for (e = c[0],
                       i = c[1]; i.time < s; )
                  e = i,
                    i = c[e.index + 1];
              else if (!a)
                for (var p = c.length - 1; i.time < s && i.index !== p; )
                  e = i,
                    i = c[e.index + 1];
              u.prevKey = e,
                u.nextKey = i
            }
            i.time >= s ? e.interpolate(i, s) : e.interpolate(i, i.time)
          }
          this.data.hierarchy[t].node.updateMatrix(),
            n.matrixWorldNeedsUpdate = !0
        }
      }
      if (this.JITCompile && void 0 === l[0][r])
        for (this.hierarchy[0].updateMatrixWorld(!0),
               t = 0; t < this.hierarchy.length; t++)
          l[t][r] = this.hierarchy[t]instanceof THREE.Bone ? this.hierarchy[t].skinMatrix.clone() : this.hierarchy[t].matrix.clone()
    }
  }
}
,
THREE.KeyFrameAnimation.prototype.getNextKeyWith = function(t, e, i) {
  for (e = this.data.hierarchy[e].keys,
         i %= e.length; i < e.length; i++)
    if (e[i].hasTarget(t))
      return e[i];
  return e[0]
}
,
THREE.KeyFrameAnimation.prototype.getPrevKeyWith = function(t, e, i) {
  for (e = this.data.hierarchy[e].keys,
         i = i >= 0 ? i : i + e.length; i >= 0; i--)
    if (e[i].hasTarget(t))
      return e[i];
  return e[e.length - 1]
}
,
THREE.CubeCamera = function(t, e, i) {
  THREE.Object3D.call(this);
  var n = new THREE.PerspectiveCamera(90,1,t,e);
  n.up.set(0, -1, 0),
    n.lookAt(new THREE.Vector3(1,0,0)),
    this.add(n);
  var r = new THREE.PerspectiveCamera(90,1,t,e);
  r.up.set(0, -1, 0),
    r.lookAt(new THREE.Vector3(-1,0,0)),
    this.add(r);
  var s = new THREE.PerspectiveCamera(90,1,t,e);
  s.up.set(0, 0, 1),
    s.lookAt(new THREE.Vector3(0,1,0)),
    this.add(s);
  var o = new THREE.PerspectiveCamera(90,1,t,e);
  o.up.set(0, 0, -1),
    o.lookAt(new THREE.Vector3(0,-1,0)),
    this.add(o);
  var a = new THREE.PerspectiveCamera(90,1,t,e);
  a.up.set(0, -1, 0),
    a.lookAt(new THREE.Vector3(0,0,1)),
    this.add(a);
  var l = new THREE.PerspectiveCamera(90,1,t,e);
  l.up.set(0, -1, 0),
    l.lookAt(new THREE.Vector3(0,0,-1)),
    this.add(l),
    this.renderTarget = new THREE.WebGLRenderTargetCube(i,i,{
      format: THREE.RGBFormat,
      magFilter: THREE.LinearFilter,
      minFilter: THREE.LinearFilter
    }),
    this.updateCubeMap = function(t, e) {
      var i = this.renderTarget
        , h = i.generateMipmaps;
      i.generateMipmaps = !1,
        i.activeCubeFace = 0,
        t.render(e, n, i),
        i.activeCubeFace = 1,
        t.render(e, r, i),
        i.activeCubeFace = 2,
        t.render(e, s, i),
        i.activeCubeFace = 3,
        t.render(e, o, i),
        i.activeCubeFace = 4,
        t.render(e, a, i),
        i.generateMipmaps = h,
        i.activeCubeFace = 5,
        t.render(e, l, i)
    }
}
,
THREE.CubeCamera.prototype = Object.create(THREE.Object3D.prototype),
THREE.CombinedCamera = function(t, e, i, n, r, s, o) {
  THREE.Camera.call(this),
    this.fov = i,
    this.left = -t / 2,
    this.right = t / 2,
    this.top = e / 2,
    this.bottom = -e / 2,
    this.cameraO = new THREE.OrthographicCamera(t / -2,t / 2,e / 2,e / -2,s,o),
    this.cameraP = new THREE.PerspectiveCamera(i,t / e,n,r),
    this.zoom = 1,
    this.toPerspective()
}
,
THREE.CombinedCamera.prototype = Object.create(THREE.Camera.prototype),
THREE.CombinedCamera.prototype.toPerspective = function() {
  this.near = this.cameraP.near,
    this.far = this.cameraP.far,
    this.cameraP.fov = this.fov / this.zoom,
    this.cameraP.updateProjectionMatrix(),
    this.projectionMatrix = this.cameraP.projectionMatrix,
    this.inPerspectiveMode = !0,
    this.inOrthographicMode = !1
}
,
THREE.CombinedCamera.prototype.toOrthographic = function() {
  var t = this.cameraP.aspect
    , e = (this.cameraP.near + this.cameraP.far) / 2
    , e = Math.tan(this.fov / 2) * e
    , t = 2 * e * t / 2
    , e = e / this.zoom
    , t = t / this.zoom;
  this.cameraO.left = -t,
    this.cameraO.right = t,
    this.cameraO.top = e,
    this.cameraO.bottom = -e,
    this.cameraO.updateProjectionMatrix(),
    this.near = this.cameraO.near,
    this.far = this.cameraO.far,
    this.projectionMatrix = this.cameraO.projectionMatrix,
    this.inPerspectiveMode = !1,
    this.inOrthographicMode = !0
}
,
THREE.CombinedCamera.prototype.setSize = function(t, e) {
  this.cameraP.aspect = t / e,
    this.left = -t / 2,
    this.right = t / 2,
    this.top = e / 2,
    this.bottom = -e / 2
}
,
THREE.CombinedCamera.prototype.setFov = function(t) {
  this.fov = t,
    this.inPerspectiveMode ? this.toPerspective() : this.toOrthographic()
}
,
THREE.CombinedCamera.prototype.updateProjectionMatrix = function() {
  this.inPerspectiveMode ? this.toPerspective() : (this.toPerspective(),
    this.toOrthographic())
}
,
THREE.CombinedCamera.prototype.setLens = function(t, e) {
  void 0 === e && (e = 24);
  var i = 2 * THREE.Math.radToDeg(Math.atan(e / (2 * t)));
  return this.setFov(i),
    i
}
,
THREE.CombinedCamera.prototype.setZoom = function(t) {
  this.zoom = t,
    this.inPerspectiveMode ? this.toPerspective() : this.toOrthographic()
}
,
THREE.CombinedCamera.prototype.toFrontView = function() {
  this.rotation.x = 0,
    this.rotation.y = 0,
    this.rotation.z = 0,
    this.rotationAutoUpdate = !1
}
,
THREE.CombinedCamera.prototype.toBackView = function() {
  this.rotation.x = 0,
    this.rotation.y = Math.PI,
    this.rotation.z = 0,
    this.rotationAutoUpdate = !1
}
,
THREE.CombinedCamera.prototype.toLeftView = function() {
  this.rotation.x = 0,
    this.rotation.y = -Math.PI / 2,
    this.rotation.z = 0,
    this.rotationAutoUpdate = !1
}
,
THREE.CombinedCamera.prototype.toRightView = function() {
  this.rotation.x = 0,
    this.rotation.y = Math.PI / 2,
    this.rotation.z = 0,
    this.rotationAutoUpdate = !1
}
,
THREE.CombinedCamera.prototype.toTopView = function() {
  this.rotation.x = -Math.PI / 2,
    this.rotation.y = 0,
    this.rotation.z = 0,
    this.rotationAutoUpdate = !1
}
,
THREE.CombinedCamera.prototype.toBottomView = function() {
  this.rotation.x = Math.PI / 2,
    this.rotation.y = 0,
    this.rotation.z = 0,
    this.rotationAutoUpdate = !1
}
,
THREE.CircleGeometry = function(t, e, i, n) {
  THREE.Geometry.call(this),
    this.radius = t = t || 50,
    this.segments = e = void 0 !== e ? Math.max(3, e) : 8,
    this.thetaStart = i = void 0 !== i ? i : 0,
    this.thetaLength = n = void 0 !== n ? n : 2 * Math.PI;
  var r, s = [];
  r = new THREE.Vector3;
  var o = new THREE.Vector2(.5,.5);
  for (this.vertices.push(r),
         s.push(o),
         r = 0; e >= r; r++) {
    var a = new THREE.Vector3
      , l = i + r / e * n;
    a.x = t * Math.cos(l),
      a.y = t * Math.sin(l),
      this.vertices.push(a),
      s.push(new THREE.Vector2((a.x / t + 1) / 2,(a.y / t + 1) / 2))
  }
  for (i = new THREE.Vector3(0,0,1),
         r = 1; e >= r; r++)
    this.faces.push(new THREE.Face3(r,r + 1,0,[i.clone(), i.clone(), i.clone()])),
      this.faceVertexUvs[0].push([s[r].clone(), s[r + 1].clone(), o.clone()]);
  this.computeCentroids(),
    this.computeFaceNormals(),
    this.boundingSphere = new THREE.Sphere(new THREE.Vector3,t)
}
,
THREE.CircleGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.CubeGeometry = function(t, e, i, n, r, s) {
  function o(t, e, i, n, r, s, o, l) {
    var h, c = a.widthSegments, u = a.heightSegments, p = r / 2, d = s / 2, f = a.vertices.length;
    "x" === t && "y" === e || "y" === t && "x" === e ? h = "z" : "x" === t && "z" === e || "z" === t && "x" === e ? (h = "y",
      u = a.depthSegments) : ("z" === t && "y" === e || "y" === t && "z" === e) && (h = "x",
      c = a.depthSegments);
    var m = c + 1
      , g = u + 1
      , v = r / c
      , y = s / u
      , E = new THREE.Vector3;
    for (E[h] = o > 0 ? 1 : -1,
           r = 0; g > r; r++)
      for (s = 0; m > s; s++) {
        var T = new THREE.Vector3;
        T[t] = (s * v - p) * i,
          T[e] = (r * y - d) * n,
          T[h] = o,
          a.vertices.push(T)
      }
    for (r = 0; u > r; r++)
      for (s = 0; c > s; s++)
        d = s + m * r,
          t = s + m * (r + 1),
          e = s + 1 + m * (r + 1),
          i = s + 1 + m * r,
          n = new THREE.Vector2(s / c,1 - r / u),
          o = new THREE.Vector2(s / c,1 - (r + 1) / u),
          h = new THREE.Vector2((s + 1) / c,1 - (r + 1) / u),
          p = new THREE.Vector2((s + 1) / c,1 - r / u),
          d = new THREE.Face3(d + f,t + f,i + f),
          d.normal.copy(E),
          d.vertexNormals.push(E.clone(), E.clone(), E.clone()),
          d.materialIndex = l,
          a.faces.push(d),
          a.faceVertexUvs[0].push([n, o, p]),
          d = new THREE.Face3(t + f,e + f,i + f),
          d.normal.copy(E),
          d.vertexNormals.push(E.clone(), E.clone(), E.clone()),
          d.materialIndex = l,
          a.faces.push(d),
          a.faceVertexUvs[0].push([o.clone(), h, p.clone()])
  }
  THREE.Geometry.call(this);
  var a = this;
  this.width = t,
    this.height = e,
    this.depth = i,
    this.widthSegments = n || 1,
    this.heightSegments = r || 1,
    this.depthSegments = s || 1,
    t = this.width / 2,
    e = this.height / 2,
    i = this.depth / 2,
    o("z", "y", -1, -1, this.depth, this.height, t, 0),
    o("z", "y", 1, -1, this.depth, this.height, -t, 1),
    o("x", "z", 1, 1, this.width, this.depth, e, 2),
    o("x", "z", 1, -1, this.width, this.depth, -e, 3),
    o("x", "y", 1, -1, this.width, this.height, i, 4),
    o("x", "y", -1, -1, this.width, this.height, -i, 5),
    this.computeCentroids(),
    this.mergeVertices()
}
,
THREE.CubeGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.CylinderGeometry = function(t, e, i, n, r, s) {
  THREE.Geometry.call(this),
    this.radiusTop = t = void 0 !== t ? t : 20,
    this.radiusBottom = e = void 0 !== e ? e : 20,
    this.height = i = void 0 !== i ? i : 100,
    this.radialSegments = n = n || 8,
    this.heightSegments = r = r || 1,
    this.openEnded = s = void 0 !== s ? s : !1;
  var o, a, l = i / 2, h = [], c = [];
  for (a = 0; r >= a; a++) {
    var u = []
      , p = []
      , d = a / r
      , f = d * (e - t) + t;
    for (o = 0; n >= o; o++) {
      var m = o / n
        , g = new THREE.Vector3;
      g.x = f * Math.sin(2 * m * Math.PI),
        g.y = -d * i + l,
        g.z = f * Math.cos(2 * m * Math.PI),
        this.vertices.push(g),
        u.push(this.vertices.length - 1),
        p.push(new THREE.Vector2(m,1 - d))
    }
    h.push(u),
      c.push(p)
  }
  for (i = (e - t) / i,
         o = 0; n > o; o++)
    for (0 !== t ? (u = this.vertices[h[0][o]].clone(),
      p = this.vertices[h[0][o + 1]].clone()) : (u = this.vertices[h[1][o]].clone(),
      p = this.vertices[h[1][o + 1]].clone()),
           u.setY(Math.sqrt(u.x * u.x + u.z * u.z) * i).normalize(),
           p.setY(Math.sqrt(p.x * p.x + p.z * p.z) * i).normalize(),
           a = 0; r > a; a++) {
      var d = h[a][o]
        , f = h[a + 1][o]
        , m = h[a + 1][o + 1]
        , g = h[a][o + 1]
        , v = u.clone()
        , y = u.clone()
        , E = p.clone()
        , T = p.clone()
        , x = c[a][o].clone()
        , b = c[a + 1][o].clone()
        , w = c[a + 1][o + 1].clone()
        , _ = c[a][o + 1].clone();
      this.faces.push(new THREE.Face3(d,f,g,[v, y, T])),
        this.faceVertexUvs[0].push([x, b, _]),
        this.faces.push(new THREE.Face3(f,m,g,[y.clone(), E, T.clone()])),
        this.faceVertexUvs[0].push([b.clone(), w, _.clone()])
    }
  if (!1 === s && t > 0)
    for (this.vertices.push(new THREE.Vector3(0,l,0)),
           o = 0; n > o; o++)
      d = h[0][o],
        f = h[0][o + 1],
        m = this.vertices.length - 1,
        v = new THREE.Vector3(0,1,0),
        y = new THREE.Vector3(0,1,0),
        E = new THREE.Vector3(0,1,0),
        x = c[0][o].clone(),
        b = c[0][o + 1].clone(),
        w = new THREE.Vector2(b.x,0),
        this.faces.push(new THREE.Face3(d,f,m,[v, y, E])),
        this.faceVertexUvs[0].push([x, b, w]);
  if (!1 === s && e > 0)
    for (this.vertices.push(new THREE.Vector3(0,-l,0)),
           o = 0; n > o; o++)
      d = h[a][o + 1],
        f = h[a][o],
        m = this.vertices.length - 1,
        v = new THREE.Vector3(0,-1,0),
        y = new THREE.Vector3(0,-1,0),
        E = new THREE.Vector3(0,-1,0),
        x = c[a][o + 1].clone(),
        b = c[a][o].clone(),
        w = new THREE.Vector2(b.x,1),
        this.faces.push(new THREE.Face3(d,f,m,[v, y, E])),
        this.faceVertexUvs[0].push([x, b, w]);
  this.computeCentroids(),
    this.computeFaceNormals()
}
,
THREE.CylinderGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.ExtrudeGeometry = function(t, e) {
  "undefined" != typeof t && (THREE.Geometry.call(this),
    t = t instanceof Array ? t : [t],
    this.shapebb = t[t.length - 1].getBoundingBox(),
    this.addShapeList(t, e),
    this.computeCentroids(),
    this.computeFaceNormals())
}
,
THREE.ExtrudeGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.ExtrudeGeometry.prototype.addShapeList = function(t, e) {
  for (var i = t.length, n = 0; i > n; n++)
    this.addShape(t[n], e)
}
,
THREE.ExtrudeGeometry.prototype.addShape = function(t, e) {
  function i(t, e, i) {
    return e || console.log("die"),
      e.clone().multiplyScalar(i).add(t)
  }
  function n(t, e, i) {
    var n = THREE.ExtrudeGeometry.__v1
      , r = THREE.ExtrudeGeometry.__v2
      , s = THREE.ExtrudeGeometry.__v3
      , o = THREE.ExtrudeGeometry.__v4
      , a = THREE.ExtrudeGeometry.__v5
      , l = THREE.ExtrudeGeometry.__v6;
    return n.set(t.x - e.x, t.y - e.y),
      r.set(t.x - i.x, t.y - i.y),
      n = n.normalize(),
      r = r.normalize(),
      s.set(-n.y, n.x),
      o.set(r.y, -r.x),
      a.copy(t).add(s),
      l.copy(t).add(o),
      a.equals(l) ? o.clone() : (a.copy(e).add(s),
        l.copy(i).add(o),
        s = n.dot(o),
        o = l.sub(a).dot(o),
      0 === s && (console.log("Either infinite or no solutions!"),
        console.log(0 === o ? "Its finite solutions." : "Too bad, no solutions.")),
        o /= s,
        0 > o ? (e = Math.atan2(e.y - t.y, e.x - t.x),
          t = Math.atan2(i.y - t.y, i.x - t.x),
        e > t && (t += 2 * Math.PI),
          i = (e + t) / 2,
          t = -Math.cos(i),
          i = -Math.sin(i),
          new THREE.Vector2(t,i)) : n.multiplyScalar(o).add(a).sub(t).clone())
  }
  function r(i, n) {
    var r, s;
    for (F = i.length; 0 <= --F; ) {
      r = F,
        s = F - 1,
      0 > s && (s = i.length - 1);
      for (var o = 0, a = y + 2 * m, o = 0; a > o; o++) {
        var l = I * o
          , h = I * (o + 1)
          , c = n + r + l
          , l = n + s + l
          , u = n + s + h
          , h = n + r + h
          , p = i
          , d = o
          , f = a
          , g = r
          , v = s
          , c = c + M
          , l = l + M
          , u = u + M
          , h = h + M;
        H.faces.push(new THREE.Face3(c,l,h,null,null,b)),
          H.faces.push(new THREE.Face3(l,u,h,null,null,b)),
          c = w.generateSideWallUV(H, t, p, e, c, l, u, h, d, f, g, v),
          H.faceVertexUvs[0].push([c[0], c[1], c[3]]),
          H.faceVertexUvs[0].push([c[1], c[2], c[3]])
      }
    }
  }
  function s(t, e, i) {
    H.vertices.push(new THREE.Vector3(t,e,i))
  }
  function o(i, n, r, s) {
    i += M,
      n += M,
      r += M,
      H.faces.push(new THREE.Face3(i,n,r,null,null,x)),
      i = s ? w.generateBottomUV(H, t, e, i, n, r) : w.generateTopUV(H, t, e, i, n, r),
      H.faceVertexUvs[0].push(i)
  }
  var a, l, h, c, u, p = void 0 !== e.amount ? e.amount : 100, d = void 0 !== e.bevelThickness ? e.bevelThickness : 6, f = void 0 !== e.bevelSize ? e.bevelSize : d - 2, m = void 0 !== e.bevelSegments ? e.bevelSegments : 3, g = void 0 !== e.bevelEnabled ? e.bevelEnabled : !0, v = void 0 !== e.curveSegments ? e.curveSegments : 12, y = void 0 !== e.steps ? e.steps : 1, E = e.extrudePath, T = !1, x = e.material, b = e.extrudeMaterial, w = void 0 !== e.UVGenerator ? e.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;
  E && (a = E.getSpacedPoints(y),
    T = !0,
    g = !1,
    l = void 0 !== e.frames ? e.frames : new THREE.TubeGeometry.FrenetFrames(E,y,!1),
    h = new THREE.Vector3,
    c = new THREE.Vector3,
    u = new THREE.Vector3),
  g || (f = d = m = 0);
  var _, R, S, H = this, M = this.vertices.length, v = t.extractPoints(v), C = v.shape, v = v.holes;
  if (E = !THREE.Shape.Utils.isClockWise(C)) {
    for (C = C.reverse(),
           R = 0,
           S = v.length; S > R; R++)
      _ = v[R],
      THREE.Shape.Utils.isClockWise(_) && (v[R] = _.reverse());
    E = !1
  }
  var P = THREE.Shape.Utils.triangulateShape(C, v)
    , E = C;
  for (R = 0,
         S = v.length; S > R; R++)
    _ = v[R],
      C = C.concat(_);
  var A, L, D, k, I = C.length, O = P.length, z = [], F = 0, N = E.length;
  for (A = N - 1,
         L = F + 1; N > F; F++,
         A++,
         L++)
    A === N && (A = 0),
    L === N && (L = 0),
      z[F] = n(E[F], E[A], E[L]);
  var B, V = [], U = z.concat();
  for (R = 0,
         S = v.length; S > R; R++) {
    for (_ = v[R],
           B = [],
           F = 0,
           N = _.length,
           A = N - 1,
           L = F + 1; N > F; F++,
           A++,
           L++)
      A === N && (A = 0),
      L === N && (L = 0),
        B[F] = n(_[F], _[A], _[L]);
    V.push(B),
      U = U.concat(B)
  }
  for (A = 0; m > A; A++) {
    for (_ = A / m,
           D = d * (1 - _),
           L = f * Math.sin(_ * Math.PI / 2),
           F = 0,
           N = E.length; N > F; F++)
      k = i(E[F], z[F], L),
        s(k.x, k.y, -D);
    for (R = 0,
           S = v.length; S > R; R++)
      for (_ = v[R],
             B = V[R],
             F = 0,
             N = _.length; N > F; F++)
        k = i(_[F], B[F], L),
          s(k.x, k.y, -D)
  }
  for (L = f,
         F = 0; I > F; F++)
    k = g ? i(C[F], U[F], L) : C[F],
      T ? (c.copy(l.normals[0]).multiplyScalar(k.x),
        h.copy(l.binormals[0]).multiplyScalar(k.y),
        u.copy(a[0]).add(c).add(h),
        s(u.x, u.y, u.z)) : s(k.x, k.y, 0);
  for (_ = 1; y >= _; _++)
    for (F = 0; I > F; F++)
      k = g ? i(C[F], U[F], L) : C[F],
        T ? (c.copy(l.normals[_]).multiplyScalar(k.x),
          h.copy(l.binormals[_]).multiplyScalar(k.y),
          u.copy(a[_]).add(c).add(h),
          s(u.x, u.y, u.z)) : s(k.x, k.y, p / y * _);
  for (A = m - 1; A >= 0; A--) {
    for (_ = A / m,
           D = d * (1 - _),
           L = f * Math.sin(_ * Math.PI / 2),
           F = 0,
           N = E.length; N > F; F++)
      k = i(E[F], z[F], L),
        s(k.x, k.y, p + D);
    for (R = 0,
           S = v.length; S > R; R++)
      for (_ = v[R],
             B = V[R],
             F = 0,
             N = _.length; N > F; F++)
        k = i(_[F], B[F], L),
          T ? s(k.x, k.y + a[y - 1].y, a[y - 1].x + D) : s(k.x, k.y, p + D)
  }
  if (g) {
    for (d = 0 * I,
           F = 0; O > F; F++)
      p = P[F],
        o(p[2] + d, p[1] + d, p[0] + d, !0);
    for (d = I * (y + 2 * m),
           F = 0; O > F; F++)
      p = P[F],
        o(p[0] + d, p[1] + d, p[2] + d, !1)
  } else {
    for (F = 0; O > F; F++)
      p = P[F],
        o(p[2], p[1], p[0], !0);
    for (F = 0; O > F; F++)
      p = P[F],
        o(p[0] + I * y, p[1] + I * y, p[2] + I * y, !1)
  }
  for (p = 0,
         r(E, p),
         p += E.length,
         R = 0,
         S = v.length; S > R; R++)
    _ = v[R],
      r(_, p),
      p += _.length
}
,
THREE.ExtrudeGeometry.WorldUVGenerator = {
  generateTopUV: function(t, e, i, n, r, s) {
    return e = t.vertices[r].x,
      r = t.vertices[r].y,
      i = t.vertices[s].x,
      s = t.vertices[s].y,
      [new THREE.Vector2(t.vertices[n].x,t.vertices[n].y), new THREE.Vector2(e,r), new THREE.Vector2(i,s)]
  },
  generateBottomUV: function(t, e, i, n, r, s) {
    return this.generateTopUV(t, e, i, n, r, s)
  },
  generateSideWallUV: function(t, e, i, n, r, s, o, a) {
    var e = t.vertices[r].x
      , i = t.vertices[r].y
      , r = t.vertices[r].z
      , n = t.vertices[s].x
      , l = t.vertices[s].y
      , s = t.vertices[s].z
      , h = t.vertices[o].x
      , c = t.vertices[o].y
      , o = t.vertices[o].z
      , u = t.vertices[a].x
      , p = t.vertices[a].y
      , t = t.vertices[a].z;
    return .01 > Math.abs(i - l) ? [new THREE.Vector2(e,1 - r), new THREE.Vector2(n,1 - s), new THREE.Vector2(h,1 - o), new THREE.Vector2(u,1 - t)] : [new THREE.Vector2(i,1 - r), new THREE.Vector2(l,1 - s), new THREE.Vector2(c,1 - o), new THREE.Vector2(p,1 - t)]
  }
},
THREE.ExtrudeGeometry.__v1 = new THREE.Vector2,
THREE.ExtrudeGeometry.__v2 = new THREE.Vector2,
THREE.ExtrudeGeometry.__v3 = new THREE.Vector2,
THREE.ExtrudeGeometry.__v4 = new THREE.Vector2,
THREE.ExtrudeGeometry.__v5 = new THREE.Vector2,
THREE.ExtrudeGeometry.__v6 = new THREE.Vector2,
THREE.ShapeGeometry = function(t, e) {
  THREE.Geometry.call(this),
  !1 == t instanceof Array && (t = [t]),
    this.shapebb = t[t.length - 1].getBoundingBox(),
    this.addShapeList(t, e),
    this.computeCentroids(),
    this.computeFaceNormals()
}
,
THREE.ShapeGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.ShapeGeometry.prototype.addShapeList = function(t, e) {
  for (var i = 0, n = t.length; n > i; i++)
    this.addShape(t[i], e);
  return this
}
,
THREE.ShapeGeometry.prototype.addShape = function(t, e) {
  void 0 === e && (e = {});
  var i, n, r, s = e.material, o = void 0 === e.UVGenerator ? THREE.ExtrudeGeometry.WorldUVGenerator : e.UVGenerator, a = this.vertices.length;
  i = t.extractPoints(void 0 !== e.curveSegments ? e.curveSegments : 12);
  var l = i.shape
    , h = i.holes;
  if (!THREE.Shape.Utils.isClockWise(l))
    for (l = l.reverse(),
           i = 0,
           n = h.length; n > i; i++)
      r = h[i],
      THREE.Shape.Utils.isClockWise(r) && (h[i] = r.reverse());
  var c = THREE.Shape.Utils.triangulateShape(l, h);
  for (i = 0,
         n = h.length; n > i; i++)
    r = h[i],
      l = l.concat(r);
  for (h = l.length,
         n = c.length,
         i = 0; h > i; i++)
    r = l[i],
      this.vertices.push(new THREE.Vector3(r.x,r.y,0));
  for (i = 0; n > i; i++)
    h = c[i],
      l = h[0] + a,
      r = h[1] + a,
      h = h[2] + a,
      this.faces.push(new THREE.Face3(l,r,h,null,null,s)),
      this.faceVertexUvs[0].push(o.generateBottomUV(this, t, e, l, r, h))
}
,
THREE.LatheGeometry = function(t, e, i, n) {
  THREE.Geometry.call(this);
  for (var e = e || 12, i = i || 0, n = n || 2 * Math.PI, r = 1 / (t.length - 1), s = 1 / e, o = 0, a = e; a >= o; o++)
    for (var l = i + o * s * n, h = Math.cos(l), c = Math.sin(l), l = 0, u = t.length; u > l; l++) {
      var p = t[l]
        , d = new THREE.Vector3;
      d.x = h * p.x - c * p.y,
        d.y = c * p.x + h * p.y,
        d.z = p.z,
        this.vertices.push(d)
    }
  for (i = t.length,
         o = 0,
         a = e; a > o; o++)
    for (l = 0,
           u = t.length - 1; u > l; l++) {
      var e = c = l + i * o
        , n = c + i
        , h = c + 1 + i
        , c = c + 1
        , p = o * s
        , d = l * r
        , f = p + s
        , m = d + r;
      this.faces.push(new THREE.Face3(e,n,c)),
        this.faceVertexUvs[0].push([new THREE.Vector2(p,d), new THREE.Vector2(f,d), new THREE.Vector2(p,m)]),
        this.faces.push(new THREE.Face3(n,h,c)),
        this.faceVertexUvs[0].push([new THREE.Vector2(f,d), new THREE.Vector2(f,m), new THREE.Vector2(p,m)])
    }
  this.mergeVertices(),
    this.computeCentroids(),
    this.computeFaceNormals(),
    this.computeVertexNormals()
}
,
THREE.LatheGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.PlaneGeometry = function(t, e, i, n) {
  THREE.Geometry.call(this),
    this.width = t,
    this.height = e,
    this.widthSegments = i || 1,
    this.heightSegments = n || 1;
  for (var r = t / 2, s = e / 2, i = this.widthSegments, n = this.heightSegments, o = i + 1, a = n + 1, l = this.width / i, h = this.height / n, c = new THREE.Vector3(0,0,1), t = 0; a > t; t++)
    for (e = 0; o > e; e++)
      this.vertices.push(new THREE.Vector3(e * l - r,-(t * h - s),0));
  for (t = 0; n > t; t++)
    for (e = 0; i > e; e++) {
      var u = e + o * t
        , r = e + o * (t + 1)
        , s = e + 1 + o * (t + 1)
        , a = e + 1 + o * t
        , l = new THREE.Vector2(e / i,1 - t / n)
        , h = new THREE.Vector2(e / i,1 - (t + 1) / n)
        , p = new THREE.Vector2((e + 1) / i,1 - (t + 1) / n)
        , d = new THREE.Vector2((e + 1) / i,1 - t / n)
        , u = new THREE.Face3(u,r,a);
      u.normal.copy(c),
        u.vertexNormals.push(c.clone(), c.clone(), c.clone()),
        this.faces.push(u),
        this.faceVertexUvs[0].push([l, h, d]),
        u = new THREE.Face3(r,s,a),
        u.normal.copy(c),
        u.vertexNormals.push(c.clone(), c.clone(), c.clone()),
        this.faces.push(u),
        this.faceVertexUvs[0].push([h.clone(), p, d.clone()])
    }
  this.computeCentroids()
}
,
THREE.PlaneGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.RingGeometry = function(t, e, i, n, r, s) {
  THREE.Geometry.call(this);
  for (var o, t = t || 0, e = e || 50, r = void 0 !== r ? r : 0, s = void 0 !== s ? s : 2 * Math.PI, i = void 0 !== i ? Math.max(3, i) : 8, n = void 0 !== n ? Math.max(3, n) : 8, a = [], l = t, h = (e - t) / n, t = 0; n >= t; t++) {
    for (o = 0; i >= o; o++) {
      var c = new THREE.Vector3
        , u = r + o / i * s;
      c.x = l * Math.cos(u),
        c.y = l * Math.sin(u),
        this.vertices.push(c),
        a.push(new THREE.Vector2((c.x / e + 1) / 2,(c.y / e + 1) / 2))
    }
    l += h
  }
  for (e = new THREE.Vector3(0,0,1),
         t = 0; n > t; t++)
    for (r = t * i,
           o = 0; i >= o; o++)
      u = o + r,
        s = u + t,
        h = u + i + t,
        c = u + i + 1 + t,
        this.faces.push(new THREE.Face3(s,h,c,[e.clone(), e.clone(), e.clone()])),
        this.faceVertexUvs[0].push([a[s].clone(), a[h].clone(), a[c].clone()]),
        s = u + t,
        h = u + i + 1 + t,
        c = u + 1 + t,
        this.faces.push(new THREE.Face3(s,h,c,[e.clone(), e.clone(), e.clone()])),
        this.faceVertexUvs[0].push([a[s].clone(), a[h].clone(), a[c].clone()]);
  this.computeCentroids(),
    this.computeFaceNormals(),
    this.boundingSphere = new THREE.Sphere(new THREE.Vector3,l)
}
,
THREE.RingGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.SphereGeometry = function(t, e, i, n, r, s, o) {
  THREE.Geometry.call(this),
    this.radius = t = t || 50,
    this.widthSegments = e = Math.max(3, Math.floor(e) || 8),
    this.heightSegments = i = Math.max(2, Math.floor(i) || 6),
    this.phiStart = n = void 0 !== n ? n : 0,
    this.phiLength = r = void 0 !== r ? r : 2 * Math.PI,
    this.thetaStart = s = void 0 !== s ? s : 0,
    this.thetaLength = o = void 0 !== o ? o : Math.PI;
  var a, l, h = [], c = [];
  for (l = 0; i >= l; l++) {
    var u = []
      , p = [];
    for (a = 0; e >= a; a++) {
      var d = a / e
        , f = l / i
        , m = new THREE.Vector3;
      m.x = -t * Math.cos(n + d * r) * Math.sin(s + f * o),
        m.y = t * Math.cos(s + f * o),
        m.z = t * Math.sin(n + d * r) * Math.sin(s + f * o),
        this.vertices.push(m),
        u.push(this.vertices.length - 1),
        p.push(new THREE.Vector2(d,1 - f))
    }
    h.push(u),
      c.push(p)
  }
  for (l = 0; l < this.heightSegments; l++)
    for (a = 0; a < this.widthSegments; a++) {
      var e = h[l][a + 1]
        , i = h[l][a]
        , n = h[l + 1][a]
        , r = h[l + 1][a + 1]
        , s = this.vertices[e].clone().normalize()
        , o = this.vertices[i].clone().normalize()
        , u = this.vertices[n].clone().normalize()
        , p = this.vertices[r].clone().normalize()
        , d = c[l][a + 1].clone()
        , f = c[l][a].clone()
        , m = c[l + 1][a].clone()
        , g = c[l + 1][a + 1].clone();
      Math.abs(this.vertices[e].y) === this.radius ? (d.x = (d.x + f.x) / 2,
        this.faces.push(new THREE.Face3(e,n,r,[s, u, p])),
        this.faceVertexUvs[0].push([d, m, g])) : Math.abs(this.vertices[n].y) === this.radius ? (m.x = (m.x + g.x) / 2,
        this.faces.push(new THREE.Face3(e,i,n,[s, o, u])),
        this.faceVertexUvs[0].push([d, f, m])) : (this.faces.push(new THREE.Face3(e,i,r,[s, o, p])),
        this.faceVertexUvs[0].push([d, f, g]),
        this.faces.push(new THREE.Face3(i,n,r,[o.clone(), u, p.clone()])),
        this.faceVertexUvs[0].push([f.clone(), m, g.clone()]))
    }
  this.computeCentroids(),
    this.computeFaceNormals(),
    this.boundingSphere = new THREE.Sphere(new THREE.Vector3,t)
}
,
THREE.SphereGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.TextGeometry = function(t, e) {
  var e = e || {}
    , i = THREE.FontUtils.generateShapes(t, e);
  e.amount = void 0 !== e.height ? e.height : 50,
  void 0 === e.bevelThickness && (e.bevelThickness = 10),
  void 0 === e.bevelSize && (e.bevelSize = 8),
  void 0 === e.bevelEnabled && (e.bevelEnabled = !1),
    THREE.ExtrudeGeometry.call(this, i, e)
}
,
THREE.TextGeometry.prototype = Object.create(THREE.ExtrudeGeometry.prototype),
THREE.TorusGeometry = function(t, e, i, n, r) {
  for (THREE.Geometry.call(this),
         this.radius = t || 100,
         this.tube = e || 40,
         this.radialSegments = i || 8,
         this.tubularSegments = n || 6,
         this.arc = r || 2 * Math.PI,
         r = new THREE.Vector3,
         t = [],
         e = [],
         i = 0; i <= this.radialSegments; i++)
    for (n = 0; n <= this.tubularSegments; n++) {
      var s = n / this.tubularSegments * this.arc
        , o = 2 * i / this.radialSegments * Math.PI;
      r.x = this.radius * Math.cos(s),
        r.y = this.radius * Math.sin(s);
      var a = new THREE.Vector3;
      a.x = (this.radius + this.tube * Math.cos(o)) * Math.cos(s),
        a.y = (this.radius + this.tube * Math.cos(o)) * Math.sin(s),
        a.z = this.tube * Math.sin(o),
        this.vertices.push(a),
        t.push(new THREE.Vector2(n / this.tubularSegments,i / this.radialSegments)),
        e.push(a.clone().sub(r).normalize())
    }
  for (i = 1; i <= this.radialSegments; i++)
    for (n = 1; n <= this.tubularSegments; n++) {
      var r = (this.tubularSegments + 1) * i + n - 1
        , s = (this.tubularSegments + 1) * (i - 1) + n - 1
        , o = (this.tubularSegments + 1) * (i - 1) + n
        , a = (this.tubularSegments + 1) * i + n
        , l = new THREE.Face3(r,s,a,[e[r].clone(), e[s].clone(), e[a].clone()]);
      this.faces.push(l),
        this.faceVertexUvs[0].push([t[r].clone(), t[s].clone(), t[a].clone()]),
        l = new THREE.Face3(s,o,a,[e[s].clone(), e[o].clone(), e[a].clone()]),
        this.faces.push(l),
        this.faceVertexUvs[0].push([t[s].clone(), t[o].clone(), t[a].clone()])
    }
  this.computeCentroids(),
    this.computeFaceNormals()
}
,
THREE.TorusGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.TorusKnotGeometry = function(t, e, i, n, r, s, o) {
  function a(t, e, i, n, r) {
    var s = Math.cos(t)
      , o = Math.sin(t)
      , t = e / i * t
      , e = Math.cos(t)
      , s = .5 * n * (2 + e) * s
      , o = .5 * n * (2 + e) * o
      , n = .5 * r * n * Math.sin(t);
    return new THREE.Vector3(s,o,n)
  }
  for (THREE.Geometry.call(this),
         this.radius = t || 100,
         this.tube = e || 40,
         this.radialSegments = i || 64,
         this.tubularSegments = n || 8,
         this.p = r || 2,
         this.q = s || 3,
         this.heightScale = o || 1,
         this.grid = Array(this.radialSegments),
         i = new THREE.Vector3,
         n = new THREE.Vector3,
         r = new THREE.Vector3,
         t = 0; t < this.radialSegments; ++t)
    for (this.grid[t] = Array(this.tubularSegments),
           e = 2 * (t / this.radialSegments) * this.p * Math.PI,
           s = a(e, this.q, this.p, this.radius, this.heightScale),
           e = a(e + .01, this.q, this.p, this.radius, this.heightScale),
           i.subVectors(e, s),
           n.addVectors(e, s),
           r.crossVectors(i, n),
           n.crossVectors(r, i),
           r.normalize(),
           n.normalize(),
           e = 0; e < this.tubularSegments; ++e) {
      var l = 2 * (e / this.tubularSegments) * Math.PI
        , o = -this.tube * Math.cos(l)
        , l = this.tube * Math.sin(l)
        , h = new THREE.Vector3;
      h.x = s.x + o * n.x + l * r.x,
        h.y = s.y + o * n.y + l * r.y,
        h.z = s.z + o * n.z + l * r.z,
        this.grid[t][e] = this.vertices.push(h) - 1
    }
  for (t = 0; t < this.radialSegments; ++t)
    for (e = 0; e < this.tubularSegments; ++e) {
      var r = (t + 1) % this.radialSegments
        , s = (e + 1) % this.tubularSegments
        , i = this.grid[t][e]
        , n = this.grid[r][e]
        , r = this.grid[r][s]
        , s = this.grid[t][s]
        , o = new THREE.Vector2(t / this.radialSegments,e / this.tubularSegments)
        , l = new THREE.Vector2((t + 1) / this.radialSegments,e / this.tubularSegments)
        , h = new THREE.Vector2((t + 1) / this.radialSegments,(e + 1) / this.tubularSegments)
        , c = new THREE.Vector2(t / this.radialSegments,(e + 1) / this.tubularSegments);
      this.faces.push(new THREE.Face3(i,n,s)),
        this.faceVertexUvs[0].push([o, l, c]),
        this.faces.push(new THREE.Face3(n,r,s)),
        this.faceVertexUvs[0].push([l.clone(), h, c.clone()])
    }
  this.computeCentroids(),
    this.computeFaceNormals(),
    this.computeVertexNormals()
}
,
THREE.TorusKnotGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.TubeGeometry = function(t, e, i, n, r) {
  THREE.Geometry.call(this),
    this.path = t,
    this.segments = e || 64,
    this.radius = i || 1,
    this.radialSegments = n || 8,
    this.closed = r || !1,
    this.grid = [];
  var s, o, a, l, h, c, u, n = this.segments + 1, r = new THREE.Vector3, e = new THREE.TubeGeometry.FrenetFrames(this.path,this.segments,this.closed);
  for (c = e.normals,
         u = e.binormals,
         this.tangents = e.tangents,
         this.normals = c,
         this.binormals = u,
         e = 0; n > e; e++)
    for (this.grid[e] = [],
           i = e / (n - 1),
           h = t.getPointAt(i),
           s = c[e],
           o = u[e],
           i = 0; i < this.radialSegments; i++)
      a = 2 * (i / this.radialSegments) * Math.PI,
        l = -this.radius * Math.cos(a),
        a = this.radius * Math.sin(a),
        r.copy(h),
        r.x += l * s.x + a * o.x,
        r.y += l * s.y + a * o.y,
        r.z += l * s.z + a * o.z,
        this.grid[e][i] = this.vertices.push(new THREE.Vector3(r.x,r.y,r.z)) - 1;
  for (e = 0; e < this.segments; e++)
    for (i = 0; i < this.radialSegments; i++)
      r = this.closed ? (e + 1) % this.segments : e + 1,
        c = (i + 1) % this.radialSegments,
        t = this.grid[e][i],
        n = this.grid[r][i],
        r = this.grid[r][c],
        c = this.grid[e][c],
        u = new THREE.Vector2(e / this.segments,i / this.radialSegments),
        s = new THREE.Vector2((e + 1) / this.segments,i / this.radialSegments),
        o = new THREE.Vector2((e + 1) / this.segments,(i + 1) / this.radialSegments),
        l = new THREE.Vector2(e / this.segments,(i + 1) / this.radialSegments),
        this.faces.push(new THREE.Face3(t,n,c)),
        this.faceVertexUvs[0].push([u, s, l]),
        this.faces.push(new THREE.Face3(n,r,c)),
        this.faceVertexUvs[0].push([s.clone(), o, l.clone()]);
  this.computeCentroids(),
    this.computeFaceNormals(),
    this.computeVertexNormals()
}
,
THREE.TubeGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.TubeGeometry.FrenetFrames = function(t, e, i) {
  new THREE.Vector3;
  var n = new THREE.Vector3;
  new THREE.Vector3;
  var r, s, o, a = [], l = [], h = [], c = new THREE.Vector3, u = new THREE.Matrix4, e = e + 1;
  for (this.tangents = a,
         this.normals = l,
         this.binormals = h,
         r = 0; e > r; r++)
    s = r / (e - 1),
      a[r] = t.getTangentAt(s),
      a[r].normalize();
  for (l[0] = new THREE.Vector3,
         h[0] = new THREE.Vector3,
         t = Number.MAX_VALUE,
         r = Math.abs(a[0].x),
         s = Math.abs(a[0].y),
         o = Math.abs(a[0].z),
       t >= r && (t = r,
         n.set(1, 0, 0)),
       t >= s && (t = s,
         n.set(0, 1, 0)),
       t >= o && n.set(0, 0, 1),
         c.crossVectors(a[0], n).normalize(),
         l[0].crossVectors(a[0], c),
         h[0].crossVectors(a[0], l[0]),
         r = 1; e > r; r++)
    l[r] = l[r - 1].clone(),
      h[r] = h[r - 1].clone(),
      c.crossVectors(a[r - 1], a[r]),
    1e-4 < c.length() && (c.normalize(),
      n = Math.acos(THREE.Math.clamp(a[r - 1].dot(a[r]), -1, 1)),
      l[r].applyMatrix4(u.makeRotationAxis(c, n))),
      h[r].crossVectors(a[r], l[r]);
  if (i)
    for (n = Math.acos(THREE.Math.clamp(l[0].dot(l[e - 1]), -1, 1)),
           n /= e - 1,
         0 < a[0].dot(c.crossVectors(l[0], l[e - 1])) && (n = -n),
           r = 1; e > r; r++)
      l[r].applyMatrix4(u.makeRotationAxis(a[r], n * r)),
        h[r].crossVectors(a[r], l[r])
}
,
THREE.PolyhedronGeometry = function(t, e, i, n) {
  function r(t) {
    var e = t.normalize().clone();
    e.index = a.vertices.push(e) - 1;
    var i = Math.atan2(t.z, -t.x) / 2 / Math.PI + .5
      , t = Math.atan2(-t.y, Math.sqrt(t.x * t.x + t.z * t.z)) / Math.PI + .5;
    return e.uv = new THREE.Vector2(i,1 - t),
      e
  }
  function s(t, e, i) {
    var n = new THREE.Face3(t.index,e.index,i.index,[t.clone(), e.clone(), i.clone()]);
    n.centroid.add(t).add(e).add(i).divideScalar(3),
      a.faces.push(n),
      n = Math.atan2(n.centroid.z, -n.centroid.x),
      a.faceVertexUvs[0].push([o(t.uv, t, n), o(e.uv, e, n), o(i.uv, i, n)])
  }
  function o(t, e, i) {
    return 0 > i && 1 === t.x && (t = new THREE.Vector2(t.x - 1,t.y)),
    0 === e.x && 0 === e.z && (t = new THREE.Vector2(i / 2 / Math.PI + .5,t.y)),
      t.clone()
  }
  THREE.Geometry.call(this);
  for (var i = i || 1, n = n || 0, a = this, l = 0, h = t.length; h > l; l++)
    r(new THREE.Vector3(t[l][0],t[l][1],t[l][2]));
  for (var c = this.vertices, t = [], l = 0, h = e.length; h > l; l++) {
    var u = c[e[l][0]]
      , p = c[e[l][1]]
      , d = c[e[l][2]];
    t[l] = new THREE.Face3(u.index,p.index,d.index,[u.clone(), p.clone(), d.clone()])
  }
  for (l = 0,
         h = t.length; h > l; l++) {
    p = t[l],
      c = n,
      e = Math.pow(2, c),
      Math.pow(4, c);
    for (var c = r(a.vertices[p.a]), u = r(a.vertices[p.b]), f = r(a.vertices[p.c]), p = [], d = 0; e >= d; d++) {
      p[d] = [];
      for (var m = r(c.clone().lerp(f, d / e)), g = r(u.clone().lerp(f, d / e)), v = e - d, y = 0; v >= y; y++)
        p[d][y] = 0 == y && d == e ? m : r(m.clone().lerp(g, y / v))
    }
    for (d = 0; e > d; d++)
      for (y = 0; 2 * (e - d) - 1 > y; y++)
        c = Math.floor(y / 2),
          0 == y % 2 ? s(p[d][c + 1], p[d + 1][c], p[d][c]) : s(p[d][c + 1], p[d + 1][c + 1], p[d + 1][c])
  }
  for (l = 0,
         h = this.faceVertexUvs[0].length; h > l; l++)
    n = this.faceVertexUvs[0][l],
      t = n[0].x,
      e = n[1].x,
      c = n[2].x,
      u = Math.max(t, Math.max(e, c)),
      p = Math.min(t, Math.min(e, c)),
    u > .9 && .1 > p && (.2 > t && (n[0].x += 1),
    .2 > e && (n[1].x += 1),
    .2 > c && (n[2].x += 1));
  for (l = 0,
         h = this.vertices.length; h > l; l++)
    this.vertices[l].multiplyScalar(i);
  this.mergeVertices(),
    this.computeCentroids(),
    this.computeFaceNormals(),
    this.boundingSphere = new THREE.Sphere(new THREE.Vector3,i)
}
,
THREE.PolyhedronGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.IcosahedronGeometry = function(t, e) {
  this.radius = t,
    this.detail = e;
  var i = (1 + Math.sqrt(5)) / 2;
  THREE.PolyhedronGeometry.call(this, [[-1, i, 0], [1, i, 0], [-1, -i, 0], [1, -i, 0], [0, -1, i], [0, 1, i], [0, -1, -i], [0, 1, -i], [i, 0, -1], [i, 0, 1], [-i, 0, -1], [-i, 0, 1]], [[0, 11, 5], [0, 5, 1], [0, 1, 7], [0, 7, 10], [0, 10, 11], [1, 5, 9], [5, 11, 4], [11, 10, 2], [10, 7, 6], [7, 1, 8], [3, 9, 4], [3, 4, 2], [3, 2, 6], [3, 6, 8], [3, 8, 9], [4, 9, 5], [2, 4, 11], [6, 2, 10], [8, 6, 7], [9, 8, 1]], t, e)
}
,
THREE.IcosahedronGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.OctahedronGeometry = function(t, e) {
  THREE.PolyhedronGeometry.call(this, [[1, 0, 0], [-1, 0, 0], [0, 1, 0], [0, -1, 0], [0, 0, 1], [0, 0, -1]], [[0, 2, 4], [0, 4, 3], [0, 3, 5], [0, 5, 2], [1, 2, 5], [1, 5, 3], [1, 3, 4], [1, 4, 2]], t, e)
}
,
THREE.OctahedronGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.TetrahedronGeometry = function(t, e) {
  THREE.PolyhedronGeometry.call(this, [[1, 1, 1], [-1, -1, 1], [-1, 1, -1], [1, -1, -1]], [[2, 1, 0], [0, 3, 2], [1, 3, 0], [2, 3, 1]], t, e)
}
,
THREE.TetrahedronGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.ParametricGeometry = function(t, e, i) {
  THREE.Geometry.call(this);
  var n, r, s, o, a = this.vertices, l = this.faces, h = this.faceVertexUvs[0], c = e + 1;
  for (n = 0; i >= n; n++)
    for (o = n / i,
           r = 0; e >= r; r++)
      s = r / e,
        s = t(s, o),
        a.push(s);
  var u, p, d, f;
  for (n = 0; i > n; n++)
    for (r = 0; e > r; r++)
      t = n * c + r,
        a = n * c + r + 1,
        o = (n + 1) * c + r + 1,
        s = (n + 1) * c + r,
        u = new THREE.Vector2(r / e,n / i),
        p = new THREE.Vector2((r + 1) / e,n / i),
        d = new THREE.Vector2((r + 1) / e,(n + 1) / i),
        f = new THREE.Vector2(r / e,(n + 1) / i),
        l.push(new THREE.Face3(t,a,s)),
        h.push([u, p, f]),
        l.push(new THREE.Face3(a,o,s)),
        h.push([p.clone(), d, f.clone()]);
  this.computeCentroids(),
    this.computeFaceNormals(),
    this.computeVertexNormals()
}
,
THREE.ParametricGeometry.prototype = Object.create(THREE.Geometry.prototype),
THREE.AxisHelper = function(t) {
  var t = t || 1
    , e = new THREE.Geometry;
  e.vertices.push(new THREE.Vector3, new THREE.Vector3(t,0,0), new THREE.Vector3, new THREE.Vector3(0,t,0), new THREE.Vector3, new THREE.Vector3(0,0,t)),
    e.colors.push(new THREE.Color(16711680), new THREE.Color(16755200), new THREE.Color(65280), new THREE.Color(11206400), new THREE.Color(255), new THREE.Color(43775)),
    t = new THREE.LineBasicMaterial({
      vertexColors: THREE.VertexColors
    }),
    THREE.Line.call(this, e, t, THREE.LinePieces)
}
,
THREE.AxisHelper.prototype = Object.create(THREE.Line.prototype),
THREE.ArrowHelper = function(t, e, i, n, r, s) {
  THREE.Object3D.call(this),
  void 0 === n && (n = 16776960),
  void 0 === i && (i = 1),
  void 0 === r && (r = .2 * i),
  void 0 === s && (s = .2 * r),
    this.position = e,
    e = new THREE.Geometry,
    e.vertices.push(new THREE.Vector3(0,0,0)),
    e.vertices.push(new THREE.Vector3(0,1,0)),
    this.line = new THREE.Line(e,new THREE.LineBasicMaterial({
      color: n
    })),
    this.line.matrixAutoUpdate = !1,
    this.add(this.line),
    e = new THREE.CylinderGeometry(0,.5,1,5,1),
    e.applyMatrix((new THREE.Matrix4).makeTranslation(0, -.5, 0)),
    this.cone = new THREE.Mesh(e,new THREE.MeshBasicMaterial({
      color: n
    })),
    this.cone.matrixAutoUpdate = !1,
    this.add(this.cone),
    this.setDirection(t),
    this.setLength(i, r, s)
}
,
THREE.ArrowHelper.prototype = Object.create(THREE.Object3D.prototype),
THREE.ArrowHelper.prototype.setDirection = function() {
  var t, e = new THREE.Vector3;
  return function(i) {
    .99999 < i.y ? this.quaternion.set(0, 0, 0, 1) : -.99999 > i.y ? this.quaternion.set(1, 0, 0, 0) : (e.set(i.z, 0, -i.x).normalize(),
      t = Math.acos(i.y),
      this.quaternion.setFromAxisAngle(e, t))
  }
}(),
THREE.ArrowHelper.prototype.setLength = function(t, e, i) {
  void 0 === e && (e = .2 * t),
  void 0 === i && (i = .2 * e),
    this.line.scale.set(1, t, 1),
    this.line.updateMatrix(),
    this.cone.scale.set(i, e, i),
    this.cone.position.y = t,
    this.cone.updateMatrix()
}
,
THREE.ArrowHelper.prototype.setColor = function(t) {
  this.line.material.color.setHex(t),
    this.cone.material.color.setHex(t)
}
,
THREE.BoxHelper = function(t) {
  var e = [new THREE.Vector3(1,1,1), new THREE.Vector3(-1,1,1), new THREE.Vector3(-1,-1,1), new THREE.Vector3(1,-1,1), new THREE.Vector3(1,1,-1), new THREE.Vector3(-1,1,-1), new THREE.Vector3(-1,-1,-1), new THREE.Vector3(1,-1,-1)];
  this.vertices = e;
  var i = new THREE.Geometry;
  i.vertices.push(e[0], e[1], e[1], e[2], e[2], e[3], e[3], e[0], e[4], e[5], e[5], e[6], e[6], e[7], e[7], e[4], e[0], e[4], e[1], e[5], e[2], e[6], e[3], e[7]),
    THREE.Line.call(this, i, new THREE.LineBasicMaterial({
      color: 16776960
    }), THREE.LinePieces),
  void 0 !== t && this.update(t)
}
,
THREE.BoxHelper.prototype = Object.create(THREE.Line.prototype),
THREE.BoxHelper.prototype.update = function(t) {
  var e = t.geometry;
  null === e.boundingBox && e.computeBoundingBox();
  var i = e.boundingBox.min
    , e = e.boundingBox.max
    , n = this.vertices;
  n[0].set(e.x, e.y, e.z),
    n[1].set(i.x, e.y, e.z),
    n[2].set(i.x, i.y, e.z),
    n[3].set(e.x, i.y, e.z),
    n[4].set(e.x, e.y, i.z),
    n[5].set(i.x, e.y, i.z),
    n[6].set(i.x, i.y, i.z),
    n[7].set(e.x, i.y, i.z),
    this.geometry.computeBoundingSphere(),
    this.geometry.verticesNeedUpdate = !0,
    this.matrixAutoUpdate = !1,
    this.matrixWorld = t.matrixWorld
}
,
THREE.BoundingBoxHelper = function(t, e) {
  var i = void 0 !== e ? e : 8947848;
  this.object = t,
    this.box = new THREE.Box3,
    THREE.Mesh.call(this, new THREE.CubeGeometry(1,1,1), new THREE.MeshBasicMaterial({
      color: i,
      wireframe: !0
    }))
}
,
THREE.BoundingBoxHelper.prototype = Object.create(THREE.Mesh.prototype),
THREE.BoundingBoxHelper.prototype.update = function() {
  this.box.setFromObject(this.object),
    this.box.size(this.scale),
    this.box.center(this.position)
}
,
THREE.CameraHelper = function(t) {
  function e(t, e, n) {
    i(t, n),
      i(e, n)
  }
  function i(t, e) {
    n.vertices.push(new THREE.Vector3),
      n.colors.push(new THREE.Color(e)),
    void 0 === s[t] && (s[t] = []),
      s[t].push(n.vertices.length - 1)
  }
  var n = new THREE.Geometry
    , r = new THREE.LineBasicMaterial({
    color: 16777215,
    vertexColors: THREE.FaceColors
  })
    , s = {};
  e("n1", "n2", 16755200),
    e("n2", "n4", 16755200),
    e("n4", "n3", 16755200),
    e("n3", "n1", 16755200),
    e("f1", "f2", 16755200),
    e("f2", "f4", 16755200),
    e("f4", "f3", 16755200),
    e("f3", "f1", 16755200),
    e("n1", "f1", 16755200),
    e("n2", "f2", 16755200),
    e("n3", "f3", 16755200),
    e("n4", "f4", 16755200),
    e("p", "n1", 16711680),
    e("p", "n2", 16711680),
    e("p", "n3", 16711680),
    e("p", "n4", 16711680),
    e("u1", "u2", 43775),
    e("u2", "u3", 43775),
    e("u3", "u1", 43775),
    e("c", "t", 16777215),
    e("p", "c", 3355443),
    e("cn1", "cn2", 3355443),
    e("cn3", "cn4", 3355443),
    e("cf1", "cf2", 3355443),
    e("cf3", "cf4", 3355443),
    THREE.Line.call(this, n, r, THREE.LinePieces),
    this.camera = t,
    this.matrixWorld = t.matrixWorld,
    this.matrixAutoUpdate = !1,
    this.pointMap = s,
    this.update()
}
,
THREE.CameraHelper.prototype = Object.create(THREE.Line.prototype),
THREE.CameraHelper.prototype.update = function() {
  var t = new THREE.Vector3
    , e = new THREE.Camera
    , i = new THREE.Projector;
  return function() {
    function n(n, s, o, a) {
      if (t.set(s, o, a),
          i.unprojectVector(t, e),
          n = r.pointMap[n],
        void 0 !== n)
        for (s = 0,
               o = n.length; o > s; s++)
          r.geometry.vertices[n[s]].copy(t)
    }
    var r = this;
    e.projectionMatrix.copy(this.camera.projectionMatrix),
      n("c", 0, 0, -1),
      n("t", 0, 0, 1),
      n("n1", -1, -1, -1),
      n("n2", 1, -1, -1),
      n("n3", -1, 1, -1),
      n("n4", 1, 1, -1),
      n("f1", -1, -1, 1),
      n("f2", 1, -1, 1),
      n("f3", -1, 1, 1),
      n("f4", 1, 1, 1),
      n("u1", .7, 1.1, -1),
      n("u2", -.7, 1.1, -1),
      n("u3", 0, 2, -1),
      n("cf1", -1, 0, 1),
      n("cf2", 1, 0, 1),
      n("cf3", 0, -1, 1),
      n("cf4", 0, 1, 1),
      n("cn1", -1, 0, -1),
      n("cn2", 1, 0, -1),
      n("cn3", 0, -1, -1),
      n("cn4", 0, 1, -1),
      this.geometry.verticesNeedUpdate = !0
  }
}(),
THREE.DirectionalLightHelper = function(t, e) {
  THREE.Object3D.call(this),
    this.light = t,
    this.light.updateMatrixWorld(),
    this.matrixWorld = t.matrixWorld,
    this.matrixAutoUpdate = !1;
  var e = e || 1
    , i = new THREE.PlaneGeometry(e,e)
    , n = new THREE.MeshBasicMaterial({
    wireframe: !0,
    fog: !1
  });
  n.color.copy(this.light.color).multiplyScalar(this.light.intensity),
    this.lightPlane = new THREE.Mesh(i,n),
    this.add(this.lightPlane),
    i = new THREE.Geometry,
    i.vertices.push(new THREE.Vector3),
    i.vertices.push(new THREE.Vector3),
    n = new THREE.LineBasicMaterial({
      fog: !1
    }),
    n.color.copy(this.light.color).multiplyScalar(this.light.intensity),
    this.targetLine = new THREE.Line(i,n),
    this.add(this.targetLine),
    this.update()
}
,
THREE.DirectionalLightHelper.prototype = Object.create(THREE.Object3D.prototype),
THREE.DirectionalLightHelper.prototype.dispose = function() {
  this.lightPlane.geometry.dispose(),
    this.lightPlane.material.dispose(),
    this.targetLine.geometry.dispose(),
    this.targetLine.material.dispose()
}
,
THREE.DirectionalLightHelper.prototype.update = function() {
  var t = new THREE.Vector3
    , e = new THREE.Vector3
    , i = new THREE.Vector3;
  return function() {
    t.setFromMatrixPosition(this.light.matrixWorld),
      e.setFromMatrixPosition(this.light.target.matrixWorld),
      i.subVectors(e, t),
      this.lightPlane.lookAt(i),
      this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),
      this.targetLine.geometry.vertices[1].copy(i),
      this.targetLine.geometry.verticesNeedUpdate = !0,
      this.targetLine.material.color.copy(this.lightPlane.material.color)
  }
}(),
THREE.EdgesHelper = function(t, e) {
  var i = void 0 !== e ? e : 16777215
    , n = [0, 0]
    , r = {}
    , s = function(t, e) {
    return t - e
  }
    , o = ["a", "b", "c"]
    , a = new THREE.BufferGeometry
    , l = t.geometry.clone();
  l.mergeVertices(),
    l.computeFaceNormals();
  for (var h = l.vertices, l = l.faces, c = 0, u = 0, p = l.length; p > u; u++)
    for (var d = l[u], f = 0; 3 > f; f++) {
      n[0] = d[o[f]],
        n[1] = d[o[(f + 1) % 3]],
        n.sort(s);
      var m = n.toString();
      void 0 === r[m] ? (r[m] = {
        vert1: n[0],
        vert2: n[1],
        face1: u,
        face2: void 0
      },
        c++) : r[m].face2 = u
    }
  a.addAttribute("position", Float32Array, 2 * c, 3),
    n = a.attributes.position.array,
    s = 0;
  for (m in r)
    o = r[m],
    (void 0 === o.face2 || .9999 > l[o.face1].normal.dot(l[o.face2].normal)) && (c = h[o.vert1],
      n[s++] = c.x,
      n[s++] = c.y,
      n[s++] = c.z,
      c = h[o.vert2],
      n[s++] = c.x,
      n[s++] = c.y,
      n[s++] = c.z);
  THREE.Line.call(this, a, new THREE.LineBasicMaterial({
    color: i
  }), THREE.LinePieces),
    this.matrixAutoUpdate = !1,
    this.matrixWorld = t.matrixWorld
}
,
THREE.EdgesHelper.prototype = Object.create(THREE.Line.prototype),
THREE.FaceNormalsHelper = function(t, e, i, n) {
  this.object = t,
    this.size = void 0 !== e ? e : 1;
  for (var t = void 0 !== i ? i : 16776960, n = void 0 !== n ? n : 1, e = new THREE.Geometry, i = 0, r = this.object.geometry.faces.length; r > i; i++)
    e.vertices.push(new THREE.Vector3),
      e.vertices.push(new THREE.Vector3);
  THREE.Line.call(this, e, new THREE.LineBasicMaterial({
    color: t,
    linewidth: n
  }), THREE.LinePieces),
    this.matrixAutoUpdate = !1,
    this.normalMatrix = new THREE.Matrix3,
    this.update()
}
,
THREE.FaceNormalsHelper.prototype = Object.create(THREE.Line.prototype),
THREE.FaceNormalsHelper.prototype.update = function() {
  var t = new THREE.Vector3;
  return function() {
    this.object.updateMatrixWorld(!0),
      this.normalMatrix.getNormalMatrix(this.object.matrixWorld);
    for (var e = this.geometry.vertices, i = this.object.geometry.faces, n = this.object.matrixWorld, r = 0, s = i.length; s > r; r++) {
      var o = i[r];
      t.copy(o.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);
      var a = 2 * r;
      e[a].copy(o.centroid).applyMatrix4(n),
        e[a + 1].addVectors(e[a], t)
    }
    return this.geometry.verticesNeedUpdate = !0,
      this
  }
}(),
THREE.GridHelper = function(t, e) {
  var i = new THREE.Geometry
    , n = new THREE.LineBasicMaterial({
    vertexColors: THREE.VertexColors
  });
  this.color1 = new THREE.Color(4473924),
    this.color2 = new THREE.Color(8947848);
  for (var r = -t; t >= r; r += e) {
    i.vertices.push(new THREE.Vector3(-t,0,r), new THREE.Vector3(t,0,r), new THREE.Vector3(r,0,-t), new THREE.Vector3(r,0,t));
    var s = 0 === r ? this.color1 : this.color2;
    i.colors.push(s, s, s, s)
  }
  THREE.Line.call(this, i, n, THREE.LinePieces)
}
,
THREE.GridHelper.prototype = Object.create(THREE.Line.prototype),
THREE.GridHelper.prototype.setColors = function(t, e) {
  this.color1.set(t),
    this.color2.set(e),
    this.geometry.colorsNeedUpdate = !0
}
,
THREE.HemisphereLightHelper = function(t, e) {
  THREE.Object3D.call(this),
    this.light = t,
    this.light.updateMatrixWorld(),
    this.matrixWorld = t.matrixWorld,
    this.matrixAutoUpdate = !1,
    this.colors = [new THREE.Color, new THREE.Color];
  var i = new THREE.SphereGeometry(e,4,2);
  i.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI / 2));
  for (var n = 0; 8 > n; n++)
    i.faces[n].color = this.colors[4 > n ? 0 : 1];
  n = new THREE.MeshBasicMaterial({
    vertexColors: THREE.FaceColors,
    wireframe: !0
  }),
    this.lightSphere = new THREE.Mesh(i,n),
    this.add(this.lightSphere),
    this.update()
}
,
THREE.HemisphereLightHelper.prototype = Object.create(THREE.Object3D.prototype),
THREE.HemisphereLightHelper.prototype.dispose = function() {
  this.lightSphere.geometry.dispose(),
    this.lightSphere.material.dispose()
}
,
THREE.HemisphereLightHelper.prototype.update = function() {
  var t = new THREE.Vector3;
  return function() {
    this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),
      this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),
      this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),
      this.lightSphere.geometry.colorsNeedUpdate = !0
  }
}(),
THREE.PointLightHelper = function(t, e) {
  this.light = t,
    this.light.updateMatrixWorld();
  var i = new THREE.SphereGeometry(e,4,2)
    , n = new THREE.MeshBasicMaterial({
    wireframe: !0,
    fog: !1
  });
  n.color.copy(this.light.color).multiplyScalar(this.light.intensity),
    THREE.Mesh.call(this, i, n),
    this.matrixWorld = this.light.matrixWorld,
    this.matrixAutoUpdate = !1
}
,
THREE.PointLightHelper.prototype = Object.create(THREE.Mesh.prototype),
THREE.PointLightHelper.prototype.dispose = function() {
  this.geometry.dispose(),
    this.material.dispose()
}
,
THREE.PointLightHelper.prototype.update = function() {
  this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
}
,
THREE.SpotLightHelper = function(t) {
  THREE.Object3D.call(this),
    this.light = t,
    this.light.updateMatrixWorld(),
    this.matrixWorld = t.matrixWorld,
    this.matrixAutoUpdate = !1,
    t = new THREE.CylinderGeometry(0,1,1,8,1,!0),
    t.applyMatrix((new THREE.Matrix4).makeTranslation(0, -.5, 0)),
    t.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI / 2));
  var e = new THREE.MeshBasicMaterial({
    wireframe: !0,
    fog: !1
  });
  this.cone = new THREE.Mesh(t,e),
    this.add(this.cone),
    this.update()
}
,
THREE.SpotLightHelper.prototype = Object.create(THREE.Object3D.prototype),
THREE.SpotLightHelper.prototype.dispose = function() {
  this.cone.geometry.dispose(),
    this.cone.material.dispose()
}
,
THREE.SpotLightHelper.prototype.update = function() {
  var t = new THREE.Vector3
    , e = new THREE.Vector3;
  return function() {
    var i = this.light.distance ? this.light.distance : 1e4
      , n = i * Math.tan(this.light.angle);
    this.cone.scale.set(n, n, i),
      t.setFromMatrixPosition(this.light.matrixWorld),
      e.setFromMatrixPosition(this.light.target.matrixWorld),
      this.cone.lookAt(e.sub(t)),
      this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
  }
}(),
THREE.VertexNormalsHelper = function(t, e, i, n) {
  this.object = t,
    this.size = void 0 !== e ? e : 1;
  for (var e = void 0 !== i ? i : 16711680, n = void 0 !== n ? n : 1, i = new THREE.Geometry, t = t.geometry.faces, r = 0, s = t.length; s > r; r++)
    for (var o = 0, a = t[r].vertexNormals.length; a > o; o++)
      i.vertices.push(new THREE.Vector3),
        i.vertices.push(new THREE.Vector3);
  THREE.Line.call(this, i, new THREE.LineBasicMaterial({
    color: e,
    linewidth: n
  }), THREE.LinePieces),
    this.matrixAutoUpdate = !1,
    this.normalMatrix = new THREE.Matrix3,
    this.update()
}
,
THREE.VertexNormalsHelper.prototype = Object.create(THREE.Line.prototype),
THREE.VertexNormalsHelper.prototype.update = function() {
  var t = new THREE.Vector3;
  return function() {
    var e = ["a", "b", "c", "d"];
    this.object.updateMatrixWorld(!0),
      this.normalMatrix.getNormalMatrix(this.object.matrixWorld);
    for (var i = this.geometry.vertices, n = this.object.geometry.vertices, r = this.object.geometry.faces, s = this.object.matrixWorld, o = 0, a = 0, l = r.length; l > a; a++)
      for (var h = r[a], c = 0, u = h.vertexNormals.length; u > c; c++) {
        var p = h.vertexNormals[c];
        i[o].copy(n[h[e[c]]]).applyMatrix4(s),
          t.copy(p).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),
          t.add(i[o]),
          o += 1,
          i[o].copy(t),
          o += 1
      }
    return this.geometry.verticesNeedUpdate = !0,
      this
  }
}(),
THREE.VertexTangentsHelper = function(t, e, i, n) {
  this.object = t,
    this.size = void 0 !== e ? e : 1;
  for (var e = void 0 !== i ? i : 255, n = void 0 !== n ? n : 1, i = new THREE.Geometry, t = t.geometry.faces, r = 0, s = t.length; s > r; r++)
    for (var o = 0, a = t[r].vertexTangents.length; a > o; o++)
      i.vertices.push(new THREE.Vector3),
        i.vertices.push(new THREE.Vector3);
  THREE.Line.call(this, i, new THREE.LineBasicMaterial({
    color: e,
    linewidth: n
  }), THREE.LinePieces),
    this.matrixAutoUpdate = !1,
    this.update()
}
,
THREE.VertexTangentsHelper.prototype = Object.create(THREE.Line.prototype),
THREE.VertexTangentsHelper.prototype.update = function() {
  var t = new THREE.Vector3;
  return function() {
    var e = ["a", "b", "c", "d"];
    this.object.updateMatrixWorld(!0);
    for (var i = this.geometry.vertices, n = this.object.geometry.vertices, r = this.object.geometry.faces, s = this.object.matrixWorld, o = 0, a = 0, l = r.length; l > a; a++)
      for (var h = r[a], c = 0, u = h.vertexTangents.length; u > c; c++) {
        var p = h.vertexTangents[c];
        i[o].copy(n[h[e[c]]]).applyMatrix4(s),
          t.copy(p).transformDirection(s).multiplyScalar(this.size),
          t.add(i[o]),
          o += 1,
          i[o].copy(t),
          o += 1
      }
    return this.geometry.verticesNeedUpdate = !0,
      this
  }
}(),
THREE.WireframeHelper = function(t, e) {
  var i = void 0 !== e ? e : 16777215
    , n = [0, 0]
    , r = {}
    , s = function(t, e) {
    return t - e
  }
    , o = ["a", "b", "c"]
    , a = new THREE.BufferGeometry;
  if (t.geometry instanceof THREE.Geometry) {
    for (var l = t.geometry.vertices, h = t.geometry.faces, c = 0, u = new Uint32Array(6 * h.length), p = 0, d = h.length; d > p; p++)
      for (var f = h[p], m = 0; 3 > m; m++) {
        n[0] = f[o[m]],
          n[1] = f[o[(m + 1) % 3]],
          n.sort(s);
        var g = n.toString();
        void 0 === r[g] && (u[2 * c] = n[0],
          u[2 * c + 1] = n[1],
          r[g] = !0,
          c++)
      }
    for (a.addAttribute("position", Float32Array, 2 * c, 3),
           n = a.attributes.position.array,
           p = 0,
           d = c; d > p; p++)
      for (m = 0; 2 > m; m++)
        c = l[u[2 * p + m]],
          o = 6 * p + 3 * m,
          n[o + 0] = c.x,
          n[o + 1] = c.y,
          n[o + 2] = c.z
  } else if (t.geometry instanceof THREE.BufferGeometry && void 0 !== t.geometry.attributes.index) {
    for (var l = t.geometry.attributes.position.array, d = t.geometry.attributes.index.array, h = t.geometry.offsets, c = 0, u = new Uint32Array(2 * d.length), f = 0, v = h.length; v > f; ++f)
      for (var m = h[f].start, g = h[f].count, o = h[f].index, p = m, y = m + g; y > p; p += 3)
        for (m = 0; 3 > m; m++)
          n[0] = o + d[p + m],
            n[1] = o + d[p + (m + 1) % 3],
            n.sort(s),
            g = n.toString(),
          void 0 === r[g] && (u[2 * c] = n[0],
            u[2 * c + 1] = n[1],
            r[g] = !0,
            c++);
    for (a.addAttribute("position", Float32Array, 2 * c, 3),
           n = a.attributes.position.array,
           p = 0,
           d = c; d > p; p++)
      for (m = 0; 2 > m; m++)
        o = 6 * p + 3 * m,
          c = 3 * u[2 * p + m],
          n[o + 0] = l[c],
          n[o + 1] = l[c + 1],
          n[o + 2] = l[c + 2]
  } else if (t.geometry instanceof THREE.BufferGeometry)
    for (l = t.geometry.attributes.position.array,
           c = l.length / 3,
           u = c / 3,
           a.addAttribute("position", Float32Array, 2 * c, 3),
           n = a.attributes.position.array,
           p = 0,
           d = u; d > p; p++)
      for (m = 0; 3 > m; m++)
        o = 18 * p + 6 * m,
          u = 9 * p + 3 * m,
          n[o + 0] = l[u],
          n[o + 1] = l[u + 1],
          n[o + 2] = l[u + 2],
          c = 9 * p + 3 * ((m + 1) % 3),
          n[o + 3] = l[c],
          n[o + 4] = l[c + 1],
          n[o + 5] = l[c + 2];
  THREE.Line.call(this, a, new THREE.LineBasicMaterial({
    color: i
  }), THREE.LinePieces),
    this.matrixAutoUpdate = !1,
    this.matrixWorld = t.matrixWorld
}
,
THREE.WireframeHelper.prototype = Object.create(THREE.Line.prototype),
THREE.ImmediateRenderObject = function() {
  THREE.Object3D.call(this),
    this.render = function() {}
}
,
THREE.ImmediateRenderObject.prototype = Object.create(THREE.Object3D.prototype),
THREE.LensFlare = function(t, e, i, n, r) {
  THREE.Object3D.call(this),
    this.lensFlares = [],
    this.positionScreen = new THREE.Vector3,
    this.customUpdateCallback = void 0,
  void 0 !== t && this.add(t, e, i, n, r)
}
,
THREE.LensFlare.prototype = Object.create(THREE.Object3D.prototype),
THREE.LensFlare.prototype.add = function(t, e, i, n, r, s) {
  void 0 === e && (e = -1),
  void 0 === i && (i = 0),
  void 0 === s && (s = 1),
  void 0 === r && (r = new THREE.Color(16777215)),
  void 0 === n && (n = THREE.NormalBlending),
    i = Math.min(i, Math.max(0, i)),
    this.lensFlares.push({
      texture: t,
      size: e,
      distance: i,
      x: 0,
      y: 0,
      z: 0,
      scale: 1,
      rotation: 1,
      opacity: s,
      color: r,
      blending: n
    })
}
,
THREE.LensFlare.prototype.updateLensFlares = function() {
  var t, e, i = this.lensFlares.length, n = 2 * -this.positionScreen.x, r = 2 * -this.positionScreen.y;
  for (t = 0; i > t; t++)
    e = this.lensFlares[t],
      e.x = this.positionScreen.x + n * e.distance,
      e.y = this.positionScreen.y + r * e.distance,
      e.wantedRotation = .25 * e.x * Math.PI,
      e.rotation += .25 * (e.wantedRotation - e.rotation)
}
,
THREE.MorphBlendMesh = function(t, e) {
  THREE.Mesh.call(this, t, e),
    this.animationsMap = {},
    this.animationsList = [];
  var i = this.geometry.morphTargets.length;
  this.createAnimation("__default", 0, i - 1, i / 1),
    this.setAnimationWeight("__default", 1)
}
,
THREE.MorphBlendMesh.prototype = Object.create(THREE.Mesh.prototype),
THREE.MorphBlendMesh.prototype.createAnimation = function(t, e, i, n) {
  e = {
    startFrame: e,
    endFrame: i,
    length: i - e + 1,
    fps: n,
    duration: (i - e) / n,
    lastFrame: 0,
    currentFrame: 0,
    active: !1,
    time: 0,
    direction: 1,
    weight: 1,
    directionBackwards: !1,
    mirroredLoop: !1
  },
    this.animationsMap[t] = e,
    this.animationsList.push(e)
}
,
THREE.MorphBlendMesh.prototype.autoCreateAnimations = function(t) {
  for (var e, i = /([a-z]+)(\d+)/, n = {}, r = this.geometry, s = 0, o = r.morphTargets.length; o > s; s++) {
    var a = r.morphTargets[s].name.match(i);
    if (a && 1 < a.length) {
      var l = a[1];
      n[l] || (n[l] = {
        start: 1 / 0,
        end: -1 / 0
      }),
        a = n[l],
      s < a.start && (a.start = s),
      s > a.end && (a.end = s),
      e || (e = l)
    }
  }
  for (l in n)
    a = n[l],
      this.createAnimation(l, a.start, a.end, t);
  this.firstAnimation = e
}
,
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function(t) {
  (t = this.animationsMap[t]) && (t.direction = 1,
    t.directionBackwards = !1)
}
,
THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function(t) {
  (t = this.animationsMap[t]) && (t.direction = -1,
    t.directionBackwards = !0)
}
,
THREE.MorphBlendMesh.prototype.setAnimationFPS = function(t, e) {
  var i = this.animationsMap[t];
  i && (i.fps = e,
    i.duration = (i.end - i.start) / i.fps)
}
,
THREE.MorphBlendMesh.prototype.setAnimationDuration = function(t, e) {
  var i = this.animationsMap[t];
  i && (i.duration = e,
    i.fps = (i.end - i.start) / i.duration)
}
,
THREE.MorphBlendMesh.prototype.setAnimationWeight = function(t, e) {
  var i = this.animationsMap[t];
  i && (i.weight = e)
}
,
THREE.MorphBlendMesh.prototype.setAnimationTime = function(t, e) {
  var i = this.animationsMap[t];
  i && (i.time = e)
}
,
THREE.MorphBlendMesh.prototype.getAnimationTime = function(t) {
  var e = 0;
  return (t = this.animationsMap[t]) && (e = t.time),
    e
}
,
THREE.MorphBlendMesh.prototype.getAnimationDuration = function(t) {
  var e = -1;
  return (t = this.animationsMap[t]) && (e = t.duration),
    e
}
,
THREE.MorphBlendMesh.prototype.playAnimation = function(t) {
  var e = this.animationsMap[t];
  e ? (e.time = 0,
    e.active = !0) : console.warn("animation[" + t + "] undefined")
}
,
THREE.MorphBlendMesh.prototype.stopAnimation = function(t) {
  (t = this.animationsMap[t]) && (t.active = !1)
}
,
THREE.MorphBlendMesh.prototype.update = function(t) {
  for (var e = 0, i = this.animationsList.length; i > e; e++) {
    var n = this.animationsList[e];
    if (n.active) {
      var r = n.duration / n.length;
      n.time += n.direction * t,
        n.mirroredLoop ? (n.time > n.duration || 0 > n.time) && (n.direction *= -1,
        n.time > n.duration && (n.time = n.duration,
          n.directionBackwards = !0),
        0 > n.time && (n.time = 0,
          n.directionBackwards = !1)) : (n.time %= n.duration,
        0 > n.time && (n.time += n.duration));
      var s = n.startFrame + THREE.Math.clamp(Math.floor(n.time / r), 0, n.length - 1)
        , o = n.weight;
      s !== n.currentFrame && (this.morphTargetInfluences[n.lastFrame] = 0,
        this.morphTargetInfluences[n.currentFrame] = 1 * o,
        this.morphTargetInfluences[s] = 0,
        n.lastFrame = n.currentFrame,
        n.currentFrame = s),
        r = n.time % r / r,
      n.directionBackwards && (r = 1 - r),
        this.morphTargetInfluences[n.currentFrame] = r * o,
        this.morphTargetInfluences[n.lastFrame] = (1 - r) * o
    }
  }
}
,
THREE.LensFlarePlugin = function() {
  function t(t, i) {
    var n = e.createProgram()
      , r = e.createShader(e.FRAGMENT_SHADER)
      , s = e.createShader(e.VERTEX_SHADER)
      , o = "precision " + i + " float;\n";
    return e.shaderSource(r, o + t.fragmentShader),
      e.shaderSource(s, o + t.vertexShader),
      e.compileShader(r),
      e.compileShader(s),
      e.attachShader(n, r),
      e.attachShader(n, s),
      e.linkProgram(n),
      n
  }
  var e, i, n, r, s, o, a, l, h, c, u, p, d;
  this.init = function(f) {
    e = f.context,
      i = f,
      n = f.getPrecision(),
      r = new Float32Array(16),
      s = new Uint16Array(6),
      f = 0,
      r[f++] = -1,
      r[f++] = -1,
      r[f++] = 0,
      r[f++] = 0,
      r[f++] = 1,
      r[f++] = -1,
      r[f++] = 1,
      r[f++] = 0,
      r[f++] = 1,
      r[f++] = 1,
      r[f++] = 1,
      r[f++] = 1,
      r[f++] = -1,
      r[f++] = 1,
      r[f++] = 0,
      r[f++] = 1,
      f = 0,
      s[f++] = 0,
      s[f++] = 1,
      s[f++] = 2,
      s[f++] = 0,
      s[f++] = 2,
      s[f++] = 3,
      o = e.createBuffer(),
      a = e.createBuffer(),
      e.bindBuffer(e.ARRAY_BUFFER, o),
      e.bufferData(e.ARRAY_BUFFER, r, e.STATIC_DRAW),
      e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, a),
      e.bufferData(e.ELEMENT_ARRAY_BUFFER, s, e.STATIC_DRAW),
      l = e.createTexture(),
      h = e.createTexture(),
      e.bindTexture(e.TEXTURE_2D, l),
      e.texImage2D(e.TEXTURE_2D, 0, e.RGB, 16, 16, 0, e.RGB, e.UNSIGNED_BYTE, null),
      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.NEAREST),
      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.NEAREST),
      e.bindTexture(e.TEXTURE_2D, h),
      e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, 16, 16, 0, e.RGBA, e.UNSIGNED_BYTE, null),
      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.NEAREST),
      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.NEAREST),
      0 >= e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS) ? (c = !1,
        u = t(THREE.ShaderFlares.lensFlare, n)) : (c = !0,
        u = t(THREE.ShaderFlares.lensFlareVertexTexture, n)),
      p = {},
      d = {},
      p.vertex = e.getAttribLocation(u, "position"),
      p.uv = e.getAttribLocation(u, "uv"),
      d.renderType = e.getUniformLocation(u, "renderType"),
      d.map = e.getUniformLocation(u, "map"),
      d.occlusionMap = e.getUniformLocation(u, "occlusionMap"),
      d.opacity = e.getUniformLocation(u, "opacity"),
      d.color = e.getUniformLocation(u, "color"),
      d.scale = e.getUniformLocation(u, "scale"),
      d.rotation = e.getUniformLocation(u, "rotation"),
      d.screenPosition = e.getUniformLocation(u, "screenPosition")
  }
    ,
    this.render = function(t, n, r, s) {
      var t = t.__webglFlares
        , f = t.length;
      if (f) {
        var m = new THREE.Vector3
          , g = s / r
          , v = .5 * r
          , y = .5 * s
          , E = 16 / s
          , T = new THREE.Vector2(E * g,E)
          , x = new THREE.Vector3(1,1,0)
          , b = new THREE.Vector2(1,1)
          , w = d
          , E = p;
        e.useProgram(u),
          e.enableVertexAttribArray(p.vertex),
          e.enableVertexAttribArray(p.uv),
          e.uniform1i(w.occlusionMap, 0),
          e.uniform1i(w.map, 1),
          e.bindBuffer(e.ARRAY_BUFFER, o),
          e.vertexAttribPointer(E.vertex, 2, e.FLOAT, !1, 16, 0),
          e.vertexAttribPointer(E.uv, 2, e.FLOAT, !1, 16, 8),
          e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, a),
          e.disable(e.CULL_FACE),
          e.depthMask(!1);
        var _, R, S, H, M;
        for (_ = 0; f > _; _++)
          if (E = 16 / s,
              T.set(E * g, E),
              H = t[_],
              m.set(H.matrixWorld.elements[12], H.matrixWorld.elements[13], H.matrixWorld.elements[14]),
              m.applyMatrix4(n.matrixWorldInverse),
              m.applyProjection(n.projectionMatrix),
              x.copy(m),
              b.x = x.x * v + v,
              b.y = x.y * y + y,
            c || 0 < b.x && b.x < r && 0 < b.y && b.y < s)
            for (e.activeTexture(e.TEXTURE1),
                   e.bindTexture(e.TEXTURE_2D, l),
                   e.copyTexImage2D(e.TEXTURE_2D, 0, e.RGB, b.x - 8, b.y - 8, 16, 16, 0),
                   e.uniform1i(w.renderType, 0),
                   e.uniform2f(w.scale, T.x, T.y),
                   e.uniform3f(w.screenPosition, x.x, x.y, x.z),
                   e.disable(e.BLEND),
                   e.enable(e.DEPTH_TEST),
                   e.drawElements(e.TRIANGLES, 6, e.UNSIGNED_SHORT, 0),
                   e.activeTexture(e.TEXTURE0),
                   e.bindTexture(e.TEXTURE_2D, h),
                   e.copyTexImage2D(e.TEXTURE_2D, 0, e.RGBA, b.x - 8, b.y - 8, 16, 16, 0),
                   e.uniform1i(w.renderType, 1),
                   e.disable(e.DEPTH_TEST),
                   e.activeTexture(e.TEXTURE1),
                   e.bindTexture(e.TEXTURE_2D, l),
                   e.drawElements(e.TRIANGLES, 6, e.UNSIGNED_SHORT, 0),
                   H.positionScreen.copy(x),
                   H.customUpdateCallback ? H.customUpdateCallback(H) : H.updateLensFlares(),
                   e.uniform1i(w.renderType, 2),
                   e.enable(e.BLEND),
                   R = 0,
                   S = H.lensFlares.length; S > R; R++)
              M = H.lensFlares[R],
              .001 < M.opacity && .001 < M.scale && (x.x = M.x,
                x.y = M.y,
                x.z = M.z,
                E = M.size * M.scale / s,
                T.x = E * g,
                T.y = E,
                e.uniform3f(w.screenPosition, x.x, x.y, x.z),
                e.uniform2f(w.scale, T.x, T.y),
                e.uniform1f(w.rotation, M.rotation),
                e.uniform1f(w.opacity, M.opacity),
                e.uniform3f(w.color, M.color.r, M.color.g, M.color.b),
                i.setBlending(M.blending, M.blendEquation, M.blendSrc, M.blendDst),
                i.setTexture(M.texture, 1),
                e.drawElements(e.TRIANGLES, 6, e.UNSIGNED_SHORT, 0));
        e.enable(e.CULL_FACE),
          e.enable(e.DEPTH_TEST),
          e.depthMask(!0)
      }
    }
}
,
THREE.ShadowMapPlugin = function() {
  var t, e, i, n, r, s, o = new THREE.Frustum, a = new THREE.Matrix4, l = new THREE.Vector3, h = new THREE.Vector3, c = new THREE.Vector3;
  this.init = function(o) {
    t = o.context,
      e = o;
    var o = THREE.ShaderLib.depthRGBA
      , a = THREE.UniformsUtils.clone(o.uniforms);
    i = new THREE.ShaderMaterial({
      fragmentShader: o.fragmentShader,
      vertexShader: o.vertexShader,
      uniforms: a
    }),
      n = new THREE.ShaderMaterial({
        fragmentShader: o.fragmentShader,
        vertexShader: o.vertexShader,
        uniforms: a,
        morphTargets: !0
      }),
      r = new THREE.ShaderMaterial({
        fragmentShader: o.fragmentShader,
        vertexShader: o.vertexShader,
        uniforms: a,
        skinning: !0
      }),
      s = new THREE.ShaderMaterial({
        fragmentShader: o.fragmentShader,
        vertexShader: o.vertexShader,
        uniforms: a,
        morphTargets: !0,
        skinning: !0
      }),
      i._shadowPass = !0,
      n._shadowPass = !0,
      r._shadowPass = !0,
      s._shadowPass = !0
  }
    ,
    this.render = function(t, i) {
      e.shadowMapEnabled && e.shadowMapAutoUpdate && this.update(t, i)
    }
    ,
    this.update = function(u, p) {
      var d, f, m, g, v, y, E, T, x, b = [];
      for (g = 0,
             t.clearColor(1, 1, 1, 1),
             t.disable(t.BLEND),
             t.enable(t.CULL_FACE),
             t.frontFace(t.CCW),
             t.cullFace(e.shadowMapCullFace === THREE.CullFaceFront ? t.FRONT : t.BACK),
             e.setDepthTest(!0),
             d = 0,
             f = u.__lights.length; f > d; d++)
        if (m = u.__lights[d],
            m.castShadow)
          if (m instanceof THREE.DirectionalLight && m.shadowCascade)
            for (v = 0; v < m.shadowCascadeCount; v++) {
              var w;
              if (m.shadowCascadeArray[v])
                w = m.shadowCascadeArray[v];
              else {
                x = m,
                  E = v,
                  w = new THREE.DirectionalLight,
                  w.isVirtual = !0,
                  w.onlyShadow = !0,
                  w.castShadow = !0,
                  w.shadowCameraNear = x.shadowCameraNear,
                  w.shadowCameraFar = x.shadowCameraFar,
                  w.shadowCameraLeft = x.shadowCameraLeft,
                  w.shadowCameraRight = x.shadowCameraRight,
                  w.shadowCameraBottom = x.shadowCameraBottom,
                  w.shadowCameraTop = x.shadowCameraTop,
                  w.shadowCameraVisible = x.shadowCameraVisible,
                  w.shadowDarkness = x.shadowDarkness,
                  w.shadowBias = x.shadowCascadeBias[E],
                  w.shadowMapWidth = x.shadowCascadeWidth[E],
                  w.shadowMapHeight = x.shadowCascadeHeight[E],
                  w.pointsWorld = [],
                  w.pointsFrustum = [],
                  T = w.pointsWorld,
                  y = w.pointsFrustum;
                for (var _ = 0; 8 > _; _++)
                  T[_] = new THREE.Vector3,
                    y[_] = new THREE.Vector3;
                T = x.shadowCascadeNearZ[E],
                  x = x.shadowCascadeFarZ[E],
                  y[0].set(-1, -1, T),
                  y[1].set(1, -1, T),
                  y[2].set(-1, 1, T),
                  y[3].set(1, 1, T),
                  y[4].set(-1, -1, x),
                  y[5].set(1, -1, x),
                  y[6].set(-1, 1, x),
                  y[7].set(1, 1, x),
                  w.originalCamera = p,
                  y = new THREE.Gyroscope,
                  y.position = m.shadowCascadeOffset,
                  y.add(w),
                  y.add(w.target),
                  p.add(y),
                  m.shadowCascadeArray[v] = w,
                  console.log("Created virtualLight", w)
              }
              E = m,
                T = v,
                x = E.shadowCascadeArray[T],
                x.position.copy(E.position),
                x.target.position.copy(E.target.position),
                x.lookAt(x.target),
                x.shadowCameraVisible = E.shadowCameraVisible,
                x.shadowDarkness = E.shadowDarkness,
                x.shadowBias = E.shadowCascadeBias[T],
                y = E.shadowCascadeNearZ[T],
                E = E.shadowCascadeFarZ[T],
                x = x.pointsFrustum,
                x[0].z = y,
                x[1].z = y,
                x[2].z = y,
                x[3].z = y,
                x[4].z = E,
                x[5].z = E,
                x[6].z = E,
                x[7].z = E,
                b[g] = w,
                g++
            }
          else
            b[g] = m,
              g++;
      for (d = 0,
             f = b.length; f > d; d++) {
        if (m = b[d],
          m.shadowMap || (v = THREE.LinearFilter,
          e.shadowMapType === THREE.PCFSoftShadowMap && (v = THREE.NearestFilter),
            m.shadowMap = new THREE.WebGLRenderTarget(m.shadowMapWidth,m.shadowMapHeight,{
              minFilter: v,
              magFilter: v,
              format: THREE.RGBAFormat
            }),
            m.shadowMapSize = new THREE.Vector2(m.shadowMapWidth,m.shadowMapHeight),
            m.shadowMatrix = new THREE.Matrix4),
            !m.shadowCamera) {
          if (m instanceof THREE.SpotLight)
            m.shadowCamera = new THREE.PerspectiveCamera(m.shadowCameraFov,m.shadowMapWidth / m.shadowMapHeight,m.shadowCameraNear,m.shadowCameraFar);
          else {
            if (!(m instanceof THREE.DirectionalLight)) {
              console.error("Unsupported light type for shadow");
              continue
            }
            m.shadowCamera = new THREE.OrthographicCamera(m.shadowCameraLeft,m.shadowCameraRight,m.shadowCameraTop,m.shadowCameraBottom,m.shadowCameraNear,m.shadowCameraFar)
          }
          u.add(m.shadowCamera),
          !0 === u.autoUpdate && u.updateMatrixWorld()
        }
        if (m.shadowCameraVisible && !m.cameraHelper && (m.cameraHelper = new THREE.CameraHelper(m.shadowCamera),
            m.shadowCamera.add(m.cameraHelper)),
          m.isVirtual && w.originalCamera == p) {
          for (v = p,
                 g = m.shadowCamera,
                 y = m.pointsFrustum,
                 x = m.pointsWorld,
                 l.set(1 / 0, 1 / 0, 1 / 0),
                 h.set(-1 / 0, -1 / 0, -1 / 0),
                 E = 0; 8 > E; E++)
            T = x[E],
              T.copy(y[E]),
              THREE.ShadowMapPlugin.__projector.unprojectVector(T, v),
              T.applyMatrix4(g.matrixWorldInverse),
            T.x < l.x && (l.x = T.x),
            T.x > h.x && (h.x = T.x),
            T.y < l.y && (l.y = T.y),
            T.y > h.y && (h.y = T.y),
            T.z < l.z && (l.z = T.z),
            T.z > h.z && (h.z = T.z);
          g.left = l.x,
            g.right = h.x,
            g.top = h.y,
            g.bottom = l.y,
            g.updateProjectionMatrix()
        }
        for (g = m.shadowMap,
               y = m.shadowMatrix,
               v = m.shadowCamera,
               v.position.setFromMatrixPosition(m.matrixWorld),
               c.setFromMatrixPosition(m.target.matrixWorld),
               v.lookAt(c),
               v.updateMatrixWorld(),
               v.matrixWorldInverse.getInverse(v.matrixWorld),
             m.cameraHelper && (m.cameraHelper.visible = m.shadowCameraVisible),
             m.shadowCameraVisible && m.cameraHelper.update(),
               y.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1),
               y.multiply(v.projectionMatrix),
               y.multiply(v.matrixWorldInverse),
               a.multiplyMatrices(v.projectionMatrix, v.matrixWorldInverse),
               o.setFromMatrix(a),
               e.setRenderTarget(g),
               e.clear(),
               x = u.__webglObjects,
               m = 0,
               g = x.length; g > m; m++)
          E = x[m],
            y = E.object,
            E.render = !1,
          !y.visible || !y.castShadow || (y instanceof THREE.Mesh || y instanceof THREE.ParticleSystem) && y.frustumCulled && !o.intersectsObject(y) || (y._modelViewMatrix.multiplyMatrices(v.matrixWorldInverse, y.matrixWorld),
            E.render = !0);
        for (m = 0,
               g = x.length; g > m; m++)
          E = x[m],
          E.render && (y = E.object,
            E = E.buffer,
            _ = y.material instanceof THREE.MeshFaceMaterial ? y.material.materials[0] : y.material,
            T = 0 < y.geometry.morphTargets.length && _.morphTargets,
            _ = y instanceof THREE.SkinnedMesh && _.skinning,
            T = y.customDepthMaterial ? y.customDepthMaterial : _ ? T ? s : r : T ? n : i,
            E instanceof THREE.BufferGeometry ? e.renderBufferDirect(v, u.__lights, null, T, E, y) : e.renderBuffer(v, u.__lights, null, T, E, y));
        for (x = u.__webglObjectsImmediate,
               m = 0,
               g = x.length; g > m; m++)
          E = x[m],
            y = E.object,
          y.visible && y.castShadow && (y._modelViewMatrix.multiplyMatrices(v.matrixWorldInverse, y.matrixWorld),
            e.renderImmediateObject(v, u.__lights, null, i, y))
      }
      d = e.getClearColor(),
        f = e.getClearAlpha(),
        t.clearColor(d.r, d.g, d.b, f),
        t.enable(t.BLEND),
      e.shadowMapCullFace === THREE.CullFaceFront && t.cullFace(t.BACK)
    }
}
,
THREE.ShadowMapPlugin.__projector = new THREE.Projector,
THREE.SpritePlugin = function() {
  function t(t, e) {
    return t.z !== e.z ? e.z - t.z : e.id - t.id
  }
  var e, i, n, r, s, o, a, l, h, c, u, p, d, f, m, g, v, y, E, T, x, b, w, _, R;
  this.init = function(t) {
    y = t.context,
      E = t,
      x = new Float32Array([-.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1]),
      b = new Uint16Array([0, 1, 2, 0, 2, 3]),
      w = y.createBuffer(),
      _ = y.createBuffer(),
      y.bindBuffer(y.ARRAY_BUFFER, w),
      y.bufferData(y.ARRAY_BUFFER, x, y.STATIC_DRAW),
      y.bindBuffer(y.ELEMENT_ARRAY_BUFFER, _),
      y.bufferData(y.ELEMENT_ARRAY_BUFFER, b, y.STATIC_DRAW);
    var t = y.createProgram()
      , S = y.createShader(y.VERTEX_SHADER)
      , H = y.createShader(y.FRAGMENT_SHADER);
    y.shaderSource(S, ["precision " + E.getPrecision() + " float;", "uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),
      y.shaderSource(H, ["precision " + E.getPrecision() + " float;", "uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),
      y.compileShader(S),
      y.compileShader(H),
      y.attachShader(t, S),
      y.attachShader(t, H),
      y.linkProgram(t),
      R = t,
      g = y.getAttribLocation(R, "position"),
      v = y.getAttribLocation(R, "uv"),
      e = y.getUniformLocation(R, "uvOffset"),
      i = y.getUniformLocation(R, "uvScale"),
      n = y.getUniformLocation(R, "rotation"),
      r = y.getUniformLocation(R, "scale"),
      s = y.getUniformLocation(R, "color"),
      o = y.getUniformLocation(R, "map"),
      a = y.getUniformLocation(R, "opacity"),
      l = y.getUniformLocation(R, "modelViewMatrix"),
      h = y.getUniformLocation(R, "projectionMatrix"),
      c = y.getUniformLocation(R, "fogType"),
      u = y.getUniformLocation(R, "fogDensity"),
      p = y.getUniformLocation(R, "fogNear"),
      d = y.getUniformLocation(R, "fogFar"),
      f = y.getUniformLocation(R, "fogColor"),
      m = y.getUniformLocation(R, "alphaTest"),
      t = document.createElement("canvas"),
      t.width = 8,
      t.height = 8,
      S = t.getContext("2d"),
      S.fillStyle = "#ffffff",
      S.fillRect(0, 0, t.width, t.height),
      T = new THREE.Texture(t),
      T.needsUpdate = !0
  }
    ,
    this.render = function(x, b) {
      var S = x.__webglSprites
        , H = S.length;
      if (H) {
        y.useProgram(R),
          y.enableVertexAttribArray(g),
          y.enableVertexAttribArray(v),
          y.disable(y.CULL_FACE),
          y.enable(y.BLEND),
          y.bindBuffer(y.ARRAY_BUFFER, w),
          y.vertexAttribPointer(g, 2, y.FLOAT, !1, 16, 0),
          y.vertexAttribPointer(v, 2, y.FLOAT, !1, 16, 8),
          y.bindBuffer(y.ELEMENT_ARRAY_BUFFER, _),
          y.uniformMatrix4fv(h, !1, b.projectionMatrix.elements),
          y.activeTexture(y.TEXTURE0),
          y.uniform1i(o, 0);
        var M = 0
          , C = 0
          , P = x.fog;
        P ? (y.uniform3f(f, P.color.r, P.color.g, P.color.b),
          P instanceof THREE.Fog ? (y.uniform1f(p, P.near),
            y.uniform1f(d, P.far),
            y.uniform1i(c, 1),
            C = M = 1) : P instanceof THREE.FogExp2 && (y.uniform1f(u, P.density),
            y.uniform1i(c, 2),
            C = M = 2)) : (y.uniform1i(c, 0),
          C = M = 0);
        for (var A, L, D = [], P = 0; H > P; P++)
          A = S[P],
          !1 !== A.visible && (A._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse, A.matrixWorld),
            A.z = -A._modelViewMatrix.elements[14]);
        for (S.sort(t),
               P = 0; H > P; P++)
          A = S[P],
          !1 !== A.visible && (L = A.material,
            y.uniform1f(m, L.alphaTest),
            y.uniformMatrix4fv(l, !1, A._modelViewMatrix.elements),
            D[0] = A.scale.x,
            D[1] = A.scale.y,
            A = x.fog && L.fog ? C : 0,
          M !== A && (y.uniform1i(c, A),
            M = A),
            null !== L.map ? (y.uniform2f(e, L.map.offset.x, L.map.offset.y),
              y.uniform2f(i, L.map.repeat.x, L.map.repeat.y)) : (y.uniform2f(e, 0, 0),
              y.uniform2f(i, 1, 1)),
            y.uniform1f(a, L.opacity),
            y.uniform3f(s, L.color.r, L.color.g, L.color.b),
            y.uniform1f(n, L.rotation),
            y.uniform2fv(r, D),
            E.setBlending(L.blending, L.blendEquation, L.blendSrc, L.blendDst),
            E.setDepthTest(L.depthTest),
            E.setDepthWrite(L.depthWrite),
            L.map && L.map.image && L.map.image.width ? E.setTexture(L.map, 0) : E.setTexture(T, 0),
            y.drawElements(y.TRIANGLES, 6, y.UNSIGNED_SHORT, 0));
        y.enable(y.CULL_FACE)
      }
    }
}
,
THREE.DepthPassPlugin = function() {
  this.enabled = !1,
    this.renderTarget = null;
  var t, e, i, n, r, s, o = new THREE.Frustum, a = new THREE.Matrix4;
  this.init = function(o) {
    t = o.context,
      e = o;
    var o = THREE.ShaderLib.depthRGBA
      , a = THREE.UniformsUtils.clone(o.uniforms);
    i = new THREE.ShaderMaterial({
      fragmentShader: o.fragmentShader,
      vertexShader: o.vertexShader,
      uniforms: a
    }),
      n = new THREE.ShaderMaterial({
        fragmentShader: o.fragmentShader,
        vertexShader: o.vertexShader,
        uniforms: a,
        morphTargets: !0
      }),
      r = new THREE.ShaderMaterial({
        fragmentShader: o.fragmentShader,
        vertexShader: o.vertexShader,
        uniforms: a,
        skinning: !0
      }),
      s = new THREE.ShaderMaterial({
        fragmentShader: o.fragmentShader,
        vertexShader: o.vertexShader,
        uniforms: a,
        morphTargets: !0,
        skinning: !0
      }),
      i._shadowPass = !0,
      n._shadowPass = !0,
      r._shadowPass = !0,
      s._shadowPass = !0
  }
    ,
    this.render = function(t, e) {
      this.enabled && this.update(t, e)
    }
    ,
    this.update = function(l, h) {
      var c, u, p, d, f, m;
      for (t.clearColor(1, 1, 1, 1),
             t.disable(t.BLEND),
             e.setDepthTest(!0),
           !0 === l.autoUpdate && l.updateMatrixWorld(),
             h.matrixWorldInverse.getInverse(h.matrixWorld),
             a.multiplyMatrices(h.projectionMatrix, h.matrixWorldInverse),
             o.setFromMatrix(a),
             e.setRenderTarget(this.renderTarget),
             e.clear(),
             m = l.__webglObjects,
             c = 0,
             u = m.length; u > c; c++)
        p = m[c],
          f = p.object,
          p.render = !1,
        !f.visible || (f instanceof THREE.Mesh || f instanceof THREE.ParticleSystem) && f.frustumCulled && !o.intersectsObject(f) || (f._modelViewMatrix.multiplyMatrices(h.matrixWorldInverse, f.matrixWorld),
          p.render = !0);
      var g;
      for (c = 0,
             u = m.length; u > c; c++)
        p = m[c],
        !p.render || (f = p.object,
          p = p.buffer,
        f instanceof THREE.ParticleSystem && !f.customDepthMaterial) || ((g = f.material instanceof THREE.MeshFaceMaterial ? f.material.materials[0] : f.material) && e.setMaterialFaces(f.material),
          d = 0 < f.geometry.morphTargets.length && g.morphTargets,
          g = f instanceof THREE.SkinnedMesh && g.skinning,
          d = f.customDepthMaterial ? f.customDepthMaterial : g ? d ? s : r : d ? n : i,
          p instanceof THREE.BufferGeometry ? e.renderBufferDirect(h, l.__lights, null, d, p, f) : e.renderBuffer(h, l.__lights, null, d, p, f));
      for (m = l.__webglObjectsImmediate,
             c = 0,
             u = m.length; u > c; c++)
        p = m[c],
          f = p.object,
        f.visible && (f._modelViewMatrix.multiplyMatrices(h.matrixWorldInverse, f.matrixWorld),
          e.renderImmediateObject(h, l.__lights, null, i, f));
      c = e.getClearColor(),
        u = e.getClearAlpha(),
        t.clearColor(c.r, c.g, c.b, u),
        t.enable(t.BLEND)
    }
}
,
THREE.ShaderFlares = {
  lensFlareVertexTexture: {
    vertexShader: "uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
    fragmentShader: "uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"
  },
  lensFlare: {
    vertexShader: "uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
    fragmentShader: "precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"
  }
},
function() {
  var t = [].slice;
  null == this.ParticleSaga && (this.ParticleSaga = {}),
    ParticleSaga.Utils = function() {
      function e() {}
      return e.extend = function() {
        var e, i, n, r, s, o, a;
        for (r = arguments[0],
               n = 2 <= arguments.length ? t.call(arguments, 1) : [],
               o = 0,
               a = n.length; a > o; o++) {
          i = n[o];
          for (e in i)
            s = i[e],
              r[e] = s
        }
      }
        ,
        e
    }()
}
  .call(this),
function() {
  null == this.ParticleSaga && (this.ParticleSaga = {}),
    ParticleSaga.VertexSort = {
      topToBottom: function() {
        return function(t, e) {
          return t.y < e.y ? 1 : t.y > e.y ? -1 : 0
        }
      }(this),
      bottomToTop: function() {
        return function(t, e) {
          return t.y < e.y ? -1 : t.y > e.y ? 1 : 0
        }
      }(this),
      leftToRight: function() {
        return function(t, e) {
          return t.x < e.x ? -1 : t.x > e.x ? 1 : 0
        }
      }(this),
      rightToLeft: function() {
        return function(t, e) {
          return t.x < e.x ? 1 : t.x > e.x ? -1 : 0
        }
      }(this),
      backToFront: function() {
        return function(t, e) {
          return t.z < e.z ? -1 : t.z > e.z ? 1 : 0
        }
      }(this),
      frontToBack: function() {
        return function(t, e) {
          return t.z < e.z ? 1 : t.z > e.z ? -1 : 0
        }
      }(this),
      randomish: function() {
        return function() {
          var t;
          return t = Math.random(),
            .33 > t ? 1 : .66 > t ? -1 : 0
        }
      }(this)
    }
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ParticleSaga && (this.ParticleSaga = {}),
    ParticleSaga.ParticlePool = function() {
      function e(e) {
        this.setRotationX = t(this.setRotationX, this),
          this.getRotationX = t(this.getRotationX, this),
          this.setRotationY = t(this.setRotationY, this),
          this.getRotationY = t(this.getRotationY, this),
          this.morph = t(this.morph, this),
          this.nextIndexForPool = t(this.nextIndexForPool, this),
          this.makeRandomVertex = t(this.makeRandomVertex, this),
          this.getParticles = t(this.getParticles, this),
          this.createParticles = t(this.createParticles, this),
          this.resize = t(this.resize, this),
          this.setTarget = t(this.setTarget, this),
          this.destroy = t(this.destroy, this),
          this.particles,
          this.respondingToMouse = !1,
          this.morphing = !1,
          this.morphStartTime,
          this.currentTargetIndex,
          this.targets = [],
          this.halfW = 0,
          this.halfH = 0,
          this.halfZ = 0,
          this.opts = {
            numFloatingParticles: 40,
            numParticles: 1e4,
            particleRevertDelay: .008,
            revertDuration: 1e3,
            sizeAttenuation: !0
          },
          ParticleSaga.Utils.extend(this.opts, e)
      }
      return e.prototype.init = function() {
        return this.createParticles()
      }
        ,
        e.prototype.destroy = function() {
          return this.particles.geometry.dispose(),
            this.particles.material.dispose(),
            this.particles = null,
            this.opts = null
        }
        ,
        e.prototype.setTarget = function(t, e) {
          var i, n, r, s, o, a, l, h, c, u;
          for (null == e && (e = !0),
                 t = t.clone(),
                 this.particles.material.size = t.material.size,
                 u = this.particles.geometry.vertices,
                 r = h = 0,
                 c = u.length; c > h; r = ++h)
            l = u[r],
              n = e ? this.opts.revertDuration : 0,
              l.userData.morph.duration = n,
              l.userData.morph.delay = r * this.opts.particleRevertDelay,
              l.userData.prevV = l.clone(),
              l.userData.prevC = this.particles.geometry.colors[r].clone(),
              o = this.nextIndexForPool(r, t),
              s = t.geometry.vertices[o],
              l.userData.nextV = s.clone(),
            l.userData.alwaysFloating && (a = this.makeRandomVertex(),
              l.userData.nextV.set(a.x, a.y, a.z)),
              i = s.userData.color,
            i || (i.r = i.b = i.g = 0),
              l.userData.nextC.setRGB(i.r, i.g, i.b);
          return this.morphStartTime = new Date,
            this.morphing = !0
        }
        ,
        e.prototype.resize = function(t, e, i) {
          this.halfW = t,
            this.halfH = e,
            this.halfZ = i
        }
        ,
        e.prototype.createParticles = function() {
          var t, e, i, n, r, s, o;
          for (e = new THREE.Geometry,
               this.opts.numFloatingParticles > 0 && (t = Math.floor(this.opts.numParticles / this.opts.numFloatingParticles)),
                 i = s = 0,
                 o = this.opts.numParticles; o > s; i = s += 1)
            e.vertices.push(new THREE.Vector3(0,0,0)),
            null != t && (n = i % t === 0),
              e.vertices[i].userData = {
                alwaysFloating: n,
                prevV: e.vertices[i].clone(),
                nextV: e.vertices[i].clone(),
                prevC: new THREE.Color(1,1,1),
                nextC: new THREE.Color(1,1,1),
                morph: {
                  delay: 0,
                  duration: 0
                }
              },
              e.colors.push(new THREE.Color(1,1,1));
          var a = null;
          if (this.opts.respondsToScroll) {
            var l = document.createElement("canvas");
            l.width = 100,
              l.height = 100;
            var h = l.getContext("2d");
            h.beginPath(),
              h.arc(50, 50, 50, 0, 2 * Math.PI, !0),
              h.closePath(),
              h.fillStyle = "rgba(250,250,250,.75)",
              h.fill(),
              a = new THREE.Texture(l),
              a.needsUpdate = !0
          }
          return r = new THREE.ParticleBasicMaterial({
            vertexColors: !0,
            transparent: !0,
            depthTest: !1,
            map: a,
            sizeAttenuation: this.opts.sizeAttenuation
          }),
            this.particles = new THREE.ParticleSystem(e,r),
            this.particles.sortParticles = !1
        }
        ,
        e.prototype.getParticles = function() {
          return this.particles
        }
        ,
        e.prototype.makeRandomVertex = function() {
          var t;
          return t = new THREE.Vector3(0,0,0),
            t.x = 2 * Math.random() * this.halfW - this.halfW,
            t.y = 2 * Math.random() * this.halfH - this.halfH,
            t.z = 2 * Math.random() * this.halfZ / 3 - this.halfZ / 3,
            t
        }
        ,
        e.prototype.nextIndexForPool = function(t, e) {
          var i, n;
          return i = e.geometry.vertices.length,
            n = i / this.opts.numParticles,
            Math.floor(t * n)
        }
        ,
        e.prototype.morph = function() {
          var t, e, i, n, r, s, o, a, l, h, c, u, p, d, f;
          for (s = new Date,
                 i = s - this.morphStartTime,
                 e = !0,
                 f = this.particles.geometry.vertices,
                 r = p = 0,
                 d = f.length; d > p; r = ++p)
            l = f[r],
              o = 1,
            l.userData.morph.duration > 0 && (o = Math.max(0, i - l.userData.morph.delay),
              o = Math.min(1, o / l.userData.morph.duration),
              o = 1 - --o * o * o * o),
              a = l.userData.prevC.r + o * (l.userData.nextC.r - l.userData.prevC.r),
              n = l.userData.prevC.g + o * (l.userData.nextC.g - l.userData.prevC.g),
              t = l.userData.prevC.b + o * (l.userData.nextC.b - l.userData.prevC.b),
              this.particles.geometry.colors[r].setRGB(a, n, t),
              h = l.userData.prevV.x + o * (l.userData.nextV.x - l.userData.prevV.x),
              c = l.userData.prevV.y + o * (l.userData.nextV.y - l.userData.prevV.y),
              u = l.userData.prevV.z + o * (l.userData.nextV.z - l.userData.prevV.z),
              l.set(h, c, u),
            1 > o && (e = !1);
          return e && (this.morphing = !1),
            this.particles.geometry.verticesNeedUpdate = !0,
            this.particles.geometry.colorsNeedUpdate = !0
        }
        ,
        e.prototype.getRotationY = function() {
          return this.particles.rotation.y
        }
        ,
        e.prototype.setRotationY = function(t) {
          return this.particles.rotation.y = t
        }
        ,
        e.prototype.getRotationX = function() {
          return this.particles.rotation.x
        }
        ,
        e.prototype.setRotationX = function(t) {
          return this.particles.rotation.x = t
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ParticleSaga && (this.ParticleSaga = {}),
    ParticleSaga.Scene = function() {
      function e(e, i, n) {
        this.context = null != e ? e : document.body,
          this.targetData = null != i ? i : [],
          this.setSceneScrollRotation = t(this.setSceneScrollRotation, this),
          this.updateSceneScrollRotation = t(this.updateSceneScrollRotation, this),
          this.setSceneMouseRotation = t(this.setSceneMouseRotation, this),
          this.onMouseMove = t(this.onMouseMove, this),
          this.render = t(this.render, this),
          this.setupPool = t(this.setupPool, this),
          this.onTargetsReady = t(this.onTargetsReady, this),
          this.onTargetLoad = t(this.onTargetLoad, this),
          this.loadTarget = t(this.loadTarget, this),
          this.load = t(this.load, this),
          this.setupScene = t(this.setupScene, this),
          this.animate = t(this.animate, this),
          this.stop = t(this.stop, this),
          this.resize = t(this.resize, this),
          this.stopSlideshow = t(this.stopSlideshow, this),
          this.startSlideshow = t(this.startSlideshow, this),
          this.resetSlideshow = t(this.resetSlideshow, this),
          this.prevTarget = t(this.prevTarget, this),
          this.nextTarget = t(this.nextTarget, this),
          this.setTarget = t(this.setTarget, this),
          this.destroy = t(this.destroy, this),
          this.camera,
          this.scene,
          this.renderer,
          this.raf,
          this.pool,
          this.respondingToMouse = !1,
          this.sceneReady = !1,
          this.numTargetsLoaded = 0,
          this.currentTargetIndex,
          this.targets = [],
          this.halfW = this.context.offsetWidth / 2,
          this.halfH = this.context.offsetHeight / 2,
          this.mouseX = 0,
          this.destinationSceneRotationY = 0,
          this.destinationSceneRotationX = 0,
          this.dirty = !0,
          this.slideshowInterval = null,
          this.onAssetsLoad = null,
          this.opts = {
            fov: 45,
            maxMouseRotation: Math.PI / 6,
            mouseRotationFriction: .2,
            scrollRotationFriction: .9,
            numFloatingParticles: 40,
            numParticles: 1e4,
            particleRevertDelay: .01,
            revertDuration: 800,
            sizeAttenuation: !0,
            slideshowDuration: 5e3,
            sort: null,
            respondsToScroll: !1
          },
          ParticleSaga.Utils.extend(this.opts, n),
          document.addEventListener("mousemove", this.onMouseMove),
          this.setupScene()
      }
      return e.prototype.destroy = function() {
        var t, e, i, n, r, s, o;
        for (this.stop(),
               window.removeEventListener("resize", this.resize),
               document.removeEventListener("mousemove", this.onMouseMove),
               t = i = s = this.scene.children.length - 1; i >= 0; t = i += -1)
          this.scene.children[t].geometry.dispose(),
            this.scene.children[t].material.dispose(),
            this.scene.remove(this.scene.children[t]);
        for (o = this.targets,
               n = 0,
               r = o.length; r > n; n++)
          e = o[n],
            e.destroy();
        return this.renderer = null,
          this.scene = null,
          this.camera = null,
          this.pool.destroy(),
          this.pool = null,
          this.targets = null,
          this.opts = null
      }
        ,
        e.prototype.setTarget = function(t, e) {
          var i;
          return null == e && (e = !0),
            this.currentTargetIndex = t,
            this.sceneReady && "undefined" != typeof this.currentTargetIndex ? (this.targets[this.currentTargetIndex].opts.respondsToMouse ? (this.respondingToMouse = !0,
              this.setSceneMouseRotation(this.mouseX)) : (this.respondingToMouse = !1,
              this.setSceneMouseRotation(this.halfW)),
              i = this.targets[t].getParticles(),
              this.pool.setTarget(i, e)) : void 0
        }
        ,
        e.prototype.nextTarget = function(t) {
          var e;
          return null == t && (t = !0),
            this.resetSlideshow(),
            e = this.currentTargetIndex,
            e++,
          e >= this.targets.length && (e = 0),
            this.setTarget(e, t)
        }
        ,
        e.prototype.prevTarget = function(t) {
          var e;
          return null == t && (t = !0),
            this.resetSlideshow(),
            e = this.currentTargetIndex,
            e--,
          0 > e && (e = this.targets.length - 1),
            this.setTarget(e, t)
        }
        ,
        e.prototype.resetSlideshow = function() {
          return null != this.slideshowInterval ? this.startSlideshow() : void 0
        }
        ,
        e.prototype.startSlideshow = function() {
          return clearInterval(this.slideshowInterval),
            this.slideshowInterval = setInterval(this.nextTarget, this.opts.slideshowDuration)
        }
        ,
        e.prototype.stopSlideshow = function() {
          return clearInterval(this.slideshowInterval),
            this.slideshowInterval = null
        }
        ,
        e.prototype.resize = function() {
          var t, e, i, n, r;
          for (this.dirty = !0,
                 this.halfW = this.context.offsetWidth / 2,
                 this.halfH = this.context.offsetHeight / 2,
                 this.camera.aspect = 2 * this.halfW / (2 * this.halfH),
                 this.camera.updateProjectionMatrix(),
                 this.camera.position.z = 2 * this.halfH / (2 * Math.tan(this.opts.fov / 2 * (Math.PI / 180))),
                 this.renderer.setSize(2 * this.halfW, 2 * this.halfH),
                 this.pool.resize(this.halfW, this.halfH, this.camera.position.z),
                 r = this.targets,
                 t = i = 0,
                 n = r.length; n > i; t = ++i)
            e = r[t],
              e.resize();
          return this.setTarget(this.currentTargetIndex, !1)
        }
        ,
        e.prototype.stop = function() {
          return cancelAnimationFrame(this.raf)
        }
        ,
        e.prototype.animate = function() {
          return this.sceneReady ? (this.raf = requestAnimationFrame(this.animate),
            this.render()) : void 0
        }
        ,
        e.prototype.setupScene = function() {
          return this.camera = new THREE.PerspectiveCamera(this.opts.fov,this.halfW / this.halfH,1,2e3),
            this.camera.position.z = 2 * this.halfH / (2 * Math.tan(this.opts.fov / 2 * (Math.PI / 180))),
            this.scene = new THREE.Scene,
            this.renderer = new THREE.WebGLRenderer({
              antialias: !0,
              alpha: !0
            }),
            this.renderer.setClearColor(0, 0),
            this.renderer.setSize(2 * this.halfW, 2 * this.halfH),
            this.context.appendChild(this.renderer.domElement)
        }
        ,
        e.prototype.load = function(t) {
          var e, i, n, r, s;
          for (this.onAssetsLoad = t,
                 r = this.targetData,
                 s = [],
                 i = 0,
                 n = r.length; n > i; i++)
            e = r[i],
              s.push(this.loadTarget(e, this.onTargetLoad));
          return s
        }
        ,
        e.prototype.loadTarget = function(t, e) {
          var i;
          return null == t.container && (t.container = this.context),
          null == t.options && (t.options = {}),
          t.type !== ParticleSaga.ModelTarget && (t.options.numParticles = this.opts.numParticles),
            t.options.sort = this.opts.sort,
            i = new t.type(t,t.options),
            this.targets.push(i),
            i.init(),
            i.load(e),
            this.resetSlideshow()
        }
        ,
        e.prototype.onTargetLoad = function() {
          return this.numTargetsLoaded++,
            this.numTargetsLoaded > 0 && this.numTargetsLoaded === this.targetData.length ? this.onTargetsReady() : void 0
        }
        ,
        e.prototype.onTargetsReady = function() {
          return this.setupPool(),
            window.addEventListener("resize", this.resize),
            this.animate(),
            "function" == typeof this.onAssetsLoad ? this.onAssetsLoad() : void 0
        }
        ,
        e.prototype.setupPool = function() {
          return this.pool = new ParticleSaga.ParticlePool(this.opts),
            this.pool.resize(this.halfW, this.halfH, this.camera.position.z),
            this.pool.init(),
            this.scene.add(this.pool.getParticles()),
            this.sceneReady = !0,
            null != this.currentTargetIndex ? this.setTarget(this.currentTargetIndex) : void 0
        }
        ,
        e.prototype.render = function() {
          var t;
          return t = this.pool.getRotationY(),
            this.setSceneMouseRotation(this.mouseX),
          this.opts.respondsToScroll && this.updateSceneScrollRotation(),
          (t !== this.pool.getRotationY() || this.pool.morphing) && (this.dirty = !0),
          this.pool.morphing && this.pool.morph(),
            this.dirty ? (this.dirty = !1,
              this.renderer.render(this.scene, this.camera)) : void 0
        }
        ,
        e.prototype.onMouseMove = function(t) {
          return this.mouseX = t.clientX
        }
        ,
        e.prototype.setSceneMouseRotation = function(t) {
          var e, i, n, r;
          return this.destinationSceneRotationY = 0,
            r = this.pool.getRotationY(),
          this.halfW > 0 && this.respondingToMouse && (i = (t - this.halfW) / this.halfW,
            this.destinationSceneRotationY = this.opts.maxMouseRotation * i),
            .01 > Math.abs(r - this.destinationSceneRotationY) ? this.pool.setRotationY(this.destinationSceneRotationY) : (e = this.destinationSceneRotationY - r,
              n = r + this.opts.mouseRotationFriction * e,
              this.pool.setRotationY(n))
        }
        ,
        e.prototype.updateSceneScrollRotation = function() {
          var t, e, i;
          return i = this.pool.getRotationX(),
            t = this.destinationSceneRotationX - i,
            .01 > Math.abs(t) ? (this.pool.setRotationX(this.destinationSceneRotationX),
              0 !== t ? this.dirty = !0 : void 0) : (e = i + this.opts.scrollRotationFriction * t,
              this.pool.setRotationX(e),
              this.dirty = !0)
        }
        ,
        e.prototype.setSceneScrollRotation = function(t) {
          return this.destinationSceneRotationX = t
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ParticleSaga && (this.ParticleSaga = {}),
    ParticleSaga.AbstractTarget = function() {
      function e(e) {
        this.targetData = e,
          this.getParticles = t(this.getParticles, this),
          this.resize = t(this.resize, this),
          this.destroy = t(this.destroy, this),
          this.onLoad = t(this.onLoad, this),
          this.load = t(this.load, this),
          this.init = t(this.init, this),
          this.onLoadCallback
      }
      return e.prototype.init = function() {}
        ,
        e.prototype.load = function(t) {
          return this.onLoadCallback = t
        }
        ,
        e.prototype.onLoad = function() {
          return null != this.onLoadCallback ? this.onLoadCallback() : void 0
        }
        ,
        e.prototype.destroy = function() {
          return null != this.particles ? (this.particles.geometry.dispose(),
            this.particles.material.dispose(),
            this.particles = null) : void 0
        }
        ,
        e.prototype.resize = function() {}
        ,
        e.prototype.getParticles = function() {
          return null
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ParticleSaga && (this.ParticleSaga = {}),
    ParticleSaga.ImageTarget = function(e) {
      function n(e, i) {
        this.targetData = e,
          this.getParticles = t(this.getParticles, this),
          this.scalevertex = t(this.scalevertex, this),
          this.centerVertex = t(this.centerVertex, this),
          this.getVertexForPixelDataOffset = t(this.getVertexForPixelDataOffset, this),
          this.randomVertexInImage = t(this.randomVertexInImage, this),
          this.getImageDataFromImg = t(this.getImageDataFromImg, this),
          this.processImage = t(this.processImage, this),
          this.onLoad = t(this.onLoad, this),
          this.load = t(this.load, this),
          this.updateParticlePositions = t(this.updateParticlePositions, this),
          this.updatePositionAdjustments = t(this.updatePositionAdjustments, this),
          this.resize = t(this.resize, this),
          this.init = t(this.init, this),
          n.__super__.constructor.call(this, this.targetData, i),
          this.particles,
          this.container = this.targetData.container,
          this.validPixelArrayOffsets = [],
          this.maxW = 0,
          this.maxH = 0,
          this.offsetX = 0,
          this.offsetY = 0,
          this.imageData,
          this.aspectFillImageScaleX = 1,
          this.aspectFillImageScaleY = 1,
          this.opts = {
            numParticles: 1e4,
            respondsToMouse: !1,
            size: 1,
            sort: null
          },
          ParticleSaga.Utils.extend(this.opts, i)
      }
      return i(n, e),
        n.prototype.init = function() {
          return this.resize()
        }
        ,
        n.prototype.resize = function() {
          return this.maxW = this.container.offsetWidth,
            this.maxH = this.container.offsetHeight,
            this.imageData && (this.updatePositionAdjustments(),
              this.particles) ? this.updateParticlePositions() : void 0
        }
        ,
        n.prototype.updatePositionAdjustments = function() {
          var t, e, i, n;
          return n = this.maxW,
            t = this.maxH,
            i = this.maxW / this.maxH,
            e = this.imageData.width / this.imageData.height,
            i > e ? (n = this.maxW,
              t = n / e) : (t = this.maxH,
              n = t * e),
            this.aspectFillImageScaleX = n / this.imageData.width,
            this.aspectFillImageScaleY = t / this.imageData.height,
            this.offsetX = (this.maxW - this.imageData.width) / 2,
            this.offsetY = -(this.maxH - this.imageData.height) / 2
        }
        ,
        n.prototype.updateParticlePositions = function() {
          var t, e, i, n, r, s;
          for (r = this.particles.geometry.vertices,
                 s = [],
                 i = 0,
                 n = r.length; n > i; i++)
            e = r[i],
              t = this.getVertexForPixelDataOffset(e.userData.pixelOffset),
              e.x = t.x,
              e.y = t.y,
              s.push(e.z = t.z);
          return s
        }
        ,
        n.prototype.load = function(t) {
          var e;
          return n.__super__.load.call(this, t),
            e = new THREE.ImageLoader,
            e.load(this.targetData.url, this.onLoad)
        }
        ,
        n.prototype.onLoad = function(t) {
          return this.processImage(t),
            n.__super__.onLoad.call(this)
        }
        ,
        n.prototype.processImage = function(t) {
          var e, i, n, r, s, o, a, l;
          for (this.imageData = this.getImageDataFromImg(t),
                 this.updatePositionAdjustments(),
                 i = s = 3,
                 a = this.imageData.data.length; a > s; i = s += 4)
            this.imageData.data[i] > 0 && this.validPixelArrayOffsets.push(i - 3);
          for (e = new THREE.Geometry,
                 i = o = 0,
                 l = this.opts.numParticles; l > o; i = o += 1)
            r = this.randomVertexInImage(),
              e.vertices.push(r);
          return null != this.opts.sort && e.vertices.sort(this.opts.sort),
            n = new THREE.ParticleSystemMaterial({
              size: this.opts.size
            }),
            this.particles = new THREE.ParticleSystem(e,n)
        }
        ,
        n.prototype.getImageDataFromImg = function(t) {
          var e, i;
          return e = document.createElement("canvas"),
            e.width = t.width,
            e.height = t.height,
            i = e.getContext("2d"),
            i.drawImage(t, 0, 0),
            i.getImageData(0, 0, t.width, t.height)
        }
        ,
        n.prototype.randomVertexInImage = function() {
          var t, e, i;
          return e = Math.floor(Math.random() * this.validPixelArrayOffsets.length),
            t = this.validPixelArrayOffsets[e],
            i = this.getVertexForPixelDataOffset(t)
        }
        ,
        n.prototype.getVertexForPixelDataOffset = function(t) {
          var e, i, n, r, s, o, a;
          return r = this.imageData.data[t],
            n = this.imageData.data[t + 1],
            e = this.imageData.data[t + 2],
            i = 4 * this.imageData.width,
            o = Math.ceil(t % i / 4),
            a = Math.ceil(t / i),
            s = new THREE.Vector3(o,a,0),
            s.userData = {
              color: {
                r: r / 255,
                g: n / 255,
                b: e / 255
              },
              pixelOffset: t
            },
            this.centerVertex(s),
            this.scalevertex(s),
            s
        }
        ,
        n.prototype.centerVertex = function(t) {
          return t.x -= this.maxW / 2,
            t.y = -t.y + this.maxH / 2,
            t.x += this.offsetX,
            t.y += this.offsetY
        }
        ,
        n.prototype.scalevertex = function(t) {
          return t.x *= this.aspectFillImageScaleX,
            t.y *= this.aspectFillImageScaleY
        }
        ,
        n.prototype.getParticles = function() {
          return this.particles
        }
        ,
        n
    }(ParticleSaga.AbstractTarget)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ParticleSaga && (this.ParticleSaga = {}),
    ParticleSaga.ModelTarget = function(e) {
      function n(e, i) {
        this.targetData = e,
          this.getParticles = t(this.getParticles, this),
          this.processGeometry = t(this.processGeometry, this),
          this.onLoad = t(this.onLoad, this),
          this.load = t(this.load, this),
          n.__super__.constructor.call(this, this.targetData, i),
          this.particles,
          this.container = this.targetData.container,
          this.opts = {
            color: {
              r: 1,
              g: 1,
              b: 1
            },
            initialMatrices: [],
            respondsToMouse: !1,
            scale: 1,
            size: 1,
            sort: null
          },
          ParticleSaga.Utils.extend(this.opts, i)
      }
      return i(n, e),
        n.prototype.load = function(t) {
          var e, i, r, s, o, a;
          if (n.__super__.load.call(this, t),
            null != this.targetData.preloadedVertices) {
            for (e = new THREE.Geometry,
                   s = this.targetData.preloadedVertices,
                   i = o = 0,
                   a = s.length; a > o; i = o += 3)
              e.vertices.push(new THREE.Vector3(s[i],s[i + 1],s[i + 2]));
            return this.onLoad(e)
          }
          return r = new THREE.JSONLoader,
            r.load(this.targetData.url, this.onLoad)
        }
        ,
        n.prototype.onLoad = function(t) {
          return this.processGeometry(t),
            n.__super__.onLoad.call(this)
        }
        ,
        n.prototype.processGeometry = function(t) {
          var e, i, n, r, s, o, a, l, h;
          for (t.mergeVertices(),
                 l = t.vertices,
                 r = 0,
                 o = l.length; o > r; r++)
            n = l[r],
              n.userData = {
                color: this.opts.color
              };
          for (h = this.opts.initialMatrices,
                 s = 0,
                 a = h.length; a > s; s++)
            i = h[s],
              t.applyMatrix(i);
          return t.applyMatrix((new THREE.Matrix4).makeScale(this.opts.scale, this.opts.scale, this.opts.scale)),
          null != this.opts.sort && t.vertices.sort(this.opts.sort),
            e = new THREE.ParticleSystemMaterial({
              size: this.opts.size
            }),
            this.particles = new THREE.ParticleSystem(t,e)
        }
        ,
        n.prototype.getParticles = function() {
          return this.particles
        }
        ,
        n
    }(ParticleSaga.AbstractTarget)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ParticleSaga && (this.ParticleSaga = {}),
    ParticleSaga.MultiTarget = function(e) {
      function n(e, i) {
        this.targetData = e,
          this.getParticles = t(this.getParticles, this),
          this.resize = t(this.resize, this),
          this.getTargetOffsets = t(this.getTargetOffsets, this),
          this.prepareParticles = t(this.prepareParticles, this),
          this.onTargetLoad = t(this.onTargetLoad, this),
          this.load = t(this.load, this),
          n.__super__.constructor.call(this, this.targetData, i),
          this.targets = [],
          this.particles,
          this.container = this.targetData.container,
          this.numTargetsLoaded = 0,
          this.opts = {
            color: {
              r: 1,
              g: 1,
              b: 1
            },
            respondsToMouse: !1,
            size: 1,
            sort: null
          },
          ParticleSaga.Utils.extend(this.opts, i)
      }
      return i(n, e),
        n.prototype.load = function(t) {
          var e, i, r, s, o, a, l;
          for (n.__super__.load.call(this, t),
                 a = this.targetData.targets,
                 l = [],
                 e = s = 0,
                 o = a.length; o > s; e = ++s)
            r = a[e],
            null == r.container && (r.container = this.container),
            null == r.options && (r.options = r.options || {}),
            r.type !== ParticleSaga.ModelTarget && (r.options.numParticles = this.opts.numParticles),
              i = {},
              ParticleSaga.Utils.extend(i, this.opts),
              ParticleSaga.Utils.extend(i, r.options),
              this.targets.push(new r.type(r,i)),
              this.targets[e].init(),
              l.push(this.targets[e].load(this.onTargetLoad));
          return l
        }
        ,
        n.prototype.onTargetLoad = function() {
          return this.numTargetsLoaded++,
            this.numTargetsLoaded > 0 && this.numTargetsLoaded === this.targetData.targets.length ? (this.resize(),
              this.onLoad()) : void 0
        }
        ,
        n.prototype.prepareParticles = function() {
          var t, e, i, n, r, s, o, a, l, h, c, u, p, d, f, m;
          for (t = new THREE.Geometry,
                 f = this.targets,
                 e = c = 0,
                 p = f.length; p > c; e = ++c)
            for (n = f[e],
                   r = this.targetData.targets[e],
                   s = this.getTargetOffsets(r),
                   o = n.getParticles(),
                   m = o.geometry.vertices,
                   u = 0,
                   d = m.length; d > u; u++)
              h = m[u],
                a = h.userData,
                l = h.clone(),
                l.userData = h.userData,
                l.x += s.x,
                l.y += s.y,
                t.vertices.push(l);
          return null != this.opts.sort && t.vertices.sort(this.opts.sort),
            i = new THREE.ParticleSystemMaterial({
              size: this.opts.size
            }),
            this.particles = new THREE.ParticleSystem(t,i)
        }
        ,
        n.prototype.getTargetOffsets = function(t) {
          var e, i, n, r, s, o;
          return n = 0,
            i = 0,
            r = 0,
            n = this.container.offsetWidth / 2,
            i = this.container.offsetHeight / 2,
            e = t.container,
            s = e.offsetLeft + .5 * e.offsetWidth - n,
            o = i - (e.offsetTop + r + .5 * e.offsetHeight),
            {
              x: s,
              y: o
            }
        }
        ,
        n.prototype.resize = function() {
          return this.prepareParticles()
        }
        ,
        n.prototype.getParticles = function() {
          return this.particles
        }
        ,
        n
    }(ParticleSaga.AbstractTarget)
}
  .call(this),
function(t, e, i, n) {
  "use strict";
  function r(e, i) {
    this.element = e,
      this.$context = t(e).data("api", this),
      this.$layers = this.$context.find(".layer");
    var n = {
      calibrateX: this.$context.data("calibrate-x") || null,
      calibrateY: this.$context.data("calibrate-y") || null,
      invertX: this.$context.data("invert-x") || null,
      invertY: this.$context.data("invert-y") || null,
      limitX: parseFloat(this.$context.data("limit-x")) || null,
      limitY: parseFloat(this.$context.data("limit-y")) || null,
      scalarX: parseFloat(this.$context.data("scalar-x")) || null,
      scalarY: parseFloat(this.$context.data("scalar-y")) || null,
      frictionX: parseFloat(this.$context.data("friction-x")) || null,
      frictionY: parseFloat(this.$context.data("friction-y")) || null,
      originX: parseFloat(this.$context.data("origin-x")) || null,
      originY: parseFloat(this.$context.data("origin-y")) || null
    };
    for (var r in n)
      null === n[r] && delete n[r];
    t.extend(this, a, i, n),
      this.calibrationTimer = null,
      this.calibrationFlag = !0,
      this.enabled = !1,
      this.depths = [],
      this.raf = null,
      this.bounds = null,
      this.ex = 0,
      this.ey = 0,
      this.ew = 0,
      this.eh = 0,
      this.ecx = 0,
      this.ecy = 0,
      this.erx = 0,
      this.ery = 0,
      this.cx = 0,
      this.cy = 0,
      this.ix = 0,
      this.iy = 0,
      this.mx = 0,
      this.my = 0,
      this.vx = 0,
      this.vy = 0,
      this.onMouseMove = this.onMouseMove.bind(this),
      this.onDeviceOrientation = this.onDeviceOrientation.bind(this),
      this.onOrientationTimer = this.onOrientationTimer.bind(this),
      this.onCalibrationTimer = this.onCalibrationTimer.bind(this),
      this.onAnimationFrame = this.onAnimationFrame.bind(this),
      this.onWindowResize = this.onWindowResize.bind(this),
      this.initialise()
  }
  var s = "parallax"
    , o = 30
    , a = {
    relativeInput: !1,
    clipRelativeInput: !1,
    calibrationThreshold: 100,
    calibrationDelay: 500,
    supportDelay: 500,
    calibrateX: !1,
    calibrateY: !0,
    invertX: !0,
    invertY: !0,
    limitX: !1,
    limitY: !1,
    scalarX: 10,
    scalarY: 10,
    frictionX: .1,
    frictionY: .1,
    originX: .5,
    originY: .5
  };
  r.prototype.transformSupport = function(t) {
    for (var r = i.createElement("div"), s = !1, o = null, a = !1, l = null, h = null, c = 0, u = this.vendors.length; u > c; c++)
      if (null !== this.vendors[c] ? (l = this.vendors[c][0] + "transform",
          h = this.vendors[c][1] + "Transform") : (l = "transform",
          h = "transform"),
        r.style[h] !== n) {
        s = !0;
        break
      }
    switch (t) {
      case "2D":
        a = s;
        break;
      case "3D":
        if (s) {
          var p = i.body || i.createElement("body")
            , d = i.documentElement
            , f = d.style.overflow;
          i.body || (d.style.overflow = "hidden",
            d.appendChild(p),
            p.style.overflow = "hidden",
            p.style.background = ""),
            p.appendChild(r),
            r.style[h] = "translate3d(1px,1px,1px)",
            o = e.getComputedStyle(r).getPropertyValue(l),
            a = o !== n && o.length > 0 && "none" !== o,
            d.style.overflow = f,
            p.removeChild(r)
        }
    }
    return a
  }
    ,
    r.prototype.ww = null,
    r.prototype.wh = null,
    r.prototype.wcx = null,
    r.prototype.wcy = null,
    r.prototype.wrx = null,
    r.prototype.wry = null,
    r.prototype.portrait = null,
    r.prototype.desktop = !navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i),
    r.prototype.vendors = [null, ["-webkit-", "webkit"], ["-moz-", "Moz"], ["-o-", "O"], ["-ms-", "ms"]],
    r.prototype.motionSupport = !!e.DeviceMotionEvent,
    r.prototype.orientationSupport = !!e.DeviceOrientationEvent,
    r.prototype.orientationStatus = 0,
    r.prototype.transform2DSupport = r.prototype.transformSupport("2D"),
    r.prototype.transform3DSupport = r.prototype.transformSupport("3D"),
    r.prototype.propertyCache = {},
    r.prototype.initialise = function() {
      "static" === this.$context.css("position") && this.$context.css({
        position: "relative"
      }),
        this.accelerate(this.$context),
        this.updateLayers(),
        this.updateDimensions(),
        this.enable(),
        this.queueCalibration(this.calibrationDelay)
    }
    ,
    r.prototype.updateLayers = function() {
      this.$layers = this.$context.find(".layer"),
        this.depths = [],
        this.$layers.css({
          position: "absolute",
          display: "block",
          left: 0,
          top: 0
        }),
        this.$layers.first().css({
          position: "relative"
        }),
        this.accelerate(this.$layers),
        this.$layers.each(t.proxy(function(e, i) {
          this.depths.push(t(i).data("depth") || 0)
        }, this))
    }
    ,
    r.prototype.updateDimensions = function() {
      this.ww = e.innerWidth,
        this.wh = e.innerHeight,
        this.wcx = this.ww * this.originX,
        this.wcy = this.wh * this.originY,
        this.wrx = Math.max(this.wcx, this.ww - this.wcx),
        this.wry = Math.max(this.wcy, this.wh - this.wcy)
    }
    ,
    r.prototype.updateBounds = function() {
      this.bounds = this.element.getBoundingClientRect(),
        this.ex = this.bounds.left,
        this.ey = this.bounds.top,
        this.ew = this.bounds.width,
        this.eh = this.bounds.height,
        this.ecx = this.ew * this.originX,
        this.ecy = this.eh * this.originY,
        this.erx = Math.max(this.ecx, this.ew - this.ecx),
        this.ery = Math.max(this.ecy, this.eh - this.ecy)
    }
    ,
    r.prototype.queueCalibration = function(t) {
      clearTimeout(this.calibrationTimer),
        this.calibrationTimer = setTimeout(this.onCalibrationTimer, t)
    }
    ,
    r.prototype.enable = function() {
      this.enabled || (this.enabled = !0,
        this.orientationSupport ? (this.portrait = null,
          e.addEventListener("deviceorientation", this.onDeviceOrientation),
          setTimeout(this.onOrientationTimer, this.supportDelay)) : (this.cx = 0,
          this.cy = 0,
          this.portrait = !1,
          e.addEventListener("mousemove", this.onMouseMove)),
        e.addEventListener("resize", this.onWindowResize),
        this.raf = requestAnimationFrame(this.onAnimationFrame))
    }
    ,
    r.prototype.disable = function() {
      this.enabled && (this.enabled = !1,
        this.orientationSupport ? e.removeEventListener("deviceorientation", this.onDeviceOrientation) : e.removeEventListener("mousemove", this.onMouseMove),
        e.removeEventListener("resize", this.onWindowResize),
        cancelAnimationFrame(this.raf))
    }
    ,
    r.prototype.calibrate = function(t, e) {
      this.calibrateX = t === n ? this.calibrateX : t,
        this.calibrateY = e === n ? this.calibrateY : e
    }
    ,
    r.prototype.invert = function(t, e) {
      this.invertX = t === n ? this.invertX : t,
        this.invertY = e === n ? this.invertY : e
    }
    ,
    r.prototype.friction = function(t, e) {
      this.frictionX = t === n ? this.frictionX : t,
        this.frictionY = e === n ? this.frictionY : e
    }
    ,
    r.prototype.scalar = function(t, e) {
      this.scalarX = t === n ? this.scalarX : t,
        this.scalarY = e === n ? this.scalarY : e
    }
    ,
    r.prototype.limit = function(t, e) {
      this.limitX = t === n ? this.limitX : t,
        this.limitY = e === n ? this.limitY : e
    }
    ,
    r.prototype.origin = function(t, e) {
      this.originX = t === n ? this.originX : t,
        this.originY = e === n ? this.originY : e
    }
    ,
    r.prototype.clamp = function(t, e, i) {
      return t = Math.max(t, e),
        t = Math.min(t, i)
    }
    ,
    r.prototype.css = function(e, i, r) {
      var s = this.propertyCache[i];
      if (!s)
        for (var o = 0, a = this.vendors.length; a > o; o++)
          if (s = null !== this.vendors[o] ? t.camelCase(this.vendors[o][1] + "-" + i) : i,
            e.style[s] !== n) {
            this.propertyCache[i] = s;
            break
          }
      e.style[s] = r
    }
    ,
    r.prototype.accelerate = function(t) {
      for (var e = 0, i = t.length; i > e; e++) {
        var n = t[e];
        this.css(n, "transform", "translate3d(0,0,0)"),
          this.css(n, "transform-style", "preserve-3d"),
          this.css(n, "backface-visibility", "hidden")
      }
    }
    ,
    r.prototype.setPosition = function(t, e, i) {
      e += "px",
        i += "px",
        this.transform3DSupport ? this.css(t, "transform", "translate3d(" + e + "," + i + ",0)") : this.transform2DSupport ? this.css(t, "transform", "translate(" + e + "," + i + ")") : (t.style.left = e,
          t.style.top = i)
    }
    ,
    r.prototype.onOrientationTimer = function() {
      this.orientationSupport && 0 === this.orientationStatus && (this.disable(),
        this.orientationSupport = !1,
        this.enable())
    }
    ,
    r.prototype.onCalibrationTimer = function() {
      this.calibrationFlag = !0
    }
    ,
    r.prototype.onWindowResize = function() {
      this.updateDimensions()
    }
    ,
    r.prototype.onAnimationFrame = function() {
      this.updateBounds();
      var t = this.ix - this.cx
        , e = this.iy - this.cy;
      (Math.abs(t) > this.calibrationThreshold || Math.abs(e) > this.calibrationThreshold) && this.queueCalibration(0),
        this.portrait ? (this.mx = this.calibrateX ? e : this.iy,
          this.my = this.calibrateY ? t : this.ix) : (this.mx = this.calibrateX ? t : this.ix,
          this.my = this.calibrateY ? e : this.iy),
        this.mx *= this.ew * (this.scalarX / 100),
        this.my *= this.eh * (this.scalarY / 100),
      isNaN(parseFloat(this.limitX)) || (this.mx = this.clamp(this.mx, -this.limitX, this.limitX)),
      isNaN(parseFloat(this.limitY)) || (this.my = this.clamp(this.my, -this.limitY, this.limitY)),
        this.vx += (this.mx - this.vx) * this.frictionX,
        this.vy += (this.my - this.vy) * this.frictionY;
      for (var i = 0, n = this.$layers.length; n > i; i++) {
        var r = this.depths[i]
          , s = this.$layers[i]
          , o = this.vx * r * (this.invertX ? -1 : 1)
          , a = this.vy * r * (this.invertY ? -1 : 1);
        this.setPosition(s, o, a)
      }
      this.raf = requestAnimationFrame(this.onAnimationFrame)
    }
    ,
    r.prototype.onDeviceOrientation = function(t) {
      if (!this.desktop && null !== t.beta && null !== t.gamma) {
        this.orientationStatus = 1;
        var i = (t.beta || 0) / o
          , n = (t.gamma || 0) / o
          , r = e.innerHeight > e.innerWidth;
        this.portrait !== r && (this.portrait = r,
          this.calibrationFlag = !0),
        this.calibrationFlag && (this.calibrationFlag = !1,
          this.cx = i,
          this.cy = n),
          this.ix = i,
          this.iy = n
      }
    }
    ,
    r.prototype.onMouseMove = function(t) {
      var e = t.clientX
        , i = t.clientY;
      !this.orientationSupport && this.relativeInput ? (this.clipRelativeInput && (e = Math.max(e, this.ex),
        e = Math.min(e, this.ex + this.ew),
        i = Math.max(i, this.ey),
        i = Math.min(i, this.ey + this.eh)),
        this.ix = (e - this.ex - this.ecx) / this.erx,
        this.iy = (i - this.ey - this.ecy) / this.ery) : (this.ix = (e - this.wcx) / this.wrx,
        this.iy = (i - this.wcy) / this.wry)
    }
  ;
  var l = {
    enable: r.prototype.enable,
    disable: r.prototype.disable,
    updateLayers: r.prototype.updateLayers,
    calibrate: r.prototype.calibrate,
    friction: r.prototype.friction,
    invert: r.prototype.invert,
    scalar: r.prototype.scalar,
    limit: r.prototype.limit,
    origin: r.prototype.origin
  };
  t.fn[s] = function(e) {
    var i = arguments;
    return this.each(function() {
      var n = t(this)
        , o = n.data(s);
      o || (o = new r(this,e),
        n.data(s, o)),
      l[e] && o[e].apply(o, Array.prototype.slice.call(i, 1))
    })
  }
}(window.jQuery || window.Zepto, window, document),
function(t, e, i) {
  "function" == typeof define && define.amd ? define(["jquery"], function(n) {
    return i(n, t, e),
      n.mobile
  }) : i(t.jQuery, t, e)
}(this, document, function(t, e, i) {
  !function(t, e, i, n) {
    function r(t) {
      for (; t && "undefined" != typeof t.originalEvent; )
        t = t.originalEvent;
      return t
    }
    function s(e, i) {
      var s, o, a, l, h, c, u, p, d, f = e.type;
      if (e = t.Event(e),
          e.type = i,
          s = e.originalEvent,
          o = t.event.props,
        f.search(/^(mouse|click)/) > -1 && (o = P),
          s)
        for (u = o.length,
               l; u; )
          l = o[--u],
            e[l] = s[l];
      if (f.search(/mouse(down|up)|click/) > -1 && !e.which && (e.which = 1),
        -1 !== f.search(/^touch/) && (a = r(s),
          f = a.touches,
          h = a.changedTouches,
          c = f && f.length ? f[0] : h && h.length ? h[0] : n,
          c))
        for (p = 0,
               d = M.length; d > p; p++)
          l = M[p],
            e[l] = c[l];
      return e
    }
    function o(e) {
      for (var i, n, r = {}; e; ) {
        i = t.data(e, R);
        for (n in i)
          i[n] && (r[n] = r.hasVirtualBinding = !0);
        e = e.parentNode
      }
      return r
    }
    function a(e, i) {
      for (var n; e; ) {
        if (n = t.data(e, R),
          n && (!i || n[i]))
          return e;
        e = e.parentNode
      }
      return null
    }
    function l() {
      F = !1
    }
    function h() {
      F = !0
    }
    function c() {
      U = 0,
        O.length = 0,
        z = !1,
        h()
    }
    function u() {
      l()
    }
    function p() {
      d(),
        L = setTimeout(function() {
          L = 0,
            c()
        }, t.vmouse.resetTimerDuration)
    }
    function d() {
      L && (clearTimeout(L),
        L = 0)
    }
    function f(e, i, n) {
      var r;
      return (n && n[e] || !n && a(i.target, e)) && (r = s(i, e),
        t(i.target).trigger(r)),
        r
    }
    function m(e) {
      var i, n = t.data(e.target, S);
      !z && (!U || U !== n) && (i = f("v" + e.type, e),
      i && (i.isDefaultPrevented() && e.preventDefault(),
      i.isPropagationStopped() && e.stopPropagation(),
      i.isImmediatePropagationStopped() && e.stopImmediatePropagation()))
    }
    function g(e) {
      var i, n, s, a = r(e).touches;
      a && 1 === a.length && (i = e.target,
        n = o(i),
      n.hasVirtualBinding && (U = V++,
        t.data(i, S, U),
        d(),
        u(),
        I = !1,
        s = r(e).touches[0],
        D = s.pageX,
        k = s.pageY,
        f("vmouseover", e, n),
        f("vmousedown", e, n)))
    }
    function v(t) {
      F || (I || f("vmousecancel", t, o(t.target)),
        I = !0,
        p())
    }
    function y(e) {
      if (!F) {
        var i = r(e).touches[0]
          , n = I
          , s = t.vmouse.moveDistanceThreshold
          , a = o(e.target);
        I = I || Math.abs(i.pageX - D) > s || Math.abs(i.pageY - k) > s,
        I && !n && f("vmousecancel", e, a),
          f("vmousemove", e, a),
          p()
      }
    }
    function E(t) {
      if (!F) {
        h();
        var e, i, n = o(t.target);
        f("vmouseup", t, n),
        I || (e = f("vclick", t, n),
        e && e.isDefaultPrevented() && (i = r(t).changedTouches[0],
          O.push({
            touchID: U,
            x: i.clientX,
            y: i.clientY
          }),
          z = !0)),
          f("vmouseout", t, n),
          I = !1,
          p()
      }
    }
    function T(e) {
      var i, n = t.data(e, R);
      if (n)
        for (i in n)
          if (n[i])
            return !0;
      return !1
    }
    function x() {}
    function b(e) {
      var i = e.substr(1);
      return {
        setup: function() {
          T(this) || t.data(this, R, {});
          var n = t.data(this, R);
          n[e] = !0,
            A[e] = (A[e] || 0) + 1,
          1 === A[e] && B.bind(i, m),
            t(this).bind(i, x),
          N && (A.touchstart = (A.touchstart || 0) + 1,
          1 === A.touchstart && B.bind("touchstart", g).bind("touchend", E).bind("touchmove", y).bind("scroll", v))
        },
        teardown: function() {
          --A[e],
          A[e] || B.unbind(i, m),
          N && (--A.touchstart,
          A.touchstart || B.unbind("touchstart", g).unbind("touchmove", y).unbind("touchend", E).unbind("scroll", v));
          var n = t(this)
            , r = t.data(this, R);
          r && (r[e] = !1),
            n.unbind(i, x),
          T(this) || n.removeData(R)
        }
      }
    }
    var w, _, R = "virtualMouseBindings", S = "virtualTouchID", H = "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "), M = "clientX clientY pageX pageY screenX screenY".split(" "), C = t.event.mouseHooks ? t.event.mouseHooks.props : [], P = t.event.props.concat(C), A = {}, L = 0, D = 0, k = 0, I = !1, O = [], z = !1, F = !1, N = "addEventListener"in i, B = t(i), V = 1, U = 0;
    for (t.vmouse = {
      moveDistanceThreshold: 10,
      clickDistanceThreshold: 10,
      resetTimerDuration: 1500
    },
           _ = 0; _ < H.length; _++)
      t.event.special[H[_]] = b(H[_]);
    N && i.addEventListener("click", function(e) {
      var i, n, r, s, o, a, l = O.length, h = e.target;
      if (l)
        for (i = e.clientX,
               n = e.clientY,
               w = t.vmouse.clickDistanceThreshold,
               r = h; r; ) {
          for (s = 0; l > s; s++)
            if (o = O[s],
                a = 0,
              r === h && Math.abs(o.x - i) < w && Math.abs(o.y - n) < w || t.data(r, S) === o.touchID)
              return e.preventDefault(),
                void e.stopPropagation();
          r = r.parentNode
        }
    }, !0)
  }(t, e, i),
    function(t) {
      t.mobile = {}
    }(t),
    function(t) {
      var e = {
        touch: "ontouchend"in i
      };
      t.mobile.support = t.mobile.support || {},
        t.extend(t.support, e),
        t.extend(t.mobile.support, e)
    }(t),
    function(t, e, n) {
      function r(e, i, r, s) {
        var o = r.type;
        r.type = i,
          s ? t.event.trigger(r, n, e) : t.event.dispatch.call(e, r),
          r.type = o
      }
      var s = t(i)
        , o = t.mobile.support.touch
        , a = "touchmove scroll"
        , l = o ? "touchstart" : "mousedown"
        , h = o ? "touchend" : "mouseup"
        , c = o ? "touchmove" : "mousemove";
      t.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "), function(e, i) {
        t.fn[i] = function(t) {
          return t ? this.bind(i, t) : this.trigger(i)
        }
          ,
        t.attrFn && (t.attrFn[i] = !0)
      }),
        t.event.special.scrollstart = {
          enabled: !0,
          setup: function() {
            function e(t, e) {
              i = e,
                r(s, i ? "scrollstart" : "scrollstop", t)
            }
            var i, n, s = this, o = t(s);
            o.bind(a, function(r) {
              t.event.special.scrollstart.enabled && (i || e(r, !0),
                clearTimeout(n),
                n = setTimeout(function() {
                  e(r, !1)
                }, 50))
            })
          },
          teardown: function() {
            t(this).unbind(a)
          }
        },
        t.event.special.tap = {
          tapholdThreshold: 750,
          emitTapOnTaphold: !0,
          setup: function() {
            var e = this
              , i = t(e)
              , n = !1;
            i.bind("vmousedown", function(o) {
              function a() {
                clearTimeout(c)
              }
              function l() {
                a(),
                  i.unbind("vclick", h).unbind("vmouseup", a),
                  s.unbind("vmousecancel", l)
              }
              function h(t) {
                l(),
                  n || u !== t.target ? n && t.preventDefault() : r(e, "tap", t)
              }
              if (n = !1,
                o.which && 1 !== o.which)
                return !1;
              var c, u = o.target;
              i.bind("vmouseup", a).bind("vclick", h),
                s.bind("vmousecancel", l),
                c = setTimeout(function() {
                  t.event.special.tap.emitTapOnTaphold || (n = !0),
                    r(e, "taphold", t.Event("taphold", {
                      target: u
                    }))
                }, t.event.special.tap.tapholdThreshold)
            })
          },
          teardown: function() {
            t(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),
              s.unbind("vmousecancel")
          }
        },
        t.event.special.swipe = {
          scrollSupressionThreshold: 30,
          durationThreshold: 1e3,
          horizontalDistanceThreshold: 30,
          verticalDistanceThreshold: 30,
          getLocation: function(t) {
            var i = e.pageXOffset
              , n = e.pageYOffset
              , r = t.clientX
              , s = t.clientY;
            return 0 === t.pageY && Math.floor(s) > Math.floor(t.pageY) || 0 === t.pageX && Math.floor(r) > Math.floor(t.pageX) ? (r -= i,
              s -= n) : (s < t.pageY - n || r < t.pageX - i) && (r = t.pageX - i,
              s = t.pageY - n),
              {
                x: r,
                y: s
              }
          },
          start: function(e) {
            var i = e.originalEvent.touches ? e.originalEvent.touches[0] : e
              , n = t.event.special.swipe.getLocation(i);
            return {
              time: (new Date).getTime(),
              coords: [n.x, n.y],
              origin: t(e.target)
            }
          },
          stop: function(e) {
            var i = e.originalEvent.touches ? e.originalEvent.touches[0] : e
              , n = t.event.special.swipe.getLocation(i);
            return {
              time: (new Date).getTime(),
              coords: [n.x, n.y]
            }
          },
          handleSwipe: function(e, i, n, s) {
            if (i.time - e.time < t.event.special.swipe.durationThreshold && Math.abs(e.coords[0] - i.coords[0]) > t.event.special.swipe.horizontalDistanceThreshold && Math.abs(e.coords[1] - i.coords[1]) < t.event.special.swipe.verticalDistanceThreshold) {
              var o = e.coords[0] > i.coords[0] ? "swipeleft" : "swiperight";
              return r(n, "swipe", t.Event("swipe", {
                target: s,
                swipestart: e,
                swipestop: i
              }), !0),
                r(n, o, t.Event(o, {
                  target: s,
                  swipestart: e,
                  swipestop: i
                }), !0),
                !0
            }
            return !1
          },
          eventInProgress: !1,
          setup: function() {
            var e, i = this, n = t(i), r = {};
            e = t.data(this, "mobile-events"),
            e || (e = {
              length: 0
            },
              t.data(this, "mobile-events", e)),
              e.length++,
              e.swipe = r,
              r.start = function(e) {
                if (!t.event.special.swipe.eventInProgress) {
                  t.event.special.swipe.eventInProgress = !0;
                  var n, o = t.event.special.swipe.start(e), a = e.target, l = !1;
                  r.move = function(e) {
                    o && !e.isDefaultPrevented() && (n = t.event.special.swipe.stop(e),
                    l || (l = t.event.special.swipe.handleSwipe(o, n, i, a),
                    l && (t.event.special.swipe.eventInProgress = !1)),
                    Math.abs(o.coords[0] - n.coords[0]) > t.event.special.swipe.scrollSupressionThreshold && e.preventDefault())
                  }
                    ,
                    r.stop = function() {
                      l = !0,
                        t.event.special.swipe.eventInProgress = !1,
                        s.off(c, r.move),
                        r.move = null
                    }
                    ,
                    s.on(c, r.move).one(h, r.stop)
                }
              }
              ,
              n.on(l, r.start)
          },
          teardown: function() {
            var e, i;
            e = t.data(this, "mobile-events"),
            e && (i = e.swipe,
              delete e.swipe,
              e.length--,
            0 === e.length && t.removeData(this, "mobile-events")),
            i && (i.start && t(this).off(l, i.start),
            i.move && s.off(c, i.move),
            i.stop && s.off(h, i.stop))
          }
        },
        t.each({
          scrollstop: "scrollstart",
          taphold: "tap",
          swipeleft: "swipe.left",
          swiperight: "swipe.right"
        }, function(e, i) {
          t.event.special[e] = {
            setup: function() {
              t(this).bind(i, t.noop)
            },
            teardown: function() {
              t(this).unbind(i)
            }
          }
        })
    }(t, this)
}),
!function t(e, i, n) {
  function r(o, a) {
    if (!i[o]) {
      if (!e[o]) {
        var l = "function" == typeof require && require;
        if (!a && l)
          return l(o, !0);
        if (s)
          return s(o, !0);
        var h = new Error("Cannot find module '" + o + "'");
        throw h.code = "MODULE_NOT_FOUND",
          h
      }
      var c = i[o] = {
        exports: {}
      };
      e[o][0].call(c.exports, function(t) {
        var i = e[o][1][t];
        return r(i ? i : t)
      }, c, c.exports, t, e, i, n)
    }
    return i[o].exports
  }
  for (var s = "function" == typeof require && require, o = 0; o < n.length; o++)
    r(n[o]);
  return r
}({
  1: [function() {
    !function(t) {
      return t.fn.mason = function(e, i) {
        var n, r, s, o, a, l, h;
        return l = !0,
          o = {
            itemSelector: "",
            ratio: 0,
            sizes: [],
            columns: [[0, 480, 1], [480, 780, 2], [780, 1080, 3], [1080, 1320, 4], [1320, 1680, 5]],
            promoted: [],
            filler: {
              itemSelector: e.itemSelector,
              filler_class: "mason_filler",
              keepDataAndEvents: !1
            },
            disabled: !1,
            randomSizes: !1,
            randomFillers: !1,
            layout: "none",
            gutter: 0,
            debug: !1
          },
          n = null,
          s = {
            container: t("<div id='debug'></div>"),
            block: "<div class='mason-debug' style='background-color: rgba(244, 67, 54, .5); float: left;'></div>"
          },
          h = "<div class='mason_clear' style='clear:both; position:relative;'></div>",
        i && (r = {
          complete: i
        }),
          a = {
            block: {
              height: 0,
              width: 0
            },
            matrix: [],
            startWidth: 0
          },
          this.each(function() {
            var c, u, p, d, f, m, g, v, y;
            return g = t.extend(o, e),
              c = t.extend(r, i),
              n = t(this),
              v = function() {
                return g.debug && console.log("SETUP"),
                n.children(".mason_clear").length < 1 && n.append(h),
                  a.block.height = Math.round(parseFloat(n.width() / u() / g.ratio)).toFixed(2),
                  a.block.width = Math.round(parseFloat(n.width() / u())).toFixed(2),
                  a.startWidth = n.width(),
                  y(),
                  g.debug ? (console.log("############## Running In Debug Mode ##############"),
                    p()) : void 0
              }
              ,
              y = function() {
                var e;
                return 1 !== u() ? (n.children("" + g.itemSelector, "." + g.filler.filler_class).each(function() {
                  var i, n, r, s, o, l, h;
                  for (e = t(this),
                         n = 0,
                         r = !1,
                         s = 0; n < g.promoted.length; )
                    e.hasClass(g.promoted[n][0]) && (r = !0,
                      s = n),
                      n++;
                  return r ? (l = g.promoted[s],
                    e.data("size", s),
                    e.data("promoted", !0),
                    i = parseFloat(a.block.height * l[2]).toFixed(0),
                    i -= 2 * g.gutter,
                    h = parseFloat(a.block.width * l[1]).toFixed(0),
                    h -= 2 * g.gutter) : (o = Math.floor(Math.random() * g.sizes.length),
                    l = g.sizes[o],
                    e.data("size", o),
                    i = parseFloat(a.block.height * l[1]).toFixed(0),
                    i -= 2 * g.gutter,
                    h = parseFloat(a.block.width * l[0]).toFixed(0),
                    h -= 2 * g.gutter),
                    e.height(i + "px"),
                    e.width(h + "px"),
                    e.css({
                      margin: g.gutter
                    })
                }),
                  f()) : (e = n.children("" + g.itemSelector),
                  e.height(a.block.height - 2 * g.gutter),
                  e.width(a.block.width - 2 * g.gutter),
                  e.css({
                    margin: g.gutter
                  }),
                  "undefined" != typeof c.complete ? c.complete() : void 0)
              }
              ,
              f = function() {
                var e, i, r, s, o;
                for (r = u(),
                       s = n.height(),
                       e = Math.round(s / a.block.height),
                       a.matrix = [],
                       o = 0; e > o; ) {
                  for (a.matrix[o] = [],
                         i = 0; r > i; )
                    a.matrix[o][i] = !1,
                      i++;
                  o++
                }
                return n.children("" + g.itemSelector).each(function() {
                  var e, i, n, r, s, l, h, c, u, p;
                  for (e = t(this),
                         l = Math.round(e.position().left / a.block.width),
                         u = Math.round(e.position().top / a.block.height),
                         c = parseFloat(e.data("size")),
                         e.data("promoted") ? (s = g.promoted[c][2],
                           p = g.promoted[c][1],
                           i = s * p) : (s = g.sizes[c][1],
                           p = g.sizes[c][0],
                           i = s * p),
                         o = 0,
                         h = []; i > o; ) {
                    for (n = 0; s > n; ) {
                      for (r = 0,
                             a.matrix[u + n][l] = !0; p > r; )
                        a.matrix[u + n][l + r] = !0,
                          r++;
                      n++
                    }
                    h.push(o++)
                  }
                  return h
                }),
                  d()
              }
              ,
              d = function() {
                var e, i, r, s, o, l, h, u, p;
                for (l = 0,
                       s = t("" + g.filler.itemSelector).not("." + g.filler.filler_class).length,
                       r = -1; l < a.matrix.length; ) {
                  for (i = 0; i < a.matrix[l].length; )
                    a.matrix[l][i] || (o = a.block.height,
                      h = a.block.width,
                      u = l * o + g.gutter,
                      p = i * h + g.gutter,
                      o -= 2 * g.gutter,
                      h -= 2 * g.gutter,
                      g.randomFillers ? r = Math.floor(Math.random() * s) : (s > r && r++,
                      r === s && (r = 0)),
                      e = t("" + g.filler.itemSelector).not("." + g.filler.filler_class).eq(r).clone(g.filler.keepDataAndEvents),
                      e.addClass(g.filler.filler_class),
                      e.css({
                        position: "absolute",
                        top: u + "px",
                        left: p + "px",
                        height: o + "px",
                        width: h + "px",
                        margin: "0px"
                      }),
                      e.appendTo(n)),
                      i++;
                  l++
                }
                return n.width() < a.startWidth ? t(window, n).trigger("resize") : "undefined" != typeof c.complete ? c.complete() : void 0
              }
              ,
              u = function() {
                var t, e, i, r;
                if (r = parseFloat(n.width()),
                    t = 0,
                    e = g.columns.length - 1,
                  r >= g.columns[e[1]])
                  t = g.columns[e[2]];
                else
                  for (i = 0; e >= i; )
                    r > g.columns[i][0] && g.columns[i][1] && (t = g.columns[i][2]),
                      i++;
                return Math.floor(t)
              }
              ,
              p = function() {
                var e, i, r, o, l, c, p;
                for (e = n.parent(),
                       l = u(),
                       c = n.height(),
                       r = c / a.block.height,
                       s.container.css({
                         position: "absolute",
                         top: "0",
                         left: "0",
                         height: n.height(),
                         width: n.width()
                       }),
                       p = 0; r > p; ) {
                  for (o = 0; l > o; )
                    i = t(s.block),
                      i.css({
                        height: a.block.height - 2 * g.gutter,
                        width: a.block.width - 2 * g.gutter,
                        margin: g.gutter
                      }),
                      s.container.append(i),
                      o++;
                  p++
                }
                return s.container.append(h),
                  e.prepend(s.container)
              }
              ,
            "fluid" === g.layout && (m = null,
              t(window, n).on("resize", function() {
                return function() {
                  return l ? (t("." + g.filler.filler_class).remove(),
                    a.matrix = [],
                    clearTimeout(m),
                    m = null,
                    m = setTimeout(function() {
                      return v()
                    }, 0)) : void 0
                }
              }(this))),
              v()
          }),
          {
            disable: function() {
              return l = !1
            },
            enable: function() {
              return l = !0
            },
            destroy: function() {
              return t(window, n).off("resize")
            }
          }
      }
    }(jQuery)
  }
    , {}]
}, {}, [1]),
!function() {
  "use strict";
  function t(t) {
    t.fn.swiper = function(e) {
      var n;
      return t(this).each(function() {
        var t = new i(this,e);
        n || (n = t)
      }),
        n
    }
  }
  var e, i = function(t, n) {
    function r(t) {
      return Math.floor(t)
    }
    function s() {
      E.autoplayTimeoutId = setTimeout(function() {
        E.params.loop ? (E.fixLoop(),
          E._slideNext(),
          E.emit("onAutoplay", E)) : E.isEnd ? n.autoplayStopOnLast ? E.stopAutoplay() : (E._slideTo(0),
          E.emit("onAutoplay", E)) : (E._slideNext(),
          E.emit("onAutoplay", E))
      }, E.params.autoplay)
    }
    function o(t, i) {
      var n = e(t.target);
      if (!n.is(i))
        if ("string" == typeof i)
          n = n.parents(i);
        else if (i.nodeType) {
          var r;
          return n.parents().each(function(t, e) {
            e === i && (r = i)
          }),
            r ? i : void 0
        }
      return 0 !== n.length ? n[0] : void 0
    }
    function a(t, e) {
      e = e || {};
      var i = window.MutationObserver || window.WebkitMutationObserver
        , n = new i(function(t) {
          t.forEach(function(t) {
            E.onResize(!0),
              E.emit("onObserverUpdate", E, t)
          })
        }
      );
      n.observe(t, {
        attributes: "undefined" == typeof e.attributes ? !0 : e.attributes,
        childList: "undefined" == typeof e.childList ? !0 : e.childList,
        characterData: "undefined" == typeof e.characterData ? !0 : e.characterData
      }),
        E.observers.push(n)
    }
    function l(t) {
      t.originalEvent && (t = t.originalEvent);
      var e = t.keyCode || t.charCode;
      if (!E.params.allowSwipeToNext && (E.isHorizontal() && 39 === e || !E.isHorizontal() && 40 === e))
        return !1;
      if (!E.params.allowSwipeToPrev && (E.isHorizontal() && 37 === e || !E.isHorizontal() && 38 === e))
        return !1;
      if (!(t.shiftKey || t.altKey || t.ctrlKey || t.metaKey || document.activeElement && document.activeElement.nodeName && ("input" === document.activeElement.nodeName.toLowerCase() || "textarea" === document.activeElement.nodeName.toLowerCase()))) {
        if (37 === e || 39 === e || 38 === e || 40 === e) {
          var i = !1;
          if (E.container.parents(".swiper-slide").length > 0 && 0 === E.container.parents(".swiper-slide-active").length)
            return;
          var n = {
            left: window.pageXOffset,
            top: window.pageYOffset
          }
            , r = window.innerWidth
            , s = window.innerHeight
            , o = E.container.offset();
          E.rtl && (o.left = o.left - E.container[0].scrollLeft);
          for (var a = [[o.left, o.top], [o.left + E.width, o.top], [o.left, o.top + E.height], [o.left + E.width, o.top + E.height]], l = 0; l < a.length; l++) {
            var h = a[l];
            h[0] >= n.left && h[0] <= n.left + r && h[1] >= n.top && h[1] <= n.top + s && (i = !0)
          }
          if (!i)
            return
        }
        E.isHorizontal() ? ((37 === e || 39 === e) && (t.preventDefault ? t.preventDefault() : t.returnValue = !1),
        (39 === e && !E.rtl || 37 === e && E.rtl) && E.slideNext(),
        (37 === e && !E.rtl || 39 === e && E.rtl) && E.slidePrev()) : ((38 === e || 40 === e) && (t.preventDefault ? t.preventDefault() : t.returnValue = !1),
        40 === e && E.slideNext(),
        38 === e && E.slidePrev())
      }
    }
    function h(t) {
      t.originalEvent && (t = t.originalEvent);
      var e = E.mousewheel.event
        , i = 0
        , n = E.rtl ? -1 : 1;
      if ("mousewheel" === e)
        if (E.params.mousewheelForceToAxis)
          if (E.isHorizontal()) {
            if (!(Math.abs(t.wheelDeltaX) > Math.abs(t.wheelDeltaY)))
              return;
            i = t.wheelDeltaX * n
          } else {
            if (!(Math.abs(t.wheelDeltaY) > Math.abs(t.wheelDeltaX)))
              return;
            i = t.wheelDeltaY
          }
        else
          i = Math.abs(t.wheelDeltaX) > Math.abs(t.wheelDeltaY) ? -t.wheelDeltaX * n : -t.wheelDeltaY;
      else if ("DOMMouseScroll" === e)
        i = -t.detail;
      else if ("wheel" === e)
        if (E.params.mousewheelForceToAxis)
          if (E.isHorizontal()) {
            if (!(Math.abs(t.deltaX) > Math.abs(t.deltaY)))
              return;
            i = -t.deltaX * n
          } else {
            if (!(Math.abs(t.deltaY) > Math.abs(t.deltaX)))
              return;
            i = -t.deltaY
          }
        else
          i = Math.abs(t.deltaX) > Math.abs(t.deltaY) ? -t.deltaX * n : -t.deltaY;
      if (0 !== i) {
        if (E.params.mousewheelInvert && (i = -i),
            E.params.freeMode) {
          var r = E.getWrapperTranslate() + i * E.params.mousewheelSensitivity
            , s = E.isBeginning
            , o = E.isEnd;
          if (r >= E.minTranslate() && (r = E.minTranslate()),
            r <= E.maxTranslate() && (r = E.maxTranslate()),
              E.setWrapperTransition(0),
              E.setWrapperTranslate(r),
              E.updateProgress(),
              E.updateActiveIndex(),
            (!s && E.isBeginning || !o && E.isEnd) && E.updateClasses(),
              E.params.freeModeSticky ? (clearTimeout(E.mousewheel.timeout),
                E.mousewheel.timeout = setTimeout(function() {
                  E.slideReset()
                }, 300)) : E.params.lazyLoading && E.lazy && E.lazy.load(),
            0 === r || r === E.maxTranslate())
            return
        } else {
          if ((new window.Date).getTime() - E.mousewheel.lastScrollTime > 60)
            if (0 > i)
              if (E.isEnd && !E.params.loop || E.animating) {
                if (E.params.mousewheelReleaseOnEdges)
                  return !0
              } else
                E.slideNext();
            else if (E.isBeginning && !E.params.loop || E.animating) {
              if (E.params.mousewheelReleaseOnEdges)
                return !0
            } else
              E.slidePrev();
          E.mousewheel.lastScrollTime = (new window.Date).getTime()
        }
        return E.params.autoplay && E.stopAutoplay(),
          t.preventDefault ? t.preventDefault() : t.returnValue = !1,
          !1
      }
    }
    function c(t, i) {
      t = e(t);
      var n, r, s, o = E.rtl ? -1 : 1;
      n = t.attr("data-swiper-parallax") || "0",
        r = t.attr("data-swiper-parallax-x"),
        s = t.attr("data-swiper-parallax-y"),
        r || s ? (r = r || "0",
          s = s || "0") : E.isHorizontal() ? (r = n,
          s = "0") : (s = n,
          r = "0"),
        r = r.indexOf("%") >= 0 ? parseInt(r, 10) * i * o + "%" : r * i * o + "px",
        s = s.indexOf("%") >= 0 ? parseInt(s, 10) * i + "%" : s * i + "px",
        t.transform("translate3d(" + r + ", " + s + ",0px)")
    }
    function u(t) {
      return 0 !== t.indexOf("on") && (t = t[0] !== t[0].toUpperCase() ? "on" + t[0].toUpperCase() + t.substring(1) : "on" + t),
        t
    }
    if (!(this instanceof i))
      return new i(t,n);
    var p = {
      direction: "horizontal",
      touchEventsTarget: "container",
      initialSlide: 0,
      speed: 300,
      autoplay: !1,
      autoplayDisableOnInteraction: !0,
      autoplayStopOnLast: !1,
      iOSEdgeSwipeDetection: !1,
      iOSEdgeSwipeThreshold: 20,
      freeMode: !1,
      freeModeMomentum: !0,
      freeModeMomentumRatio: 1,
      freeModeMomentumBounce: !0,
      freeModeMomentumBounceRatio: 1,
      freeModeSticky: !1,
      freeModeMinimumVelocity: .02,
      autoHeight: !1,
      setWrapperSize: !1,
      virtualTranslate: !1,
      effect: "slide",
      coverflow: {
        rotate: 50,
        stretch: 0,
        depth: 100,
        modifier: 1,
        slideShadows: !0
      },
      flip: {
        slideShadows: !0,
        limitRotation: !0
      },
      cube: {
        slideShadows: !0,
        shadow: !0,
        shadowOffset: 20,
        shadowScale: .94
      },
      fade: {
        crossFade: !1
      },
      parallax: !1,
      scrollbar: null,
      scrollbarHide: !0,
      scrollbarDraggable: !1,
      scrollbarSnapOnRelease: !1,
      keyboardControl: !1,
      mousewheelControl: !1,
      mousewheelReleaseOnEdges: !1,
      mousewheelInvert: !1,
      mousewheelForceToAxis: !1,
      mousewheelSensitivity: 1,
      hashnav: !1,
      breakpoints: void 0,
      spaceBetween: 0,
      slidesPerView: 1,
      slidesPerColumn: 1,
      slidesPerColumnFill: "column",
      slidesPerGroup: 1,
      centeredSlides: !1,
      slidesOffsetBefore: 0,
      slidesOffsetAfter: 0,
      roundLengths: !1,
      touchRatio: 1,
      touchAngle: 45,
      simulateTouch: !0,
      shortSwipes: !0,
      longSwipes: !0,
      longSwipesRatio: .5,
      longSwipesMs: 300,
      followFinger: !0,
      onlyExternal: !1,
      threshold: 0,
      touchMoveStopPropagation: !0,
      uniqueNavElements: !0,
      pagination: null,
      paginationElement: "span",
      paginationClickable: !1,
      paginationHide: !1,
      paginationBulletRender: null,
      paginationProgressRender: null,
      paginationFractionRender: null,
      paginationCustomRender: null,
      paginationType: "bullets",
      resistance: !0,
      resistanceRatio: .85,
      nextButton: null,
      prevButton: null,
      watchSlidesProgress: !1,
      watchSlidesVisibility: !1,
      grabCursor: !1,
      preventClicks: !0,
      preventClicksPropagation: !0,
      slideToClickedSlide: !1,
      lazyLoading: !1,
      lazyLoadingInPrevNext: !1,
      lazyLoadingInPrevNextAmount: 1,
      lazyLoadingOnTransitionStart: !1,
      preloadImages: !0,
      updateOnImagesReady: !0,
      loop: !1,
      loopAdditionalSlides: 0,
      loopedSlides: null,
      control: void 0,
      controlInverse: !1,
      controlBy: "slide",
      allowSwipeToPrev: !0,
      allowSwipeToNext: !0,
      swipeHandler: null,
      noSwiping: !0,
      noSwipingClass: "swiper-no-swiping",
      slideClass: "swiper-slide",
      slideActiveClass: "swiper-slide-active",
      slideVisibleClass: "swiper-slide-visible",
      slideDuplicateClass: "swiper-slide-duplicate",
      slideNextClass: "swiper-slide-next",
      slidePrevClass: "swiper-slide-prev",
      wrapperClass: "swiper-wrapper",
      bulletClass: "swiper-pagination-bullet",
      bulletActiveClass: "swiper-pagination-bullet-active",
      buttonDisabledClass: "swiper-button-disabled",
      paginationCurrentClass: "swiper-pagination-current",
      paginationTotalClass: "swiper-pagination-total",
      paginationHiddenClass: "swiper-pagination-hidden",
      paginationProgressbarClass: "swiper-pagination-progressbar",
      observer: !1,
      observeParents: !1,
      a11y: !1,
      prevSlideMessage: "Previous slide",
      nextSlideMessage: "Next slide",
      firstSlideMessage: "This is the first slide",
      lastSlideMessage: "This is the last slide",
      paginationBulletMessage: "Go to slide {{index}}",
      runCallbacksOnInit: !0
    }
      , d = n && n.virtualTranslate;
    n = n || {};
    var f = {};
    for (var m in n)
      if ("object" != typeof n[m] || null === n[m] || n[m].nodeType || n[m] === window || n[m] === document || "undefined" != typeof Dom7 && n[m]instanceof Dom7 || "undefined" != typeof jQuery && n[m]instanceof jQuery)
        f[m] = n[m];
      else {
        f[m] = {};
        for (var g in n[m])
          f[m][g] = n[m][g]
      }
    for (var v in p)
      if ("undefined" == typeof n[v])
        n[v] = p[v];
      else if ("object" == typeof n[v])
        for (var y in p[v])
          "undefined" == typeof n[v][y] && (n[v][y] = p[v][y]);
    var E = this;
    if (E.params = n,
        E.originalParams = f,
        E.classNames = [],
      "undefined" != typeof e && "undefined" != typeof Dom7 && (e = Dom7),
      ("undefined" != typeof e || (e = "undefined" == typeof Dom7 ? window.Dom7 || window.Zepto || window.jQuery : Dom7)) && (E.$ = e,
        E.currentBreakpoint = void 0,
        E.getActiveBreakpoint = function() {
          if (!E.params.breakpoints)
            return !1;
          var t, e = !1, i = [];
          for (t in E.params.breakpoints)
            E.params.breakpoints.hasOwnProperty(t) && i.push(t);
          i.sort(function(t, e) {
            return parseInt(t, 10) > parseInt(e, 10)
          });
          for (var n = 0; n < i.length; n++)
            t = i[n],
            t >= window.innerWidth && !e && (e = t);
          return e || "max"
        }
        ,
        E.setBreakpoint = function() {
          var t = E.getActiveBreakpoint();
          if (t && E.currentBreakpoint !== t) {
            var e = t in E.params.breakpoints ? E.params.breakpoints[t] : E.originalParams
              , i = E.params.loop && e.slidesPerView !== E.params.slidesPerView;
            for (var n in e)
              E.params[n] = e[n];
            E.currentBreakpoint = t,
            i && E.destroyLoop && E.reLoop(!0)
          }
        }
        ,
      E.params.breakpoints && E.setBreakpoint(),
        E.container = e(t),
      0 !== E.container.length)) {
      if (E.container.length > 1) {
        var T = [];
        return E.container.each(function() {
          T.push(new i(this,n))
        }),
          T
      }
      E.container[0].swiper = E,
        E.container.data("swiper", E),
        E.classNames.push("swiper-container-" + E.params.direction),
      E.params.freeMode && E.classNames.push("swiper-container-free-mode"),
      E.support.flexbox || (E.classNames.push("swiper-container-no-flexbox"),
        E.params.slidesPerColumn = 1),
      E.params.autoHeight && E.classNames.push("swiper-container-autoheight"),
      (E.params.parallax || E.params.watchSlidesVisibility) && (E.params.watchSlidesProgress = !0),
      ["cube", "coverflow", "flip"].indexOf(E.params.effect) >= 0 && (E.support.transforms3d ? (E.params.watchSlidesProgress = !0,
        E.classNames.push("swiper-container-3d")) : E.params.effect = "slide"),
      "slide" !== E.params.effect && E.classNames.push("swiper-container-" + E.params.effect),
      "cube" === E.params.effect && (E.params.resistanceRatio = 0,
        E.params.slidesPerView = 1,
        E.params.slidesPerColumn = 1,
        E.params.slidesPerGroup = 1,
        E.params.centeredSlides = !1,
        E.params.spaceBetween = 0,
        E.params.virtualTranslate = !0,
        E.params.setWrapperSize = !1),
      ("fade" === E.params.effect || "flip" === E.params.effect) && (E.params.slidesPerView = 1,
        E.params.slidesPerColumn = 1,
        E.params.slidesPerGroup = 1,
        E.params.watchSlidesProgress = !0,
        E.params.spaceBetween = 0,
        E.params.setWrapperSize = !1,
      "undefined" == typeof d && (E.params.virtualTranslate = !0)),
      E.params.grabCursor && E.support.touch && (E.params.grabCursor = !1),
        E.wrapper = E.container.children("." + E.params.wrapperClass),
      E.params.pagination && (E.paginationContainer = e(E.params.pagination),
      E.params.uniqueNavElements && "string" == typeof E.params.pagination && E.paginationContainer.length > 1 && 1 === E.container.find(E.params.pagination).length && (E.paginationContainer = E.container.find(E.params.pagination)),
        "bullets" === E.params.paginationType && E.params.paginationClickable ? E.paginationContainer.addClass("swiper-pagination-clickable") : E.params.paginationClickable = !1,
        E.paginationContainer.addClass("swiper-pagination-" + E.params.paginationType)),
      (E.params.nextButton || E.params.prevButton) && (E.params.nextButton && (E.nextButton = e(E.params.nextButton),
      E.params.uniqueNavElements && "string" == typeof E.params.nextButton && E.nextButton.length > 1 && 1 === E.container.find(E.params.nextButton).length && (E.nextButton = E.container.find(E.params.nextButton))),
      E.params.prevButton && (E.prevButton = e(E.params.prevButton),
      E.params.uniqueNavElements && "string" == typeof E.params.prevButton && E.prevButton.length > 1 && 1 === E.container.find(E.params.prevButton).length && (E.prevButton = E.container.find(E.params.prevButton)))),
        E.isHorizontal = function() {
          return "horizontal" === E.params.direction
        }
        ,
        E.rtl = E.isHorizontal() && ("rtl" === E.container[0].dir.toLowerCase() || "rtl" === E.container.css("direction")),
      E.rtl && E.classNames.push("swiper-container-rtl"),
      E.rtl && (E.wrongRTL = "-webkit-box" === E.wrapper.css("display")),
      E.params.slidesPerColumn > 1 && E.classNames.push("swiper-container-multirow"),
      E.device.android && E.classNames.push("swiper-container-android"),
        E.container.addClass(E.classNames.join(" ")),
        E.translate = 0,
        E.progress = 0,
        E.velocity = 0,
        E.lockSwipeToNext = function() {
          E.params.allowSwipeToNext = !1
        }
        ,
        E.lockSwipeToPrev = function() {
          E.params.allowSwipeToPrev = !1
        }
        ,
        E.lockSwipes = function() {
          E.params.allowSwipeToNext = E.params.allowSwipeToPrev = !1
        }
        ,
        E.unlockSwipeToNext = function() {
          E.params.allowSwipeToNext = !0
        }
        ,
        E.unlockSwipeToPrev = function() {
          E.params.allowSwipeToPrev = !0
        }
        ,
        E.unlockSwipes = function() {
          E.params.allowSwipeToNext = E.params.allowSwipeToPrev = !0
        }
        ,
      E.params.grabCursor && (E.container[0].style.cursor = "move",
        E.container[0].style.cursor = "-webkit-grab",
        E.container[0].style.cursor = "-moz-grab",
        E.container[0].style.cursor = "grab"),
        E.imagesToLoad = [],
        E.imagesLoaded = 0,
        E.loadImage = function(t, e, i, n, r) {
          function s() {
            r && r()
          }
          var o;
          t.complete && n ? s() : e ? (o = new window.Image,
            o.onload = s,
            o.onerror = s,
          i && (o.srcset = i),
          e && (o.src = e)) : s()
        }
        ,
        E.preloadImages = function() {
          function t() {
            "undefined" != typeof E && null !== E && (void 0 !== E.imagesLoaded && E.imagesLoaded++,
            E.imagesLoaded === E.imagesToLoad.length && (E.params.updateOnImagesReady && E.update(),
              E.emit("onImagesReady", E)))
          }
          E.imagesToLoad = E.container.find("img");
          for (var e = 0; e < E.imagesToLoad.length; e++)
            E.loadImage(E.imagesToLoad[e], E.imagesToLoad[e].currentSrc || E.imagesToLoad[e].getAttribute("src"), E.imagesToLoad[e].srcset || E.imagesToLoad[e].getAttribute("srcset"), !0, t)
        }
        ,
        E.autoplayTimeoutId = void 0,
        E.autoplaying = !1,
        E.autoplayPaused = !1,
        E.startAutoplay = function() {
          return "undefined" != typeof E.autoplayTimeoutId ? !1 : E.params.autoplay ? E.autoplaying ? !1 : (E.autoplaying = !0,
            E.emit("onAutoplayStart", E),
            void s()) : !1
        }
        ,
        E.stopAutoplay = function() {
          E.autoplayTimeoutId && (E.autoplayTimeoutId && clearTimeout(E.autoplayTimeoutId),
            E.autoplaying = !1,
            E.autoplayTimeoutId = void 0,
            E.emit("onAutoplayStop", E))
        }
        ,
        E.pauseAutoplay = function(t) {
          E.autoplayPaused || (E.autoplayTimeoutId && clearTimeout(E.autoplayTimeoutId),
            E.autoplayPaused = !0,
            0 === t ? (E.autoplayPaused = !1,
              s()) : E.wrapper.transitionEnd(function() {
              E && (E.autoplayPaused = !1,
                E.autoplaying ? s() : E.stopAutoplay())
            }))
        }
        ,
        E.minTranslate = function() {
          return -E.snapGrid[0]
        }
        ,
        E.maxTranslate = function() {
          return -E.snapGrid[E.snapGrid.length - 1]
        }
        ,
        E.updateAutoHeight = function() {
          var t = E.slides.eq(E.activeIndex)[0];
          if ("undefined" != typeof t) {
            var e = t.offsetHeight;
            e && E.wrapper.css("height", e + "px")
          }
        }
        ,
        E.updateContainerSize = function() {
          var t, e;
          t = "undefined" != typeof E.params.width ? E.params.width : E.container[0].clientWidth,
            e = "undefined" != typeof E.params.height ? E.params.height : E.container[0].clientHeight,
          0 === t && E.isHorizontal() || 0 === e && !E.isHorizontal() || (t = t - parseInt(E.container.css("padding-left"), 10) - parseInt(E.container.css("padding-right"), 10),
            e = e - parseInt(E.container.css("padding-top"), 10) - parseInt(E.container.css("padding-bottom"), 10),
            E.width = t,
            E.height = e,
            E.size = E.isHorizontal() ? E.width : E.height)
        }
        ,
        E.updateSlidesSize = function() {
          E.slides = E.wrapper.children("." + E.params.slideClass),
            E.snapGrid = [],
            E.slidesGrid = [],
            E.slidesSizesGrid = [];
          var t, e = E.params.spaceBetween, i = -E.params.slidesOffsetBefore, n = 0, s = 0;
          if ("undefined" != typeof E.size) {
            "string" == typeof e && e.indexOf("%") >= 0 && (e = parseFloat(e.replace("%", "")) / 100 * E.size),
              E.virtualSize = -e,
              E.slides.css(E.rtl ? {
                marginLeft: "",
                marginTop: ""
              } : {
                marginRight: "",
                marginBottom: ""
              });
            var o;
            E.params.slidesPerColumn > 1 && (o = Math.floor(E.slides.length / E.params.slidesPerColumn) === E.slides.length / E.params.slidesPerColumn ? E.slides.length : Math.ceil(E.slides.length / E.params.slidesPerColumn) * E.params.slidesPerColumn,
            "auto" !== E.params.slidesPerView && "row" === E.params.slidesPerColumnFill && (o = Math.max(o, E.params.slidesPerView * E.params.slidesPerColumn)));
            var a, l = E.params.slidesPerColumn, h = o / l, c = h - (E.params.slidesPerColumn * h - E.slides.length);
            for (t = 0; t < E.slides.length; t++) {
              a = 0;
              var u = E.slides.eq(t);
              if (E.params.slidesPerColumn > 1) {
                var p, d, f;
                "column" === E.params.slidesPerColumnFill ? (d = Math.floor(t / l),
                  f = t - d * l,
                (d > c || d === c && f === l - 1) && ++f >= l && (f = 0,
                  d++),
                  p = d + f * o / l,
                  u.css({
                    "-webkit-box-ordinal-group": p,
                    "-moz-box-ordinal-group": p,
                    "-ms-flex-order": p,
                    "-webkit-order": p,
                    order: p
                  })) : (f = Math.floor(t / h),
                  d = t - f * h),
                  u.css({
                    "margin-top": 0 !== f && E.params.spaceBetween && E.params.spaceBetween + "px"
                  }).attr("data-swiper-column", d).attr("data-swiper-row", f)
              }
              "none" !== u.css("display") && ("auto" === E.params.slidesPerView ? (a = E.isHorizontal() ? u.outerWidth(!0) : u.outerHeight(!0),
              E.params.roundLengths && (a = r(a))) : (a = (E.size - (E.params.slidesPerView - 1) * e) / E.params.slidesPerView,
              E.params.roundLengths && (a = r(a)),
                E.isHorizontal() ? E.slides[t].style.width = a + "px" : E.slides[t].style.height = a + "px"),
                E.slides[t].swiperSlideSize = a,
                E.slidesSizesGrid.push(a),
                E.params.centeredSlides ? (i = i + a / 2 + n / 2 + e,
                0 === t && (i = i - E.size / 2 - e),
                Math.abs(i) < .001 && (i = 0),
                s % E.params.slidesPerGroup === 0 && E.snapGrid.push(i),
                  E.slidesGrid.push(i)) : (s % E.params.slidesPerGroup === 0 && E.snapGrid.push(i),
                  E.slidesGrid.push(i),
                  i = i + a + e),
                E.virtualSize += a + e,
                n = a,
                s++)
            }
            E.virtualSize = Math.max(E.virtualSize, E.size) + E.params.slidesOffsetAfter;
            var m;
            if (E.rtl && E.wrongRTL && ("slide" === E.params.effect || "coverflow" === E.params.effect) && E.wrapper.css({
                width: E.virtualSize + E.params.spaceBetween + "px"
              }),
              (!E.support.flexbox || E.params.setWrapperSize) && E.wrapper.css(E.isHorizontal() ? {
                width: E.virtualSize + E.params.spaceBetween + "px"
              } : {
                height: E.virtualSize + E.params.spaceBetween + "px"
              }),
              E.params.slidesPerColumn > 1 && (E.virtualSize = (a + E.params.spaceBetween) * o,
                E.virtualSize = Math.ceil(E.virtualSize / E.params.slidesPerColumn) - E.params.spaceBetween,
                E.wrapper.css({
                  width: E.virtualSize + E.params.spaceBetween + "px"
                }),
                E.params.centeredSlides)) {
              for (m = [],
                     t = 0; t < E.snapGrid.length; t++)
                E.snapGrid[t] < E.virtualSize + E.snapGrid[0] && m.push(E.snapGrid[t]);
              E.snapGrid = m
            }
            if (!E.params.centeredSlides) {
              for (m = [],
                     t = 0; t < E.snapGrid.length; t++)
                E.snapGrid[t] <= E.virtualSize - E.size && m.push(E.snapGrid[t]);
              E.snapGrid = m,
              Math.floor(E.virtualSize - E.size) - Math.floor(E.snapGrid[E.snapGrid.length - 1]) > 1 && E.snapGrid.push(E.virtualSize - E.size)
            }
            0 === E.snapGrid.length && (E.snapGrid = [0]),
            0 !== E.params.spaceBetween && E.slides.css(E.isHorizontal() ? E.rtl ? {
              marginLeft: e + "px"
            } : {
              marginRight: e + "px"
            } : {
              marginBottom: e + "px"
            }),
            E.params.watchSlidesProgress && E.updateSlidesOffset()
          }
        }
        ,
        E.updateSlidesOffset = function() {
          for (var t = 0; t < E.slides.length; t++)
            E.slides[t].swiperSlideOffset = E.isHorizontal() ? E.slides[t].offsetLeft : E.slides[t].offsetTop
        }
        ,
        E.updateSlidesProgress = function(t) {
          if ("undefined" == typeof t && (t = E.translate || 0),
            0 !== E.slides.length) {
            "undefined" == typeof E.slides[0].swiperSlideOffset && E.updateSlidesOffset();
            var e = -t;
            E.rtl && (e = t),
              E.slides.removeClass(E.params.slideVisibleClass);
            for (var i = 0; i < E.slides.length; i++) {
              var n = E.slides[i]
                , r = (e - n.swiperSlideOffset) / (n.swiperSlideSize + E.params.spaceBetween);
              if (E.params.watchSlidesVisibility) {
                var s = -(e - n.swiperSlideOffset)
                  , o = s + E.slidesSizesGrid[i]
                  , a = s >= 0 && s < E.size || o > 0 && o <= E.size || 0 >= s && o >= E.size;
                a && E.slides.eq(i).addClass(E.params.slideVisibleClass)
              }
              n.progress = E.rtl ? -r : r
            }
          }
        }
        ,
        E.updateProgress = function(t) {
          "undefined" == typeof t && (t = E.translate || 0);
          var e = E.maxTranslate() - E.minTranslate()
            , i = E.isBeginning
            , n = E.isEnd;
          0 === e ? (E.progress = 0,
            E.isBeginning = E.isEnd = !0) : (E.progress = (t - E.minTranslate()) / e,
            E.isBeginning = E.progress <= 0,
            E.isEnd = E.progress >= 1),
          E.isBeginning && !i && E.emit("onReachBeginning", E),
          E.isEnd && !n && E.emit("onReachEnd", E),
          E.params.watchSlidesProgress && E.updateSlidesProgress(t),
            E.emit("onProgress", E, E.progress)
        }
        ,
        E.updateActiveIndex = function() {
          var t, e, i, n = E.rtl ? E.translate : -E.translate;
          for (e = 0; e < E.slidesGrid.length; e++)
            "undefined" != typeof E.slidesGrid[e + 1] ? n >= E.slidesGrid[e] && n < E.slidesGrid[e + 1] - (E.slidesGrid[e + 1] - E.slidesGrid[e]) / 2 ? t = e : n >= E.slidesGrid[e] && n < E.slidesGrid[e + 1] && (t = e + 1) : n >= E.slidesGrid[e] && (t = e);
          (0 > t || "undefined" == typeof t) && (t = 0),
            i = Math.floor(t / E.params.slidesPerGroup),
          i >= E.snapGrid.length && (i = E.snapGrid.length - 1),
          t !== E.activeIndex && (E.snapIndex = i,
            E.previousIndex = E.activeIndex,
            E.activeIndex = t,
            E.updateClasses())
        }
        ,
        E.updateClasses = function() {
          E.slides.removeClass(E.params.slideActiveClass + " " + E.params.slideNextClass + " " + E.params.slidePrevClass);
          var t = E.slides.eq(E.activeIndex);
          t.addClass(E.params.slideActiveClass);
          var i = t.next("." + E.params.slideClass).addClass(E.params.slideNextClass);
          E.params.loop && 0 === i.length && E.slides.eq(0).addClass(E.params.slideNextClass);
          var n = t.prev("." + E.params.slideClass).addClass(E.params.slidePrevClass);
          if (E.params.loop && 0 === n.length && E.slides.eq(-1).addClass(E.params.slidePrevClass),
            E.paginationContainer && E.paginationContainer.length > 0) {
            var r, s = E.params.loop ? Math.ceil((E.slides.length - 2 * E.loopedSlides) / E.params.slidesPerGroup) : E.snapGrid.length;
            if (E.params.loop ? (r = Math.ceil((E.activeIndex - E.loopedSlides) / E.params.slidesPerGroup),
              r > E.slides.length - 1 - 2 * E.loopedSlides && (r -= E.slides.length - 2 * E.loopedSlides),
              r > s - 1 && (r -= s),
              0 > r && "bullets" !== E.params.paginationType && (r = s + r)) : r = "undefined" != typeof E.snapIndex ? E.snapIndex : E.activeIndex || 0,
              "bullets" === E.params.paginationType && E.bullets && E.bullets.length > 0 && (E.bullets.removeClass(E.params.bulletActiveClass),
                E.paginationContainer.length > 1 ? E.bullets.each(function() {
                  e(this).index() === r && e(this).addClass(E.params.bulletActiveClass)
                }) : E.bullets.eq(r).addClass(E.params.bulletActiveClass)),
              "fraction" === E.params.paginationType && (E.paginationContainer.find("." + E.params.paginationCurrentClass).text(r + 1),
                E.paginationContainer.find("." + E.params.paginationTotalClass).text(s)),
              "progress" === E.params.paginationType) {
              var o = (r + 1) / s
                , a = o
                , l = 1;
              E.isHorizontal() || (l = o,
                a = 1),
                E.paginationContainer.find("." + E.params.paginationProgressbarClass).transform("translate3d(0,0,0) scaleX(" + a + ") scaleY(" + l + ")").transition(E.params.speed)
            }
            "custom" === E.params.paginationType && E.params.paginationCustomRender && (E.paginationContainer.html(E.params.paginationCustomRender(E, r + 1, s)),
              E.emit("onPaginationRendered", E, E.paginationContainer[0]))
          }
          E.params.loop || (E.params.prevButton && E.prevButton && E.prevButton.length > 0 && (E.isBeginning ? (E.prevButton.addClass(E.params.buttonDisabledClass),
          E.params.a11y && E.a11y && E.a11y.disable(E.prevButton)) : (E.prevButton.removeClass(E.params.buttonDisabledClass),
          E.params.a11y && E.a11y && E.a11y.enable(E.prevButton))),
          E.params.nextButton && E.nextButton && E.nextButton.length > 0 && (E.isEnd ? (E.nextButton.addClass(E.params.buttonDisabledClass),
          E.params.a11y && E.a11y && E.a11y.disable(E.nextButton)) : (E.nextButton.removeClass(E.params.buttonDisabledClass),
          E.params.a11y && E.a11y && E.a11y.enable(E.nextButton))))
        }
        ,
        E.updatePagination = function() {
          if (E.params.pagination && E.paginationContainer && E.paginationContainer.length > 0) {
            var t = "";
            if ("bullets" === E.params.paginationType) {
              for (var e = E.params.loop ? Math.ceil((E.slides.length - 2 * E.loopedSlides) / E.params.slidesPerGroup) : E.snapGrid.length, i = 0; e > i; i++)
                t += E.params.paginationBulletRender ? E.params.paginationBulletRender(i, E.params.bulletClass) : "<" + E.params.paginationElement + ' class="' + E.params.bulletClass + '"></' + E.params.paginationElement + ">";
              E.paginationContainer.html(t),
                E.bullets = E.paginationContainer.find("." + E.params.bulletClass),
              E.params.paginationClickable && E.params.a11y && E.a11y && E.a11y.initPagination()
            }
            "fraction" === E.params.paginationType && (t = E.params.paginationFractionRender ? E.params.paginationFractionRender(E, E.params.paginationCurrentClass, E.params.paginationTotalClass) : '<span class="' + E.params.paginationCurrentClass + '"></span> / <span class="' + E.params.paginationTotalClass + '"></span>',
              E.paginationContainer.html(t)),
            "progress" === E.params.paginationType && (t = E.params.paginationProgressRender ? E.params.paginationProgressRender(E, E.params.paginationProgressbarClass) : '<span class="' + E.params.paginationProgressbarClass + '"></span>',
              E.paginationContainer.html(t)),
            "custom" !== E.params.paginationType && E.emit("onPaginationRendered", E, E.paginationContainer[0])
          }
        }
        ,
        E.update = function(t) {
          function e() {
            n = Math.min(Math.max(E.translate, E.maxTranslate()), E.minTranslate()),
              E.setWrapperTranslate(n),
              E.updateActiveIndex(),
              E.updateClasses()
          }
          if (E.updateContainerSize(),
              E.updateSlidesSize(),
              E.updateProgress(),
              E.updatePagination(),
              E.updateClasses(),
            E.params.scrollbar && E.scrollbar && E.scrollbar.set(),
              t) {
            var i, n;
            E.controller && E.controller.spline && (E.controller.spline = void 0),
              E.params.freeMode ? (e(),
              E.params.autoHeight && E.updateAutoHeight()) : (i = ("auto" === E.params.slidesPerView || E.params.slidesPerView > 1) && E.isEnd && !E.params.centeredSlides ? E.slideTo(E.slides.length - 1, 0, !1, !0) : E.slideTo(E.activeIndex, 0, !1, !0),
              i || e())
          } else
            E.params.autoHeight && E.updateAutoHeight()
        }
        ,
        E.onResize = function(t) {
          E.params.breakpoints && E.setBreakpoint();
          var e = E.params.allowSwipeToPrev
            , i = E.params.allowSwipeToNext;
          E.params.allowSwipeToPrev = E.params.allowSwipeToNext = !0,
            E.updateContainerSize(),
            E.updateSlidesSize(),
          ("auto" === E.params.slidesPerView || E.params.freeMode || t) && E.updatePagination(),
          E.params.scrollbar && E.scrollbar && E.scrollbar.set(),
          E.controller && E.controller.spline && (E.controller.spline = void 0);
          var n = !1;
          if (E.params.freeMode) {
            var r = Math.min(Math.max(E.translate, E.maxTranslate()), E.minTranslate());
            E.setWrapperTranslate(r),
              E.updateActiveIndex(),
              E.updateClasses(),
            E.params.autoHeight && E.updateAutoHeight()
          } else
            E.updateClasses(),
              n = ("auto" === E.params.slidesPerView || E.params.slidesPerView > 1) && E.isEnd && !E.params.centeredSlides ? E.slideTo(E.slides.length - 1, 0, !1, !0) : E.slideTo(E.activeIndex, 0, !1, !0);
          E.params.lazyLoading && !n && E.lazy && E.lazy.load(),
            E.params.allowSwipeToPrev = e,
            E.params.allowSwipeToNext = i
        }
      ;
      var x = ["mousedown", "mousemove", "mouseup"];
      window.navigator.pointerEnabled ? x = ["pointerdown", "pointermove", "pointerup"] : window.navigator.msPointerEnabled && (x = ["MSPointerDown", "MSPointerMove", "MSPointerUp"]),
        E.touchEvents = {
          start: E.support.touch || !E.params.simulateTouch ? "touchstart" : x[0],
          move: E.support.touch || !E.params.simulateTouch ? "touchmove" : x[1],
          end: E.support.touch || !E.params.simulateTouch ? "touchend" : x[2]
        },
      (window.navigator.pointerEnabled || window.navigator.msPointerEnabled) && ("container" === E.params.touchEventsTarget ? E.container : E.wrapper).addClass("swiper-wp8-" + E.params.direction),
        E.initEvents = function(t) {
          var e = t ? "off" : "on"
            , i = t ? "removeEventListener" : "addEventListener"
            , r = "container" === E.params.touchEventsTarget ? E.container[0] : E.wrapper[0]
            , s = E.support.touch ? r : document
            , o = E.params.nested ? !0 : !1;
          E.browser.ie ? (r[i](E.touchEvents.start, E.onTouchStart, !1),
            s[i](E.touchEvents.move, E.onTouchMove, o),
            s[i](E.touchEvents.end, E.onTouchEnd, !1)) : (E.support.touch && (r[i](E.touchEvents.start, E.onTouchStart, !1),
            r[i](E.touchEvents.move, E.onTouchMove, o),
            r[i](E.touchEvents.end, E.onTouchEnd, !1)),
          !n.simulateTouch || E.device.ios || E.device.android || (r[i]("mousedown", E.onTouchStart, !1),
            document[i]("mousemove", E.onTouchMove, o),
            document[i]("mouseup", E.onTouchEnd, !1))),
            window[i]("resize", E.onResize),
          E.params.nextButton && E.nextButton && E.nextButton.length > 0 && (E.nextButton[e]("click", E.onClickNext),
          E.params.a11y && E.a11y && E.nextButton[e]("keydown", E.a11y.onEnterKey)),
          E.params.prevButton && E.prevButton && E.prevButton.length > 0 && (E.prevButton[e]("click", E.onClickPrev),
          E.params.a11y && E.a11y && E.prevButton[e]("keydown", E.a11y.onEnterKey)),
          E.params.pagination && E.params.paginationClickable && (E.paginationContainer[e]("click", "." + E.params.bulletClass, E.onClickIndex),
          E.params.a11y && E.a11y && E.paginationContainer[e]("keydown", "." + E.params.bulletClass, E.a11y.onEnterKey)),
          (E.params.preventClicks || E.params.preventClicksPropagation) && r[i]("click", E.preventClicks, !0)
        }
        ,
        E.attachEvents = function() {
          E.initEvents()
        }
        ,
        E.detachEvents = function() {
          E.initEvents(!0)
        }
        ,
        E.allowClick = !0,
        E.preventClicks = function(t) {
          E.allowClick || (E.params.preventClicks && t.preventDefault(),
          E.params.preventClicksPropagation && E.animating && (t.stopPropagation(),
            t.stopImmediatePropagation()))
        }
        ,
        E.onClickNext = function(t) {
          t.preventDefault(),
          (!E.isEnd || E.params.loop) && E.slideNext()
        }
        ,
        E.onClickPrev = function(t) {
          t.preventDefault(),
          (!E.isBeginning || E.params.loop) && E.slidePrev()
        }
        ,
        E.onClickIndex = function(t) {
          t.preventDefault();
          var i = e(this).index() * E.params.slidesPerGroup;
          E.params.loop && (i += E.loopedSlides),
            E.slideTo(i)
        }
        ,
        E.updateClickedSlide = function(t) {
          var i = o(t, "." + E.params.slideClass)
            , n = !1;
          if (i)
            for (var r = 0; r < E.slides.length; r++)
              E.slides[r] === i && (n = !0);
          if (!i || !n)
            return E.clickedSlide = void 0,
              void (E.clickedIndex = void 0);
          if (E.clickedSlide = i,
              E.clickedIndex = e(i).index(),
            E.params.slideToClickedSlide && void 0 !== E.clickedIndex && E.clickedIndex !== E.activeIndex) {
            var s, a = E.clickedIndex;
            if (E.params.loop) {
              if (E.animating)
                return;
              s = e(E.clickedSlide).attr("data-swiper-slide-index"),
                E.params.centeredSlides ? a < E.loopedSlides - E.params.slidesPerView / 2 || a > E.slides.length - E.loopedSlides + E.params.slidesPerView / 2 ? (E.fixLoop(),
                  a = E.wrapper.children("." + E.params.slideClass + '[data-swiper-slide-index="' + s + '"]:not(.swiper-slide-duplicate)').eq(0).index(),
                  setTimeout(function() {
                    E.slideTo(a)
                  }, 0)) : E.slideTo(a) : a > E.slides.length - E.params.slidesPerView ? (E.fixLoop(),
                  a = E.wrapper.children("." + E.params.slideClass + '[data-swiper-slide-index="' + s + '"]:not(.swiper-slide-duplicate)').eq(0).index(),
                  setTimeout(function() {
                    E.slideTo(a)
                  }, 0)) : E.slideTo(a)
            } else
              E.slideTo(a)
          }
        }
      ;
      var b, w, _, R, S, H, M, C, P, A, L = "input, select, textarea, button", D = Date.now(), k = [];
      E.animating = !1,
        E.touches = {
          startX: 0,
          startY: 0,
          currentX: 0,
          currentY: 0,
          diff: 0
        };
      var I, O;
      if (E.onTouchStart = function(t) {
          if (t.originalEvent && (t = t.originalEvent),
              I = "touchstart" === t.type,
            I || !("which"in t) || 3 !== t.which) {
            if (E.params.noSwiping && o(t, "." + E.params.noSwipingClass))
              return void (E.allowClick = !0);
            if (!E.params.swipeHandler || o(t, E.params.swipeHandler)) {
              var i = E.touches.currentX = "touchstart" === t.type ? t.targetTouches[0].pageX : t.pageX
                , n = E.touches.currentY = "touchstart" === t.type ? t.targetTouches[0].pageY : t.pageY;
              if (!(E.device.ios && E.params.iOSEdgeSwipeDetection && i <= E.params.iOSEdgeSwipeThreshold)) {
                if (b = !0,
                    w = !1,
                    _ = !0,
                    S = void 0,
                    O = void 0,
                    E.touches.startX = i,
                    E.touches.startY = n,
                    R = Date.now(),
                    E.allowClick = !0,
                    E.updateContainerSize(),
                    E.swipeDirection = void 0,
                  E.params.threshold > 0 && (C = !1),
                  "touchstart" !== t.type) {
                  var r = !0;
                  e(t.target).is(L) && (r = !1),
                  document.activeElement && e(document.activeElement).is(L) && document.activeElement.blur(),
                  r && t.preventDefault()
                }
                E.emit("onTouchStart", E, t)
              }
            }
          }
        }
          ,
          E.onTouchMove = function(t) {
            if (t.originalEvent && (t = t.originalEvent),
              !I || "mousemove" !== t.type) {
              if (t.preventedByNestedSwiper)
                return E.touches.startX = "touchmove" === t.type ? t.targetTouches[0].pageX : t.pageX,
                  void (E.touches.startY = "touchmove" === t.type ? t.targetTouches[0].pageY : t.pageY);
              if (E.params.onlyExternal)
                return E.allowClick = !1,
                  void (b && (E.touches.startX = E.touches.currentX = "touchmove" === t.type ? t.targetTouches[0].pageX : t.pageX,
                    E.touches.startY = E.touches.currentY = "touchmove" === t.type ? t.targetTouches[0].pageY : t.pageY,
                    R = Date.now()));
              if (I && document.activeElement && t.target === document.activeElement && e(t.target).is(L))
                return w = !0,
                  void (E.allowClick = !1);
              if (_ && E.emit("onTouchMove", E, t),
                  !(t.targetTouches && t.targetTouches.length > 1)) {
                if (E.touches.currentX = "touchmove" === t.type ? t.targetTouches[0].pageX : t.pageX,
                    E.touches.currentY = "touchmove" === t.type ? t.targetTouches[0].pageY : t.pageY,
                  "undefined" == typeof S) {
                  var i = 180 * Math.atan2(Math.abs(E.touches.currentY - E.touches.startY), Math.abs(E.touches.currentX - E.touches.startX)) / Math.PI;
                  S = E.isHorizontal() ? i > E.params.touchAngle : 90 - i > E.params.touchAngle
                }
                if (S && E.emit("onTouchMoveOpposite", E, t),
                  "undefined" == typeof O && E.browser.ieTouch && (E.touches.currentX !== E.touches.startX || E.touches.currentY !== E.touches.startY) && (O = !0),
                    b) {
                  if (S)
                    return void (b = !1);
                  if (O || !E.browser.ieTouch) {
                    E.allowClick = !1,
                      E.emit("onSliderMove", E, t),
                      t.preventDefault(),
                    E.params.touchMoveStopPropagation && !E.params.nested && t.stopPropagation(),
                    w || (n.loop && E.fixLoop(),
                      M = E.getWrapperTranslate(),
                      E.setWrapperTransition(0),
                    E.animating && E.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),
                    E.params.autoplay && E.autoplaying && (E.params.autoplayDisableOnInteraction ? E.stopAutoplay() : E.pauseAutoplay()),
                      A = !1,
                    E.params.grabCursor && (E.container[0].style.cursor = "move",
                      E.container[0].style.cursor = "-webkit-grabbing",
                      E.container[0].style.cursor = "-moz-grabbin",
                      E.container[0].style.cursor = "grabbing")),
                      w = !0;
                    var r = E.touches.diff = E.isHorizontal() ? E.touches.currentX - E.touches.startX : E.touches.currentY - E.touches.startY;
                    r *= E.params.touchRatio,
                    E.rtl && (r = -r),
                      E.swipeDirection = r > 0 ? "prev" : "next",
                      H = r + M;
                    var s = !0;
                    if (r > 0 && H > E.minTranslate() ? (s = !1,
                      E.params.resistance && (H = E.minTranslate() - 1 + Math.pow(-E.minTranslate() + M + r, E.params.resistanceRatio))) : 0 > r && H < E.maxTranslate() && (s = !1,
                      E.params.resistance && (H = E.maxTranslate() + 1 - Math.pow(E.maxTranslate() - M - r, E.params.resistanceRatio))),
                      s && (t.preventedByNestedSwiper = !0),
                      !E.params.allowSwipeToNext && "next" === E.swipeDirection && M > H && (H = M),
                      !E.params.allowSwipeToPrev && "prev" === E.swipeDirection && H > M && (H = M),
                        E.params.followFinger) {
                      if (E.params.threshold > 0) {
                        if (!(Math.abs(r) > E.params.threshold || C))
                          return void (H = M);
                        if (!C)
                          return C = !0,
                            E.touches.startX = E.touches.currentX,
                            E.touches.startY = E.touches.currentY,
                            H = M,
                            void (E.touches.diff = E.isHorizontal() ? E.touches.currentX - E.touches.startX : E.touches.currentY - E.touches.startY)
                      }
                      (E.params.freeMode || E.params.watchSlidesProgress) && E.updateActiveIndex(),
                      E.params.freeMode && (0 === k.length && k.push({
                        position: E.touches[E.isHorizontal() ? "startX" : "startY"],
                        time: R
                      }),
                        k.push({
                          position: E.touches[E.isHorizontal() ? "currentX" : "currentY"],
                          time: (new window.Date).getTime()
                        })),
                        E.updateProgress(H),
                        E.setWrapperTranslate(H)
                    }
                  }
                }
              }
            }
          }
          ,
          E.onTouchEnd = function(t) {
            if (t.originalEvent && (t = t.originalEvent),
              _ && E.emit("onTouchEnd", E, t),
                _ = !1,
                b) {
              E.params.grabCursor && w && b && (E.container[0].style.cursor = "move",
                E.container[0].style.cursor = "-webkit-grab",
                E.container[0].style.cursor = "-moz-grab",
                E.container[0].style.cursor = "grab");
              var i = Date.now()
                , n = i - R;
              if (E.allowClick && (E.updateClickedSlide(t),
                  E.emit("onTap", E, t),
                300 > n && i - D > 300 && (P && clearTimeout(P),
                  P = setTimeout(function() {
                    E && (E.params.paginationHide && E.paginationContainer.length > 0 && !e(t.target).hasClass(E.params.bulletClass) && E.paginationContainer.toggleClass(E.params.paginationHiddenClass),
                      E.emit("onClick", E, t))
                  }, 300)),
                300 > n && 300 > i - D && (P && clearTimeout(P),
                  E.emit("onDoubleTap", E, t))),
                  D = Date.now(),
                  setTimeout(function() {
                    E && (E.allowClick = !0)
                  }, 0),
                !b || !w || !E.swipeDirection || 0 === E.touches.diff || H === M)
                return void (b = w = !1);
              b = w = !1;
              var r;
              if (r = E.params.followFinger ? E.rtl ? E.translate : -E.translate : -H,
                  E.params.freeMode) {
                if (r < -E.minTranslate())
                  return void E.slideTo(E.activeIndex);
                if (r > -E.maxTranslate())
                  return void E.slideTo(E.slides.length < E.snapGrid.length ? E.snapGrid.length - 1 : E.slides.length - 1);
                if (E.params.freeModeMomentum) {
                  if (k.length > 1) {
                    var s = k.pop()
                      , o = k.pop()
                      , a = s.position - o.position
                      , l = s.time - o.time;
                    E.velocity = a / l,
                      E.velocity = E.velocity / 2,
                    Math.abs(E.velocity) < E.params.freeModeMinimumVelocity && (E.velocity = 0),
                    (l > 150 || (new window.Date).getTime() - s.time > 300) && (E.velocity = 0)
                  } else
                    E.velocity = 0;
                  k.length = 0;
                  var h = 1e3 * E.params.freeModeMomentumRatio
                    , c = E.velocity * h
                    , u = E.translate + c;
                  E.rtl && (u = -u);
                  var p, d = !1, f = 20 * Math.abs(E.velocity) * E.params.freeModeMomentumBounceRatio;
                  if (u < E.maxTranslate())
                    E.params.freeModeMomentumBounce ? (u + E.maxTranslate() < -f && (u = E.maxTranslate() - f),
                      p = E.maxTranslate(),
                      d = !0,
                      A = !0) : u = E.maxTranslate();
                  else if (u > E.minTranslate())
                    E.params.freeModeMomentumBounce ? (u - E.minTranslate() > f && (u = E.minTranslate() + f),
                      p = E.minTranslate(),
                      d = !0,
                      A = !0) : u = E.minTranslate();
                  else if (E.params.freeModeSticky) {
                    var m, g = 0;
                    for (g = 0; g < E.snapGrid.length; g += 1)
                      if (E.snapGrid[g] > -u) {
                        m = g;
                        break
                      }
                    u = Math.abs(E.snapGrid[m] - u) < Math.abs(E.snapGrid[m - 1] - u) || "next" === E.swipeDirection ? E.snapGrid[m] : E.snapGrid[m - 1],
                    E.rtl || (u = -u)
                  }
                  if (0 !== E.velocity)
                    h = Math.abs(E.rtl ? (-u - E.translate) / E.velocity : (u - E.translate) / E.velocity);
                  else if (E.params.freeModeSticky)
                    return void E.slideReset();
                  E.params.freeModeMomentumBounce && d ? (E.updateProgress(p),
                    E.setWrapperTransition(h),
                    E.setWrapperTranslate(u),
                    E.onTransitionStart(),
                    E.animating = !0,
                    E.wrapper.transitionEnd(function() {
                      E && A && (E.emit("onMomentumBounce", E),
                        E.setWrapperTransition(E.params.speed),
                        E.setWrapperTranslate(p),
                        E.wrapper.transitionEnd(function() {
                          E && E.onTransitionEnd()
                        }))
                    })) : E.velocity ? (E.updateProgress(u),
                    E.setWrapperTransition(h),
                    E.setWrapperTranslate(u),
                    E.onTransitionStart(),
                  E.animating || (E.animating = !0,
                    E.wrapper.transitionEnd(function() {
                      E && E.onTransitionEnd()
                    }))) : E.updateProgress(u),
                    E.updateActiveIndex()
                }
                return void ((!E.params.freeModeMomentum || n >= E.params.longSwipesMs) && (E.updateProgress(),
                  E.updateActiveIndex()))
              }
              var v, y = 0, T = E.slidesSizesGrid[0];
              for (v = 0; v < E.slidesGrid.length; v += E.params.slidesPerGroup)
                "undefined" != typeof E.slidesGrid[v + E.params.slidesPerGroup] ? r >= E.slidesGrid[v] && r < E.slidesGrid[v + E.params.slidesPerGroup] && (y = v,
                  T = E.slidesGrid[v + E.params.slidesPerGroup] - E.slidesGrid[v]) : r >= E.slidesGrid[v] && (y = v,
                  T = E.slidesGrid[E.slidesGrid.length - 1] - E.slidesGrid[E.slidesGrid.length - 2]);
              var x = (r - E.slidesGrid[y]) / T;
              if (n > E.params.longSwipesMs) {
                if (!E.params.longSwipes)
                  return void E.slideTo(E.activeIndex);
                "next" === E.swipeDirection && E.slideTo(x >= E.params.longSwipesRatio ? y + E.params.slidesPerGroup : y),
                "prev" === E.swipeDirection && E.slideTo(x > 1 - E.params.longSwipesRatio ? y + E.params.slidesPerGroup : y)
              } else {
                if (!E.params.shortSwipes)
                  return void E.slideTo(E.activeIndex);
                "next" === E.swipeDirection && E.slideTo(y + E.params.slidesPerGroup),
                "prev" === E.swipeDirection && E.slideTo(y)
              }
            }
          }
          ,
          E._slideTo = function(t, e) {
            return E.slideTo(t, e, !0, !0)
          }
          ,
          E.slideTo = function(t, e, i, n) {
            "undefined" == typeof i && (i = !0),
            "undefined" == typeof t && (t = 0),
            0 > t && (t = 0),
              E.snapIndex = Math.floor(t / E.params.slidesPerGroup),
            E.snapIndex >= E.snapGrid.length && (E.snapIndex = E.snapGrid.length - 1);
            var r = -E.snapGrid[E.snapIndex];
            E.params.autoplay && E.autoplaying && (n || !E.params.autoplayDisableOnInteraction ? E.pauseAutoplay(e) : E.stopAutoplay()),
              E.updateProgress(r);
            for (var s = 0; s < E.slidesGrid.length; s++)
              -Math.floor(100 * r) >= Math.floor(100 * E.slidesGrid[s]) && (t = s);
            return !E.params.allowSwipeToNext && r < E.translate && r < E.minTranslate() ? !1 : !E.params.allowSwipeToPrev && r > E.translate && r > E.maxTranslate() && (E.activeIndex || 0) !== t ? !1 : ("undefined" == typeof e && (e = E.params.speed),
              E.previousIndex = E.activeIndex || 0,
              E.activeIndex = t,
              E.rtl && -r === E.translate || !E.rtl && r === E.translate ? (E.params.autoHeight && E.updateAutoHeight(),
                E.updateClasses(),
              "slide" !== E.params.effect && E.setWrapperTranslate(r),
                !1) : (E.updateClasses(),
                E.onTransitionStart(i),
                0 === e ? (E.setWrapperTranslate(r),
                  E.setWrapperTransition(0),
                  E.onTransitionEnd(i)) : (E.setWrapperTranslate(r),
                  E.setWrapperTransition(e),
                E.animating || (E.animating = !0,
                  E.wrapper.transitionEnd(function() {
                    E && E.onTransitionEnd(i)
                  }))),
                !0))
          }
          ,
          E.onTransitionStart = function(t) {
            "undefined" == typeof t && (t = !0),
            E.params.autoHeight && E.updateAutoHeight(),
            E.lazy && E.lazy.onTransitionStart(),
            t && (E.emit("onTransitionStart", E),
            E.activeIndex !== E.previousIndex && (E.emit("onSlideChangeStart", E),
              E.activeIndex > E.previousIndex ? E.emit("onSlideNextStart", E) : E.emit("onSlidePrevStart", E)))
          }
          ,
          E.onTransitionEnd = function(t) {
            E.animating = !1,
              E.setWrapperTransition(0),
            "undefined" == typeof t && (t = !0),
            E.lazy && E.lazy.onTransitionEnd(),
            t && (E.emit("onTransitionEnd", E),
            E.activeIndex !== E.previousIndex && (E.emit("onSlideChangeEnd", E),
              E.activeIndex > E.previousIndex ? E.emit("onSlideNextEnd", E) : E.emit("onSlidePrevEnd", E))),
            E.params.hashnav && E.hashnav && E.hashnav.setHash()
          }
          ,
          E.slideNext = function(t, e, i) {
            return E.params.loop ? E.animating ? !1 : (E.fixLoop(),
              E.container[0].clientLeft,
              E.slideTo(E.activeIndex + E.params.slidesPerGroup, e, t, i)) : E.slideTo(E.activeIndex + E.params.slidesPerGroup, e, t, i)
          }
          ,
          E._slideNext = function(t) {
            return E.slideNext(!0, t, !0)
          }
          ,
          E.slidePrev = function(t, e, i) {
            return E.params.loop ? E.animating ? !1 : (E.fixLoop(),
              E.container[0].clientLeft,
              E.slideTo(E.activeIndex - 1, e, t, i)) : E.slideTo(E.activeIndex - 1, e, t, i)
          }
          ,
          E._slidePrev = function(t) {
            return E.slidePrev(!0, t, !0)
          }
          ,
          E.slideReset = function(t, e) {
            return E.slideTo(E.activeIndex, e, t)
          }
          ,
          E.setWrapperTransition = function(t, e) {
            E.wrapper.transition(t),
            "slide" !== E.params.effect && E.effects[E.params.effect] && E.effects[E.params.effect].setTransition(t),
            E.params.parallax && E.parallax && E.parallax.setTransition(t),
            E.params.scrollbar && E.scrollbar && E.scrollbar.setTransition(t),
            E.params.control && E.controller && E.controller.setTransition(t, e),
              E.emit("onSetTransition", E, t)
          }
          ,
          E.setWrapperTranslate = function(t, e, i) {
            var n = 0
              , s = 0
              , o = 0;
            E.isHorizontal() ? n = E.rtl ? -t : t : s = t,
            E.params.roundLengths && (n = r(n),
              s = r(s)),
            E.params.virtualTranslate || E.wrapper.transform(E.support.transforms3d ? "translate3d(" + n + "px, " + s + "px, " + o + "px)" : "translate(" + n + "px, " + s + "px)"),
              E.translate = E.isHorizontal() ? n : s;
            var a, l = E.maxTranslate() - E.minTranslate();
            a = 0 === l ? 0 : (t - E.minTranslate()) / l,
            a !== E.progress && E.updateProgress(t),
            e && E.updateActiveIndex(),
            "slide" !== E.params.effect && E.effects[E.params.effect] && E.effects[E.params.effect].setTranslate(E.translate),
            E.params.parallax && E.parallax && E.parallax.setTranslate(E.translate),
            E.params.scrollbar && E.scrollbar && E.scrollbar.setTranslate(E.translate),
            E.params.control && E.controller && E.controller.setTranslate(E.translate, i),
              E.emit("onSetTranslate", E, E.translate)
          }
          ,
          E.getTranslate = function(t, e) {
            var i, n, r, s;
            return "undefined" == typeof e && (e = "x"),
              E.params.virtualTranslate ? E.rtl ? -E.translate : E.translate : (r = window.getComputedStyle(t, null),
                window.WebKitCSSMatrix ? (n = r.transform || r.webkitTransform,
                n.split(",").length > 6 && (n = n.split(", ").map(function(t) {
                  return t.replace(",", ".")
                }).join(", ")),
                  s = new window.WebKitCSSMatrix("none" === n ? "" : n)) : (s = r.MozTransform || r.OTransform || r.MsTransform || r.msTransform || r.transform || r.getPropertyValue("transform").replace("translate(", "matrix(1, 0, 0, 1,"),
                  i = s.toString().split(",")),
              "x" === e && (n = window.WebKitCSSMatrix ? s.m41 : parseFloat(16 === i.length ? i[12] : i[4])),
              "y" === e && (n = window.WebKitCSSMatrix ? s.m42 : parseFloat(16 === i.length ? i[13] : i[5])),
              E.rtl && n && (n = -n),
              n || 0)
          }
          ,
          E.getWrapperTranslate = function(t) {
            return "undefined" == typeof t && (t = E.isHorizontal() ? "x" : "y"),
              E.getTranslate(E.wrapper[0], t)
          }
          ,
          E.observers = [],
          E.initObservers = function() {
            if (E.params.observeParents)
              for (var t = E.container.parents(), e = 0; e < t.length; e++)
                a(t[e]);
            a(E.container[0], {
              childList: !1
            }),
              a(E.wrapper[0], {
                attributes: !1
              })
          }
          ,
          E.disconnectObservers = function() {
            for (var t = 0; t < E.observers.length; t++)
              E.observers[t].disconnect();
            E.observers = []
          }
          ,
          E.createLoop = function() {
            E.wrapper.children("." + E.params.slideClass + "." + E.params.slideDuplicateClass).remove();
            var t = E.wrapper.children("." + E.params.slideClass);
            "auto" !== E.params.slidesPerView || E.params.loopedSlides || (E.params.loopedSlides = t.length),
              E.loopedSlides = parseInt(E.params.loopedSlides || E.params.slidesPerView, 10),
              E.loopedSlides = E.loopedSlides + E.params.loopAdditionalSlides,
            E.loopedSlides > t.length && (E.loopedSlides = t.length);
            var i, n = [], r = [];
            for (t.each(function(i, s) {
              var o = e(this);
              i < E.loopedSlides && r.push(s),
              i < t.length && i >= t.length - E.loopedSlides && n.push(s),
                o.attr("data-swiper-slide-index", i)
            }),
                   i = 0; i < r.length; i++)
              E.wrapper.append(e(r[i].cloneNode(!0)).addClass(E.params.slideDuplicateClass));
            for (i = n.length - 1; i >= 0; i--)
              E.wrapper.prepend(e(n[i].cloneNode(!0)).addClass(E.params.slideDuplicateClass))
          }
          ,
          E.destroyLoop = function() {
            E.wrapper.children("." + E.params.slideClass + "." + E.params.slideDuplicateClass).remove(),
              E.slides.removeAttr("data-swiper-slide-index")
          }
          ,
          E.reLoop = function(t) {
            var e = E.activeIndex - E.loopedSlides;
            E.destroyLoop(),
              E.createLoop(),
              E.updateSlidesSize(),
            t && E.slideTo(e + E.loopedSlides, 0, !1)
          }
          ,
          E.fixLoop = function() {
            var t;
            E.activeIndex < E.loopedSlides ? (t = E.slides.length - 3 * E.loopedSlides + E.activeIndex,
              t += E.loopedSlides,
              E.slideTo(t, 0, !1, !0)) : ("auto" === E.params.slidesPerView && E.activeIndex >= 2 * E.loopedSlides || E.activeIndex > E.slides.length - 2 * E.params.slidesPerView) && (t = -E.slides.length + E.activeIndex + E.loopedSlides,
              t += E.loopedSlides,
              E.slideTo(t, 0, !1, !0))
          }
          ,
          E.appendSlide = function(t) {
            if (E.params.loop && E.destroyLoop(),
              "object" == typeof t && t.length)
              for (var e = 0; e < t.length; e++)
                t[e] && E.wrapper.append(t[e]);
            else
              E.wrapper.append(t);
            E.params.loop && E.createLoop(),
            E.params.observer && E.support.observer || E.update(!0)
          }
          ,
          E.prependSlide = function(t) {
            E.params.loop && E.destroyLoop();
            var e = E.activeIndex + 1;
            if ("object" == typeof t && t.length) {
              for (var i = 0; i < t.length; i++)
                t[i] && E.wrapper.prepend(t[i]);
              e = E.activeIndex + t.length
            } else
              E.wrapper.prepend(t);
            E.params.loop && E.createLoop(),
            E.params.observer && E.support.observer || E.update(!0),
              E.slideTo(e, 0, !1)
          }
          ,
          E.removeSlide = function(t) {
            E.params.loop && (E.destroyLoop(),
              E.slides = E.wrapper.children("." + E.params.slideClass));
            var e, i = E.activeIndex;
            if ("object" == typeof t && t.length) {
              for (var n = 0; n < t.length; n++)
                e = t[n],
                E.slides[e] && E.slides.eq(e).remove(),
                i > e && i--;
              i = Math.max(i, 0)
            } else
              e = t,
              E.slides[e] && E.slides.eq(e).remove(),
              i > e && i--,
                i = Math.max(i, 0);
            E.params.loop && E.createLoop(),
            E.params.observer && E.support.observer || E.update(!0),
              E.params.loop ? E.slideTo(i + E.loopedSlides, 0, !1) : E.slideTo(i, 0, !1)
          }
          ,
          E.removeAllSlides = function() {
            for (var t = [], e = 0; e < E.slides.length; e++)
              t.push(e);
            E.removeSlide(t)
          }
          ,
          E.effects = {
            fade: {
              setTranslate: function() {
                for (var t = 0; t < E.slides.length; t++) {
                  var e = E.slides.eq(t)
                    , i = e[0].swiperSlideOffset
                    , n = -i;
                  E.params.virtualTranslate || (n -= E.translate);
                  var r = 0;
                  E.isHorizontal() || (r = n,
                    n = 0);
                  var s = E.params.fade.crossFade ? Math.max(1 - Math.abs(e[0].progress), 0) : 1 + Math.min(Math.max(e[0].progress, -1), 0);
                  e.css({
                    opacity: s
                  }).transform("translate3d(" + n + "px, " + r + "px, 0px)")
                }
              },
              setTransition: function(t) {
                if (E.slides.transition(t),
                  E.params.virtualTranslate && 0 !== t) {
                  var e = !1;
                  E.slides.transitionEnd(function() {
                    if (!e && E) {
                      e = !0,
                        E.animating = !1;
                      for (var t = ["webkitTransitionEnd", "transitionend", "oTransitionEnd", "MSTransitionEnd", "msTransitionEnd"], i = 0; i < t.length; i++)
                        E.wrapper.trigger(t[i])
                    }
                  })
                }
              }
            },
            flip: {
              setTranslate: function() {
                for (var t = 0; t < E.slides.length; t++) {
                  var i = E.slides.eq(t)
                    , n = i[0].progress;
                  E.params.flip.limitRotation && (n = Math.max(Math.min(i[0].progress, 1), -1));
                  var r = i[0].swiperSlideOffset
                    , s = -180 * n
                    , o = s
                    , a = 0
                    , l = -r
                    , h = 0;
                  if (E.isHorizontal() ? E.rtl && (o = -o) : (h = l,
                      l = 0,
                      a = -o,
                      o = 0),
                      i[0].style.zIndex = -Math.abs(Math.round(n)) + E.slides.length,
                      E.params.flip.slideShadows) {
                    var c = i.find(E.isHorizontal() ? ".swiper-slide-shadow-left" : ".swiper-slide-shadow-top")
                      , u = i.find(E.isHorizontal() ? ".swiper-slide-shadow-right" : ".swiper-slide-shadow-bottom");
                    0 === c.length && (c = e('<div class="swiper-slide-shadow-' + (E.isHorizontal() ? "left" : "top") + '"></div>'),
                      i.append(c)),
                    0 === u.length && (u = e('<div class="swiper-slide-shadow-' + (E.isHorizontal() ? "right" : "bottom") + '"></div>'),
                      i.append(u)),
                    c.length && (c[0].style.opacity = Math.max(-n, 0)),
                    u.length && (u[0].style.opacity = Math.max(n, 0))
                  }
                  i.transform("translate3d(" + l + "px, " + h + "px, 0px) rotateX(" + a + "deg) rotateY(" + o + "deg)")
                }
              },
              setTransition: function(t) {
                if (E.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),
                  E.params.virtualTranslate && 0 !== t) {
                  var i = !1;
                  E.slides.eq(E.activeIndex).transitionEnd(function() {
                    if (!i && E && e(this).hasClass(E.params.slideActiveClass)) {
                      i = !0,
                        E.animating = !1;
                      for (var t = ["webkitTransitionEnd", "transitionend", "oTransitionEnd", "MSTransitionEnd", "msTransitionEnd"], n = 0; n < t.length; n++)
                        E.wrapper.trigger(t[n])
                    }
                  })
                }
              }
            },
            cube: {
              setTranslate: function() {
                var t, i = 0;
                E.params.cube.shadow && (E.isHorizontal() ? (t = E.wrapper.find(".swiper-cube-shadow"),
                0 === t.length && (t = e('<div class="swiper-cube-shadow"></div>'),
                  E.wrapper.append(t)),
                  t.css({
                    height: E.width + "px"
                  })) : (t = E.container.find(".swiper-cube-shadow"),
                0 === t.length && (t = e('<div class="swiper-cube-shadow"></div>'),
                  E.container.append(t))));
                for (var n = 0; n < E.slides.length; n++) {
                  var r = E.slides.eq(n)
                    , s = 90 * n
                    , o = Math.floor(s / 360);
                  E.rtl && (s = -s,
                    o = Math.floor(-s / 360));
                  var a = Math.max(Math.min(r[0].progress, 1), -1)
                    , l = 0
                    , h = 0
                    , c = 0;
                  n % 4 === 0 ? (l = 4 * -o * E.size,
                    c = 0) : (n - 1) % 4 === 0 ? (l = 0,
                    c = 4 * -o * E.size) : (n - 2) % 4 === 0 ? (l = E.size + 4 * o * E.size,
                    c = E.size) : (n - 3) % 4 === 0 && (l = -E.size,
                    c = 3 * E.size + 4 * E.size * o),
                  E.rtl && (l = -l),
                  E.isHorizontal() || (h = l,
                    l = 0);
                  var u = "rotateX(" + (E.isHorizontal() ? 0 : -s) + "deg) rotateY(" + (E.isHorizontal() ? s : 0) + "deg) translate3d(" + l + "px, " + h + "px, " + c + "px)";
                  if (1 >= a && a > -1 && (i = 90 * n + 90 * a,
                    E.rtl && (i = 90 * -n - 90 * a)),
                      r.transform(u),
                      E.params.cube.slideShadows) {
                    var p = r.find(E.isHorizontal() ? ".swiper-slide-shadow-left" : ".swiper-slide-shadow-top")
                      , d = r.find(E.isHorizontal() ? ".swiper-slide-shadow-right" : ".swiper-slide-shadow-bottom");
                    0 === p.length && (p = e('<div class="swiper-slide-shadow-' + (E.isHorizontal() ? "left" : "top") + '"></div>'),
                      r.append(p)),
                    0 === d.length && (d = e('<div class="swiper-slide-shadow-' + (E.isHorizontal() ? "right" : "bottom") + '"></div>'),
                      r.append(d)),
                    p.length && (p[0].style.opacity = Math.max(-a, 0)),
                    d.length && (d[0].style.opacity = Math.max(a, 0))
                  }
                }
                if (E.wrapper.css({
                    "-webkit-transform-origin": "50% 50% -" + E.size / 2 + "px",
                    "-moz-transform-origin": "50% 50% -" + E.size / 2 + "px",
                    "-ms-transform-origin": "50% 50% -" + E.size / 2 + "px",
                    "transform-origin": "50% 50% -" + E.size / 2 + "px"
                  }),
                    E.params.cube.shadow)
                  if (E.isHorizontal())
                    t.transform("translate3d(0px, " + (E.width / 2 + E.params.cube.shadowOffset) + "px, " + -E.width / 2 + "px) rotateX(90deg) rotateZ(0deg) scale(" + E.params.cube.shadowScale + ")");
                  else {
                    var f = Math.abs(i) - 90 * Math.floor(Math.abs(i) / 90)
                      , m = 1.5 - (Math.sin(2 * f * Math.PI / 360) / 2 + Math.cos(2 * f * Math.PI / 360) / 2)
                      , g = E.params.cube.shadowScale
                      , v = E.params.cube.shadowScale / m
                      , y = E.params.cube.shadowOffset;
                    t.transform("scale3d(" + g + ", 1, " + v + ") translate3d(0px, " + (E.height / 2 + y) + "px, " + -E.height / 2 / v + "px) rotateX(-90deg)")
                  }
                var T = E.isSafari || E.isUiWebView ? -E.size / 2 : 0;
                E.wrapper.transform("translate3d(0px,0," + T + "px) rotateX(" + (E.isHorizontal() ? 0 : i) + "deg) rotateY(" + (E.isHorizontal() ? -i : 0) + "deg)")
              },
              setTransition: function(t) {
                E.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),
                E.params.cube.shadow && !E.isHorizontal() && E.container.find(".swiper-cube-shadow").transition(t)
              }
            },
            coverflow: {
              setTranslate: function() {
                for (var t = E.translate, i = E.isHorizontal() ? -t + E.width / 2 : -t + E.height / 2, n = E.isHorizontal() ? E.params.coverflow.rotate : -E.params.coverflow.rotate, r = E.params.coverflow.depth, s = 0, o = E.slides.length; o > s; s++) {
                  var a = E.slides.eq(s)
                    , l = E.slidesSizesGrid[s]
                    , h = a[0].swiperSlideOffset
                    , c = (i - h - l / 2) / l * E.params.coverflow.modifier
                    , u = E.isHorizontal() ? n * c : 0
                    , p = E.isHorizontal() ? 0 : n * c
                    , d = -r * Math.abs(c)
                    , f = E.isHorizontal() ? 0 : E.params.coverflow.stretch * c
                    , m = E.isHorizontal() ? E.params.coverflow.stretch * c : 0;
                  Math.abs(m) < .001 && (m = 0),
                  Math.abs(f) < .001 && (f = 0),
                  Math.abs(d) < .001 && (d = 0),
                  Math.abs(u) < .001 && (u = 0),
                  Math.abs(p) < .001 && (p = 0);
                  var g = "translate3d(" + m + "px," + f + "px," + d + "px)  rotateX(" + p + "deg) rotateY(" + u + "deg)";
                  if (a.transform(g),
                      a[0].style.zIndex = -Math.abs(Math.round(c)) + 1,
                      E.params.coverflow.slideShadows) {
                    var v = a.find(E.isHorizontal() ? ".swiper-slide-shadow-left" : ".swiper-slide-shadow-top")
                      , y = a.find(E.isHorizontal() ? ".swiper-slide-shadow-right" : ".swiper-slide-shadow-bottom");
                    0 === v.length && (v = e('<div class="swiper-slide-shadow-' + (E.isHorizontal() ? "left" : "top") + '"></div>'),
                      a.append(v)),
                    0 === y.length && (y = e('<div class="swiper-slide-shadow-' + (E.isHorizontal() ? "right" : "bottom") + '"></div>'),
                      a.append(y)),
                    v.length && (v[0].style.opacity = c > 0 ? c : 0),
                    y.length && (y[0].style.opacity = -c > 0 ? -c : 0)
                  }
                }
                if (E.browser.ie) {
                  var T = E.wrapper[0].style;
                  T.perspectiveOrigin = i + "px 50%"
                }
              },
              setTransition: function(t) {
                E.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t)
              }
            }
          },
          E.lazy = {
            initialImageLoaded: !1,
            loadImageInSlide: function(t, i) {
              if ("undefined" != typeof t && ("undefined" == typeof i && (i = !0),
                0 !== E.slides.length)) {
                var n = E.slides.eq(t)
                  , r = n.find(".swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)");
                !n.hasClass("swiper-lazy") || n.hasClass("swiper-lazy-loaded") || n.hasClass("swiper-lazy-loading") || (r = r.add(n[0])),
                0 !== r.length && r.each(function() {
                  var t = e(this);
                  t.addClass("swiper-lazy-loading");
                  var r = t.attr("data-background")
                    , s = t.attr("data-src")
                    , o = t.attr("data-srcset");
                  E.loadImage(t[0], s || r, o, !1, function() {
                    if (r ? (t.css("background-image", 'url("' + r + '")'),
                        t.removeAttr("data-background")) : (o && (t.attr("srcset", o),
                        t.removeAttr("data-srcset")),
                      s && (t.attr("src", s),
                        t.removeAttr("data-src"))),
                        t.addClass("swiper-lazy-loaded").removeClass("swiper-lazy-loading"),
                        n.find(".swiper-lazy-preloader, .preloader").remove(),
                      E.params.loop && i) {
                      var e = n.attr("data-swiper-slide-index");
                      if (n.hasClass(E.params.slideDuplicateClass)) {
                        var a = E.wrapper.children('[data-swiper-slide-index="' + e + '"]:not(.' + E.params.slideDuplicateClass + ")");
                        E.lazy.loadImageInSlide(a.index(), !1)
                      } else {
                        var l = E.wrapper.children("." + E.params.slideDuplicateClass + '[data-swiper-slide-index="' + e + '"]');
                        E.lazy.loadImageInSlide(l.index(), !1)
                      }
                    }
                    E.emit("onLazyImageReady", E, n[0], t[0])
                  }),
                    E.emit("onLazyImageLoad", E, n[0], t[0])
                })
              }
            },
            load: function() {
              var t;
              if (E.params.watchSlidesVisibility)
                E.wrapper.children("." + E.params.slideVisibleClass).each(function() {
                  E.lazy.loadImageInSlide(e(this).index())
                });
              else if (E.params.slidesPerView > 1)
                for (t = E.activeIndex; t < E.activeIndex + E.params.slidesPerView; t++)
                  E.slides[t] && E.lazy.loadImageInSlide(t);
              else
                E.lazy.loadImageInSlide(E.activeIndex);
              if (E.params.lazyLoadingInPrevNext)
                if (E.params.slidesPerView > 1 || E.params.lazyLoadingInPrevNextAmount && E.params.lazyLoadingInPrevNextAmount > 1) {
                  var i = E.params.lazyLoadingInPrevNextAmount
                    , n = E.params.slidesPerView
                    , r = Math.min(E.activeIndex + n + Math.max(i, n), E.slides.length)
                    , s = Math.max(E.activeIndex - Math.max(n, i), 0);
                  for (t = E.activeIndex + E.params.slidesPerView; r > t; t++)
                    E.slides[t] && E.lazy.loadImageInSlide(t);
                  for (t = s; t < E.activeIndex; t++)
                    E.slides[t] && E.lazy.loadImageInSlide(t)
                } else {
                  var o = E.wrapper.children("." + E.params.slideNextClass);
                  o.length > 0 && E.lazy.loadImageInSlide(o.index());
                  var a = E.wrapper.children("." + E.params.slidePrevClass);
                  a.length > 0 && E.lazy.loadImageInSlide(a.index())
                }
            },
            onTransitionStart: function() {
              E.params.lazyLoading && (E.params.lazyLoadingOnTransitionStart || !E.params.lazyLoadingOnTransitionStart && !E.lazy.initialImageLoaded) && E.lazy.load()
            },
            onTransitionEnd: function() {
              E.params.lazyLoading && !E.params.lazyLoadingOnTransitionStart && E.lazy.load()
            }
          },
          E.scrollbar = {
            isTouched: !1,
            setDragPosition: function(t) {
              var e = E.scrollbar
                , i = E.isHorizontal() ? "touchstart" === t.type || "touchmove" === t.type ? t.targetTouches[0].pageX : t.pageX || t.clientX : "touchstart" === t.type || "touchmove" === t.type ? t.targetTouches[0].pageY : t.pageY || t.clientY
                , n = i - e.track.offset()[E.isHorizontal() ? "left" : "top"] - e.dragSize / 2
                , r = -E.minTranslate() * e.moveDivider
                , s = -E.maxTranslate() * e.moveDivider;
              r > n ? n = r : n > s && (n = s),
                n = -n / e.moveDivider,
                E.updateProgress(n),
                E.setWrapperTranslate(n, !0)
            },
            dragStart: function(t) {
              var e = E.scrollbar;
              e.isTouched = !0,
                t.preventDefault(),
                t.stopPropagation(),
                e.setDragPosition(t),
                clearTimeout(e.dragTimeout),
                e.track.transition(0),
              E.params.scrollbarHide && e.track.css("opacity", 1),
                E.wrapper.transition(100),
                e.drag.transition(100),
                E.emit("onScrollbarDragStart", E)
            },
            dragMove: function(t) {
              var e = E.scrollbar;
              e.isTouched && (t.preventDefault ? t.preventDefault() : t.returnValue = !1,
                e.setDragPosition(t),
                E.wrapper.transition(0),
                e.track.transition(0),
                e.drag.transition(0),
                E.emit("onScrollbarDragMove", E))
            },
            dragEnd: function() {
              var t = E.scrollbar;
              t.isTouched && (t.isTouched = !1,
              E.params.scrollbarHide && (clearTimeout(t.dragTimeout),
                t.dragTimeout = setTimeout(function() {
                  t.track.css("opacity", 0),
                    t.track.transition(400)
                }, 1e3)),
                E.emit("onScrollbarDragEnd", E),
              E.params.scrollbarSnapOnRelease && E.slideReset())
            },
            enableDraggable: function() {
              var t = E.scrollbar
                , i = E.support.touch ? t.track : document;
              e(t.track).on(E.touchEvents.start, t.dragStart),
                e(i).on(E.touchEvents.move, t.dragMove),
                e(i).on(E.touchEvents.end, t.dragEnd)
            },
            disableDraggable: function() {
              var t = E.scrollbar
                , i = E.support.touch ? t.track : document;
              e(t.track).off(E.touchEvents.start, t.dragStart),
                e(i).off(E.touchEvents.move, t.dragMove),
                e(i).off(E.touchEvents.end, t.dragEnd)
            },
            set: function() {
              if (E.params.scrollbar) {
                var t = E.scrollbar;
                t.track = e(E.params.scrollbar),
                E.params.uniqueNavElements && "string" == typeof E.params.scrollbar && t.track.length > 1 && 1 === E.container.find(E.params.scrollbar).length && (t.track = E.container.find(E.params.scrollbar)),
                  t.drag = t.track.find(".swiper-scrollbar-drag"),
                0 === t.drag.length && (t.drag = e('<div class="swiper-scrollbar-drag"></div>'),
                  t.track.append(t.drag)),
                  t.drag[0].style.width = "",
                  t.drag[0].style.height = "",
                  t.trackSize = E.isHorizontal() ? t.track[0].offsetWidth : t.track[0].offsetHeight,
                  t.divider = E.size / E.virtualSize,
                  t.moveDivider = t.divider * (t.trackSize / E.size),
                  t.dragSize = t.trackSize * t.divider,
                  E.isHorizontal() ? t.drag[0].style.width = t.dragSize + "px" : t.drag[0].style.height = t.dragSize + "px",
                  t.track[0].style.display = t.divider >= 1 ? "none" : "",
                E.params.scrollbarHide && (t.track[0].style.opacity = 0)
              }
            },
            setTranslate: function() {
              if (E.params.scrollbar) {
                var t, e = E.scrollbar, i = (E.translate || 0,
                  e.dragSize);
                t = (e.trackSize - e.dragSize) * E.progress,
                  E.rtl && E.isHorizontal() ? (t = -t,
                    t > 0 ? (i = e.dragSize - t,
                      t = 0) : -t + e.dragSize > e.trackSize && (i = e.trackSize + t)) : 0 > t ? (i = e.dragSize + t,
                    t = 0) : t + e.dragSize > e.trackSize && (i = e.trackSize - t),
                  E.isHorizontal() ? (e.drag.transform(E.support.transforms3d ? "translate3d(" + t + "px, 0, 0)" : "translateX(" + t + "px)"),
                    e.drag[0].style.width = i + "px") : (e.drag.transform(E.support.transforms3d ? "translate3d(0px, " + t + "px, 0)" : "translateY(" + t + "px)"),
                    e.drag[0].style.height = i + "px"),
                E.params.scrollbarHide && (clearTimeout(e.timeout),
                  e.track[0].style.opacity = 1,
                  e.timeout = setTimeout(function() {
                    e.track[0].style.opacity = 0,
                      e.track.transition(400)
                  }, 1e3))
              }
            },
            setTransition: function(t) {
              E.params.scrollbar && E.scrollbar.drag.transition(t)
            }
          },
          E.controller = {
            LinearSpline: function(t, e) {
              this.x = t,
                this.y = e,
                this.lastIndex = t.length - 1;
              var i, n;
              this.x.length,
                this.interpolate = function(t) {
                  return t ? (n = r(this.x, t),
                    i = n - 1,
                  (t - this.x[i]) * (this.y[n] - this.y[i]) / (this.x[n] - this.x[i]) + this.y[i]) : 0
                }
              ;
              var r = function() {
                var t, e, i;
                return function(n, r) {
                  for (e = -1,
                         t = n.length; t - e > 1; )
                    n[i = t + e >> 1] <= r ? e = i : t = i;
                  return t
                }
              }()
            },
            getInterpolateFunction: function(t) {
              E.controller.spline || (E.controller.spline = E.params.loop ? new E.controller.LinearSpline(E.slidesGrid,t.slidesGrid) : new E.controller.LinearSpline(E.snapGrid,t.snapGrid))
            },
            setTranslate: function(t, e) {
              function n(e) {
                t = e.rtl && "horizontal" === e.params.direction ? -E.translate : E.translate,
                "slide" === E.params.controlBy && (E.controller.getInterpolateFunction(e),
                  s = -E.controller.spline.interpolate(-t)),
                s && "container" !== E.params.controlBy || (r = (e.maxTranslate() - e.minTranslate()) / (E.maxTranslate() - E.minTranslate()),
                  s = (t - E.minTranslate()) * r + e.minTranslate()),
                E.params.controlInverse && (s = e.maxTranslate() - s),
                  e.updateProgress(s),
                  e.setWrapperTranslate(s, !1, E),
                  e.updateActiveIndex()
              }
              var r, s, o = E.params.control;
              if (E.isArray(o))
                for (var a = 0; a < o.length; a++)
                  o[a] !== e && o[a]instanceof i && n(o[a]);
              else
                o instanceof i && e !== o && n(o)
            },
            setTransition: function(t, e) {
              function n(e) {
                e.setWrapperTransition(t, E),
                0 !== t && (e.onTransitionStart(),
                  e.wrapper.transitionEnd(function() {
                    s && (e.params.loop && "slide" === E.params.controlBy && e.fixLoop(),
                      e.onTransitionEnd())
                  }))
              }
              var r, s = E.params.control;
              if (E.isArray(s))
                for (r = 0; r < s.length; r++)
                  s[r] !== e && s[r]instanceof i && n(s[r]);
              else
                s instanceof i && e !== s && n(s)
            }
          },
          E.hashnav = {
            init: function() {
              if (E.params.hashnav) {
                E.hashnav.initialized = !0;
                var t = document.location.hash.replace("#", "");
                if (t)
                  for (var e = 0, i = 0, n = E.slides.length; n > i; i++) {
                    var r = E.slides.eq(i)
                      , s = r.attr("data-hash");
                    if (s === t && !r.hasClass(E.params.slideDuplicateClass)) {
                      var o = r.index();
                      E.slideTo(o, e, E.params.runCallbacksOnInit, !0)
                    }
                  }
              }
            },
            setHash: function() {
              E.hashnav.initialized && E.params.hashnav && (document.location.hash = E.slides.eq(E.activeIndex).attr("data-hash") || "")
            }
          },
          E.disableKeyboardControl = function() {
            E.params.keyboardControl = !1,
              e(document).off("keydown", l)
          }
          ,
          E.enableKeyboardControl = function() {
            E.params.keyboardControl = !0,
              e(document).on("keydown", l)
          }
          ,
          E.mousewheel = {
            event: !1,
            lastScrollTime: (new window.Date).getTime()
          },
          E.params.mousewheelControl) {
        try {
          new window.WheelEvent("wheel"),
            E.mousewheel.event = "wheel"
        } catch (z) {
          (window.WheelEvent || E.container[0] && "wheel"in E.container[0]) && (E.mousewheel.event = "wheel")
        }
        !E.mousewheel.event && window.WheelEvent,
        E.mousewheel.event || void 0 === document.onmousewheel || (E.mousewheel.event = "mousewheel"),
        E.mousewheel.event || (E.mousewheel.event = "DOMMouseScroll")
      }
      E.disableMousewheelControl = function() {
        return E.mousewheel.event ? (E.container.off(E.mousewheel.event, h),
          !0) : !1
      }
        ,
        E.enableMousewheelControl = function() {
          return E.mousewheel.event ? (E.container.on(E.mousewheel.event, h),
            !0) : !1
        }
        ,
        E.parallax = {
          setTranslate: function() {
            E.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function() {
              c(this, E.progress)
            }),
              E.slides.each(function() {
                var t = e(this);
                t.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function() {
                  var e = Math.min(Math.max(t[0].progress, -1), 1);
                  c(this, e)
                })
              })
          },
          setTransition: function(t) {
            "undefined" == typeof t && (t = E.params.speed),
              E.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function() {
                var i = e(this)
                  , n = parseInt(i.attr("data-swiper-parallax-duration"), 10) || t;
                0 === t && (n = 0),
                  i.transition(n)
              })
          }
        },
        E._plugins = [];
      for (var F in E.plugins) {
        var N = E.plugins[F](E, E.params[F]);
        N && E._plugins.push(N)
      }
      return E.callPlugins = function(t) {
        for (var e = 0; e < E._plugins.length; e++)
          t in E._plugins[e] && E._plugins[e][t](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])
      }
        ,
        E.emitterEventListeners = {},
        E.emit = function(t) {
          E.params[t] && E.params[t](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
          var e;
          if (E.emitterEventListeners[t])
            for (e = 0; e < E.emitterEventListeners[t].length; e++)
              E.emitterEventListeners[t][e](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
          E.callPlugins && E.callPlugins(t, arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])
        }
        ,
        E.on = function(t, e) {
          return t = u(t),
          E.emitterEventListeners[t] || (E.emitterEventListeners[t] = []),
            E.emitterEventListeners[t].push(e),
            E
        }
        ,
        E.off = function(t, e) {
          var i;
          if (t = u(t),
            "undefined" == typeof e)
            return E.emitterEventListeners[t] = [],
              E;
          if (E.emitterEventListeners[t] && 0 !== E.emitterEventListeners[t].length) {
            for (i = 0; i < E.emitterEventListeners[t].length; i++)
              E.emitterEventListeners[t][i] === e && E.emitterEventListeners[t].splice(i, 1);
            return E
          }
        }
        ,
        E.once = function(t, e) {
          t = u(t);
          var i = function() {
            e(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]),
              E.off(t, i)
          };
          return E.on(t, i),
            E
        }
        ,
        E.a11y = {
          makeFocusable: function(t) {
            return t.attr("tabIndex", "0"),
              t
          },
          addRole: function(t, e) {
            return t.attr("role", e),
              t
          },
          addLabel: function(t, e) {
            return t.attr("aria-label", e),
              t
          },
          disable: function(t) {
            return t.attr("aria-disabled", !0),
              t
          },
          enable: function(t) {
            return t.attr("aria-disabled", !1),
              t
          },
          onEnterKey: function(t) {
            13 === t.keyCode && (e(t.target).is(E.params.nextButton) ? (E.onClickNext(t),
              E.a11y.notify(E.isEnd ? E.params.lastSlideMessage : E.params.nextSlideMessage)) : e(t.target).is(E.params.prevButton) && (E.onClickPrev(t),
              E.a11y.notify(E.isBeginning ? E.params.firstSlideMessage : E.params.prevSlideMessage)),
            e(t.target).is("." + E.params.bulletClass) && e(t.target)[0].click())
          },
          liveRegion: e('<span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>'),
          notify: function(t) {
            var e = E.a11y.liveRegion;
            0 !== e.length && (e.html(""),
              e.html(t))
          },
          init: function() {
            E.params.nextButton && E.nextButton && E.nextButton.length > 0 && (E.a11y.makeFocusable(E.nextButton),
              E.a11y.addRole(E.nextButton, "button"),
              E.a11y.addLabel(E.nextButton, E.params.nextSlideMessage)),
            E.params.prevButton && E.prevButton && E.prevButton.length > 0 && (E.a11y.makeFocusable(E.prevButton),
              E.a11y.addRole(E.prevButton, "button"),
              E.a11y.addLabel(E.prevButton, E.params.prevSlideMessage)),
              e(E.container).append(E.a11y.liveRegion)
          },
          initPagination: function() {
            E.params.pagination && E.params.paginationClickable && E.bullets && E.bullets.length && E.bullets.each(function() {
              var t = e(this);
              E.a11y.makeFocusable(t),
                E.a11y.addRole(t, "button"),
                E.a11y.addLabel(t, E.params.paginationBulletMessage.replace(/{{index}}/, t.index() + 1))
            })
          },
          destroy: function() {
            E.a11y.liveRegion && E.a11y.liveRegion.length > 0 && E.a11y.liveRegion.remove()
          }
        },
        E.init = function() {
          E.params.loop && E.createLoop(),
            E.updateContainerSize(),
            E.updateSlidesSize(),
            E.updatePagination(),
          E.params.scrollbar && E.scrollbar && (E.scrollbar.set(),
          E.params.scrollbarDraggable && E.scrollbar.enableDraggable()),
          "slide" !== E.params.effect && E.effects[E.params.effect] && (E.params.loop || E.updateProgress(),
            E.effects[E.params.effect].setTranslate()),
            E.params.loop ? E.slideTo(E.params.initialSlide + E.loopedSlides, 0, E.params.runCallbacksOnInit) : (E.slideTo(E.params.initialSlide, 0, E.params.runCallbacksOnInit),
            0 === E.params.initialSlide && (E.parallax && E.params.parallax && E.parallax.setTranslate(),
            E.lazy && E.params.lazyLoading && (E.lazy.load(),
              E.lazy.initialImageLoaded = !0))),
            E.attachEvents(),
          E.params.observer && E.support.observer && E.initObservers(),
          E.params.preloadImages && !E.params.lazyLoading && E.preloadImages(),
          E.params.autoplay && E.startAutoplay(),
          E.params.keyboardControl && E.enableKeyboardControl && E.enableKeyboardControl(),
          E.params.mousewheelControl && E.enableMousewheelControl && E.enableMousewheelControl(),
          E.params.hashnav && E.hashnav && E.hashnav.init(),
          E.params.a11y && E.a11y && E.a11y.init(),
            E.emit("onInit", E)
        }
        ,
        E.cleanupStyles = function() {
          E.container.removeClass(E.classNames.join(" ")).removeAttr("style"),
            E.wrapper.removeAttr("style"),
          E.slides && E.slides.length && E.slides.removeClass([E.params.slideVisibleClass, E.params.slideActiveClass, E.params.slideNextClass, E.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row"),
          E.paginationContainer && E.paginationContainer.length && E.paginationContainer.removeClass(E.params.paginationHiddenClass),
          E.bullets && E.bullets.length && E.bullets.removeClass(E.params.bulletActiveClass),
          E.params.prevButton && e(E.params.prevButton).removeClass(E.params.buttonDisabledClass),
          E.params.nextButton && e(E.params.nextButton).removeClass(E.params.buttonDisabledClass),
          E.params.scrollbar && E.scrollbar && (E.scrollbar.track && E.scrollbar.track.length && E.scrollbar.track.removeAttr("style"),
          E.scrollbar.drag && E.scrollbar.drag.length && E.scrollbar.drag.removeAttr("style"))
        }
        ,
        E.destroy = function(t, e) {
          E.detachEvents(),
            E.stopAutoplay(),
          E.params.scrollbar && E.scrollbar && E.params.scrollbarDraggable && E.scrollbar.disableDraggable(),
          E.params.loop && E.destroyLoop(),
          e && E.cleanupStyles(),
            E.disconnectObservers(),
          E.params.keyboardControl && E.disableKeyboardControl && E.disableKeyboardControl(),
          E.params.mousewheelControl && E.disableMousewheelControl && E.disableMousewheelControl(),
          E.params.a11y && E.a11y && E.a11y.destroy(),
            E.emit("onDestroy"),
          t !== !1 && (E = null)
        }
        ,
        E.init(),
        E
    }
  };
  i.prototype = {
    isSafari: function() {
      var t = navigator.userAgent.toLowerCase();
      return t.indexOf("safari") >= 0 && t.indexOf("chrome") < 0 && t.indexOf("android") < 0
    }(),
    isUiWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),
    isArray: function(t) {
      return "[object Array]" === Object.prototype.toString.apply(t)
    },
    browser: {
      ie: window.navigator.pointerEnabled || window.navigator.msPointerEnabled,
      ieTouch: window.navigator.msPointerEnabled && window.navigator.msMaxTouchPoints > 1 || window.navigator.pointerEnabled && window.navigator.maxTouchPoints > 1
    },
    device: function() {
      var t = navigator.userAgent
        , e = t.match(/(Android);?[\s\/]+([\d.]+)?/)
        , i = t.match(/(iPad).*OS\s([\d_]+)/)
        , n = t.match(/(iPod)(.*OS\s([\d_]+))?/)
        , r = !i && t.match(/(iPhone\sOS)\s([\d_]+)/);
      return {
        ios: i || r || n,
        android: e
      }
    }(),
    support: {
      touch: window.Modernizr && Modernizr.touch === !0 || function() {
        return !!("ontouchstart"in window || window.DocumentTouch && document instanceof DocumentTouch)
      }(),
      transforms3d: window.Modernizr && Modernizr.csstransforms3d === !0 || function() {
        var t = document.createElement("div").style;
        return "webkitPerspective"in t || "MozPerspective"in t || "OPerspective"in t || "MsPerspective"in t || "perspective"in t
      }(),
      flexbox: function() {
        for (var t = document.createElement("div").style, e = "alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "), i = 0; i < e.length; i++)
          if (e[i]in t)
            return !0
      }(),
      observer: function() {
        return "MutationObserver"in window || "WebkitMutationObserver"in window
      }()
    },
    plugins: {}
  };
  for (var n = ["jQuery", "Zepto", "Dom7"], r = 0; r < n.length; r++)
    window[n[r]] && t(window[n[r]]);
  var s;
  s = "undefined" == typeof Dom7 ? window.Dom7 || window.Zepto || window.jQuery : Dom7,
  s && ("transitionEnd"in s.fn || (s.fn.transitionEnd = function(t) {
      function e(s) {
        if (s.target === this)
          for (t.call(this, s),
                 i = 0; i < n.length; i++)
            r.off(n[i], e)
      }
      var i, n = ["webkitTransitionEnd", "transitionend", "oTransitionEnd", "MSTransitionEnd", "msTransitionEnd"], r = this;
      if (t)
        for (i = 0; i < n.length; i++)
          r.on(n[i], e);
      return this
    }
  ),
  "transform"in s.fn || (s.fn.transform = function(t) {
      for (var e = 0; e < this.length; e++) {
        var i = this[e].style;
        i.webkitTransform = i.MsTransform = i.msTransform = i.MozTransform = i.OTransform = i.transform = t
      }
      return this
    }
  ),
  "transition"in s.fn || (s.fn.transition = function(t) {
      "string" != typeof t && (t += "ms");
      for (var e = 0; e < this.length; e++) {
        var i = this[e].style;
        i.webkitTransitionDuration = i.MsTransitionDuration = i.msTransitionDuration = i.MozTransitionDuration = i.OTransitionDuration = i.transitionDuration = t
      }
      return this
    }
  )),
    window.Swiper = i
}(),
"undefined" != typeof module ? module.exports = window.Swiper : "function" == typeof define && define.amd && define([], function() {
  "use strict";
  return window.Swiper
}),
function(t, e) {
  "$:nomunge";
  var i, n = t.jQuery || t.Cowboy || (t.Cowboy = {});
  n.throttle = i = function(t, i, r, s) {
    function o() {
      function n() {
        l = +new Date,
          r.apply(h, u)
      }
      function o() {
        a = e
      }
      var h = this
        , c = +new Date - l
        , u = arguments;
      s && !a && n(),
      a && clearTimeout(a),
        s === e && c > t ? n() : i !== !0 && (a = setTimeout(s ? o : n, s === e ? t - c : t))
    }
    var a, l = 0;
    return "boolean" != typeof i && (s = r,
      r = i,
      i = e),
    n.guid && (o.guid = r.guid = r.guid || n.guid++),
      o
  }
    ,
    n.debounce = function(t, n, r) {
      return r === e ? i(t, n, !1) : i(t, r, n !== !1)
    }
}(this),
function(t) {
  function e(e, i, n, r) {
    var s = e.text()
      , o = s.split(i)
      , a = "";
    o.length && (t(o).each(function(t, e) {
      a += '<span class="' + n + (t + 1) + '" aria-hidden="true">' + e + "</span>" + r
    }),
      e.attr("aria-label", s).empty().append(a))
  }
  var i = {
    init: function() {
      return this.each(function() {
        e(t(this), "", "char", "")
      })
    },
    words: function() {
      return this.each(function() {
        e(t(this), " ", "word", " ")
      })
    },
    lines: function() {
      return this.each(function() {
        var i = "eefec303079ad17405c889e092e105b0";
        e(t(this).children("br").replaceWith(i).end(), i, "line", "")
      })
    }
  };
  t.fn.lettering = function(e) {
    return e && i[e] ? i[e].apply(this, [].slice.call(arguments, 1)) : "letters" !== e && e ? (t.error("Method " + e + " does not exist on jQuery.lettering"),
      this) : i.init.apply(this, [].slice.call(arguments, 0))
  }
}(jQuery),
!function(t, e) {
  "use strict";
  function i(t) {
    t = t.split(" ");
    for (var e = {}, i = t.length, n = []; i--; )
      e.hasOwnProperty(t[i]) || (e[t[i]] = 1,
        n.unshift(t[i]));
    return n.join(" ")
  }
  var n = "file:" === t.location.protocol
    , r = e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1")
    , s = Array.prototype.forEach || function(t, e) {
    if (void 0 === this || null === this || "function" != typeof t)
      throw new TypeError;
    var i, n = this.length >>> 0;
    for (i = 0; n > i; ++i)
      i in this && t.call(e, this[i], i, this)
  }
    , o = {}
    , a = 0
    , l = []
    , h = []
    , c = {}
    , u = function(t) {
    return t.cloneNode(!0)
  }
    , p = function(t, e) {
    h[t] = h[t] || [],
      h[t].push(e)
  }
    , d = function(t) {
    for (var e = 0, i = h[t].length; i > e; e++)
      !function(e) {
        setTimeout(function() {
          h[t][e](u(o[t]))
        }, 0)
      }(e)
  }
    , f = function(e, i) {
    if (void 0 !== o[e])
      o[e]instanceof SVGSVGElement ? i(u(o[e])) : p(e, i);
    else {
      if (!t.XMLHttpRequest)
        return i("Browser does not support XMLHttpRequest"),
          !1;
      o[e] = {},
        p(e, i);
      var r = new XMLHttpRequest;
      r.onreadystatechange = function() {
        if (4 === r.readyState) {
          if (404 === r.status || null === r.responseXML)
            return i("Unable to load SVG file: " + e),
            n && i("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),
              i(),
              !1;
          if (!(200 === r.status || n && 0 === r.status))
            return i("There was a problem injecting the SVG: " + r.status + " " + r.statusText),
              !1;
          if (r.responseXML instanceof Document)
            o[e] = r.responseXML.documentElement;
          else if (DOMParser && DOMParser instanceof Function) {
            var t;
            try {
              var s = new DOMParser;
              t = s.parseFromString(r.responseText, "text/xml")
            } catch (a) {
              t = void 0
            }
            if (!t || t.getElementsByTagName("parsererror").length)
              return i("Unable to parse SVG file: " + e),
                !1;
            o[e] = t.documentElement
          }
          d(e)
        }
      }
        ,
        r.open("GET", e),
      r.overrideMimeType && r.overrideMimeType("text/xml"),
        r.send()
    }
  }
    , m = function(e, n, o, h) {
    var u = e.getAttribute("data-src") || e.getAttribute("src");
    if (!/\.svg/i.test(u))
      return void h("Attempted to inject a file with a non-svg extension: " + u);
    if (!r) {
      var p = e.getAttribute("data-fallback") || e.getAttribute("data-png");
      return void (p ? (e.setAttribute("src", p),
        h(null)) : o ? (e.setAttribute("src", o + "/" + u.split("/").pop().replace(".svg", ".png")),
        h(null)) : h("This browser does not support SVG and no PNG fallback was defined."))
    }
    -1 === l.indexOf(e) && (l.push(e),
      e.setAttribute("src", ""),
      f(u, function(r) {
        if ("undefined" == typeof r || "string" == typeof r)
          return h(r),
            !1;
        var o = e.getAttribute("id");
        o && r.setAttribute("id", o);
        var p = e.getAttribute("title");
        p && r.setAttribute("title", p);
        var d = [].concat(r.getAttribute("class") || [], "injected-svg", e.getAttribute("class") || []).join(" ");
        r.setAttribute("class", i(d));
        var f = e.getAttribute("style");
        f && r.setAttribute("style", f);
        var m = [].filter.call(e.attributes, function(t) {
          return /^data-\w[\w\-]*$/.test(t.name)
        });
        s.call(m, function(t) {
          t.name && t.value && r.setAttribute(t.name, t.value)
        });
        var g, v, y, E, T, x = {
          clipPath: ["clip-path"],
          "color-profile": ["color-profile"],
          cursor: ["cursor"],
          filter: ["filter"],
          linearGradient: ["fill", "stroke"],
          marker: ["marker", "marker-start", "marker-mid", "marker-end"],
          mask: ["mask"],
          pattern: ["fill", "stroke"],
          radialGradient: ["fill", "stroke"]
        };
        Object.keys(x).forEach(function(t) {
          g = t,
            y = x[t],
            v = r.querySelectorAll("defs " + g + "[id]");
          for (var e = 0, i = v.length; i > e; e++) {
            E = v[e].id,
              T = E + "-" + a;
            var n;
            s.call(y, function(t) {
              n = r.querySelectorAll("[" + t + '*="' + E + '"]');
              for (var e = 0, i = n.length; i > e; e++)
                n[e].setAttribute(t, "url(#" + T + ")")
            }),
              v[e].id = T
          }
        }),
          r.removeAttribute("xmlns:a");
        for (var b, w, _ = r.querySelectorAll("script"), R = [], S = 0, H = _.length; H > S; S++)
          w = _[S].getAttribute("type"),
          w && "application/ecmascript" !== w && "application/javascript" !== w || (b = _[S].innerText || _[S].textContent,
            R.push(b),
            r.removeChild(_[S]));
        if (R.length > 0 && ("always" === n || "once" === n && !c[u])) {
          for (var M = 0, C = R.length; C > M; M++)
            new Function(R[M])(t);
          c[u] = !0
        }
        var P = r.querySelectorAll("style");
        s.call(P, function(t) {
          t.textContent += ""
        }),
          e.parentNode.replaceChild(r, e),
          delete l[l.indexOf(e)],
          e = null,
          a++,
          h(r)
      }))
  }
    , g = function(t, e, i) {
    e = e || {};
    var n = e.evalScripts || "always"
      , r = e.pngFallback || !1
      , o = e.each;
    if (void 0 !== t.length) {
      var a = 0;
      s.call(t, function(e) {
        m(e, n, r, function(e) {
          o && "function" == typeof o && o(e),
          i && t.length === ++a && i(a)
        })
      })
    } else
      t ? m(t, n, r, function(e) {
        o && "function" == typeof o && o(e),
        i && i(1),
          t = null
      }) : i && i(0)
  };
  "object" == typeof module && "object" == typeof module.exports ? module.exports = exports = g : "function" == typeof define && define.amd ? define(function() {
    return g
  }) : "object" == typeof t && (t.SVGInjector = g)
}(window, document),
!function(t, e) {
  function i(i) {
    if ("undefined" == typeof i)
      throw new Error('Pathformer [constructor]: "element" parameter is required');
    if (i.constructor === String && (i = e.getElementById(i),
        !i))
      throw new Error('Pathformer [constructor]: "element" parameter is not related to an existing ID');
    if (!(i.constructor instanceof t.SVGElement || /^svg$/i.test(i.nodeName)))
      throw new Error('Pathformer [constructor]: "element" parameter must be a string or a SVGelement');
    this.el = i,
      this.scan(i)
  }
  function n(t, e, i) {
    this.isReady = !1,
      this.setElement(t, e),
      this.setOptions(e),
      this.setCallback(i),
    this.isReady && this.init()
  }
  i.prototype.TYPES = ["line", "ellipse", "circle", "polygon", "polyline", "rect"],
    i.prototype.ATTR_WATCH = ["cx", "cy", "points", "r", "rx", "ry", "x", "x1", "x2", "y", "y1", "y2"],
    i.prototype.scan = function(t) {
      for (var e, i, n, r, s = t.querySelectorAll(this.TYPES.join(",")), o = 0; o < s.length; o++)
        i = s[o],
          e = this[i.tagName.toLowerCase() + "ToPath"],
          n = e(this.parseAttr(i.attributes)),
          r = this.pathMaker(i, n),
          i.parentNode.replaceChild(r, i)
    }
    ,
    i.prototype.lineToPath = function(t) {
      var e = {};
      return e.d = "M" + t.x1 + "," + t.y1 + "L" + t.x2 + "," + t.y2,
        e
    }
    ,
    i.prototype.rectToPath = function(t) {
      var e = {}
        , i = parseFloat(t.x) || 0
        , n = parseFloat(t.y) || 0
        , r = parseFloat(t.width) || 0
        , s = parseFloat(t.height) || 0;
      return e.d = "M" + i + " " + n + " ",
        e.d += "L" + (i + r) + " " + n + " ",
        e.d += "L" + (i + r) + " " + (n + s) + " ",
        e.d += "L" + i + " " + (n + s) + " Z",
        e
    }
    ,
    i.prototype.polylineToPath = function(t) {
      var e, i, n = {}, r = t.points.trim().split(" ");
      if (-1 === t.points.indexOf(",")) {
        var s = [];
        for (e = 0; e < r.length; e += 2)
          s.push(r[e] + "," + r[e + 1]);
        r = s
      }
      for (i = "M" + r[0],
             e = 1; e < r.length; e++)
        -1 !== r[e].indexOf(",") && (i += "L" + r[e]);
      return n.d = i,
        n
    }
    ,
    i.prototype.polygonToPath = function(t) {
      var e = i.prototype.polylineToPath(t);
      return e.d += "Z",
        e
    }
    ,
    i.prototype.ellipseToPath = function(t) {
      var e = t.cx - t.rx
        , i = t.cy
        , n = parseFloat(t.cx) + parseFloat(t.rx)
        , r = t.cy
        , s = {};
      return s.d = "M" + e + "," + i + "A" + t.rx + "," + t.ry + " 0,1,1 " + n + "," + r + "A" + t.rx + "," + t.ry + " 0,1,1 " + e + "," + r,
        s
    }
    ,
    i.prototype.circleToPath = function(t) {
      var e = {}
        , i = t.cx - t.r
        , n = t.cy
        , r = parseFloat(t.cx) + parseFloat(t.r)
        , s = t.cy;
      return e.d = "M" + i + "," + n + "A" + t.r + "," + t.r + " 0,1,1 " + r + "," + s + "A" + t.r + "," + t.r + " 0,1,1 " + i + "," + s,
        e
    }
    ,
    i.prototype.pathMaker = function(t, i) {
      var n, r, s = e.createElementNS("http://www.w3.org/2000/svg", "path");
      for (n = 0; n < t.attributes.length; n++)
        r = t.attributes[n],
        -1 === this.ATTR_WATCH.indexOf(r.name) && s.setAttribute(r.name, r.value);
      for (n in i)
        s.setAttribute(n, i[n]);
      return s
    }
    ,
    i.prototype.parseAttr = function(t) {
      for (var e, i = {}, n = 0; n < t.length; n++) {
        if (e = t[n],
          -1 !== this.ATTR_WATCH.indexOf(e.name) && -1 !== e.value.indexOf("%"))
          throw new Error("Pathformer [parseAttr]: a SVG shape got values in percentage. This cannot be transformed into 'path' tags. Please use 'viewBox'.");
        i[e.name] = e.value
      }
      return i
    }
  ;
  var r, s, o;
  n.LINEAR = function(t) {
    return t
  }
    ,
    n.EASE = function(t) {
      return -Math.cos(t * Math.PI) / 2 + .5
    }
    ,
    n.EASE_OUT = function(t) {
      return 1 - Math.pow(1 - t, 3)
    }
    ,
    n.EASE_IN = function(t) {
      return Math.pow(t, 3)
    }
    ,
    n.EASE_OUT_BOUNCE = function(t) {
      var e = -Math.cos(.5 * t * Math.PI) + 1
        , i = Math.pow(e, 1.5)
        , n = Math.pow(1 - t, 2)
        , r = -Math.abs(Math.cos(2.5 * i * Math.PI)) + 1;
      return 1 - n + r * n
    }
    ,
    n.prototype.setElement = function(i, n) {
      if ("undefined" == typeof i)
        throw new Error('Vivus [constructor]: "element" parameter is required');
      if (i.constructor === String && (i = e.getElementById(i),
          !i))
        throw new Error('Vivus [constructor]: "element" parameter is not related to an existing ID');
      if (this.parentEl = i,
        n && n.file) {
        var r = e.createElement("object");
        r.setAttribute("type", "image/svg+xml"),
          r.setAttribute("data", n.file),
          r.setAttribute("built-by-vivus", "true"),
          i.appendChild(r),
          i = r
      }
      switch (i.constructor) {
        case t.SVGSVGElement:
        case t.SVGElement:
          this.el = i,
            this.isReady = !0;
          break;
        case t.HTMLObjectElement:
          var s, o;
          o = this,
            s = function(t) {
              if (!o.isReady) {
                if (o.el = i.contentDocument && i.contentDocument.querySelector("svg"),
                  !o.el && t)
                  throw new Error("Vivus [constructor]: object loaded does not contain any SVG");
                return o.el ? (i.getAttribute("built-by-vivus") && (o.parentEl.insertBefore(o.el, i),
                  o.parentEl.removeChild(i),
                  o.el.setAttribute("width", "100%"),
                  o.el.setAttribute("height", "100%")),
                  o.isReady = !0,
                  o.init(),
                  !0) : void 0
              }
            }
            ,
          s() || i.addEventListener("load", s);
          break;
        default:
          throw new Error('Vivus [constructor]: "element" parameter is not valid (or miss the "file" attribute)')
      }
    }
    ,
    n.prototype.setOptions = function(e) {
      var i = ["delayed", "async", "oneByOne", "scenario", "scenario-sync"]
        , r = ["inViewport", "manual", "autostart"];
      if (void 0 !== e && e.constructor !== Object)
        throw new Error('Vivus [constructor]: "options" parameter must be an object');
      if (e = e || {},
        e.type && -1 === i.indexOf(e.type))
        throw new Error("Vivus [constructor]: " + e.type + " is not an existing animation `type`");
      if (this.type = e.type || i[0],
        e.start && -1 === r.indexOf(e.start))
        throw new Error("Vivus [constructor]: " + e.start + " is not an existing `start` option");
      if (this.start = e.start || r[0],
          this.isIE = -1 !== t.navigator.userAgent.indexOf("MSIE") || -1 !== t.navigator.userAgent.indexOf("Trident/") || -1 !== t.navigator.userAgent.indexOf("Edge/"),
          this.duration = o(e.duration, 120),
          this.delay = o(e.delay, null),
          this.dashGap = o(e.dashGap, 1),
          this.forceRender = e.hasOwnProperty("forceRender") ? !!e.forceRender : this.isIE,
          this.selfDestroy = !!e.selfDestroy,
          this.onReady = e.onReady,
          this.frameLength = this.currentFrame = this.map = this.delayUnit = this.speed = this.handle = null,
          this.ignoreInvisible = e.hasOwnProperty("ignoreInvisible") ? !!e.ignoreInvisible : !1,
          this.animTimingFunction = e.animTimingFunction || n.LINEAR,
          this.pathTimingFunction = e.pathTimingFunction || n.LINEAR,
        this.delay >= this.duration)
        throw new Error("Vivus [constructor]: delay must be shorter than duration")
    }
    ,
    n.prototype.setCallback = function(t) {
      if (t && t.constructor !== Function)
        throw new Error('Vivus [constructor]: "callback" parameter must be a function');
      this.callback = t || function() {}
    }
    ,
    n.prototype.mapping = function() {
      var e, i, n, r, s, a, l, h;
      for (h = a = l = 0,
             i = this.el.querySelectorAll("path"),
             e = 0; e < i.length; e++)
        n = i[e],
        this.isInvisible(n) || (s = {
          el: n,
          length: Math.ceil(n.getTotalLength())
        },
          isNaN(s.length) ? t.console && console.warn && console.warn("Vivus [mapping]: cannot retrieve a path element length", n) : (this.map.push(s),
            n.style.strokeDasharray = s.length + " " + (s.length + 2 * this.dashGap),
            n.style.strokeDashoffset = s.length + this.dashGap,
            s.length += this.dashGap,
            a += s.length,
            this.renderPath(e)));
      for (a = 0 === a ? 1 : a,
             this.delay = null === this.delay ? this.duration / 3 : this.delay,
             this.delayUnit = this.delay / (i.length > 1 ? i.length - 1 : 1),
             e = 0; e < this.map.length; e++) {
        switch (s = this.map[e],
          this.type) {
          case "delayed":
            s.startAt = this.delayUnit * e,
              s.duration = this.duration - this.delay;
            break;
          case "oneByOne":
            s.startAt = l / a * this.duration,
              s.duration = s.length / a * this.duration;
            break;
          case "async":
            s.startAt = 0,
              s.duration = this.duration;
            break;
          case "scenario-sync":
            n = i[e],
              r = this.parseAttr(n),
              s.startAt = h + (o(r["data-delay"], this.delayUnit) || 0),
              s.duration = o(r["data-duration"], this.duration),
              h = void 0 !== r["data-async"] ? s.startAt : s.startAt + s.duration,
              this.frameLength = Math.max(this.frameLength, s.startAt + s.duration);
            break;
          case "scenario":
            n = i[e],
              r = this.parseAttr(n),
              s.startAt = o(r["data-start"], this.delayUnit) || 0,
              s.duration = o(r["data-duration"], this.duration),
              this.frameLength = Math.max(this.frameLength, s.startAt + s.duration)
        }
        l += s.length,
          this.frameLength = this.frameLength || this.duration
      }
    }
    ,
    n.prototype.drawer = function() {
      var t = this;
      this.currentFrame += this.speed,
        this.currentFrame <= 0 ? (this.stop(),
          this.reset(),
          this.callback(this)) : this.currentFrame >= this.frameLength ? (this.stop(),
          this.currentFrame = this.frameLength,
          this.trace(),
        this.selfDestroy && this.destroy(),
          this.callback(this)) : (this.trace(),
          this.handle = r(function() {
            t.drawer()
          }))
    }
    ,
    n.prototype.trace = function() {
      var t, e, i, n;
      for (n = this.animTimingFunction(this.currentFrame / this.frameLength) * this.frameLength,
             t = 0; t < this.map.length; t++)
        i = this.map[t],
          e = (n - i.startAt) / i.duration,
          e = this.pathTimingFunction(Math.max(0, Math.min(1, e))),
        i.progress !== e && (i.progress = e,
          i.el.style.strokeDashoffset = Math.floor(i.length * (1 - e)),
          this.renderPath(t))
    }
    ,
    n.prototype.renderPath = function(t) {
      if (this.forceRender && this.map && this.map[t]) {
        var e = this.map[t]
          , i = e.el.cloneNode(!0);
        e.el.parentNode.replaceChild(i, e.el),
          e.el = i
      }
    }
    ,
    n.prototype.init = function() {
      this.frameLength = 0,
        this.currentFrame = 0,
        this.map = [],
        new i(this.el),
        this.mapping(),
        this.starter(),
      this.onReady && this.onReady(this)
    }
    ,
    n.prototype.starter = function() {
      switch (this.start) {
        case "manual":
          return;
        case "autostart":
          this.play();
          break;
        case "inViewport":
          var e = this
            , i = function() {
            e.isInViewport(e.parentEl, 1) && (e.play(),
              t.removeEventListener("scroll", i))
          };
          t.addEventListener("scroll", i),
            i()
      }
    }
    ,
    n.prototype.getStatus = function() {
      return 0 === this.currentFrame ? "start" : this.currentFrame === this.frameLength ? "end" : "progress"
    }
    ,
    n.prototype.reset = function() {
      return this.setFrameProgress(0)
    }
    ,
    n.prototype.finish = function() {
      return this.setFrameProgress(1)
    }
    ,
    n.prototype.setFrameProgress = function(t) {
      return t = Math.min(1, Math.max(0, t)),
        this.currentFrame = Math.round(this.frameLength * t),
        this.trace(),
        this
    }
    ,
    n.prototype.play = function(t) {
      if (t && "number" != typeof t)
        throw new Error("Vivus [play]: invalid speed");
      return this.speed = t || 1,
      this.handle || this.drawer(),
        this
    }
    ,
    n.prototype.stop = function() {
      return this.handle && (s(this.handle),
        this.handle = null),
        this
    }
    ,
    n.prototype.destroy = function() {
      var t, e;
      for (t = 0; t < this.map.length; t++)
        e = this.map[t],
          e.el.style.strokeDashoffset = null,
          e.el.style.strokeDasharray = null,
          this.renderPath(t)
    }
    ,
    n.prototype.isInvisible = function(t) {
      var e, i = t.getAttribute("data-ignore");
      return null !== i ? "false" !== i : this.ignoreInvisible ? (e = t.getBoundingClientRect(),
      !e.width && !e.height) : !1
    }
    ,
    n.prototype.parseAttr = function(t) {
      var e, i = {};
      if (t && t.attributes)
        for (var n = 0; n < t.attributes.length; n++)
          e = t.attributes[n],
            i[e.name] = e.value;
      return i
    }
    ,
    n.prototype.isInViewport = function(t, e) {
      var i = this.scrollY()
        , n = i + this.getViewportH()
        , r = t.getBoundingClientRect()
        , s = r.height
        , o = i + r.top
        , a = o + s;
      return e = e || 0,
      n >= o + s * e && a >= i
    }
    ,
    n.prototype.docElem = t.document.documentElement,
    n.prototype.getViewportH = function() {
      var e = this.docElem.clientHeight
        , i = t.innerHeight;
      return i > e ? i : e
    }
    ,
    n.prototype.scrollY = function() {
      return t.pageYOffset || this.docElem.scrollTop
    }
    ,
    r = function() {
      return t.requestAnimationFrame || t.webkitRequestAnimationFrame || t.mozRequestAnimationFrame || t.oRequestAnimationFrame || t.msRequestAnimationFrame || function(e) {
        return t.setTimeout(e, 1e3 / 60)
      }
    }(),
    s = function() {
      return t.cancelAnimationFrame || t.webkitCancelAnimationFrame || t.mozCancelAnimationFrame || t.oCancelAnimationFrame || t.msCancelAnimationFrame || function(e) {
        return t.clearTimeout(e)
      }
    }(),
    o = function(t, e) {
      var i = parseInt(t, 10);
      return i >= 0 ? i : e
    }
    ,
    "function" == typeof define && define.amd ? define([], function() {
      return n
    }) : "object" == typeof exports ? module.exports = n : t.Vivus = n
}(window, document),
function(t) {
  "use strict";
  t.ajaxChimp = {
    responses: {
      "We have sent you a confirmation email": 0,
      "Please enter a value": 1,
      "An email address must contain a single @": 2,
      "The domain portion of the email address is invalid (the portion after the @: )": 3,
      "The username portion of the email address is invalid (the portion before the @: )": 4,
      "This email address looks fake or invalid. Please enter a real email address": 5
    },
    translations: {
      en: null
    },
    init: function(e, i) {
      t(e).ajaxChimp(i)
    }
  },
    t.fn.ajaxChimp = function(e) {
      return t(this).each(function(i, n) {
        var r = t(n)
          , s = r.find("input[type=email]")
          , o = r.find("label[for=" + s.attr("id") + "]")
          , a = t.extend({
          url: r.attr("action"),
          language: "en"
        }, e)
          , l = a.url.replace("/post?", "/post-json?").concat("&c=?");
        r.attr("novalidate", "true"),
          s.attr("name", "EMAIL"),
          r.submit(function() {
            function e(e) {
              if ("success" === e.result)
                i = "We have sent you a confirmation email",
                  o.removeClass("error").addClass("valid"),
                  s.removeClass("error").addClass("valid");
              else {
                s.removeClass("valid").addClass("error"),
                  o.removeClass("valid").addClass("error");
                var n = -1;
                try {
                  var r = e.msg.split(" - ", 2);
                  if (void 0 === r[1])
                    i = e.msg;
                  else {
                    var l = parseInt(r[0], 10);
                    l.toString() === r[0] ? (n = r[0],
                      i = r[1]) : (n = -1,
                      i = e.msg)
                  }
                } catch (h) {
                  n = -1,
                    i = e.msg
                }
              }
              "en" !== a.language && void 0 !== t.ajaxChimp.responses[i] && t.ajaxChimp.translations && t.ajaxChimp.translations[a.language] && t.ajaxChimp.translations[a.language][t.ajaxChimp.responses[i]] && (i = t.ajaxChimp.translations[a.language][t.ajaxChimp.responses[i]]),
                o.html(i),
                o.show(2e3),
              a.callback && a.callback(e)
            }
            var i, n = {}, h = r.serializeArray();
            t.each(h, function(t, e) {
              n[e.name] = e.value
            }),
              t.ajax({
                url: l,
                data: n,
                success: e,
                dataType: "jsonp",
                error: function(t, e) {
                  console.log("mailchimp ajax submit error: " + e)
                }
              });
            var c = "Submitting...";
            return "en" !== a.language && t.ajaxChimp.translations && t.ajaxChimp.translations[a.language] && t.ajaxChimp.translations[a.language].submit && (c = t.ajaxChimp.translations[a.language].submit),
              o.html(c).show(2e3),
              !1
          })
      }),
        this
    }
}(jQuery),
function(t) {
  "use strict";
  function e(e) {
    return /In/.test(e) || t.inArray(e, t.fn.textillate.defaults.inEffects) >= 0
  }
  function i(e) {
    return /Out/.test(e) || t.inArray(e, t.fn.textillate.defaults.outEffects) >= 0
  }
  function n(t) {
    return "true" !== t && "false" !== t ? t : "true" === t
  }
  function r(e) {
    var i = e.attributes || []
      , r = {};
    return i.length ? (t.each(i, function(t, e) {
      var i = e.nodeName.replace(/delayscale/, "delayScale");
      /^data-in-*/.test(i) ? (r.in = r.in || {},
        r.in[i.replace(/data-in-/, "")] = n(e.nodeValue)) : /^data-out-*/.test(i) ? (r.out = r.out || {},
        r.out[i.replace(/data-out-/, "")] = n(e.nodeValue)) : /^data-*/.test(i) && (r[i.replace(/data-/, "")] = n(e.nodeValue))
    }),
      r) : r
  }
  function s(t) {
    for (var e, i, n = t.length; n; e = parseInt(Math.random() * n),
      i = t[--n],
      t[n] = t[e],
      t[e] = i)
      ;
    return t
  }
  function o(t, e, i) {
    t.addClass("animated " + e).css("visibility", "visible").show(),
      t.one("animationend webkitAnimationEnd oAnimationEnd", function() {
        t.removeClass("animated " + e),
        i && i()
      })
  }
  function a(n, r, a) {
    var l = n.length;
    return l ? (r.shuffle && (n = s(n)),
    r.reverse && (n = n.toArray().reverse()),
      void t.each(n, function(n, s) {
        function h() {
          e(r.effect) ? c.css("visibility", "visible") : i(r.effect) && c.css("visibility", "hidden"),
            l -= 1,
          !l && a && a()
        }
        var c = t(s)
          , u = r.sync ? r.delay : r.delay * n * r.delayScale;
        c.text() ? setTimeout(function() {
          o(c, r.effect, h)
        }, u) : h()
      })) : void (a && a())
  }
  var l = function(n, s) {
    var o = this
      , l = t(n);
    o.init = function() {
      o.$texts = l.find(s.selector),
      o.$texts.length || (o.$texts = t('<ul class="texts"><li>' + l.html() + "</li></ul>"),
        l.html(o.$texts)),
        o.$texts.hide(),
        o.$current = t("<span>").html(o.$texts.find(":first-child").html()).prependTo(l),
        e(s.in.effect) ? o.$current.css("visibility", "hidden") : i(s.out.effect) && o.$current.css("visibility", "visible"),
        o.setOptions(s),
        o.timeoutRun = null,
        setTimeout(function() {
          o.options.autoStart && o.start()
        }, o.options.initialDelay)
    }
      ,
      o.setOptions = function(t) {
        o.options = t
      }
      ,
      o.triggerEvent = function(e) {
        var i = t.Event(e + ".tlt");
        return l.trigger(i, o),
          i
      }
      ,
      o.in = function(n, s) {
        n = n || 0;
        var l, h = o.$texts.find(":nth-child(" + ((n || 0) + 1) + ")"), c = t.extend(!0, {}, o.options, h.length ? r(h[0]) : {});
        h.addClass("current"),
          o.triggerEvent("inAnimationBegin"),
          o.$current.html(h.html()).lettering("words"),
        "char" == o.options.type && o.$current.find('[class^="word"]').css({
          display: "inline-block",
          "-webkit-transform": "translate3d(0,0,0)",
          "-moz-transform": "translate3d(0,0,0)",
          "-o-transform": "translate3d(0,0,0)",
          transform: "translate3d(0,0,0)"
        }).each(function() {
          t(this).lettering()
        }),
          l = o.$current.find('[class^="' + o.options.type + '"]').css("display", "inline-block"),
          e(c.in.effect) ? l.css("visibility", "hidden") : i(c.in.effect) && l.css("visibility", "visible"),
          o.currentIndex = n,
          a(l, c.in, function() {
            o.triggerEvent("inAnimationEnd"),
            c.in.callback && c.in.callback(),
            s && s(o)
          })
      }
      ,
      o.out = function(e) {
        var i = o.$texts.find(":nth-child(" + ((o.currentIndex || 0) + 1) + ")")
          , n = o.$current.find('[class^="' + o.options.type + '"]')
          , s = t.extend(!0, {}, o.options, i.length ? r(i[0]) : {});
        o.triggerEvent("outAnimationBegin"),
          a(n, s.out, function() {
            i.removeClass("current"),
              o.triggerEvent("outAnimationEnd"),
            s.out.callback && s.out.callback(),
            e && e(o)
          })
      }
      ,
      o.start = function(t) {
        setTimeout(function() {
          o.triggerEvent("start"),
            function e(t) {
              o.in(t, function() {
                var i = o.$texts.children().length;
                t += 1,
                  !o.options.loop && t >= i ? (o.options.callback && o.options.callback(),
                    o.triggerEvent("end")) : (t %= i,
                    o.timeoutRun = setTimeout(function() {
                      o.out(function() {
                        e(t)
                      })
                    }, o.options.minDisplayTime))
              })
            }(t || 0)
        }, o.options.initialDelay)
      }
      ,
      o.stop = function() {
        o.timeoutRun && (clearInterval(o.timeoutRun),
          o.timeoutRun = null)
      }
      ,
      o.init()
  };
  t.fn.textillate = function(e, i) {
    return this.each(function() {
      var n = t(this)
        , s = n.data("textillate")
        , o = t.extend(!0, {}, t.fn.textillate.defaults, r(this), "object" == typeof e && e);
      s ? "string" == typeof e ? s[e].apply(s, [].concat(i)) : s.setOptions.call(s, o) : n.data("textillate", s = new l(this,o))
    })
  }
    ,
    t.fn.textillate.defaults = {
      selector: ".texts",
      loop: !1,
      minDisplayTime: 2e3,
      initialDelay: 0,
      "in": {
        effect: "fadeInLeftBig",
        delayScale: 1.5,
        delay: 50,
        sync: !1,
        reverse: !1,
        shuffle: !1,
        callback: function() {}
      },
      out: {
        effect: "hinge",
        delayScale: 1.5,
        delay: 50,
        sync: !1,
        reverse: !1,
        shuffle: !1,
        callback: function() {}
      },
      autoStart: !0,
      inEffects: [],
      outEffects: ["hinge"],
      callback: function() {},
      type: "char"
    }
}(jQuery),
function() {
  "use strict";
  function t(e, n) {
    function r(t, e) {
      return function() {
        return t.apply(e, arguments)
      }
    }
    var s;
    if (n = n || {},
        this.trackingClick = !1,
        this.trackingClickStart = 0,
        this.targetElement = null,
        this.touchStartX = 0,
        this.touchStartY = 0,
        this.lastTouchIdentifier = 0,
        this.touchBoundary = n.touchBoundary || 10,
        this.layer = e,
        this.tapDelay = n.tapDelay || 200,
        this.tapTimeout = n.tapTimeout || 700,
        !t.notNeeded(e)) {
      for (var o = ["onMouse", "onClick", "onTouchStart", "onTouchMove", "onTouchEnd", "onTouchCancel"], a = this, l = 0, h = o.length; h > l; l++)
        a[o[l]] = r(a[o[l]], a);
      i && (e.addEventListener("mouseover", this.onMouse, !0),
        e.addEventListener("mousedown", this.onMouse, !0),
        e.addEventListener("mouseup", this.onMouse, !0)),
        e.addEventListener("click", this.onClick, !0),
        e.addEventListener("touchstart", this.onTouchStart, !1),
        e.addEventListener("touchmove", this.onTouchMove, !1),
        e.addEventListener("touchend", this.onTouchEnd, !1),
        e.addEventListener("touchcancel", this.onTouchCancel, !1),
      Event.prototype.stopImmediatePropagation || (e.removeEventListener = function(t, i, n) {
          var r = Node.prototype.removeEventListener;
          "click" === t ? r.call(e, t, i.hijacked || i, n) : r.call(e, t, i, n)
        }
          ,
          e.addEventListener = function(t, i, n) {
            var r = Node.prototype.addEventListener;
            "click" === t ? r.call(e, t, i.hijacked || (i.hijacked = function(t) {
                t.propagationStopped || i(t)
              }
            ), n) : r.call(e, t, i, n)
          }
      ),
      "function" == typeof e.onclick && (s = e.onclick,
        e.addEventListener("click", function(t) {
          s(t)
        }, !1),
        e.onclick = null)
    }
  }
  var e = navigator.userAgent.indexOf("Windows Phone") >= 0
    , i = navigator.userAgent.indexOf("Android") > 0 && !e
    , n = /iP(ad|hone|od)/.test(navigator.userAgent) && !e
    , r = n && /OS 4_\d(_\d)?/.test(navigator.userAgent)
    , s = n && /OS [6-7]_\d/.test(navigator.userAgent)
    , o = navigator.userAgent.indexOf("BB10") > 0;
  t.prototype.needsClick = function(t) {
    switch (t.nodeName.toLowerCase()) {
      case "button":
      case "select":
      case "textarea":
        if (t.disabled)
          return !0;
        break;
      case "input":
        if (n && "file" === t.type || t.disabled)
          return !0;
        break;
      case "label":
      case "iframe":
      case "video":
        return !0
    }
    return /\bneedsclick\b/.test(t.className)
  }
    ,
    t.prototype.needsFocus = function(t) {
      switch (t.nodeName.toLowerCase()) {
        case "textarea":
          return !0;
        case "select":
          return !i;
        case "input":
          switch (t.type) {
            case "button":
            case "checkbox":
            case "file":
            case "image":
            case "radio":
            case "submit":
              return !1
          }
          return !t.disabled && !t.readOnly;
        default:
          return /\bneedsfocus\b/.test(t.className)
      }
    }
    ,
    t.prototype.sendClick = function(t, e) {
      var i, n;
      document.activeElement && document.activeElement !== t && document.activeElement.blur(),
        n = e.changedTouches[0],
        i = document.createEvent("MouseEvents"),
        i.initMouseEvent(this.determineEventType(t), !0, !0, window, 1, n.screenX, n.screenY, n.clientX, n.clientY, !1, !1, !1, !1, 0, null),
        i.forwardedTouchEvent = !0,
        t.dispatchEvent(i)
    }
    ,
    t.prototype.determineEventType = function(t) {
      return i && "select" === t.tagName.toLowerCase() ? "mousedown" : "click"
    }
    ,
    t.prototype.focus = function(t) {
      var e;
      n && t.setSelectionRange && 0 !== t.type.indexOf("date") && "time" !== t.type && "month" !== t.type ? (e = t.value.length,
        t.setSelectionRange(e, e)) : t.focus()
    }
    ,
    t.prototype.updateScrollParent = function(t) {
      var e, i;
      if (e = t.fastClickScrollParent,
        !e || !e.contains(t)) {
        i = t;
        do {
          if (i.scrollHeight > i.offsetHeight) {
            e = i,
              t.fastClickScrollParent = i;
            break
          }
          i = i.parentElement
        } while (i)
      }
      e && (e.fastClickLastScrollTop = e.scrollTop)
    }
    ,
    t.prototype.getTargetElementFromEventTarget = function(t) {
      return t.nodeType === Node.TEXT_NODE ? t.parentNode : t
    }
    ,
    t.prototype.onTouchStart = function(t) {
      var e, i, s;
      if (t.targetTouches.length > 1)
        return !0;
      if (e = this.getTargetElementFromEventTarget(t.target),
          i = t.targetTouches[0],
          n) {
        if (s = window.getSelection(),
          s.rangeCount && !s.isCollapsed)
          return !0;
        if (!r) {
          if (i.identifier && i.identifier === this.lastTouchIdentifier)
            return t.preventDefault(),
              !1;
          this.lastTouchIdentifier = i.identifier,
            this.updateScrollParent(e)
        }
      }
      return this.trackingClick = !0,
        this.trackingClickStart = t.timeStamp,
        this.targetElement = e,
        this.touchStartX = i.pageX,
        this.touchStartY = i.pageY,
      t.timeStamp - this.lastClickTime < this.tapDelay && t.preventDefault(),
        !0
    }
    ,
    t.prototype.touchHasMoved = function(t) {
      var e = t.changedTouches[0]
        , i = this.touchBoundary;
      return Math.abs(e.pageX - this.touchStartX) > i || Math.abs(e.pageY - this.touchStartY) > i ? !0 : !1
    }
    ,
    t.prototype.onTouchMove = function(t) {
      return this.trackingClick ? ((this.targetElement !== this.getTargetElementFromEventTarget(t.target) || this.touchHasMoved(t)) && (this.trackingClick = !1,
        this.targetElement = null),
        !0) : !0
    }
    ,
    t.prototype.findControl = function(t) {
      return void 0 !== t.control ? t.control : t.htmlFor ? document.getElementById(t.htmlFor) : t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")
    }
    ,
    t.prototype.onTouchEnd = function(t) {
      var e, o, a, l, h, c = this.targetElement;
      if (!this.trackingClick)
        return !0;
      if (t.timeStamp - this.lastClickTime < this.tapDelay)
        return this.cancelNextClick = !0,
          !0;
      if (t.timeStamp - this.trackingClickStart > this.tapTimeout)
        return !0;
      if (this.cancelNextClick = !1,
          this.lastClickTime = t.timeStamp,
          o = this.trackingClickStart,
          this.trackingClick = !1,
          this.trackingClickStart = 0,
        s && (h = t.changedTouches[0],
          c = document.elementFromPoint(h.pageX - window.pageXOffset, h.pageY - window.pageYOffset) || c,
          c.fastClickScrollParent = this.targetElement.fastClickScrollParent),
          a = c.tagName.toLowerCase(),
        "label" === a) {
        if (e = this.findControl(c)) {
          if (this.focus(c),
              i)
            return !1;
          c = e
        }
      } else if (this.needsFocus(c))
        return t.timeStamp - o > 100 || n && window.top !== window && "input" === a ? (this.targetElement = null,
          !1) : (this.focus(c),
          this.sendClick(c, t),
        n && "select" === a || (this.targetElement = null,
          t.preventDefault()),
          !1);
      return n && !r && (l = c.fastClickScrollParent,
      l && l.fastClickLastScrollTop !== l.scrollTop) ? !0 : (this.needsClick(c) || (t.preventDefault(),
        this.sendClick(c, t)),
        !1)
    }
    ,
    t.prototype.onTouchCancel = function() {
      this.trackingClick = !1,
        this.targetElement = null
    }
    ,
    t.prototype.onMouse = function(t) {
      return this.targetElement ? t.forwardedTouchEvent ? !0 : t.cancelable && (!this.needsClick(this.targetElement) || this.cancelNextClick) ? (t.stopImmediatePropagation ? t.stopImmediatePropagation() : t.propagationStopped = !0,
        t.stopPropagation(),
        t.preventDefault(),
        !1) : !0 : !0
    }
    ,
    t.prototype.onClick = function(t) {
      var e;
      return this.trackingClick ? (this.targetElement = null,
        this.trackingClick = !1,
        !0) : "submit" === t.target.type && 0 === t.detail ? !0 : (e = this.onMouse(t),
      e || (this.targetElement = null),
        e)
    }
    ,
    t.prototype.destroy = function() {
      var t = this.layer;
      i && (t.removeEventListener("mouseover", this.onMouse, !0),
        t.removeEventListener("mousedown", this.onMouse, !0),
        t.removeEventListener("mouseup", this.onMouse, !0)),
        t.removeEventListener("click", this.onClick, !0),
        t.removeEventListener("touchstart", this.onTouchStart, !1),
        t.removeEventListener("touchmove", this.onTouchMove, !1),
        t.removeEventListener("touchend", this.onTouchEnd, !1),
        t.removeEventListener("touchcancel", this.onTouchCancel, !1)
    }
    ,
    t.notNeeded = function(t) {
      var e, n, r, s;
      if ("undefined" == typeof window.ontouchstart)
        return !0;
      if (n = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1]) {
        if (!i)
          return !0;
        if (e = document.querySelector("meta[name=viewport]")) {
          if (-1 !== e.content.indexOf("user-scalable=no"))
            return !0;
          if (n > 31 && document.documentElement.scrollWidth <= window.outerWidth)
            return !0
        }
      }
      if (o && (r = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),
        r[1] >= 10 && r[2] >= 3 && (e = document.querySelector("meta[name=viewport]")))) {
        if (-1 !== e.content.indexOf("user-scalable=no"))
          return !0;
        if (document.documentElement.scrollWidth <= window.outerWidth)
          return !0
      }
      return "none" === t.style.msTouchAction || "manipulation" === t.style.touchAction ? !0 : (s = +(/Firefox\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1],
        s >= 27 && (e = document.querySelector("meta[name=viewport]"),
        e && (-1 !== e.content.indexOf("user-scalable=no") || document.documentElement.scrollWidth <= window.outerWidth)) ? !0 : "none" === t.style.touchAction || "manipulation" === t.style.touchAction ? !0 : !1)
    }
    ,
    t.attach = function(e, i) {
      return new t(e,i)
    }
    ,
    "function" == typeof define && "object" == typeof define.amd && define.amd ? define(function() {
      return t
    }) : "undefined" != typeof module && module.exports ? (module.exports = t.attach,
      module.exports.FastClick = t) : window.FastClick = t
}(),
function(t) {
  function e(e) {
    function n() {
      e ? o.removeData(e) : p && delete i[p]
    }
    function s() {
      l.id = setTimeout(function() {
        l.fn()
      }, d)
    }
    var o, a = this, l = {}, h = e ? t.fn : t, c = arguments, u = 4, p = c[1], d = c[2], f = c[3];
    if ("string" != typeof p && (u--,
        p = e = 0,
        d = c[1],
        f = c[2]),
        e ? (o = a.eq(0),
          o.data(e, l = o.data(e) || {})) : p && (l = i[p] || (i[p] = {})),
      l.id && clearTimeout(l.id),
        delete l.id,
        f)
      l.fn = function(t) {
        "string" == typeof f && (f = h[f]),
          f.apply(a, r.call(c, u)) !== !0 || t ? n() : s()
      }
        ,
        s();
    else {
      if (l.fn)
        return void 0 === d ? n() : l.fn(d === !1),
          !0;
      n()
    }
  }
  var i = {}
    , n = "doTimeout"
    , r = Array.prototype.slice;
  t[n] = function() {
    return e.apply(window, [0].concat(r.call(arguments)))
  }
    ,
    t.fn[n] = function() {
      var t = r.call(arguments)
        , i = e.apply(this, [n + t[0]].concat(t));
      return "number" == typeof t[0] || "number" == typeof t[1] ? this : i
    }
}(jQuery),
!function(t, e) {
  function i(t, e, i) {
    var n = t.children()
      , r = !1;
    t.empty();
    for (var o = 0, a = n.length; a > o; o++) {
      var l = n.eq(o);
      if (t.append(l),
        i && t.append(i),
          s(t, e)) {
        l.remove(),
          r = !0;
        break
      }
      i && i.detach()
    }
    return r
  }
  function n(e, i, o, a, l) {
    var h = !1
      , c = "a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style"
      , u = "script, .dotdotdot-keep";
    return e.contents().detach().each(function() {
      var p = this
        , d = t(p);
      if ("undefined" == typeof p)
        return !0;
      if (d.is(u))
        e.append(d);
      else {
        if (h)
          return !0;
        e.append(d),
        !l || d.is(a.after) || d.find(a.after).length || e[e.is(c) ? "after" : "append"](l),
        s(o, a) && (h = 3 == p.nodeType ? r(d, i, o, a, l) : n(d, i, o, a, l),
        h || (d.detach(),
          h = !0)),
        h || l && l.detach()
      }
    }),
      i.addClass("is-truncated"),
      h
  }
  function r(e, i, n, r, a) {
    var c = e[0];
    if (!c)
      return !1;
    var p = h(c)
      , d = -1 !== p.indexOf(" ") ? " " : "\u3000"
      , f = "letter" == r.wrap ? "" : d
      , m = p.split(f)
      , g = -1
      , v = -1
      , y = 0
      , E = m.length - 1;
    for (r.fallbackToLetter && 0 == y && 0 == E && (f = "",
      m = p.split(f),
      E = m.length - 1); E >= y && (0 != y || 0 != E); ) {
      var T = Math.floor((y + E) / 2);
      if (T == v)
        break;
      v = T,
        l(c, m.slice(0, v + 1).join(f) + r.ellipsis),
        n.children().each(function() {
          t(this).toggle().toggle()
        }),
        s(n, r) ? (E = v,
        r.fallbackToLetter && 0 == y && 0 == E && (f = "",
          m = m[0].split(f),
          g = -1,
          v = -1,
          y = 0,
          E = m.length - 1)) : (g = v,
          y = v)
    }
    if (-1 == g || 1 == m.length && 0 == m[0].length) {
      var x = e.parent();
      e.detach();
      var b = a && a.closest(x).length ? a.length : 0;
      x.contents().length > b ? c = u(x.contents().eq(-1 - b), i) : (c = u(x, i, !0),
      b || x.detach()),
      c && (p = o(h(c), r),
        l(c, p),
      b && a && t(c).parent().append(a))
    } else
      p = o(m.slice(0, g + 1).join(f), r),
        l(c, p);
    return !0
  }
  function s(t, e) {
    return t.innerHeight() > e.maxHeight
  }
  function o(e, i) {
    for (; t.inArray(e.slice(-1), i.lastCharacter.remove) > -1; )
      e = e.slice(0, -1);
    return t.inArray(e.slice(-1), i.lastCharacter.noEllipsis) < 0 && (e += i.ellipsis),
      e
  }
  function a(t) {
    return {
      width: t.innerWidth(),
      height: t.innerHeight()
    }
  }
  function l(t, e) {
    t.innerText ? t.innerText = e : t.nodeValue ? t.nodeValue = e : t.textContent && (t.textContent = e)
  }
  function h(t) {
    return t.innerText ? t.innerText : t.nodeValue ? t.nodeValue : t.textContent ? t.textContent : ""
  }
  function c(t) {
    do
      t = t.previousSibling;
    while (t && 1 !== t.nodeType && 3 !== t.nodeType);return t
  }
  function u(e, i, n) {
    var r, s = e && e[0];
    if (s) {
      if (!n) {
        if (3 === s.nodeType)
          return s;
        if (t.trim(e.text()))
          return u(e.contents().last(), i)
      }
      for (r = c(s); !r; ) {
        if (e = e.parent(),
          e.is(i) || !e.length)
          return !1;
        r = c(e[0])
      }
      if (r)
        return u(t(r), i)
    }
    return !1
  }
  function p(e, i) {
    return e ? "string" == typeof e ? (e = t(e, i),
      e.length ? e : !1) : e.jquery ? e : !1 : !1
  }
  function d(t) {
    for (var e = t.innerHeight(), i = ["paddingTop", "paddingBottom"], n = 0, r = i.length; r > n; n++) {
      var s = parseInt(t.css(i[n]), 10);
      isNaN(s) && (s = 0),
        e -= s
    }
    return e
  }
  if (!t.fn.dotdotdot) {
    t.fn.dotdotdot = function(e) {
      if (0 == this.length)
        return t.fn.dotdotdot.debug('No element found for "' + this.selector + '".'),
          this;
      if (this.length > 1)
        return this.each(function() {
          t(this).dotdotdot(e)
        });
      var r = this;
      r.data("dotdotdot") && r.trigger("destroy.dot"),
        r.data("dotdotdot-style", r.attr("style") || ""),
        r.css("word-wrap", "break-word"),
      "nowrap" === r.css("white-space") && r.css("white-space", "normal"),
        r.bind_events = function() {
          return r.bind("update.dot", function(e, a) {
            switch (r.removeClass("is-truncated"),
              e.preventDefault(),
              e.stopPropagation(),
              typeof l.height) {
              case "number":
                l.maxHeight = l.height;
                break;
              case "function":
                l.maxHeight = l.height.call(r[0]);
                break;
              default:
                l.maxHeight = d(r)
            }
            l.maxHeight += l.tolerance,
            "undefined" != typeof a && (("string" == typeof a || "nodeType"in a && 1 === a.nodeType) && (a = t("<div />").append(a).contents()),
            a instanceof t && (o = a)),
              m = r.wrapInner('<div class="dotdotdot" />').children(),
              m.contents().detach().end().append(o.clone(!0)).find("br").replaceWith("  <br />  ").end().css({
                height: "auto",
                width: "auto",
                border: "none",
                padding: 0,
                margin: 0
              });
            var c = !1
              , u = !1;
            return h.afterElement && (c = h.afterElement.clone(!0),
              c.show(),
              h.afterElement.detach()),
            s(m, l) && (u = "children" == l.wrap ? i(m, l, c) : n(m, r, m, l, c)),
              m.replaceWith(m.contents()),
              m = null,
            t.isFunction(l.callback) && l.callback.call(r[0], u, o),
              h.isTruncated = u,
              u
          }).bind("isTruncated.dot", function(t, e) {
            return t.preventDefault(),
              t.stopPropagation(),
            "function" == typeof e && e.call(r[0], h.isTruncated),
              h.isTruncated
          }).bind("originalContent.dot", function(t, e) {
            return t.preventDefault(),
              t.stopPropagation(),
            "function" == typeof e && e.call(r[0], o),
              o
          }).bind("destroy.dot", function(t) {
            t.preventDefault(),
              t.stopPropagation(),
              r.unwatch().unbind_events().contents().detach().end().append(o).attr("style", r.data("dotdotdot-style") || "").data("dotdotdot", !1)
          }),
            r
        }
        ,
        r.unbind_events = function() {
          return r.unbind(".dot"),
            r
        }
        ,
        r.watch = function() {
          if (r.unwatch(),
            "window" == l.watch) {
            var e = t(window)
              , i = e.width()
              , n = e.height();
            e.bind("resize.dot" + h.dotId, function() {
              i == e.width() && n == e.height() && l.windowResizeFix || (i = e.width(),
                n = e.height(),
              u && clearInterval(u),
                u = setTimeout(function() {
                  r.trigger("update.dot")
                }, 100))
            })
          } else
            c = a(r),
              u = setInterval(function() {
                if (r.is(":visible")) {
                  var t = a(r);
                  (c.width != t.width || c.height != t.height) && (r.trigger("update.dot"),
                    c = t)
                }
              }, 500);
          return r
        }
        ,
        r.unwatch = function() {
          return t(window).unbind("resize.dot" + h.dotId),
          u && clearInterval(u),
            r
        }
      ;
      var o = r.contents()
        , l = t.extend(!0, {}, t.fn.dotdotdot.defaults, e)
        , h = {}
        , c = {}
        , u = null
        , m = null;
      return l.lastCharacter.remove instanceof Array || (l.lastCharacter.remove = t.fn.dotdotdot.defaultArrays.lastCharacter.remove),
      l.lastCharacter.noEllipsis instanceof Array || (l.lastCharacter.noEllipsis = t.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),
        h.afterElement = p(l.after, r),
        h.isTruncated = !1,
        h.dotId = f++,
        r.data("dotdotdot", !0).bind_events().trigger("update.dot"),
      l.watch && r.watch(),
        r
    }
      ,
      t.fn.dotdotdot.defaults = {
        ellipsis: "... ",
        wrap: "word",
        fallbackToLetter: !0,
        lastCharacter: {},
        tolerance: 0,
        callback: null,
        after: null,
        height: null,
        watch: !1,
        windowResizeFix: !0
      },
      t.fn.dotdotdot.defaultArrays = {
        lastCharacter: {
          remove: [" ", "\u3000", ",", ";", ".", "!", "?"],
          noEllipsis: []
        }
      },
      t.fn.dotdotdot.debug = function() {}
    ;
    var f = 1
      , m = t.fn.html;
    t.fn.html = function(i) {
      return i != e && !t.isFunction(i) && this.data("dotdotdot") ? this.trigger("update", [i]) : m.apply(this, arguments)
    }
    ;
    var g = t.fn.text;
    t.fn.text = function(i) {
      return i != e && !t.isFunction(i) && this.data("dotdotdot") ? (i = t("<div />").text(i).html(),
        this.trigger("update", [i])) : g.apply(this, arguments)
    }
  }
}(jQuery),
function() {
  null == this.ib && (this.ib = {}),
    ib.CanvasGradientData = {
      menu: {
        radialGradients: [[{
          r1: 10,
          r2: .6,
          colorStops: [{
            r: 255,
            g: 34,
            b: 97,
            a: .4,
            radius: "10px"
          }, {
            r: 255,
            g: 34,
            b: 97,
            a: 0,
            radius: "60%"
          }]
        }, {
          r1: 10,
          r2: .8,
          colorStops: [{
            r: 241,
            g: 90,
            b: 41,
            a: .3,
            radius: "10px"
          }, {
            r: 241,
            g: 90,
            b: 41,
            a: 0,
            radius: "70%"
          }]
        }], [{
          r1: 10,
          r2: .6,
          colorStops: [{
            r: 126,
            g: 68,
            b: 181,
            a: .4,
            radius: "10px"
          }, {
            r: 126,
            g: 68,
            b: 181,
            a: 0,
            radius: "60%"
          }]
        }, {
          r1: 10,
          r2: .8,
          colorStops: [{
            r: 49,
            g: 56,
            b: 141,
            a: .3,
            radius: "10px"
          }, {
            r: 49,
            g: 56,
            b: 141,
            a: 0,
            radius: "70%"
          }]
        }]]
      },
      getInTouch: {
        radialGradients: [[{
          r1: 10,
          r2: .8,
          colorStops: [{
            r: 103,
            g: 60,
            b: 169,
            a: .6,
            radius: "10px"
          }, {
            r: 103,
            g: 60,
            b: 169,
            a: 0,
            radius: "70%"
          }]
        }, {
          r1: 8,
          r2: .4,
          colorStops: [{
            r: 181,
            g: 36,
            b: 144,
            a: .8,
            radius: "8px"
          }, {
            r: 181,
            g: 36,
            b: 144,
            a: 0,
            radius: "40%"
          }]
        }], [{
          r1: 10,
          r2: .8,
          colorStops: [{
            r: 131,
            g: 58,
            b: 165,
            a: .6,
            radius: "10px"
          }, {
            r: 131,
            g: 58,
            b: 165,
            a: 0,
            radius: "70%"
          }]
        }, {
          r1: 8,
          r2: .4,
          colorStops: [{
            r: 230,
            g: 13,
            b: 116,
            a: .6,
            radius: "8px"
          }, {
            r: 230,
            g: 13,
            b: 116,
            a: 0,
            radius: "40%"
          }]
        }]]
      },
      infoGrid: {
        radialGradients: [[{
          r1: 10,
          r2: .8,
          colorStops: [{
            r: 252,
            g: 57,
            b: 63,
            a: .5,
            radius: "10px"
          }, {
            r: 252,
            g: 57,
            b: 63,
            a: 0,
            radius: "70%"
          }]
        }, {
          r1: 10,
          r2: .4,
          colorStops: [{
            r: 254,
            g: 52,
            b: 65,
            a: .2,
            radius: "10px"
          }, {
            r: 254,
            g: 52,
            b: 65,
            a: 0,
            radius: "10px"
          }]
        }]]
      },
      infoList: {
        radialGradients: [[{
          r1: 4,
          r2: .4,
          colorStops: [{
            r: 103,
            g: 60,
            b: 169,
            a: .3,
            radius: "4px"
          }, {
            r: 103,
            g: 60,
            b: 169,
            a: 0,
            radius: "40%"
          }]
        }, {
          r1: 2,
          r2: .2,
          colorStops: [{
            r: 181,
            g: 36,
            b: 144,
            a: .8,
            radius: "2px"
          }, {
            r: 181,
            g: 36,
            b: 144,
            a: 0,
            radius: "20%"
          }]
        }], [{
          r1: 4,
          r2: .4,
          colorStops: [{
            r: 131,
            g: 58,
            b: 165,
            a: .3,
            radius: "4px"
          }, {
            r: 131,
            g: 58,
            b: 165,
            a: 0,
            radius: "40%"
          }]
        }, {
          r1: 2,
          r2: .2,
          colorStops: [{
            r: 230,
            g: 13,
            b: 116,
            a: .6,
            radius: "2px"
          }, {
            r: 230,
            g: 13,
            b: 116,
            a: 0,
            radius: "20%"
          }]
        }]]
      }
    }
}
  .call(this),
function() {
  null == this.ib && (this.ib = {}),
    ib.ComponentLoader = function() {
      function t() {}
      var e, i, n, r, s, o;
      return s = [],
        r = [],
        n = [],
        o = [],
        i = "ib-component",
        e = "component",
        t.init = function(t) {
          var a;
          return a = t || $("body"),
            $("." + i, a).each(function(t) {
              var a, l, h, c;
              return -1 !== $.inArray(this, o) ? -1 : (o.push(this),
                a = null,
                c = $(this).data(e),
                h = null,
                l = $(this),
                "undefined" != typeof s[c] ? (a = new s[c]($(this)),
                  "undefined" != typeof l.data("id") ? h = l.data("id") : (h = i + Math.floor(1e5 * Math.random()) + "" + t,
                    l.data("id", h)),
                  a.id = h,
                  n[h] = a,
                  "undefined" == typeof r[c] ? r[c] = [a] : r[c].push(a),
                  a.init()) : void 0)
            })
        }
        ,
        t.register = function(t, e) {
          return s[t] = e
        }
        ,
        t.findInstanceById = function(t) {
          return n[t]
        }
        ,
        t.findInstancesByType = function(t) {
          var e;
          return e = r[t],
          null === e && (e = []),
            e
        }
        ,
        t.destroyAll = function() {
          var t, e;
          for (e in n)
            t = n[e],
              t.destroy(),
              t = null,
              delete n[e];
          return r = []
        }
        ,
        t
    }()
}
  .call(this),
function() {
  null == this.ib && (this.ib = {}),
    ib.Events = {
      LOAD_COMPLETE: "ib.Events.LOAD_COMPLETE",
      SHOW_MENU: "ib.Events.SHOW_MENU",
      SHOWING_MENU: "ib.Events.SHOWING_MENU",
      HIDE_MENU: "ib.Events.HIDE_MENU",
      HIDE_MENU_SHOW_BUTTON: "ib.Events.HIDE_MENU_SHOW_BUTTON",
      PREVIEW_MENU_ITEM: "ib.Events.PREVIEW_MENU_ITEM",
      ENABLE_MENU_SCROLL: "ib.Events.ENABLE_MENU_SCROLL",
      MENU_HIDDEN: "ib.Events.MENU_HIDDEN",
      ADD_MENU_CUSTOM_STYLES: "ib.Events.ADD_MENU_CUSTOM_STYLES",
      REMOVE_MENU_CUSTOM_STYLES: "ib.Events.REMOVE_MENU_CUSTOM_STYLES",
      MOBILE_SIZE: "ib.Events.MOBILE_SIZE",
      DESKTOP_SIZE: "ib.Events.DESKTOP_SIZE",
      SHOW_PRELOADER: "ib.Events.SHOW_PRELOADER",
      HIDE_PRELOADER: "ib.Events.HIDE_PRELOADER",
      PRELOADER_DONE: "ib.Events.PRELOADER_DONE",
      TRANSITION_MARQUEE_PARTICLES: "ib.Events.TRANSITION_MARQUEE_PARTICLES",
      ENABLE_PARTICLES_SCROLL: "ib.Events.ENABLE_PARTICLES_SCROLL",
      DISABLE_PARTICLES_SCROLL: "ib.Events.DISABLE_PARTICLES_SCROLL",
      PAUSE_MARQUEE_ANIMATIONS: "ib.Events.PAUSE_MARQUEE_ANIMATIONS",
      RESUME_MARQUEE_ANIMATIONS: "ib.Events.RESUME_MARQUEE_ANIMATIONS",
      SPLASH_READY: "ib.Events.SPLASH_READY",
      SCENES_READY: "ib.Events.SCENES_READY",
      DESTROY_CASE_STUDY: "ib.Events.DESTROY_CASE_STUDY",
      COMPASS_HUNT_START: "ib.Events.COMPASS_HUNT_START"
    }
}
  .call(this),
function() {
  null == this.ib && (this.ib = {}),
    ib.Globals = {
      DISABLE_MENU_TOGGLE: !1,
      MENU_VISIBLE: !1,
      HIDE_SPLASH_AND_MENU: !1,
      HEADER_HEIGHT: 0,
      MODEL_PATH: "/assets/models/",
      MAX_CONSTRAIN: 1600,
      MOBILE_WIDTH: 880,
      PARTICLE_COLOR: {
        r: 200 / 255,
        g: 200 / 255,
        b: 200 / 255
      },
      PARTICLE_COLOR_DARK: {
        r: 180 / 255,
        g: 180 / 255,
        b: 180 / 255
      },
      IS_WINDOWS: -1 !== navigator.platform.toUpperCase().indexOf("WIN"),
      IS_IE: !!navigator.userAgent.match(/Trident\/7\./),
      SCENES_WAITING: 0,
      SCENE_READY: function() {
        return 0 === --ib.Globals.SCENES_WAITING ? $(ib).trigger(ib.Events.SCENES_READY) : void 0
      }
    }
}
  .call(this),
function() {
  null == this.Math2 && (this.Math2 = {}),
    Math2.pyth = function(t, e) {
      var i, n;
      return null == e && (e = new Math2.Point),
        i = e.x - t.x,
        n = e.y - t.y,
        Math.sqrt(i * i + n * n)
    }
    ,
    Math2.polar = function(t, e) {
      var i, n;
      return i = t * Math.cos(e),
        n = t * Math.sin(e),
        new Math2.Point(i,n)
    }
    ,
    Math2.lerp = function(t, e, i) {
      return {
        x: e.x + (i.x - e.x) * t,
        y: e.y + (i.y - e.y) * t
      }
    }
    ,
    Math2.lerpNum = function(t, e, i) {
      return e + (i - e) * t
    }
    ,
    Math2.Point = function() {
      function t(t, e, i) {
        this.x = null != t ? t : 0,
          this.y = null != e ? e : 0,
          this.z = null != i ? i : 0
      }
      return t
    }()
}
  .call(this),
function() {
  String.prototype.capitalize = function() {
    return this.charAt(0).toUpperCase() + this.slice(1)
  }
    ,
    String.prototype.camelCase = function() {
      return this.replace(/\w\S*/g, function(t) {
        return t.charAt(0).toUpperCase() + t.substr(1).toLowerCase()
      })
    }
    ,
  Array.prototype.filter || (Array.prototype.filter = function(t, e) {
      var i, n, r, s, o, a;
      if (r = [],
        !this || "function" != typeof t || t instanceof RegExp)
        throw new TypeError;
      for (n = this.length,
             o = 0,
             a = n.length; a > o; o++)
        i = n[o],
        this.hasOwnProperty(i) && (s = this[i],
        t.call(e, s, i) && r.push(s));
      return r
    }
  )
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.ScrollDispatcher = function() {
      function e(e, i) {
        this.context = e,
          this.broadcastScroll = t(this.broadcastScroll, this),
          this.updateYOffset = t(this.updateYOffset, this),
          this.doScrollLoop = t(this.doScrollLoop, this),
          this.calculateDestination = t(this.calculateDestination, this),
          this.updateOffset = t(this.updateOffset, this),
          this.scrollToFold = t(this.scrollToFold, this),
          this.scrollToTop = t(this.scrollToTop, this),
          this.onMouseWheel = t(this.onMouseWheel, this),
          this.resize = t(this.resize, this),
          this.disable = t(this.disable, this),
          this.enable = t(this.enable, this),
          this.setContent = t(this.setContent, this),
          this.content = null,
          this.enabled = !1,
          this.yOffset = 0,
          this.destinationYOffset = 0,
          this.maxYOffset = 0,
          this.raf = null,
          this.opts = $.extend({
            scrollMultiplier: .8,
            friction: .18,
            additionalOffset: 0
          }, i || this.context.data())
      }
      return e.prototype.init = function() {
        return $(window).on("resize", this.resize),
          this.raf = requestAnimationFrame(this.doScrollLoop)
      }
        ,
        e.prototype.setContent = function(t) {
          return this.content = t,
            this.resize()
        }
        ,
        e.prototype.enable = function() {
          return this.enabled = !0,
            this.context.on("mousewheel", this.onMouseWheel)
        }
        ,
        e.prototype.disable = function() {
          return this.enabled = !1,
            this.context.off("mousewheel", this.onMouseWheel)
        }
        ,
        e.prototype.resize = function() {
          var t, e, i, n;
          return n = 0,
            e = 0,
            i = void 0,
            i = "undefined" != typeof this.opts.contextHeight ? this.opts.contextHeight : this.context.height(),
            t = 0,
          this.content && (t = this.content.outerHeight() - this.opts.additionalOffset),
          0 !== this.maxYOffset && (n = this.yOffset / this.maxYOffset,
            e = this.destinationYOffset / this.maxYOffset),
            this.maxYOffset = Math.max(0, t - i),
            this.yOffset = n * this.maxYOffset,
            this.destinationYOffset = e * this.maxYOffset
        }
        ,
        e.prototype.onMouseWheel = function(t, e, i, n) {
          var r;
          return t.preventDefault(),
            this.enabled ? (ib.Globals.IS_WINDOWS && (n = 40 * n),
              r = this.opts.scrollMultiplier * n,
              this.updateOffset(r)) : void 0
        }
        ,
        e.prototype.scrollToTop = function(t) {
          var e;
          return e = {
            y: this.destinationYOffset
          },
            TweenMax.to(e, t, {
              y: 0,
              onUpdate: function(t) {
                return function() {
                  t.destinationYOffset = e.y,
                    t.yOffset === t.destinationYOffset ? t.broadcastScroll() : t.updateYOffset()
                }
              }(this),
              onComplete: function(t) {
                return function() {
                  return t.destinationYOffset = 0,
                    t.yOffset = 0,
                    t.broadcastScroll()
                }
              }(this)
            })
        }
        ,
        e.prototype.scrollToFold = function(t) {
          var e;
          return e = {
            y: this.destinationYOffset
          },
            TweenMax.to(e, 1, {
              y: t,
              onUpdate: function(t) {
                return function() {
                  return t.destinationYOffset = e.y
                }
              }(this)
            })
        }
        ,
        e.prototype.updateOffset = function(t) {
          return this.destinationYOffset = this.calculateDestination(t)
        }
        ,
        e.prototype.calculateDestination = function(t) {
          var e;
          return e = this.destinationYOffset,
            e += t,
            e = Math.max(-this.maxYOffset, e),
            e = Math.min(0, e)
        }
        ,
        e.prototype.doScrollLoop = function() {
          return this.raf = requestAnimationFrame(this.doScrollLoop),
            this.enabled ? this.updateYOffset() : void 0
        }
        ,
        e.prototype.updateYOffset = function() {
          return 1 > Math.abs(this.yOffset - this.destinationYOffset) ? this.yOffset !== this.destinationYOffset ? (this.yOffset = this.destinationYOffset,
            this.broadcastScroll()) : void 0 : (this.yOffset += this.opts.friction * (this.destinationYOffset - this.yOffset),
            this.broadcastScroll())
        }
        ,
        e.prototype.broadcastScroll = function() {
          var t;
          return t = Math.abs(this.yOffset / this.maxYOffset) || 0,
            this.context.trigger("scrolldispatched", {
              yOffset: Math.round(this.yOffset),
              progress: t
            })
        }
        ,
        e
    }()
}
  .call(this),
function() {
  null == this.ib && (this.ib = {}),
    ib.ContentTypes = {
      CASE_STUDY: "CASE_STUDY",
      NEWS_ARTICLE: "NEWS_ARTICLE",
      JOB_LISTING: "JOB_LISTING"
    },
    ib.API_URLS = {
      CASE_STUDY: "/api/work",
      NEWS_ARTICLE: "/api/news",
      JOB_LISTING: "/api/jobs"
    },
    ib.ContentCache = function() {
      function t() {}
      var e, i, n, r, s, o, a;
      t.cachedContent = {},
        a = ib.ContentTypes;
      for (i in a)
        o = a[i],
          t.cachedContent[o] = {};
      return t.getPage = function(i, r, s, o) {
        return t.initial = o,
          i in t.cachedContent ? r in t.cachedContent[i] ? s(t.cachedContent[i][r], !0) : n(i, r, s) : e(s)
      }
        ,
        n = function(i, n, r) {
          return t.initial || $(ib).trigger(ib.Events.SHOW_PRELOADER, n),
            $.ajax({
              beforeSend: function(t) {
                return t.setRequestHeader("X-CSRF-Token", $('meta[name="csrf-token"]').attr("content"))
              },
              url: ib.API_URLS[i] + "/" + encodeURIComponent(n),
              success: function(t) {
                return s(i, n, r, t)
              },
              error: function() {
                return e(r)
              }
            })
        }
        ,
        s = function(i, n, r, s) {
          return "content"in s ? (t.cachedContent[i][n] = s.content,
            r(s.content),
            ib.MobileUtils.refresh()) : e(r)
        }
        ,
        r = function(t, i, n) {
          return e(n)
        }
        ,
        e = function(t) {
          return t(null)
        }
        ,
        t
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.Controller = function() {
      function e(e) {
        this.context = e,
          this.setupParallaxer = t(this.setupParallaxer, this),
          this.setupFormFooter = t(this.setupFormFooter, this),
          this.setupAccordionFooter = t(this.setupAccordionFooter, this),
          this.createCanvasPanels = t(this.createCanvasPanels, this),
          this.transitionOut = t(this.transitionOut, this),
          this.transitionIn = t(this.transitionIn, this),
          this.isNoLongerVisible = t(this.isNoLongerVisible, this),
          this.willBecomeVisible = t(this.willBecomeVisible, this),
          this.canvasPanels = [],
          this.accordionFooter = null,
          this.infoGrid = null,
          this.parallaxer = null,
          this.footerForm = null
      }
      return e.prototype.willBecomeVisible = function() {
        var t, e, i, n;
        for (this.createCanvasPanels(),
               n = this.canvasPanels,
               e = 0,
               i = n.length; i > e; e++)
          t = n[e],
            t.start();
        return setTimeout(function(t) {
          return function() {
            return Modernizr.touch || !Modernizr.csspositionsticky && /MSIE |Trident/i.test(navigator.userAgent) || t.setupAccordionFooter(),
              t.setupParallaxer()
          }
        }(this), 0),
          this.setupFormFooter()
      }
        ,
        e.prototype.isNoLongerVisible = function() {
          var t, e, i, n;
          for (n = this.canvasPanels,
                 e = 0,
                 i = n.length; i > e; e++)
            t = n[e],
              t.destroy();
          return this.canvasPanels = [],
          this.accordionFooter && this.accordionFooter.destroy(),
          this.parallaxer && this.parallaxer.destroy(),
            this.footerForm ? this.footerForm.reset() : void 0
        }
        ,
        e.prototype.transitionIn = function(t) {
          var e;
          return this.willBecomeVisible(),
            this.context.addClass("active"),
            this.section = "",
            e = {
              y: 0,
              opacity: 1,
              onComplete: function(t) {
                return function() {
                  return $(ib).trigger(ib.Events.TRANSITION_MARQUEE_PARTICLES, [t.context])
                }
              }(this)
            },
            t ? TweenMax.set(this.context, e) : TweenMax.fromTo(this.context, .5, {
              y: 20,
              opacity: 0
            }, e)
        }
        ,
        e.prototype.transitionOut = function() {
          return this.context.removeClass("active"),
            TweenMax.set(this.context, {
              opacity: 0,
              onComplete: this.isNoLongerVisible
            })
        }
        ,
        e.prototype.createCanvasPanels = function() {
          var t;
          return t = this.context.find(".canvas-background"),
            t.each(function(t) {
              return function(e, i) {
                var n, r, s, o, a, l, h;
                for (o = $(i),
                       h = [],
                       a = 0,
                       l = o.length; l > a; a++)
                  n = o[a],
                    r = $(n).find(".stalker-wrap"),
                    r.length && "undefined" == typeof InstallTrigger ? (s = new ib.CanvasPanel(r),
                      h.push(t.canvasPanels.push(s))) : h.push(void 0);
                return h
              }
            }(this))
        }
        ,
        e.prototype.setupAccordionFooter = function() {
          var t, e, i, n;
          return t = $(".page-footer", this.context),
            t.length ? (e = t.prev(),
              n = [e, t],
              i = $(".container", this.context),
              this.accordionFooter = new ib.AccordionFooter(n,this.context,i),
              this.accordionFooter.init()) : void 0
        }
        ,
        e.prototype.setupFormFooter = function() {
          var t;
          return t = $(".page-footer", this.context),
            this.footerForm = new ib.Footer(t)
        }
        ,
        e.prototype.setupParallaxer = function() {
          var t;
          return t = this.context.find(".parallax-wrapper"),
            t.length ? (this.parallaxer = new ib.Parallaxer(this.context,t),
              this.parallaxer.parallax()) : void 0
        }
        ,
        e
    }()
}
  .call(this),
function() {
  null == this.ib && (this.ib = {}),
    ib.Main = function() {
      function t() {}
      return t.init = function() {
        return navigator.userAgent.toLowerCase().indexOf("firefox") > -1 && $("html").addClass("is-firefox"),
          TweenMax.defaultOverwrite = "all",
          ib.ResponsiveUtils.init(),
          ib.MobileUtils.init(),
          ib.ComponentLoader.init(),
          ib.NavigationController.init(),
          FastClick.attach(document.body)
      }
        ,
        t
    }()
}
  .call(this),
function() {
  null == this.ib && (this.ib = {}),
    ib.MobileUtils = function() {
      function t() {}
      return t.win = $(window),
        t.adjustMobile = !1,
        t.adjustDesktop = !1,
        t.init = function() {
          return this.win.on("resize", this.resize)
        }
        ,
        t.refresh = function() {
          return this.adjustMobile = !1,
            this.adjustDesktop = !1,
            this.resize()
        }
        ,
        t.resize = function() {
          return t.win.width() < 881 ? t.adjustForMobile() : t.adjustForDesktop()
        }
        ,
        t.adjustForMobile = function() {
          return t.adjustMobile ? void 0 : (ib.Globals.HEADER_HEIGHT = $("#menu-background").height(),
            $(ib).trigger(ib.Events.MOBILE_SIZE),
            t.adjustMobile = !0,
            t.adjustDesktop = !1)
        }
        ,
        t.adjustForDesktop = function() {
          return t.adjustDesktop ? void 0 : (ib.Globals.HEADER_HEIGHT = $("#menu-background").height(),
            $(ib).trigger(ib.Events.DESKTOP_SIZE),
            t.adjustDesktop = !0,
            t.adjustMobile = !1)
        }
        ,
        t
    }()
}
  .call(this),
function() {
  null == this.ib && (this.ib = {}),
    ib.NavigationController = function() {
      function t() {}
      return t.path = location.pathname.replace(/\/+$/, "/"),
        t.title = $(document).find("title").text(),
        t.currentState = null,
        t.outgoingPage = null,
        t.incomingPage = null,
        t.initial = !0,
        t.splash = null,
        t.loaded = !1,
        t.init = function() {
          return this.splash = new ib.Splash($("#splash")),
            $("body").on("click", "a:not(.history-link)", this.trackOutboundLink),
            $(ib).on(ib.Events.SPLASH_READY, this.onSplashReady),
            this.splash.init(),
            $(document).on("click", ".history-link", this.navigate)
        }
        ,
        t.onSplashReady = function() {
          return t.loaded ? void 0 : (t.loaded = !0,
            ib.Preloader.load($("main"), t.onLoadComplete))
        }
        ,
        t.onLoadComplete = function() {
          return t.splash.transitionOut(),
            t.updateState(!0),
            ib.ResponsiveUtils.refresh(),
            $(window).on("popstate", t.onPopstate)
        }
        ,
        t.onPopstate = function(e) {
          return t.initial ? void 0 : t.updateState(!1, e.originalEvent.state)
        }
        ,
        t.updateState = function(e, i) {
          var n;
          return n = i || t.getState(),
            (t.currentState && t.currentState.id) === n.id ? void $(ib).trigger(ib.Events.HIDE_MENU) : (t.currentState = n,
              setTimeout(function() {
                return ib.Globals.DISABLE_MENU_TOGGLE = "home" === t.currentState.id
              }, 0),
              t.updatePages(),
            t.initial || window.ga("send", "pageview", t.currentState.path),
            i || t.pushState(e),
              t.currentState.title ? document.title = t.currentState.title : void 0)
        }
        ,
        t.pushState = function(e) {
          var i, n, r;
          return r = t.currentState.title,
            n = t.currentState.path,
            i = {},
            e ? history.replaceState(t.currentState, r, n, i) : history.pushState(t.currentState, r, n, i)
        }
        ,
        t.getState = function() {
          var e, i;
          return e = t.path.replace(/#\w*/, ""),
            e = "/" === e ? "home" : e,
            i = {
              path: t.path,
              title: t.title,
              id: e
            }
        }
        ,
        t.updatePages = function() {
          var e, i, n;
          return t.outgoingPage = t.incomingPage,
            t.initial = !t.outgoingPage,
            i = t.currentState.id.split("/").filter(Boolean),
          t.outgoingPage && ($(ib).trigger(ib.Events.DESTROY_CASE_STUDY),
            t.outgoingPage.section = ""),
            e = i[0],
            n = i[1] || "",
          t.outgoingPage && (t.outgoingPage.incomingPage = e),
            t.setupIncomingPage(e, n)
        }
        ,
        t.setupIncomingPage = function(e, i) {
          var n;
          return void 0 === e && (e = "home"),
            n = $("#" + e),
            n.length ? (ib.Globals.HIDE_SPLASH_AND_MENU = !1,
            "home" !== e && (t.initial || i ? t.initial && (ib.Globals.HIDE_SPLASH_AND_MENU = !0) : $(ib).trigger(ib.Events.HIDE_MENU)),
              t.incomingPage = ib.ComponentLoader.findInstanceById(n.data("id")),
              t.incomingPage.section = i,
              t.incomingPage.fetchPage(t.onFetchPage, t.redirectTo404, t.initial)) : t.redirectTo404()
        }
        ,
        t.onFetchPage = function(e, i) {
          return i ? t.onPreloaded(i) : e ? ib.Preloader.load(e, function() {
            return t.onPreloaded()
          }) : (t.initial && $(ib).trigger(ib.Events.LOAD_COMPLETE),
            t.transitionPages())
        }
        ,
        t.onPreloaded = function(e) {
          return t.initial ? ($(ib).trigger(ib.Events.LOAD_COMPLETE),
            t.transitionPages()) : (t.outgoingPage && t.outgoingPage.transitionOut(),
            e ? (t.transitionPages(),
              $(ib).trigger(ib.Events.HIDE_MENU)) : $(ib).on(ib.Events.PRELOADER_DONE, function() {
              return $(ib).off(ib.Events.PRELOADER_DONE),
                t.transitionPages()
            })),
            $(ib).trigger(ib.Events.HIDE_PRELOADER)
        }
        ,
        t.redirectTo404 = function() {
          return window.location = "/404"
        }
        ,
        t.transitionPages = function() {
          return t.incomingPage ? (t.outgoingPage && t.outgoingPage.transitionOut(),
            t.incomingPage.transitionIn(!t.outgoingPage),
          "home" !== t.currentState.id || t.initial || $(ib).trigger(ib.Events.SHOW_MENU),
            ib.ResponsiveUtils.refresh()) : void 0
        }
        ,
        t.navigate = function(e) {
          return e.preventDefault(),
            t.path = $(e.currentTarget).attr("href"),
            t.title = $(e.currentTarget).attr("title"),
            t.updateState(),
            !1
        }
        ,
        t.trackOutboundLink = function(t) {
          return t.currentTarget.href ? window.ga("send", "event", "outbound", "click", t.currentTarget.href) : void 0
        }
        ,
        t
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ib && (this.ib = {}),
    ib.PageController = function(e) {
      function n(e) {
        this.context = e,
          this.transitionOut = t(this.transitionOut, this),
          this.transitionIn = t(this.transitionIn, this),
          this.isNoLongerVisible = t(this.isNoLongerVisible, this),
          this.fetchPage = t(this.fetchPage, this),
          n.__super__.constructor.call(this, this.context),
          this.win = $(window),
          this.incomingPage = "",
          this.sectionController,
          this.section = ""
      }
      return i(n, e),
        n.prototype.fetchPage = function(t) {
          return this.section ? void 0 : t()
        }
        ,
        n.prototype.isNoLongerVisible = function() {
          return this.context && this.context.scrollTop(0),
            n.__super__.isNoLongerVisible.call(this)
        }
        ,
        n.prototype.transitionIn = function(t) {
          return this.section && this.sectionController ? void this.sectionController.transitionIn(t) : n.__super__.transitionIn.call(this, t)
        }
        ,
        n.prototype.transitionOut = function() {
          return n.__super__.transitionOut.call(this),
            !this.section && this.sectionController ? (this.sectionController.transitionOut(),
              this.sectionController = null) : void 0
        }
        ,
        n
    }(ib.Controller)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.PagePagination = function() {
      function e(e) {
        this.pagination = e,
          this.hide = t(this.hide, this),
          this.show = t(this.show, this),
          this.updateLinks = t(this.updateLinks, this),
          this.previousPage = this.pagination.filter(".previous-page"),
          this.nextPage = this.pagination.filter(".next-page")
      }
      return e.prototype.updateLinks = function(t, e) {
        var i, n;
        return this.hide(),
        t && (i = "Home" === t ? "" : t,
          this.previousPage.attr("href", "/" + i).show(),
          n = t.capitalize(),
          this.previousPage.find("figure").text(n)),
          e ? (i = "Home" === e ? "" : e,
            this.nextPage.attr("href", "/" + i).show(),
            n = e.capitalize(),
            this.nextPage.find("figure").text(n)) : void 0
      }
        ,
        e.prototype.show = function() {
          return this.pagination.show()
        }
        ,
        e.prototype.hide = function() {
          return this.pagination.hide()
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = [].indexOf || function(t) {
      for (var e = 0, i = this.length; i > e; e++)
        if (e in this && this[e] === t)
          return e;
      return -1
    }
  ;
  null == this.ib && (this.ib = {}),
    ib.Preloader = function() {
      function e() {}
      return e.load = function(e, i) {
        var n, r, s, o, a, l, h, c, u, p;
        if (o = [],
            e.find("*").each(function(e, i) {
              var n, r, s;
              return r = $(i),
                n = r.css("background-image"),
              "none" !== n && n.indexOf("url") >= 0 && (s = n.slice(4, -1),
                s = s.replace(/['"]+/g, ""),
              t.call(o, s) >= 0 || (r.hasClass("load-priority") ? o.unshift(s) : o.push(s))),
                !r.is("img") || r.hasClass("no-preload") || (s = r.attr("src"),
                t.call(o, s) >= 0) ? void 0 : r.hasClass("load-priority") ? o.unshift(s) : o.push(s)
            }),
            a = 0,
            l = 0,
            s = function() {
              return ++a === o.length - l ? (i && i(),
                $.doTimeout("resize-timeout", 100, function() {
                  return $(window).trigger("resize")
                })) : void 0
            }
            ,
            o.length) {
          for (p = [],
                 n = c = 0,
                 u = o.length; u > c; n = ++c)
            h = o[n],
              r = $("<img>"),
              r.on("error load", s),
              p.push(r.attr("src", h));
          return p
        }
        return i && i()
      }
        ,
        e
    }()
}
  .call(this),
function() {
  null == this.ib && (this.ib = {}),
    ib.ResponsiveUtils = function() {
      function t() {}
      return t.win = $(window),
        t.init = function() {
          return this.win.on("resize", this.resize)
        }
        ,
        t.refresh = function() {
          return this.resize(),
            this.addHoverStates()
        }
        ,
        t.resize = function() {
          return $(".flexible-height").each(function(e, i) {
            var n, r;
            return n = $(i),
              r = n.data("ratio"),
              r ? $(i).css({
                height: Math.floor(t.win.width() * r)
              }) : void 0
          })
        }
        ,
        t.addHoverStates = function() {
          var t;
          return t = $(".determine-hover"),
            Modernizr.touch ? (t.bind("touchstart", function(t) {
              return $(t.target).closest(".determine-hover").addClass("mobile-active"),
                $(t.target).prev("address") ? $(t.target).closest("li").addClass("mobile-active") : void 0
            }),
              t.bind("touchend", function(t) {
                return $(t.target).closest(".determine-hover").removeClass("mobile-active"),
                  $(t.target).prev("address") ? $(t.target).closest("li").removeClass("mobile-active") : void 0
              })) : (t.addClass("enable-hover"),
              t.each(function(t, e) {
                var i;
                return i = $(e),
                  i.parent().hasClass("inner") ? (i.on("mouseenter", function(t) {
                    return $(t.target).closest("li").addClass("mobile-active")
                  }),
                    i.on("mouseleave", function(t) {
                      return $(t.target).closest("li").removeClass("mobile-active")
                    })) : void 0
              }))
        }
        ,
        t
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ib && (this.ib = {}),
    ib.SectionController = function(e) {
      function n(e) {
        this.context = e,
          this.transitionIn = t(this.transitionIn, this),
          this.willBecomeVisible = t(this.willBecomeVisible, this),
          this.resize = t(this.resize, this),
          n.__super__.constructor.call(this, this.context),
          $(window).on("resize", this.resize)
      }
      return i(n, e),
        n.prototype.resize = function() {
          var t, e, i, n, r, s, o, a, l, h, c;
          for (i = this.context.find(".full-width-image:not(.parallax-wrapper) img"),
                 c = [],
                 l = 0,
                 h = i.length; h > l; l++)
            n = i[l],
              e = $(n),
              a = e.css("width", "auto").width(),
              r = 0,
              s = e.parent().width(),
              a > ib.Globals.MAX_CONSTRAIN ? (o = a / ib.Globals.MAX_CONSTRAIN,
                t = a - ib.Globals.MAX_CONSTRAIN,
                a = s * o,
                r = -(a - s) / 2) : a = s,
              c.push(e.css({
                width: a,
                left: r
              }));
          return c
        }
        ,
        n.prototype.willBecomeVisible = function() {
          return this.resize(),
            this.context.scrollTop(0),
            n.__super__.willBecomeVisible.call(this)
        }
        ,
        n.prototype.transitionIn = function(t) {
          return n.__super__.transitionIn.call(this, t)
        }
        ,
        n
    }(ib.Controller)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.AccoladesList = function() {
      function e(e, i) {
        this.context = e,
          this.hide = t(this.hide, this),
          this.show = t(this.show, this),
          this.toggleList = t(this.toggleList, this),
          this.listButton = this.context.find(".pill"),
          this.listButtonText = this.listButton.find("span"),
          this.listWrapper = this.context.find(".list-wrapper"),
          this.showList = !0,
          this.opts = $.extend({}, i || this.context.data())
      }
      return e.prototype.init = function() {
        return this.toggleList(),
          this.listButton.on("click", this.toggleList)
      }
        ,
        e.prototype.toggleList = function() {
          return (this.showList = !this.showList) ? this.show() : this.hide()
        }
        ,
        e.prototype.show = function() {
          return TweenMax.to(this.listButton, .2, {
            opacity: 0,
            onComplete: function(t) {
              return function() {
                return t.listButtonText.text("Hide"),
                  t.listWrapper.stop().slideDown(function() {
                    return TweenMax.to(t.listButton, .2, {
                      opacity: 1
                    })
                  })
              }
            }(this)
          })
        }
        ,
        e.prototype.hide = function() {
          return TweenMax.to(this.listButton, .2, {
            opacity: 0,
            onComplete: function(t) {
              return function() {
                return t.listButtonText.text("View Full List"),
                  t.listWrapper.stop().slideUp(function() {
                    return TweenMax.to(t.listButton, .2, {
                      opacity: 1
                    })
                  })
              }
            }(this)
          })
        }
        ,
        e
    }(),
    ib.ComponentLoader.register("ib.AccoladesList", ib.AccoladesList)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.AccordionFooter = function() {
      function e(e, i, n) {
        this.tiles = e,
          this.scrollEl = i,
          this.scrollContent = n,
          this.destroy = t(this.destroy, this),
          this.show = t(this.show, this),
          this.hide = t(this.hide, this),
          this.updateSticky = t(this.updateSticky, this),
          this.updatePosition = t(this.updatePosition, this),
          this.update = t(this.update, this),
          this.stop = t(this.stop, this),
          this.start = t(this.start, this),
          this.resize = t(this.resize, this),
          this.marquee = $("> .marquee", this.scrollContent),
          this.win = $(window),
          this.winHeight = 0,
          this.raf = null,
          this.visible = !0,
          this.buffer = 70,
          this.previousExposedHeight = null
      }
      return e.prototype.init = function() {
        var t, e, i, n, r, s;
        for (this.win.on("resize", this.resize),
               this.resize(),
               this.start(),
               r = this.tiles,
               s = [],
               t = i = 0,
               n = r.length; n > i; t = ++i)
          e = r[t],
            e.addClass("accordion-enabled"),
            s.push(e.css({
              "z-index": -t + 1
            }));
        return s
      }
        ,
        e.prototype.resize = function() {
          var t, e, i, n, r;
          if (this.winHeight = this.win.height(),
              !Modernizr.csspositionsticky) {
            for (e = 0,
                   r = this.tiles,
                   i = 0,
                   n = r.length; n > i; i++)
              t = r[i],
                e += t.outerHeight();
            return this.scrollContent.css("padding-bottom", e),
              this.update(!0)
          }
        }
        ,
        e.prototype.start = function() {
          return this.stop(),
            this.raf = requestAnimationFrame(this.update)
        }
        ,
        e.prototype.stop = function() {
          return cancelAnimationFrame(this.raf)
        }
        ,
        e.prototype.update = function(t) {
          return this.raf = requestAnimationFrame(this.update),
            Modernizr.csspositionsticky ? this.updateSticky() : this.updatePosition(t)
        }
        ,
        e.prototype.updatePosition = function(t) {
          var e, i, n, r, s, o, a, l, h, c, u, p, d, f, m, g;
          for (e = this.scrollEl.outerHeight() - this.scrollEl.height(),
                 h = 0,
                 f = this.tiles,
                 c = 0,
                 p = f.length; p > c; c++)
            l = f[c],
              h += l.outerHeight();
          if (i = e + this.scrollContent.height(),
              n = this.scrollContent.outerHeight() - i,
            n > 0 && (i += n - h),
              a = this.scrollEl.scrollTop() + this.winHeight,
              r = Math.max(0, a - i),
            t || r !== this.previousExposedHeight) {
            for (this.previousExposedHeight = r,
                   s = 0,
                   m = this.tiles,
                   g = [],
                   u = 0,
                   d = m.length; d > u; u++)
              l = m[u],
                s += l.outerHeight(),
                o = -h,
                o += Math.min(s, r),
                g.push(TweenMax.set(l, {
                  y: o
                }));
            return g
          }
        }
        ,
        e.prototype.updateSticky = function() {
          var t, e, i, n, r, s;
          for (t = this.winHeight,
                 s = this.tiles,
                 n = 0,
                 r = s.length; r > n; n++)
            i = s[n],
              t = Math.min(i.offset().top, t);
          return this.marquee.length ? (e = this.marquee.next().offset().top,
            !this.visible && t >= e + this.buffer ? this.show() : this.visible && t < e + this.buffer ? this.hide() : void 0) : void this.show()
        }
        ,
        e.prototype.hide = function() {
          var t, e, i, n, r;
          for (this.visible = !1,
                 n = this.tiles,
                 r = [],
                 e = 0,
                 i = n.length; i > e; e++)
            t = n[e],
              r.push(t.addClass("inactive"));
          return r
        }
        ,
        e.prototype.show = function() {
          var t, e, i, n, r;
          for (this.visible = !0,
                 n = this.tiles,
                 r = [],
                 e = 0,
                 i = n.length; i > e; e++)
            t = n[e],
              r.push(t.removeClass("inactive"));
          return r
        }
        ,
        e.prototype.destroy = function() {
          return this.win.off("resize", this.resize),
            this.stop(),
            this.previousExposedHeight = null
        }
        ,
        e
    }(),
    ib.ComponentLoader.register("ib.AccordionFooter", ib.AccordionFooter)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.CanvasPanel = function() {
      function e(e) {
        this.context = e,
          this.destroy = t(this.destroy, this),
          this.start = t(this.start, this),
          this.gradient = new ib.ColorfulMouseStalker(this.context),
          this.gradient.init()
      }
      return e.prototype.start = function() {
        return this.gradient.startTracking()
      }
        ,
        e.prototype.destroy = function() {
          return this.gradient.destroy(),
            this.gradient = null
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ib && (this.ib = {}),
    ib.Career = function(e) {
      function n(e, i) {
        this.context = e,
          this.willBecomeVisible = t(this.willBecomeVisible, this),
          this.career = $("#career"),
          n.__super__.constructor.call(this, this.context),
          this.opts = $.extend({}, i || this.context.data())
      }
      return i(n, e),
        n.prototype.willBecomeVisible = function() {
          return this.career.html(this.context.html()),
            this.context = this.career,
            n.__super__.willBecomeVisible.call(this)
        }
        ,
        n
    }(ib.SectionController)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ib && (this.ib = {}),
    ib.CaseStudy = function(e) {
      function n(e) {
        this.context = e,
          this.isNoLongerVisible = t(this.isNoLongerVisible, this),
          this.willBecomeVisible = t(this.willBecomeVisible, this),
          this.updateSelectors = t(this.updateSelectors, this),
          this.playVideo = t(this.playVideo, this),
          this.caseStudy = $("#case-study"),
          this.videos,
          this.iframes,
          this.win = $(window),
          this.contentType = ib.ContentTypes.CASE_STUDY,
          n.__super__.constructor.call(this, this.context)
      }
      return i(n, e),
        n.prototype.playVideo = function(t) {
          var e, i, n, r, s;
          return n = $(t.currentTarget),
            e = $("iframe", n),
            s = $("img", n),
            r = $("figure", n),
            i = n.data("src"),
            i ? TweenMax.to([s, r], .5, {
              opacity: 0,
              onStart: function() {
                return function() {
                  return e.attr("src", i)
                }
              }(this),
              onComplete: function() {
                return function() {
                  return s.css({
                    zIndex: 1
                  }),
                    r.css({
                      zIndex: 1
                    })
                }
              }(this)
            }) : void 0
        }
        ,
        n.prototype.updateSelectors = function() {
          return this.videos = this.context.find(".video"),
            this.iframes = this.context.find(".video iframe")
        }
        ,
        n.prototype.willBecomeVisible = function() {
          return this.caseStudy.html(this.context.html()),
            this.context = this.caseStudy,
            this.updateSelectors(),
            $("img", this.videos).css({
              zIndex: 3
            }),
            $("figure", this.videos).css({
              zIndex: 4
            }),
            this.videos.on("click", this.playVideo),
            n.__super__.willBecomeVisible.call(this)
        }
        ,
        n.prototype.isNoLongerVisible = function() {
          return this.iframes && this.iframes.attr("src", ""),
          this.videos && this.videos.off("click", this.playVideo),
            n.__super__.isNoLongerVisible.call(this)
        }
        ,
        n
    }(ib.SectionController)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  ib.ColorfulMouseStalker = function() {
    function e(e, i) {
      this.context = e,
        this.destroy = t(this.destroy, this),
        this.mouseIsOutsideWrap = t(this.mouseIsOutsideWrap, this),
        this.stalk = t(this.stalk, this),
        this.stop = t(this.stop, this),
        this.follow = t(this.follow, this),
        this.onMouseLeave = t(this.onMouseLeave, this),
        this.onMouseMove = t(this.onMouseMove, this),
        this.stopTracking = t(this.stopTracking, this),
        this.startTracking = t(this.startTracking, this),
        this.resize = t(this.resize, this),
        this.getGradientStyle = t(this.getGradientStyle, this),
        this.render = t(this.render, this),
        this.raf,
        this.stalker,
        this.mouse = {
          x: 0,
          y: 0
        },
        this.offset = {
          x: 0,
          y: 0
        },
        this.size = {
          w: 1,
          h: 1
        },
        this.stalkerPosition = {
          x: 0,
          y: 0
        },
        this.preyPosition = {
          x: 0,
          y: 0
        },
        this.activeGradientIndex = 0,
        this.maxW = 0,
        this.maxH = 0,
        this.scheme,
        this.opts = $.extend({
          friction: .12,
          schemeType: []
        }, i || this.context.data())
    }
    return e.prototype.init = function() {
      return this.render(),
        window.addEventListener("resize", this.resize),
        this.resize()
    }
      ,
      e.prototype.render = function() {
        var t, e, i, n, r, s, o;
        for (this.stalker = $('<div class="stalker"/>'),
               this.scheme = $.extend(!0, {}, ib.CanvasGradientData[this.opts.schemeType]),
               o = this.scheme.radialGradients,
               i = r = 0,
               s = o.length; s > r; i = ++r)
          e = o[i],
            t = $('<div class="grad"/>'),
          0 === i && t.addClass("active"),
            n = this.getGradientStyle(e, t),
            t.css("background-image", n),
            this.stalker.append(t);
        return this.context.append(this.stalker)
      }
      ,
      e.prototype.getGradientStyle = function(t) {
        var e, i, n, r, s, o, a, l, h, c, u;
        for (o = "",
               r = "",
               navigator.userAgent.toLowerCase().indexOf("firefox") > -1 ? r = "-moz-" : navigator.userAgent.toLowerCase().indexOf("webkit") > -1 && (r = "-webkit-"),
               i = a = 0,
               h = t.length; h > a; i = ++a) {
          for (e = t[i],
               i > 0 && (o += ", "),
                 o += r + "radial-gradient(center center,",
                 u = e.colorStops,
                 n = l = 0,
                 c = u.length; c > l; n = ++l)
            s = u[n],
            n > 0 && (o += ", "),
              o += " rgba(",
              o += s.r + ", " + s.g + ", " + s.b + ", " + s.a + ")",
              o += " " + s.radius;
          o += ")"
        }
        return o
      }
      ,
      e.prototype.resize = function() {
        var t;
        return this.maxH = this.context.parent().height(),
          this.maxW = this.context.parent().width(),
          t = (this.maxW + this.maxH) / 2,
          this.context.css({
            width: t,
            height: t,
            margin: -t / 2 + "px 0 0 " + -t / 2 + "px"
          }),
          this.offset.x = this.context.offset().left,
          this.offset.y = this.context.offset().top,
          this.size.w = this.context.width(),
          this.size.h = this.context.height()
      }
      ,
      e.prototype.startTracking = function() {
        return setTimeout(this.resize, 0),
          $(document).on("mousemove", this.onMouseMove),
          $(document).on("mouseleave", this.onMouseLeave),
          this.follow()
      }
      ,
      e.prototype.stopTracking = function() {
        return $(document).off("mousemove", this.onMouseMove),
          $(document).off("mouseleave", this.onMouseLeave),
          this.stop(),
          $(".active", this.context).removeClass("active")
      }
      ,
      e.prototype.onMouseMove = function(t) {
        return this.stalker.removeClass("hide"),
          this.mouse.x = t.clientX,
          this.mouse.y = t.clientY,
          this.preyPosition.x = 100 * ((this.mouse.x - this.context.offset().left) / this.size.w - 1),
          this.preyPosition.y = 100 * ((this.mouse.y - this.context.offset().top) / this.size.h - 1)
      }
      ,
      e.prototype.onMouseLeave = function() {
        return this.stalker.addClass("hide")
      }
      ,
      e.prototype.follow = function() {
        return this.stop(),
          this.raf = requestAnimationFrame(this.stalk)
      }
      ,
      e.prototype.stop = function() {
        return cancelAnimationFrame(this.raf)
      }
      ,
      e.prototype.stalk = function() {
        var t;
        if (this.raf = requestAnimationFrame(this.stalk),
            t = Math.sqrt(Math.pow(this.preyPosition.x - this.stalkerPosition.x, 2) + Math.pow(this.preyPosition.y - this.stalkerPosition.y, 2)),
            .01 > t ? (this.stalkerPosition.x = this.preyPosition.x,
              this.stalkerPosition.y = this.preyPosition.y) : (this.stalkerPosition.x += this.opts.friction * (this.preyPosition.x - this.stalkerPosition.x),
              this.stalkerPosition.y += this.opts.friction * (this.preyPosition.y - this.stalkerPosition.y)),
            this.mouseIsOutsideWrap())
          return this.context.removeClass("active");
        if (t > 0 && (this.context.addClass("active"),
            TweenMax.set(this.stalker, {
              x: this.stalkerPosition.x / 100 * this.size.w,
              y: this.stalkerPosition.y / 100 * this.size.w
            }),
          this.scheme.radialGradients.length > 1))
          if ((this.mouse.x - this.context.offset().left + this.mouse.y - this.context.offset().top) / 2 < (this.size.w + this.size.h) / 4) {
            if (1 === this.activeGradientIndex)
              return this.activeGradientIndex = 0,
                $(".active", this.context).removeClass("active"),
                $(".grad", this.context).eq(this.activeGradientIndex).addClass("active")
          } else if (0 === this.activeGradientIndex)
            return this.activeGradientIndex = 1,
              $(".active", this.context).removeClass("active"),
              $(".grad", this.context).eq(this.activeGradientIndex).addClass("active")
      }
      ,
      e.prototype.mouseIsOutsideWrap = function() {
        var t;
        return t = this.context.parent().offset(),
          this.mouse.x < t.left || this.mouse.x > this.maxW ? !0 : this.mouse.y < t.top || this.mouse.y > t.top + this.maxH ? !0 : !1
      }
      ,
      e.prototype.destroy = function() {
        return this.stopTracking(),
          this.context.empty()
      }
      ,
      e
  }(),
    ib.ComponentLoader.register("ib.ColorfulMouseStalker", ib.ColorfulMouseStalker)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ib && (this.ib = {}),
    ib.Contact = function(e) {
      function n(e, i) {
        this.context = e,
          this.willBecomeVisible = t(this.willBecomeVisible, this),
          this.scrollToJobOpenings = t(this.scrollToJobOpenings, this),
          this.fetchPage = t(this.fetchPage, this),
          n.__super__.constructor.call(this, this.context),
          this.sectionController,
          this.contentType = ib.ContentTypes.JOB_LISTING,
          this.careerWrapper = $("#career"),
          this.jobOpenings = $("#job-openings"),
          this.opts = $.extend({}, i || this.context.data())
      }
      return i(n, e),
        n.prototype.init = function() {}
        ,
        n.prototype.fetchPage = function(t, e, i) {
          return this.section ? ib.ContentCache.getPage(this.contentType, this.section, function(i) {
            return function(n, r) {
              var s;
              return n ? (s = i.careerWrapper.clone(),
                s.html(n),
                i.sectionController = new ib.Career(s),
                t(s, r)) : e()
            }
          }(this), i) : t()
        }
        ,
        n.prototype.scrollToJobOpenings = function() {
          return this.context.scrollTop(this.jobOpenings.offset().top)
        }
        ,
        n.prototype.willBecomeVisible = function() {
          return "contact" === this.incomingPage && this.scrollToJobOpenings(),
            n.__super__.willBecomeVisible.call(this)
        }
        ,
        n
    }(ib.PageController),
    ib.ComponentLoader.register("ib.Contact", ib.Contact)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.FixedMarquee = function() {
      function e() {
        this.destroy = t(this.destroy, this),
          this.isDesktop = t(this.isDesktop, this),
          this.removeMenuStyles = t(this.removeMenuStyles, this),
          this.addMenuStyles = t(this.addMenuStyles, this),
          this.updateMenuStyles = t(this.updateMenuStyles, this),
          this.updateSticky = t(this.updateSticky, this),
          this.updatePosition = t(this.updatePosition, this),
          this.updateMarquee = t(this.updateMarquee, this),
          this.updateMarqueePosition = t(this.updateMarqueePosition, this),
          this.viewProject = t(this.viewProject, this),
          this.onScroll = t(this.onScroll, this),
          this.onResize = t(this.onResize, this),
          this.init = t(this.init, this),
          this.win = $(window),
          this.menuBg = $("#menu-background"),
          this.menuButton = $("#menu-button"),
          this.menuClassName = "transparent-menu",
          this.stickyClass = "csspositionsticky",
          this.scrollEl = null,
          this.viewButton = null,
          this.marquee = null,
          this.marqueeHeight = 0,
          this.menuBgHeight = 0,
          this.winWidth = 0,
          this.winHeight = 0
      }
      return e.prototype.init = function(t) {
        return this.context = t,
          $(ib).trigger(ib.Events.DISABLE_PARTICLES_SCROLL),
          this.context.addClass("rich-case-study"),
          this.addMenuStyles(),
          this.marquee = this.context.find(".marquee"),
          this.viewButton = this.marquee.find(".view-project"),
          this.scrollEl = this.context.children(".container"),
        this.viewButton.length && this.viewButton.on("click", this.viewProject),
          $(ib).on(ib.Events.ADD_MENU_CUSTOM_STYLES, this.updateMenuStyles),
          $(ib).on(ib.Events.REMOVE_MENU_CUSTOM_STYLES, this.removeMenuStyles),
          this.onResize()
      }
        ,
        e.prototype.onResize = function() {
          return this.winWidth = this.win.width(),
            this.winHeight = this.win.height(),
            this.menuBgHeight = this.menuBg.height(),
            this.marquee.height(this.winHeight),
            this.marqueeHeight = this.marquee.height(),
            TweenMax.set(this.scrollEl, {
              paddingTop: this.marqueeHeight
            })
        }
        ,
        e.prototype.onScroll = function(t) {
          return this.updateMarqueePosition(t),
            this.updateMenuStyles(t)
        }
        ,
        e.prototype.viewProject = function() {
          return TweenMax.to(this.context, .5, {
            scrollTo: {
              y: this.marqueeHeight
            },
            ease: Sine.easeOut
          })
        }
        ,
        e.prototype.updateMarqueePosition = function(t) {
          return this.isDesktop() && !ib.Globals.IS_IE ? Modernizr.csspositionsticky ? this.updateSticky(t) : this.updatePosition(t) : (this.marquee.hasClass(this.stickyClass) && this.marquee.removeClass(this.stickyClass),
            this.updateMarquee(0))
        }
        ,
        e.prototype.updateMarquee = function(t) {
          return TweenMax.set(this.marquee, {
            y: t
          })
        }
        ,
        e.prototype.updatePosition = function(t) {
          var e;
          return e = 0,
          t + this.winHeight >= this.marqueeHeight && (e = t - (this.marqueeHeight - this.winHeight)),
            $(ib).trigger(t >= this.marqueeHeight ? ib.Events.PAUSE_MARQUEE_ANIMATIONS : ib.Events.RESUME_MARQUEE_ANIMATIONS),
            this.updateMarquee(e)
        }
        ,
        e.prototype.updateSticky = function(t) {
          var e, i;
          return i = 0,
            t + this.winHeight >= this.marqueeHeight ? (i = -1 * (this.marqueeHeight - this.winHeight),
              this.marquee.addClass(this.stickyClass),
              e = this.marqueeHeight,
              t >= 3 * this.marqueeHeight ? (this.marquee.hide(),
                $(ib).trigger(ib.Events.PAUSE_MARQUEE_ANIMATIONS)) : (this.marquee.show(),
                $(ib).trigger(ib.Events.RESUME_MARQUEE_ANIMATIONS),
                e = 0)) : t > 0 && this.marquee.removeClass(this.stickyClass),
            TweenMax.set(this.scrollEl, {
              paddingTop: e
            }),
            this.updateMarquee(i)
        }
        ,
        e.prototype.updateMenuStyles = function(t) {
          return t >= this.marqueeHeight - this.menuBgHeight ? this.removeMenuStyles() : this.addMenuStyles()
        }
        ,
        e.prototype.addMenuStyles = function() {
          return this.menuBg.addClass(this.menuClassName),
            this.menuButton.addClass(this.menuClassName)
        }
        ,
        e.prototype.removeMenuStyles = function() {
          return this.menuBg.removeClass(this.menuClassName),
            this.menuButton.removeClass(this.menuClassName)
        }
        ,
        e.prototype.isDesktop = function() {
          return this.winWidth > ib.Globals.MOBILE_WIDTH
        }
        ,
        e.prototype.destroy = function() {
          return $(ib).off(ib.Events.ADD_MENU_CUSTOM_STYLES, this.updateMenuStyles),
            $(ib).off(ib.Events.REMOVE_MENU_CUSTOM_STYLES, this.removeMenuStyles),
            $(ib).trigger(ib.Events.ENABLE_PARTICLES_SCROLL),
            this.context.removeClass("rich-case-study"),
          this.viewButton.length && this.viewButton.off("click", this.viewProject),
            this.removeMenuStyles()
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.Footer = function() {
      function e(e) {
        this.context = e,
          this.reset = t(this.reset, this),
          this.error = t(this.error, this),
          this.success = t(this.success, this),
          this.submit = t(this.submit, this),
          this.onKeydown = t(this.onKeydown, this),
          this.form = this.context.find(".form-wrapper form"),
          this.textField = this.form.find(".email"),
          this.subscribe = this.form.find(".button"),
          this.form.keydown(this.onKeydown),
          this.subscribe.on("click", this.submit)
      }
      return e.prototype.onKeydown = function() {
        return this.textField.hasClass("value-error") ? this.textField.removeClass("value-error") : void 0
      }
        ,
        e.prototype.submit = function() {
          return this.form.ajaxChimp({
            callback: function(t) {
              return function(e) {
                return "success" === e.result ? t.success() : "0 - An email address must contain a single @" === e.msg ? t.error("Please provide a real email") : e && e.msg ? t.error(-1 !== e.msg.search(/already subscribed/gi) ? "You're already subscribed!" : "Oops - please try again later") : void 0
              }
            }(this)
          }),
            this.textField.focus()
        }
        ,
        e.prototype.success = function() {
          return this.textField.val("Congratulations, you're in!"),
            this.subscribe.val("Add another address")
        }
        ,
        e.prototype.error = function(t) {
          return this.textField.addClass("value-error"),
            this.textField.val(t)
        }
        ,
        e.prototype.reset = function() {
          return this.textField.val(""),
            this.subscribe.val("Subscribe")
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = {}.hasOwnProperty
    , e = function(e, i) {
    function n() {
      this.constructor = e
    }
    for (var r in i)
      t.call(i, r) && (e[r] = i[r]);
    return n.prototype = i.prototype,
      e.prototype = new n,
      e.__super__ = i.prototype,
      e
  };
  null == this.ib && (this.ib = {}),
    ib.Home = function(t) {
      function i(t, e) {
        this.context = t,
          i.__super__.constructor.call(this, this.context),
          this.opts = $.extend({}, e || this.context.data())
      }
      return e(i, t),
        i.prototype.init = function() {}
        ,
        i
    }(ib.PageController),
    ib.ComponentLoader.register("ib.Home", ib.Home)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.ImageAnimator = function() {
      function e(e, i) {
        this.context = e,
          this.out = t(this.out, this),
          this.complete = t(this.complete, this),
          this.stopAnimations = t(this.stopAnimations, this),
          this.loop = t(this.loop, this),
          this["in"] = t(this["in"], this),
          this.show = t(this.show, this),
          this.hide = t(this.hide, this),
          this.frames = this.context.data("frames"),
          this.stopFrame = this.context.data("stop-frame"),
          this.frameHeight = this.context.height(),
          this.currentFrame = 0,
          this.finish = !1,
          this.animations = [],
          this.opts = $.extend({
            inFPS: 120,
            loopFPS: 60,
            outFPS: 60
          }, i || this.context.data())
      }
      return e.prototype.hide = function() {
        return this.stopAnimations(),
          TweenMax.to(this.context, .3, {
            opacity: 0
          })
      }
        ,
        e.prototype.show = function() {
          return this.stopAnimations(),
            TweenMax.to(this.context, .3, {
              opacity: 1
            })
        }
        ,
        e.prototype["in"] = function(t) {
          var e;
          return this.stopAnimations(),
          t && (this.currentFrame = 0,
            this.show()),
            e = new ib.AnimateWithFPS(this.opts.inFPS),
            this.animations.push(e),
            e.startAnimating(function(t) {
              return function() {
                return t.context.css({
                  backgroundPosition: "0 " + -(t.frameHeight * t.currentFrame) + "px"
                }),
                  t.currentFrame = (t.currentFrame + 1) % (t.frames + 1),
                  t.currentFrame === t.stopFrame ? e.stopAnimating() : void 0
              }
            }(this))
        }
        ,
        e.prototype.loop = function() {
          var t;
          return this.stopAnimations(),
            t = new ib.AnimateWithFPS(this.opts.loopFPS),
            this.animations.push(t),
            t.startAnimating(function(e) {
              return function() {
                return e.context.css({
                  backgroundPosition: "0 " + -(e.frameHeight * e.currentFrame) + "px"
                }),
                  e.currentFrame = (e.currentFrame + 1) % (e.frames + 1),
                  e.finish && e.currentFrame === e.stopFrame ? (t.stopAnimating(),
                  e.onComplete && e.onComplete()) : void 0
              }
            }(this))
        }
        ,
        e.prototype.stopAnimations = function() {
          var t, e, i;
          for (e = this.animations.length,
                 i = []; e--; )
            t = this.animations[e],
              t.stopAnimating(),
              i.push(this.animations.splice(e, 1));
          return i
        }
        ,
        e.prototype.complete = function(t) {
          return this.onComplete = t,
            this.finish = !0
        }
        ,
        e.prototype.out = function(t) {
          var e;
          return this.stopAnimations(),
            e = new ib.AnimateWithFPS(this.opts.outFPS),
            this.animations.push(e),
            e.startAnimating(function(i) {
              return function() {
                return i.context.css({
                  backgroundPosition: "0 " + -(i.frameHeight * i.currentFrame) + "px"
                }),
                  i.currentFrame = (i.currentFrame + 1) % (i.frames + 1),
                  i.currentFrame >= i.frames ? (e.stopAnimating(),
                  t && t()) : void 0
              }
            }(this))
        }
        ,
        e
    }(),
    ib.AnimateWithFPS = function() {
      function t(t) {
        this.fps = t,
          this.stop = !1,
          this.frameCount = 0,
          this.fpsInterval,
          this.startTime,
          this.now,
          this.then,
          this.elapsed,
          this.raf,
          this.startAnimating = function(t) {
            return function(e) {
              return t.fpsInterval = 1e3 / t.fps,
                t.then = Date.now(),
                t.startTime = t.then,
                t.animate(e)
            }
          }(this),
          this.animate = function(t) {
            return function(e) {
              return t.raf = window.requestAnimationFrame(function() {
                return "function" == typeof t.animate ? t.animate(e) : void 0
              }),
                t.now = Date.now(),
                t.elapsed = t.now - t.then,
                t.elapsed > t.fpsInterval ? (t.then = t.now - t.elapsed % t.fpsInterval,
                  e()) : void 0
            }
          }(this),
          this.stopAnimating = function(t) {
            return function() {
              return window.cancelAnimationFrame(t.raf),
                t.animate = null
            }
          }(this),
          {
            startAnimating: this.startAnimating,
            stopAnimating: this.stopAnimating
          }
      }
      return t
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.Logo = function() {
      function e(e) {
        this.context = e,
          this.onComplete = t(this.onComplete, this),
          this.out = t(this.out, this),
          this["in"] = t(this["in"], this),
          this.setStyle = t(this.setStyle, this),
          this.setupAnimations = t(this.setupAnimations, this),
          this.wrap = this.context.find(".wrap"),
          this.top = this.context.find(".svg-logo-path-top"),
          this.bottom = this.context.find(".svg-logo-path-bottom"),
          this.svgs = this.context.find(".svg-logo"),
          this.tween = null,
          this.currentStyle = "dark",
          this.styles = {
            light: "light",
            dark: "dark",
            gradient: "gradient"
          },
          this.animations = null,
          this.callback = null,
          this.setupAnimations()
      }
      return e.prototype.setupAnimations = function() {
        return this.animations = [],
          this.svgs.each(function(t) {
            return function(e, i) {
              var n;
              return n = new Vivus(i,{
                type: "async",
                duration: 40,
                start: "manual",
                animTimingFunction: Vivus.EASE_OUT
              },t.onComplete),
                t.animations.push(n)
            }
          }(this))
      }
        ,
        e.prototype.setStyle = function(t, e) {
          return this.currentStyle = t,
            this.wrap.removeClass().addClass("wrap " + this.currentStyle),
            e ? this["in"](!0) : void 0
        }
        ,
        e.prototype["in"] = function(t) {
          var e, i, n, r, s, o;
          for (s = this.animations,
                 o = [],
                 i = n = 0,
                 r = s.length; r > n; i = ++n)
            e = s[i],
              o.push("progress" !== e.getStatus() && (t || i > 0) ? e.reset().play() : void 0);
          return o
        }
        ,
        e.prototype.out = function(t) {
          var e, i, n, r, s;
          for ("function" == typeof t && (this.callback = t),
                 r = this.animations,
                 s = [],
                 i = 0,
                 n = r.length; n > i; i++)
            e = r[i],
              s.push(!t || t && "end" === e.getStatus() ? e.play(-1) : void 0);
          return s
        }
        ,
        e.prototype.onComplete = function() {
          var t, e, i, n, r, s;
          if ("function" == typeof this.callback) {
            for (r = this.animations,
                   s = [],
                   e = i = 0,
                   n = r.length; n > i; e = ++i)
              t = r[e],
                "end" === t.getStatus() ? s.push(setTimeout(function() {
                  return function() {
                    return t.play(-1)
                  }
                }(this), 200)) : "start" === t.getStatus() && e > 0 ? (this.callback(),
                  s.push(this.callback = null)) : s.push(void 0);
            return s
          }
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.MarqueeParticles = function() {
      function e(e, i) {
        this.context = e,
          this.unbindParticleScroll = t(this.unbindParticleScroll, this),
          this.bindParticleScroll = t(this.bindParticleScroll, this),
          this.onPageScroll = t(this.onPageScroll, this),
          this.showNextTarget = t(this.showNextTarget, this),
          this.onTransition = t(this.onTransition, this),
          this.onSceneLoad = t(this.onSceneLoad, this),
          ib.Globals.SCENES_WAITING++,
          this.particleContainer = this.context.find(".particle-container"),
          this.sceneLoaded = !1,
          this.scrollingEnabled = !0,
          this.currentIndex = 0,
          this.sectionAfterMarquee = null,
          this.opts = $.extend({}, i || this.context.data())
      }
      return e.prototype.init = function() {
        var t, e, i, n, r, s, o, a, l, h;
        if (Detector.webgl) {
          for (r = [{
            scale: 300,
            size: 5,
            initialMatrices: [(new THREE.Matrix4).makeTranslation(-.5, 0, 0)]
          }, {
            scale: 80,
            size: 5,
            initialMatrices: [(new THREE.Matrix4).makeTranslation(3, 0, 0)]
          }],
                 n = this.context.data("model").split(","),
                 e = o = 0,
                 l = n.length; l > o; e = ++o)
            i = n[e],
              r[e].url = i;
          for (s = [],
                 a = 0,
                 h = r.length; h > a; a++)
            t = r[a],
              s.push({
                type: ParticleSaga.ModelTarget,
                url: t.url,
                options: {
                  respondsToMouse: !0,
                  scale: t.scale,
                  size: t.size,
                  initialMatrices: t.initialMatrices || [],
                  color: ib.Globals.PARTICLE_COLOR
                }
              });
          return this.scene = new ParticleSaga.Scene(this.particleContainer[0],s,{
            numParticles: 6500,
            respondsToScroll: !0,
            sort: ParticleSaga.VertexSort.frontToBack,
            maxMouseRotation: Math.PI / 12
          }),
            this.scene.load(this.onSceneLoad),
            $(ib).on(ib.Events.TRANSITION_MARQUEE_PARTICLES, this.onTransition),
            $(ib).on(ib.Events.ENABLE_PARTICLES_SCROLL, this.bindParticleScroll),
            $(ib).on(ib.Events.DISABLE_PARTICLES_SCROLL, this.unbindParticleScroll)
        }
      }
        ,
        e.prototype.onSceneLoad = function() {
          return this.sceneLoaded = !0,
            this.scene.pool.resize(),
            ib.Globals.SCENE_READY()
        }
        ,
        e.prototype.onTransition = function(t, e) {
          return this.pageContext = e,
            this.sceneLoaded && this.scrollingEnabled ? (setTimeout(this.showNextTarget, 0),
              $(".page").off("scroll", this.onPageScroll),
              this.sectionAfterMarquee = this.pageContext.find(".marquee").next(),
              this.pageContext.length && this.sectionAfterMarquee.length ? (this.pageContext.on("scroll", this.onPageScroll),
                this.onPageScroll()) : void 0) : void 0
        }
        ,
        e.prototype.showNextTarget = function() {
          return this.scene.setTarget(this.currentIndex),
            ++this.currentIndex >= this.scene.targets.length ? this.currentIndex = 0 : void 0
        }
        ,
        e.prototype.onPageScroll = function() {
          var t, e;
          return this.sectionAfterMarquee.offset().top <= ib.Globals.HEADER_HEIGHT ? void (this.scene.respondingToMouse = !1) : (this.scene.respondsToMouse || (this.scene.respondingToMouse = !0),
            e = this.sectionAfterMarquee.offset().top + this.pageContext.scrollTop(),
            t = this.sectionAfterMarquee.offset().top / e,
            t = Math.max(0, Math.min(1, t)),
            this.scene.setSceneScrollRotation(t))
        }
        ,
        e.prototype.bindParticleScroll = function() {
          return this.scrollingEnabled = !0,
            this.context.removeClass("hide")
        }
        ,
        e.prototype.unbindParticleScroll = function() {
          return this.scrollingEnabled = !1,
            this.context.addClass("hide"),
            this.pageContext.off("scroll", this.onPageScroll)
        }
        ,
        e
    }(),
    ib.ComponentLoader.register("ib.MarqueeParticles", ib.MarqueeParticles)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.Menu = function() {
      function e(e, i) {
        this.context = e,
          this.transitionOut = t(this.transitionOut, this),
          this.hide = t(this.hide, this),
          this.hideMenuShowButton = t(this.hideMenuShowButton, this),
          this.onHover = t(this.onHover, this),
          this.toggleMenu = t(this.toggleMenu, this),
          this.showButton = t(this.showButton, this),
          this.transitionIn = t(this.transitionIn, this),
          this.show = t(this.show, this),
          this.menuBackground = $("#menu-background"),
          this.menuButton = $("#menu-button"),
          this.logo = new ib.Logo(this.menuButton),
          this.navItems = this.context.find("nav > ul > li"),
          this.navItemsBackgrounds = this.navItems.find(".background"),
          this.navItemsContent = this.navItems.find(".content-wrapper"),
          this.showMenu = !1,
          this.menuCanvas,
          this.initial = !0,
          this.canvasGradient,
          this.newsItemTitles = this.context.find(".sub-sections .news p"),
          this.opts = $.extend({}, i || this.context.data())
      }
      return e.prototype.init = function() {
        var t;
        return this.menuButton.on("click", this.toggleMenu),
          this.menuButton.on("mouseenter mouseleave", this.onHover),
          t = this.context.find(".canvas-background .stalker-wrap"),
        "undefined" == typeof InstallTrigger && (this.canvasGradient = new ib.ColorfulMouseStalker(t),
          this.canvasGradient.init(),
          this.canvasGradient.startTracking()),
          this.newsItemTitles.dotdotdot({
            watch: !0
          }),
          $(ib).on(ib.Events.SHOW_MENU, this.show),
          $(ib).on(ib.Events.HIDE_MENU, this.hide),
          $(ib).on(ib.Events.HIDE_MENU_SHOW_BUTTON, this.hideMenuShowButton)
      }
        ,
        e.prototype.show = function() {
          return this.canvasGradient && this.canvasGradient.startTracking(),
            this.context.show(),
            this.context.find(".canvas-background").css({
              zIndex: 2
            }),
            this.logo.setStyle(this.logo.styles.light),
            this.menuBackground.removeClass("show"),
            this.showMenu = !0,
            $(ib).trigger(ib.Events.REMOVE_MENU_CUSTOM_STYLES),
            $(ib).trigger(ib.Events.SHOWING_MENU),
            this.transitionIn()
        }
        ,
        e.prototype.transitionIn = function() {
          var t, e, i, n, r;
          return t = this.context,
            this.initial ? (this.initial = !1,
              t = this.navItemsBackgrounds,
              this.showButton(),
            this.showMenu && (r = Modernizr.touch ? -10 : -50,
              TweenMax.staggerFromTo(this.navItemsContent, .425, {
                opacity: 0,
                y: 0
              }, {
                opacity: 1,
                delay: .3,
                y: r,
                onCompleteParams: ["{self}"],
                onComplete: function() {
                  return function(t) {
                    var e;
                    return e = $(t.target),
                      TweenMax.to(e, .425, {
                        ease: Sine.easeOut,
                        onComplete: function() {
                          return e.addClass("show")
                        },
                        y: 0
                      })
                  }
                }(this),
                onStartParams: ["{self}"],
                onStart: function() {
                  return function(t) {
                    var e;
                    return e = $(t.target),
                      Modernizr.touch ? void 0 : $(ib).trigger(ib.Events.PREVIEW_MENU_ITEM, e.parent().index())
                  }
                }(this)
              }, .13, function(t) {
                return function() {
                  return ib.Globals.MENU_VISIBLE = !0,
                    Modernizr.touch ? void 0 : t.navItems.removeClass("hover-disabled")
                }
              }(this)))) : (this.navItemsContent.addClass("show no-delay"),
              TweenMax.staggerFromTo(this.navItemsContent, .8, {
                opacity: 0,
                x: -10
              }, {
                delay: .3,
                opacity: 1,
                x: 0
              }, .13, function(t) {
                return function() {
                  return ib.Globals.MENU_VISIBLE = !0,
                    Modernizr.touch ? void 0 : ($(window).trigger("resize"),
                      $(ib).trigger(ib.Events.ENABLE_MENU_SCROLL),
                      t.navItems.removeClass("hover-disabled"))
                }
              }(this))),
            i = 0,
            n = .15 * -$(window).height(),
            e = 0,
          $(window).width() < 881 && (i = .2 * -$(window).width(),
            n = 0),
            TweenMax.fromTo(t, .7, {
              y: n,
              x: i
            }, {
              onStart: function(t) {
                return function() {
                  return t.logo.setStyle(t.logo.styles.light, !0)
                }
              }(this),
              delay: e,
              y: 0,
              x: 0
            }),
            t.delay(e).css("opacity", 1)
        }
        ,
        e.prototype.showButton = function() {
          return this.menuButton.show()
        }
        ,
        e.prototype.toggleMenu = function(t) {
          return ib.Globals.DISABLE_MENU_TOGGLE ? void 0 : (this.showMenu ? this.hide() : this.show(),
            this.onHover(t))
        }
        ,
        e.prototype.onHover = function(t) {
          return ib.Globals.DISABLE_MENU_TOGGLE ? void 0 : "mouseenter" === t.type ? this.logo["in"]() : void 0
        }
        ,
        e.prototype.hideMenuShowButton = function() {
          return this.initial = !1,
            this.hide(),
            this.showButton()
        }
        ,
        e.prototype.hide = function(t, e) {
          return this.transitionOut(e),
            this.showMenu = !1,
            this.logo.setStyle(this.logo.styles.dark),
            $(ib).trigger(ib.Events.ADD_MENU_CUSTOM_STYLES),
            ib.Globals.DISABLE_MENU_TOGGLE = !1
        }
        ,
        e.prototype.transitionOut = function(t) {
          var e;
          return this.navItems.addClass("hover-disabled"),
            this.menuBackground.addClass("show"),
            e = t ? 0 : .3,
            TweenMax.to(this.navItemsContent, e, {
              opacity: 0,
              onStart: function(t) {
                return function() {
                  return t.logo.setStyle(t.logo.styles.dark, !0)
                }
              }(this),
              x: -10
            }),
            e = t ? 0 : .5,
            TweenMax.to(this.context, e, {
              opacity: 0,
              onComplete: function(t) {
                return function() {
                  return t.canvasGradient && t.canvasGradient.stopTracking(),
                    t.context.hide(),
                    ib.Globals.MENU_VISIBLE = !1,
                    $(ib).trigger(ib.Events.MENU_HIDDEN),
                    t.navItemsBackgrounds.is(":visible") ? void 0 : t.navItemsBackgrounds.css("opacity", 1)
                }
              }(this)
            }),
            $(window).trigger("resize")
        }
        ,
        e
    }(),
    ib.ComponentLoader.register("ib.Menu", ib.Menu)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.NestedMenu = function() {
      function e(e, i) {
        this.context = e,
          this.resize = t(this.resize, this),
          this.peekIsVisible = t(this.peekIsVisible, this),
          this.updateProperty = t(this.updateProperty, this),
          this.update = t(this.update, this),
          this.stop = t(this.stop, this),
          this.start = t(this.start, this),
          this.scroll = t(this.scroll, this),
          this.onContextLeave = t(this.onContextLeave, this),
          this.onContextEnter = t(this.onContextEnter, this),
          this.previewMenuItems = t(this.previewMenuItems, this),
          this.onEnableMenuScroll = t(this.onEnableMenuScroll, this),
          this.onMenuHidden = t(this.onMenuHidden, this),
          this.setupScrollDispatcher = t(this.setupScrollDispatcher, this),
          this.scrollToFold = t(this.scrollToFold, this),
          this.resetNestedMenu = t(this.resetNestedMenu, this),
          this.nestedMenu = this.context.find(".nested-menu"),
          this.menuItemsContainer = this.nestedMenu.find(".menu-items"),
          this.menuItemsContainerHeight = this.menuItemsContainer.height(),
          this.menuItems = this.menuItemsContainer.find("li"),
          this.firstMenuItem = this.menuItems.first(),
          this.menuItemHeight = this.firstMenuItem.height(),
          this.scrollDispatcher = null,
          this.description = this.context.find(".description"),
          this.descriptionTitle = this.description.find("hgroup h1"),
          this.titleYoffset = 0,
          this.titleBar = this.context.find(".title-bar"),
          this.titleBarTitle = this.titleBar.find("h1"),
          this.scrollIndicator = this.context.find(".scroll-indicator"),
          this.scrollIndicatorItems = this.scrollIndicator.find(".arrow-wrap"),
          this.shouldDispatchOnEnableHover = !1,
          this.menuItemBottomBorderHeight = 1,
          this.destinationMenuOffset = -this.menuItemHeight + this.menuItemBottomBorderHeight,
          this.hoverOffset = this.firstMenuItem.find("p").position().top,
          this.menuOffset = this.destinationMenuOffset,
          this.destinationContentOffset = 0,
          this.contentOffset = 0,
          this.descOpacity = 1,
          this.destinationDescOpacity = 1,
          this.descOffset = 0,
          this.destinationDescOffset = 0,
          this.titleOpacity = 0,
          this.destinationTitleOpacity = 0,
          this.titleOffset = 0,
          this.destinationTitleOffset = 0,
          this.amountS,
          this.raf,
          this.win = $(window),
          this.winHeight = this.win.height(),
          this.hideTitleBarTitle = !1,
          this.initial = !0,
          this.opts = $.extend({
            peekFriction: .195,
            friction: .5,
            peekOffsetY: this.menuItemHeight,
            titleBarHeight: this.titleBar.height(),
            titleBarStartingY: 15
          }, i || this.context.data())
      }
      return e.prototype.init = function() {
        return this.titleYoffset = this.descriptionTitle.offset().top,
          this.setupScrollDispatcher(),
          this.context.on("mouseenter mouseover mousemove", this.onContextEnter),
          this.context.on("mouseleave", this.onContextLeave),
          $(ib).on(ib.Events.ENABLE_MENU_SCROLL, this.onEnableMenuScroll),
          $(ib).on(ib.Events.PREVIEW_MENU_ITEM, this.previewMenuItems),
          $(ib).on(ib.Events.MENU_HIDDEN, this.onMenuHidden),
          $(ib).on(ib.Events.SHOWING_MENU, this.resetNestedMenu),
          this.scrollIndicatorItems.on("click", this.scrollToFold),
          this.win.on("resize", this.resize),
          this.resize(),
          this.menuItems.length <= 1 ? this.scrollIndicator.hide() : void 0
      }
        ,
        e.prototype.resetNestedMenu = function() {
          return TweenMax.set(this.nestedMenu, {
            y: this.destinationMenuOffset
          })
        }
        ,
        e.prototype.scrollToFold = function(t) {
          var e, i, n, r, s, o;
          return s = this.win.height(),
            e = (s - this.menuItemsContainer.offset().top) / this.menuItemHeight,
            e = Math.ceil(e - 1),
            i = Math.ceil(s / this.menuItemHeight) - 1,
            o = Math.ceil((s - this.menuItemsContainer.offset().top) / this.menuItemHeight),
            r = 0,
            $(t.currentTarget).hasClass("up") ? r = Math.max(0, e - i) : (r = Math.min(this.menuItems.length - o, i),
              r += e),
            n = -(this.menuItems.eq(r).position().top - this.hoverOffset),
            this.scrollDispatcher.scrollToFold(n)
        }
        ,
        e.prototype.setupScrollDispatcher = function() {
          return this.scrollDispatcher = new ib.ScrollDispatcher(this.context,{
            contextHeight: 0
          }),
            this.scrollDispatcher.init(),
            this.scrollDispatcher.setContent(this.nestedMenu),
            this.context.on("scrolldispatched", this.scroll)
        }
        ,
        e.prototype.onMenuHidden = function() {
          return this.stop()
        }
        ,
        e.prototype.onEnableMenuScroll = function(t) {
          return this.resize(),
            this.onContextEnter(t),
            this.start()
        }
        ,
        e.prototype.previewMenuItems = function(t, e) {
          return this.onContextEnter(t),
            e === this.context.index() ? TweenMax.fromTo(this.nestedMenu, .85, {
              y: 50
            }, {
              y: this.destinationMenuOffset,
              ease: Back.easeOut,
              onComplete: this.start
            }) : void 0
        }
        ,
        e.prototype.onContextEnter = function(t) {
          return this.context.hasClass("hover-disabled") ? (this.onContextLeave(),
            void (this.shouldDispatchOnEnableHover = !0)) : (this.hideTitleBarTitle = !1,
            this.scrollDispatcher.enable(),
            "mouseenter" === t.type || this.shouldDispatchOnEnableHover ? (this.scrollDispatcher.broadcastScroll(),
              this.shouldDispatchOnEnableHover = !1) : void 0)
        }
        ,
        e.prototype.onContextLeave = function() {
          var t;
          return this.shouldDispatchOnEnableHover = !1,
            this.scrollDispatcher.disable(),
            t = .5,
          ib.Globals.MENU_VISIBLE || (t = .1,
            this.hideTitleBarTitle = !0),
            this.scrollDispatcher.scrollToTop(t)
        }
        ,
        e.prototype.scroll = function(t, e) {
          var i, n, r, s, o, a, l;
          return n = this.scrollDispatcher.enabled ? this.hoverOffset : -this.menuItemBottomBorderHeight,
            r = Math.max(e.yOffset, -this.winHeight + this.opts.titleBarHeight + this.opts.peekOffsetY + n),
            this.destinationMenuOffset = r - this.menuItemHeight - n,
            this.destinationContentOffset = e.yOffset - r,
            0 === e.progress ? this.scrollIndicator.attr("class", "scroll-indicator down") : e.progress < 1 ? this.scrollIndicator.attr("class", "scroll-indicator both") : this.scrollIndicator.attr("class", "scroll-indicator up"),
            i = this.titleYoffset * e.progress,
            l = this.winHeight - this.opts.titleBarHeight,
            s = Math.abs(r) / (this.winHeight - this.opts.titleBarHeight - this.opts.peekOffsetY - n),
            s = 1 - 1 * s,
            o = Math.min(1, 2 * r / this.winHeight),
            i *= o,
            this.destinationDescOpacity = s,
            this.destinationDescOffset = i,
            a = this.opts.titleBarStartingY,
            s = 0,
          this.hideTitleBarTitle || (s = (this.nestedMenu.offset().top - this.opts.titleBarHeight) / (2 * this.opts.titleBarHeight),
            s = Math.min(1, s),
            s = Math.max(0, s),
            s = Math.abs(s - 1),
            a = (1 - s) * this.opts.titleBarStartingY),
            this.destinationTitleOpacity = s,
            this.destinationTitleOffset = a
        }
        ,
        e.prototype.start = function() {
          return this.stop(),
            this.raf = requestAnimationFrame(this.update)
        }
        ,
        e.prototype.stop = function() {
          return cancelAnimationFrame(this.raf)
        }
        ,
        e.prototype.update = function() {
          return this.raf = requestAnimationFrame(this.update),
            this.updateProperty(this.nestedMenu, {
              y: this.menuOffset
            }, "y", "menuOffset", "destinationMenuOffset"),
            this.updateProperty(this.menuItemsContainer, {
              y: this.contentOffset
            }, "y", "contentOffset", "destinationContentOffset"),
            this.updateProperty(this.description, {
              opacity: this.descOpacity
            }, "opacity", "descOpacity", "destinationDescOpacity", .01, 0),
            this.updateProperty(this.description, {
              y: this.descOffset
            }, "y", "descOffset", "destinationDescOffset"),
            this.updateProperty(this.titleBarTitle, {
              opacity: this.titleOpacity
            }, "opacity", "titleOpacity", "destinationTitleOpacity", .01, 0),
            this.updateProperty(this.titleBarTitle, {
              y: this.titleOffset
            }, "y", "titleOffset", "destinationTitleOffset")
        }
        ,
        e.prototype.updateProperty = function(t, e, i, n, r, s, o) {
          var a, l, h;
          return null == s && (s = 2),
          null == o && (o = 1),
            l = this[r] - this[n],
            Math.abs(l) > 0 ? (s > Math.abs(l) ? this[n] = this[r] : (h = this.peekIsVisible() ? this.opts.friction : this.opts.peekFriction,
              a = h * l,
              this[n] += a / Math.abs(a) * Math.max(o, Math.abs(a))),
              e[i] = this[n],
              TweenMax.set(t, e)) : void 0
        }
        ,
        e.prototype.peekIsVisible = function() {
          return Math.abs(this.menuOffset) > this.menuItemHeight + this.hoverOffset + this.menuItemBottomBorderHeight
        }
        ,
        e.prototype.resize = function() {
          var t;
          return this.winHeight = this.win.height(),
            this.titleYoffset = this.descriptionTitle.offset().top,
            this.menuItemHeight = this.menuItems.first().outerHeight(),
            this.opts.peekOffsetY = this.menuItemHeight,
            this.hoverOffset = this.firstMenuItem.find("p").position().top,
            this.scrollDispatcher.opts.additionalOffset = this.opts.peekOffsetY + this.hoverOffset,
            this.destinationMenuOffset = -this.menuItemHeight + this.menuItemBottomBorderHeight,
            this.menuOffset = this.destinationMenuOffset,
            t = this.destinationMenuOffset,
          !ib.Globals.MENU_VISIBLE && this.initial && (this.initial = !1,
            t = 0),
            TweenMax.set(this.nestedMenu, {
              y: t
            }),
            this.win.width() < 881 ? this.scrollDispatcher.disable() : this.scrollDispatcher.enable()
        }
        ,
        e
    }(),
    ib.ComponentLoader.register("ib.NestedMenu", ib.NestedMenu)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ib && (this.ib = {}),
    ib.News = function(e) {
      function n(e, i) {
        this.context = e,
          this.isNoLongerVisible = t(this.isNoLongerVisible, this),
          this.willBecomeVisible = t(this.willBecomeVisible, this),
          this.fetchPage = t(this.fetchPage, this),
          n.__super__.constructor.call(this, this.context),
          this.twitterFeed,
          this.newsListNav = this.context.find(".info-list nav li"),
          this.newsList = this.context.find(".news-list li"),
          this.newsListPage = 0,
          this.filteredItems,
          this.filter,
          this.contentType = ib.ContentTypes.NEWS_ARTICLE,
          this.newsArticleWrapper = $("#news-article"),
          this.opts = $.extend({
            articlesPerListPage: 7
          }, i || this.context.data())
      }
      return i(n, e),
        n.prototype.init = function() {
          return this.twitterFeed = new ib.TwitterFeed(this.context.find("#twitter-feed"))
        }
        ,
        n.prototype.fetchPage = function(t, e, i) {
          return this.section ? ib.ContentCache.getPage(this.contentType, this.section, function(i) {
            return function(n, r) {
              var s;
              return n ? (s = i.newsArticleWrapper.clone(),
                s.html(n),
                i.sectionController = new ib.NewsArticle(s),
                t(s, r)) : e()
            }
          }(this), i) : t()
        }
        ,
        n.prototype.willBecomeVisible = function() {
          return this.twitterFeed.start(),
            n.__super__.willBecomeVisible.call(this)
        }
        ,
        n.prototype.isNoLongerVisible = function() {
          return this.twitterFeed && this.twitterFeed.stop(),
            n.__super__.isNoLongerVisible.call(this)
        }
        ,
        n
    }(ib.PageController),
    ib.ComponentLoader.register("ib.News", ib.News)
}
  .call(this),
function() {
  var t = function(t, e) {
      return function() {
        return t.apply(e, arguments)
      }
    }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
      function n() {
        this.constructor = t
      }
      for (var r in i)
        e.call(i, r) && (t[r] = i[r]);
      return n.prototype = i.prototype,
        t.prototype = new n,
        t.__super__ = i.prototype,
        t
    }
    , n = [].indexOf || function(t) {
      for (var e = 0, i = this.length; i > e; e++)
        if (e in this && this[e] === t)
          return e;
      return -1
    }
  ;
  null == this.ib && (this.ib = {}),
    ib.NewsArticle = function(e) {
      function r(e, i) {
        this.context = e,
          this.isNoLongerVisible = t(this.isNoLongerVisible, this),
          this.willBecomeVisible = t(this.willBecomeVisible, this),
          this.updateSelectors = t(this.updateSelectors, this),
          this.playVideo = t(this.playVideo, this),
          this.generateShareLink = t(this.generateShareLink, this),
          this.share = t(this.share, this),
          this.newsArticle = $("#news-article"),
          this.contentType = ib.ContentTypes.NEWS_ARTICLE,
          this.shareItems,
          this.videos,
          this.shareLinks = {
            facebook: "http://www.facebook.com/share.php?u=|u|",
            twitter: "https://twitter.com/share?url=|u|",
            "google-plus": "https://plusone.google.com/_/+1/confirm?hl=en&url=|u|"
          },
          r.__super__.constructor.call(this, this.context),
          this.opts = $.extend({}, i || this.context.data())
      }
      return i(r, e),
        r.prototype.share = function(t) {
          var e, i;
          return t.preventDefault(),
            i = $(t.currentTarget).data("share-type"),
            e = this.generateShareLink(i),
            window.open(e, "_blank", "toolbar=0,resizable=1,status=0,width=640,height=528"),
            !1
        }
        ,
        r.prototype.generateShareLink = function(t) {
          var e, i;
          if (i = !t,
              !(n.call(this.shareLinks, i) >= 0))
            return e = encodeURIComponent(window.location),
              this.shareLinks[t].replace("|u|", e)
        }
        ,
        r.prototype.playVideo = function(t) {
          var e, i, n, r, s;
          return n = $(t.currentTarget),
            e = $("iframe", n),
            s = $("img", n),
            r = $("figure", n),
            i = n.data("src"),
            i ? TweenMax.to([s, r], .5, {
              opacity: 0,
              onStart: function() {
                return function() {
                  return e.attr("src", i)
                }
              }(this),
              onComplete: function() {
                return function() {
                  return s.css({
                    zIndex: 1
                  }),
                    r.css({
                      zIndex: 1
                    })
                }
              }(this)
            }) : void 0
        }
        ,
        r.prototype.updateSelectors = function() {
          var t;
          return this.videos = this.context.find(".video"),
            this.iframes = this.context.find(".video iframe"),
            t = this.context.find(".share-items"),
            this.shareItems = t.find("li")
        }
        ,
        r.prototype.willBecomeVisible = function() {
          return this.newsArticle.html(this.context.html()),
            this.context = this.newsArticle,
            this.updateSelectors(),
            this.shareItems.on("click", this.share),
            $("img", this.videos).css({
              zIndex: 3
            }),
            $("figure", this.videos).css({
              zIndex: 4
            }),
            this.videos.on("click", this.playVideo),
            r.__super__.willBecomeVisible.call(this)
        }
        ,
        r.prototype.isNoLongerVisible = function() {
          return this.shareItems && this.shareItems.off("click", this.share),
          this.iframes && this.iframes.attr("src", ""),
          this.videos && this.videos.off("click", this.playVideo),
            r.__super__.isNoLongerVisible.call(this),
            r.__super__.isNoLongerVisible.call(this)
        }
        ,
        r
    }(ib.SectionController)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.Parallaxer = function() {
      function e(e, i, n) {
        this.context = e,
          this.wrapper = i,
          this.destroy = t(this.destroy, this),
          this.updateOffsets = t(this.updateOffsets, this),
          this.parallax = t(this.parallax, this),
          this.resize = t(this.resize, this),
          this.images = this.wrapper.find("img"),
          this.imageData = [],
          this.scrollTop = this.context.scrollTop(),
          this.winHeight = $(window).height(),
          this.raf,
          this.opts = $.extend({}, n || this.context.data()),
          $(window).on("resize", this.resize),
          this.resize()
      }
      return e.prototype.resize = function() {
        var t, e, i, n, r, s, o, a, l, h;
        for (this.winHeight = $(window).height(),
               s = this.context.scrollTop(),
               h = this.images,
               t = a = 0,
               l = h.length; l > a; t = ++a)
          i = h[t],
            e = $(i).css("width", "auto"),
            n = e.parent().height(),
            r = e.parent().width(),
            o = e.width(),
          r > o && (o = r),
            TweenMax.set(i, {
              width: o,
              marginLeft: Math.round(-o / 2),
              y: 0
            }),
            this.imageData[t] = {
              y: s + e.parent().offset().top,
              parentHeight: n,
              diff: e.height() - n
            };
        return this.updateOffsets()
      }
        ,
        e.prototype.parallax = function() {
          return Modernizr.touch ? void 0 : (this.updateOffsets(),
            this.raf = requestAnimationFrame(this.parallax))
        }
        ,
        e.prototype.updateOffsets = function() {
          var t, e, i, n, r, s, o, a, l, h;
          for (this.scrollTop = this.context.scrollTop(),
                 l = this.images,
                 h = [],
                 e = o = 0,
                 a = l.length; a > o; e = ++o)
            n = l[e],
              i = this.imageData[e].y,
              t = -this.imageData[e].diff,
              r = this.imageData[e].parentHeight,
              i = i + r - this.scrollTop,
              s = Math.min(Math.max(i / (this.winHeight + r), 0), 1),
              h.push(TweenMax.set(n, {
                y: s * t
              }));
          return h
        }
        ,
        e.prototype.destroy = function() {
          return cancelAnimationFrame(this.raf),
            $(window).off("resize", this.resize),
            this.scrollTop = 0,
            this.images = null,
            this.imageData = []
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.PhotoCollage = function() {
      function e(e) {
        this.context = e,
          this.stop = t(this.stop, this),
          this.startAnimation = t(this.startAnimation, this),
          this.animate = t(this.animate, this),
          this.start = t(this.start, this),
          this.addPhotos = t(this.addPhotos, this),
          this.loadPhotos = t(this.loadPhotos, this),
          this.createTiles = t(this.createTiles, this),
          this.photosContainer = this.context.find(".photos-container"),
          this.landscapeTiles = [],
          this.squareTiles = [],
          this.loaded = !1,
          this.activeTiles = [],
          this.runningIndex = 0
      }
      return e.prototype.init = function() {
        return this.createTiles(this.landscapeTiles, this.photosContainer.find(".landscape")),
          this.createTiles(this.squareTiles, this.photosContainer.find(".square"))
      }
        ,
        e.prototype.createTiles = function(t, e) {
          return e.each(function() {
            return function(e, i) {
              var n;
              return n = new ib.Tile($(i)),
                t.push(n)
            }
          }(this))
        }
        ,
        e.prototype.loadPhotos = function() {
          return $.ajax({
            method: "GET",
            url: "/api/studio-photos",
            success: function(t) {
              return function(e) {
                return t.addPhotos(e),
                  t.animate()
              }
            }(this)
          })
        }
        ,
        e.prototype.addPhotos = function(t) {
          var e, i, n, r, s, o, a, l;
          for (l = t.photos,
                 e = o = 0,
                 a = l.length; a > o; e = ++o)
            i = l[e],
              r = '<figure style="background-image: url(' + i.photo_url + ')"></figure>',
              s = parseInt(i.width) > parseInt(i.height) ? this.landscapeTiles : this.squareTiles,
              n = s[e % s.length],
              n.addImage($(r));
          return this.loaded = !0
        }
        ,
        e.prototype.start = function() {
          return this.loaded ? this.animate() : this.loadPhotos()
        }
        ,
        e.prototype.animate = function() {
          return this.startAnimation(this.landscapeTiles),
            this.startAnimation(this.squareTiles)
        }
        ,
        e.prototype.startAnimation = function(t) {
          var e, i, n, r, s, o;
          for (o = [],
                 r = 0,
                 s = t.length; s > r; r++)
            i = t[r],
              i.images.length > 1 ? (e = Math.floor(2 * Math.random() * t.length + 1),
                n = TweenMax.delayedCall(e, i.animate),
                this.activeTiles.push({
                  tween: n,
                  tile: i
                }),
                o.push(this.runningIndex++)) : o.push(void 0);
          return o
        }
        ,
        e.prototype.stop = function() {
          var t, e, i, n;
          for (n = this.activeTiles,
                 e = 0,
                 i = n.length; i > e; e++)
            t = n[e],
            t.tween && t.tween.kill(),
              t.tile.stop();
          return this.activeTiles = [],
            this.runningIndex = 0
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.PreloaderOverlay = function() {
      function e(e, i) {
        this.context = e,
          this.hide = t(this.hide, this),
          this.show = t(this.show, this),
          this.wrapper = this.context.find(".wrapper"),
          this.logo = new ib.Logo(this.wrapper.find("figure")),
          this.loading = this.wrapper.find("h5"),
          this.opts = $.extend({}, i || this.context.data())
      }
      return e.prototype.init = function() {
        return $(ib).on(ib.Events.SHOW_PRELOADER, this.show),
          $(ib).on(ib.Events.HIDE_PRELOADER, this.hide)
      }
        ,
        e.prototype.show = function(t, e) {
          var i;
          return i = e.replace(/-/g, " "),
            i = i.camelCase(),
            this.loading.text("Loading " + i),
            $.doTimeout("splash-logo-animation", 500, function(t) {
              return function() {
                return t.wrapper.show(),
                  t.logo["in"](),
                  t.loading.fadeIn()
              }
            }(this)),
            this.context.stop().fadeIn()
        }
        ,
        e.prototype.hide = function() {
          return this.logo.out(function(t) {
            return function() {
              return $(ib).trigger(ib.Events.HIDE_MENU, !0),
                $(ib).trigger(ib.Events.PRELOADER_DONE),
                t.context.stop().fadeOut(t.loading.hide)
            }
          }(this))
        }
        ,
        e
    }(),
    ib.ComponentLoader.register("ib.PreloaderOverlay", ib.PreloaderOverlay)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ib && (this.ib = {}),
    ib.RichCaseStudy = function(e) {
      function n(e, i) {
        this.context = e,
          this.richCaseStudy = i,
          this.destroy = t(this.destroy, this),
          this.scroll = t(this.scroll, this),
          this.resize = t(this.resize, this),
          this.transitionIn = t(this.transitionIn, this),
          n.__super__.constructor.call(this, this.context),
          this.fixedMarquee = null,
          $(ib).on(ib.Events.DESTROY_CASE_STUDY, this.destroy)
      }
      return i(n, e),
        n.prototype.transitionIn = function(t) {
          return n.__super__.transitionIn.call(this, t),
            setTimeout(function(t) {
              return function() {
                return t.fixedMarquee = new ib.FixedMarquee,
                  t.fixedMarquee.init(t.context),
                  t.richCaseStudy.init(t.context),
                  t.context.on("scroll", t.scroll),
                  t.resize()
              }
            }(this), 0)
        }
        ,
        n.prototype.resize = function() {
          return this.fixedMarquee ? setTimeout(function(t) {
            return function() {
              return console.log("resize"),
                t.fixedMarquee.onResize(),
                t.richCaseStudy.onResize(),
                t.scroll()
            }
          }(this), 0) : void 0
        }
        ,
        n.prototype.scroll = function() {
          var t;
          return t = this.context.scrollTop(),
            this.fixedMarquee.onScroll(t),
            this.richCaseStudy.onScroll(t)
        }
        ,
        n.prototype.destroy = function() {
          return this.context.off("scroll", this.scroll),
            $(ib).off(ib.Events.DESTROY_CASE_STUDY, this.destroy),
          this.fixedMarquee && this.fixedMarquee.destroy(),
          this.richCaseStudy && this.richCaseStudy.destroy(),
            this.fixedMarquee = null
        }
        ,
        n
    }(ib.CaseStudy)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.Splash = function() {
      function e(e, i) {
        this.context = e,
          this.hideComplete = t(this.hideComplete, this),
          this.hide = t(this.hide, this),
          this.transitionOut = t(this.transitionOut, this),
          this.transitionIn = t(this.transitionIn, this),
          this.ready = t(this.ready, this),
          this.logo = this.context.find("figure"),
          this.logoAnimation = new ib.ImageAnimator(this.logo,{
            loopFPS: 50,
            outFPS: 60
          }),
          this.title = this.context.find("h1"),
          this.body = this.context.find("p"),
          this.skip = this.context.find(".pill"),
          this.hideTimeout,
          this.loadComplete = !1,
          this.transitionComplete = !1,
          this.hiddenForMobileResolution = !1,
          this.opts = $.extend({}, i || this.context.data())
      }
      return e.prototype.init = function() {
        return this.ready(),
          this.transitionIn()
      }
        ,
        e.prototype.ready = function() {
          return $(ib).trigger(ib.Events.SPLASH_READY)
        }
        ,
        e.prototype.transitionIn = function() {
          return this.logo.show(),
            this.logoAnimation["in"](),
            this.title.textillate({
              initialDelay: 675,
              "in": {
                effect: "fadeIn",
                delayScale: .5
              }
            }),
            TweenMax.to(this.body.eq(0), 1, {
              delay: 2.5,
              opacity: 1,
              visibility: "visible"
            }),
            TweenMax.to(this.body.eq(1), 1, {
              delay: 3,
              opacity: 1,
              visibility: "visible",
              onComplete: function(t) {
                return function() {
                  return t.transitionComplete = !0,
                    t.loadComplete ? t.transitionOut() : void 0
                }
              }(this)
            })
        }
        ,
        e.prototype.transitionOut = function() {
          return this.logoAnimation.complete(),
            this.loadComplete = !0,
            this.transitionComplete && !this.hiddenForMobileResolution ? (this.skip.on("click", this.hide),
              TweenMax.to(this.skip, .25, {
                opacity: 1
              }),
              this.hideTimeout = setTimeout(this.hide, 3e3)) : void 0
        }
        ,
        e.prototype.hide = function() {
          return clearTimeout(this.hideTimeout),
            this.logoAnimation.out(),
            TweenMax.to(this.context, .8, {
              delay: .3,
              opacity: 0,
              onComplete: this.hideComplete
            })
        }
        ,
        e.prototype.hideComplete = function() {
          return this.context.hide(),
            this.skip.off("click", this.hide),
            $(ib).trigger(ib.Globals.HIDE_SPLASH_AND_MENU ? ib.Events.HIDE_MENU_SHOW_BUTTON : ib.Events.SHOW_MENU)
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ib && (this.ib = {}),
    ib.Studio = function(e) {
      function n(e, i) {
        this.context = e,
          this.transitionOut = t(this.transitionOut, this),
          this.transitionIn = t(this.transitionIn, this),
          this.isNoLongerVisible = t(this.isNoLongerVisible, this),
          this.willBecomeVisible = t(this.willBecomeVisible, this),
          this.fetchPage = t(this.fetchPage, this),
          this.animatePrinciples = t(this.animatePrinciples, this),
          this.scrollToTeam = t(this.scrollToTeam, this),
          this.updateTeam = t(this.updateTeam, this),
          this.principles = this.context.find("#principles"),
          this.team = null,
          this.photoCollage,
          this.win = $(window),
          this.menu = $("#menu-background"),
          this.animateTeamOnScroll = !0,
          n.__super__.constructor.call(this, this.context),
          this.opts = $.extend({}, i || this.context.data())
      }
      return i(n, e),
        n.prototype.init = function() {
          return this.photoCollage = new ib.PhotoCollage(this.context.find("#photo-collage")),
            this.photoCollage.init()
        }
        ,
        n.prototype.updateTeam = function() {
          return this.team || (this.team = new ib.Team(this.context.find("#team"),!0)),
            this.detailSection ? (this.team.showTeamMember(this.section),
              this.scrollToTeam()) : (!ib.Globals.MENU_VISIBLE && this.team.showingMember ? this.scrollToTeam() : this.animateTeamOnScroll && this.context.scrollTop(0),
              this.team.showAll(this.animateTeamOnScroll))
        }
        ,
        n.prototype.scrollToTeam = function() {
          var t, e;
          return t = this.initial ? 0 : .3,
            e = this.initial ? 1e3 : 0,
            $.doTimeout("scroll-to-team"),
            $.doTimeout("scroll-to-team", e, function(e) {
              return function() {
                var i, n;
                return i = e.context.scrollTop(),
                  n = e.team.context.offset().top + i - e.menu.height(),
                  i !== n ? TweenMax.to(e.context, t, {
                    scrollTop: n
                  }) : void 0
              }
            }(this))
        }
        ,
        n.prototype.animatePrinciples = function() {
          var t;
          return t = this.win.height(),
          this.principles.offset().top <= .5 * t && !this.principles.hasClass("animate") && this.principles.addClass("animate"),
            this.team.context.offset().top <= .75 * t && this.animateTeamOnScroll && !this.detailSection ? (this.animateTeamOnScroll = !1,
              this.updateTeam()) : void 0
        }
        ,
        n.prototype.fetchPage = function(t, e, i) {
          var r;
          return this.initial = i,
            this.detailSection = "jeff-yamada" === (r = this.section) || "blake-carroll" === r || "julia-prior" === r || "nadya-bratt" === r || "eric-moncada" === r || "anthony-mariano" === r || "bradee-markham" === r || "artur-napierajczyk" === r || "daniel-avila" === r,
            this.detailSection ? void t() : n.__super__.fetchPage.call(this, t, e, this.initial)
        }
        ,
        n.prototype.willBecomeVisible = function() {
          return this.context.on("scroll", this.animatePrinciples),
            this.animateTeamOnScroll = !0,
            this.updateTeam(this.animateTeamOnScroll),
            n.__super__.willBecomeVisible.call(this)
        }
        ,
        n.prototype.isNoLongerVisible = function() {
          return this.context && this.context.off("scroll", this.animatePrinciples),
          this.principles && this.principles.removeClass("animate"),
            this.animateTeamOnScroll = !0,
            n.__super__.isNoLongerVisible.call(this)
        }
        ,
        n.prototype.transitionIn = function(t) {
          return "studio" !== this.incomingPage ? (this.photoCollage.start(),
            n.__super__.transitionIn.call(this, t)) : void 0
        }
        ,
        n.prototype.transitionOut = function() {
          return "studio" === this.incomingPage ? (this.animateTeamOnScroll = !1,
            void this.updateTeam()) : (this.photoCollage.stop(),
            this.team.showingMember = !1,
            n.__super__.transitionOut.call(this))
        }
        ,
        n
    }(ib.PageController),
    ib.ComponentLoader.register("ib.Studio", ib.Studio)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.Team = function() {
      function e(e, i) {
        this.context = e,
          this.initial = i,
          this.adjustContextHeight = t(this.adjustContextHeight, this),
          this.showAll = t(this.showAll, this),
          this.updateNavLinks = t(this.updateNavLinks, this),
          this.showTeamMember = t(this.showTeamMember, this),
          this.startSaga = t(this.startSaga, this),
          this.setupTeam = t(this.setupTeam, this),
          this.saga,
          this.teamWrapper = this.context.find(".team-wrapper"),
          this.teamList,
          this.teamDetail = this.context.find(".team-detail-wrapper"),
          this.teamMembers = [],
          this.teamMemberTitles = [],
          this.pagination = this.teamDetail.find(".common-pagination a"),
          this.showingMember = !1,
          this.lastMemberIndex,
          this.timeoutID = "team",
          $(ib).on(ib.Events.MOBILE_SIZE, this.adjustContextHeight),
          $(ib).on(ib.Events.DESKTOP_SIZE, this.adjustContextHeight),
          this.startSaga(),
          this.setupTeam()
      }
      return e.prototype.setupTeam = function() {
        var t, e, i, n, r, s, o, a, l;
        for (this.teamList = new ib.TeamList(this.teamWrapper),
               n = this.teamDetail.find(".team-members").children(),
               l = [],
               e = o = 0,
               a = n.length; a > o; e = ++o)
          i = n[e],
            t = $(i),
            r = this.saga.teamMembers[e],
            s = new ib.TeamMember(t,r),
            this.teamMembers.push(s),
            l.push(this.teamMemberTitles.push(this.saga.teamMemberTitles[e]));
        return l
      }
        ,
        e.prototype.startSaga = function() {
          return this.saga = new ib.TeamSaga(this.context.find(".particle-container"),this.teamWrapper),
            Detector.webgl ? ($("#team").addClass("particle-saga"),
              this.saga.createScene()) : ($("#team").removeClass("particle-saga"),
              ib.Globals.SCENE_READY())
        }
        ,
        e.prototype.showTeamMember = function(t) {
          var e, i;
          return this.teamList.transitionOut(),
            this.teamDetail.stop().fadeIn(function(t) {
              return function() {
                return t.teamDetail.addClass("active")
              }
            }(this)),
            this.showingMember = !0,
            i = this.teamMembers[this.lastMemberIndex],
          i && i.transitionOut(),
            e = this.saga.teamMembers.indexOf(t),
            this.currentMember = this.teamMembers[e],
            $.doTimeout(this.timeoutID),
            $.doTimeout(this.timeoutID, 600, this.currentMember.transitionIn),
            this.adjustContextHeight(null, function(t) {
              return function() {
                return t.saga.setTarget(e + 1)
              }
            }(this)),
            this.updateNavLinks(e),
            this.lastMemberIndex = e
        }
        ,
        e.prototype.updateNavLinks = function(t) {
          var e, i, n, r, s;
          return n = this.saga.teamMembers[t - 1],
            e = this.saga.teamMembers[t + 1],
            r = this.saga.teamMemberTitles[t - 1],
            i = this.saga.teamMemberTitles[t + 1],
          n || (s = this.saga.teamMembers.length,
            n = this.saga.teamMembers[s - 1],
            r = this.saga.teamMemberTitles[s - 1]),
          e || (e = this.saga.teamMembers[0],
            i = this.saga.teamMemberTitles[0]),
            this.pagination.eq(0).attr("href", "/studio/" + n),
            this.pagination.eq(1).attr("href", "/studio/" + e),
            this.pagination.eq(0).attr("title", r),
            this.pagination.eq(1).attr("title", i)
        }
        ,
        e.prototype.showAll = function(t) {
          return this.currentMember && this.currentMember.transitionOut(),
            this.teamDetail.stop().fadeOut(function(t) {
              return function() {
                return t.teamDetail.removeClass("active")
              }
            }(this)),
            this.teamList.transitionIn(),
            this.showingMember = !1,
            this.adjustContextHeight(null, function(e) {
              return function() {
                return t ? (e.teamList.transitionOut(!0),
                  void e.saga.reset()) : e.saga.setTarget(0)
              }
            }(this))
        }
        ,
        e.prototype.adjustContextHeight = function(t, e) {
          var i, n, r, s, o;
          return o = parseInt(this.context.css("padding-bottom"), 10),
            s = this.teamWrapper.height(),
            n = t || this.initial ? 0 : .5,
          this.showingMember && (i = this.teamMembers[this.lastMemberIndex] || this.teamMembers[0],
            r = i.getHeight(),
            s = r + 10),
          t && (this.initial = !1),
            TweenMax.to(this.context, n, {
              height: s + o,
              onComplete: function() {
                return function() {
                  return e && e()
                }
              }(this)
            })
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.TeamList = function() {
      function e(e) {
        this.context = e,
          this.reset = t(this.reset, this),
          this.transitionOut = t(this.transitionOut, this),
          this.transitionIn = t(this.transitionIn, this),
          this.setupTextDefaults = t(this.setupTextDefaults, this),
          this.title = this.context.find("h2"),
          this.teamNames = this.context.find("ul li"),
          this.timeouts = [],
          this.setupTextDefaults(),
          this.transitionIn()
      }
      return e.prototype.setupTextDefaults = function() {
        var t, e, i, n, r, s, o, a;
        for (this.title.originalMarkup = this.title.html(),
               this.teamNames.originalMarkup = [],
               o = this.teamNames,
               a = [],
               t = r = 0,
               s = o.length; s > r; t = ++r)
          i = o[t],
            i = $(i),
            e = i.find("h6.text-effect"),
            n = i.find("span.text-effect"),
            a.push(this.teamNames.originalMarkup[t] = {
              memberName: e.html(),
              title: n.html()
            });
        return a
      }
        ,
        e.prototype.transitionIn = function() {
          var t, e, i, n, r, s, o, a, l, h, c, u;
          for (this.timeouts = [],
                 i = 500,
                 TweenMax.set(this.context, {
                   opacity: 1
                 }),
                 o = "team-list-title",
                 this.timeouts.push(o),
                 $.doTimeout(o, i, function(t) {
                   return function() {
                     return t.teamNames.addClass("hover-enabled"),
                       t.title.textillate({
                         "in": {
                           effect: "fadeIn",
                           delayScale: .5
                         }
                       })
                   }
                 }(this)),
                 i += 300,
                 c = this.teamNames,
                 u = [],
                 e = l = 0,
                 h = c.length; h > l; e = ++l)
            r = c[e],
              t = 100 * e,
              s = i + t,
              r = $(r),
              n = r.find("h6.text-effect"),
              o = "team-list-member-name-" + e,
              this.timeouts.push(o),
              $.doTimeout(o, s, function(t) {
                return t.textillate({
                  "in": {
                    effect: "fadeIn",
                    delayScale: .5
                  }
                })
              }, n),
              a = r.find("span.text-effect"),
              o = "team-list-title-" + e,
              this.timeouts.push(o),
              u.push($.doTimeout(o, s, function(t) {
                return t.textillate({
                  "in": {
                    effect: "fadeIn",
                    delayScale: .5
                  }
                })
              }, a));
          return u
        }
        ,
        e.prototype.transitionOut = function(t) {
          var e, i, n, r, s;
          for (this.teamNames.removeClass("hover-enabled"),
                 s = this.timeouts,
                 n = 0,
                 r = s.length; r > n; n++)
            i = s[n],
              $.doTimeout(i);
          return e = t ? 0 : .3,
            TweenMax.to(this.context, e, {
              opacity: 0,
              onComplete: this.reset
            }),
            t ? $.doTimeout("keep-title", 0, function(t) {
              return function() {
                return TweenMax.set(t.context, {
                  opacity: 1
                }),
                  t.title.textillate({
                    "in": {
                      effect: "fadeIn",
                      delayScale: 0
                    }
                  })
              }
            }(this)) : void 0
        }
        ,
        e.prototype.reset = function() {
          var t, e, i, n, r, s, o, a;
          for (this.title.html(this.title.originalMarkup),
                 this.title.removeData(),
                 o = this.teamNames,
                 a = [],
                 t = r = 0,
                 s = o.length; s > r; t = ++r)
            i = o[t],
              i = $(i),
              e = i.find("h6.text-effect"),
              e.html(this.teamNames.originalMarkup[t].memberName),
              e.removeData(),
              n = i.find("span.text-effect"),
              n.html(this.teamNames.originalMarkup[t].title),
              a.push(n.removeData());
          return a
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.TeamMember = function() {
      function e(e, i) {
        this.context = e,
          this.memberName = i,
          this.alignCountText = t(this.alignCountText, this),
          this.checkCountDecimal = t(this.checkCountDecimal, this),
          this.animateCount = t(this.animateCount, this),
          this.getHeight = t(this.getHeight, this),
          this.reset = t(this.reset, this),
          this.transitionOut = t(this.transitionOut, this),
          this.transitionIn = t(this.transitionIn, this),
          this.setupTextDefaults = t(this.setupTextDefaults, this),
          this.wrapper = this.context.find(".wrapper"),
          this.name = this.wrapper.find("h1"),
          this.title = this.name.next(),
          this.hr = this.title.next(),
          this.summary = this.wrapper.find("h4"),
          this.location = this.summary.next(),
          this.details = this.wrapper.find(".deets li"),
          this.tweens = [],
          this.timeouts = [],
          this.setupTextDefaults(),
          this.transitionOut(),
          $(ib).on(ib.Events.MOBILE_SIZE, this.alignCountText),
          $(ib).on(ib.Events.DESKTOP_SIZE, this.alignCountText)
      }
      return e.prototype.setupTextDefaults = function() {
        var t, e, i, n, r, s, o;
        for (this.name.originalMarkup = this.name.html(),
               this.title.originalMarkup = this.title.html(),
               this.summary.originalMarkup = this.summary.html(),
               this.location.originalMarkup = this.location.html(),
               this.details.originalMarkup = [],
               s = this.details,
               o = [],
               t = n = 0,
               r = s.length; r > n; t = ++n)
          e = s[t],
            e = $(e),
            i = e.find("span.text-effect"),
            o.push(this.details.originalMarkup[t] = {
              textItem: i.html()
            });
        return o
      }
        ,
        e.prototype.transitionIn = function() {
          var t, e, i, n, r, s, o, a, l, h, c, u, p, d;
          for (this.timeouts = [],
                 r = 100,
                 TweenMax.set(this.context, {
                   opacity: 1
                 }),
                 l = "" + this.memberName + "-name",
                 this.timeouts.push(l),
                 $.doTimeout(l, r, function(t) {
                   return function() {
                     return t.name.textillate({
                       "in": {
                         effect: "fadeIn",
                         delayScale: .8
                       }
                     })
                   }
                 }(this)),
                 r += 300,
                 l = "" + this.memberName + "-title",
                 this.timeouts.push(l),
                 $.doTimeout(l, r, function(t) {
                   return function() {
                     return t.title.textillate({
                       "in": {
                         effect: "fadeIn",
                         delayScale: 1
                       }
                     })
                   }
                 }(this)),
                 r += 100,
                 TweenMax.to(this.hr, .3, {
                   scale: 1,
                   delay: r / 1e3
                 }),
                 r += 100,
                 l = "" + this.memberName + "-summary",
                 this.timeouts.push(l),
                 $.doTimeout(l, r, function(t) {
                   return function() {
                     return t.summary.textillate({
                       "in": {
                         effect: "fadeIn",
                         delayScale: .5
                       }
                     })
                   }
                 }(this)),
                 r += 200,
                 l = "" + this.memberName + "-location",
                 this.timeouts.push(l),
                 $.doTimeout(l, r, function(t) {
                   return function() {
                     return t.location.textillate({
                       "in": {
                         effect: "fadeIn",
                         delayScale: .5
                       }
                     })
                   }
                 }(this)),
                 r += 200,
                 $.each(this.details.find(".count"), function(t) {
                   return function(e, i) {
                     var n, s, o, a;
                     return n = $(i),
                       n.text("0"),
                       o = 100 * e,
                       s = (r + o) / 1e3,
                       a = TweenMax.delayedCall(s, t.animateCount, [n]),
                       t.tweens.push({
                         tween: a
                       })
                   }
                 }(this)),
                 p = this.details,
                 d = [],
                 i = c = 0,
                 u = p.length; u > c; i = ++c)
            s = p[i],
              e = 200 * i,
              o = r + e,
              s = $(s),
              n = s.find("figure"),
              TweenMax.to(n, .8, {
                opacity: 1,
                delay: o / 1e3
              }),
              t = s.find("h3"),
              h = TweenMax.to(t, .8, {
                opacity: 1,
                delay: o / 1e3
              }),
              this.tweens.push({
                tween: h
              }),
              a = s.find("span.text-effect"),
              l = "" + this.memberName + "-text-item-" + i,
              this.timeouts.push(l),
              d.push($.doTimeout(l, o, function(t) {
                return t.textillate({
                  "in": {
                    effect: "fadeIn",
                    delayScale: .5
                  }
                })
              }, a));
          return d
        }
        ,
        e.prototype.transitionOut = function() {
          var t, e, i, n;
          for (n = this.timeouts,
                 e = 0,
                 i = n.length; i > e; e++)
            t = n[e],
              $.doTimeout(t);
          return TweenMax.to(this.context, .5, {
            opacity: 0,
            onComplete: this.reset
          })
        }
        ,
        e.prototype.reset = function() {
          var t, e, i, n, r, s, o, a, l, h, c, u, p;
          for (this.name.html(this.name.originalMarkup),
                 this.name.removeData(),
                 this.title.html(this.title.originalMarkup),
                 this.title.removeData(),
                 TweenMax.killTweensOf(this.hr),
                 TweenMax.set(this.hr, {
                   transformOrigin: "left center",
                   scale: 0
                 }),
                 this.summary.html(this.summary.originalMarkup),
                 this.summary.removeData(),
                 this.location.html(this.location.originalMarkup),
                 this.location.removeData(),
                 c = this.tweens,
                 o = 0,
                 l = c.length; l > o; o++)
            s = c[o],
              s.tween.kill();
          for (this.tweens = [],
                 u = this.details,
                 p = [],
                 e = a = 0,
                 h = u.length; h > a; e = ++a)
            n = u[e],
              n = $(n),
              i = n.find("figure"),
              TweenMax.killTweensOf(i),
              TweenMax.set(i, {
                opacity: 0
              }),
              t = n.find("h3"),
              TweenMax.set(t, {
                opacity: 0
              }),
              r = n.find("span.text-effect"),
              r.html(this.details.originalMarkup[e].textItem),
              p.push(r.removeData());
          return p
        }
        ,
        e.prototype.getHeight = function() {
          return this.context.height()
        }
        ,
        e.prototype.animateCount = function(t) {
          var e, i;
          return e = t.data("count"),
            i = this.checkCountDecimal(e),
            TweenMax.to({
              counter: 0
            }, 2, {
              counter: e,
              ease: Quart.easeOut,
              onUpdate: function() {
                var e, n;
                return e = this.target.counter,
                  n = e.toFixed(i).replace(/\B(?=(\d{3})+(?!\d))/g, ","),
                  t.text(n)
              }
            })
        }
        ,
        e.prototype.checkCountDecimal = function(t) {
          return Math.floor(t) === t ? 0 : t.toString().split(".")[1].length || 0
        }
        ,
        e.prototype.alignCountText = function() {
          var t, e;
          return e = this.details.find("h3"),
            t = e.find(".smaller"),
            t[0] ? $.each(e.has(".smaller"), function(t, i) {
              return e = $(i),
                e.find("span").css({
                  width: "auto"
                }),
                $.each(e.find("span"), function(t, e) {
                  var i, n;
                  return i = $(e),
                    n = i.width(),
                    i.css({
                      width: n,
                      display: "inline-block"
                    })
                })
            }) : void 0
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.TeamSaga = function() {
      function e(e, i) {
        this.particleContainer = e,
          this.multiTargetContainer = i,
          this.reset = t(this.reset, this),
          this.setTarget = t(this.setTarget, this),
          this.onSceneLoad = t(this.onSceneLoad, this),
          this.createScene = t(this.createScene, this),
          this.prepareTargets = t(this.prepareTargets, this),
          ib.Globals.SCENES_WAITING++,
          this.targets = [],
          this.teamMembers = [],
          this.teamMemberTitles = [],
          this.sceneLoaded = !1,
          this.prepareTargets()
      }
      return e.prototype.prepareTargets = function() {
        var t, e, i, n, r, s;
        for (t = {
          type: ParticleSaga.MultiTarget,
          container: this.multiTargetContainer[0],
          options: {
            size: 3
          },
          targets: []
        },
               this.multiTargetContainer.find("li").each(function(e) {
                 return function(i, n) {
                   var r, s;
                   return r = $(n),
                     e.teamMembers.push(r.data("member-id")),
                     s = r.find(".history-link").attr("title"),
                     e.teamMemberTitles.push(s),
                     t.targets.push({
                       type: ParticleSaga.ModelTarget,
                       url: r.data("model"),
                       container: r[0],
                       options: {
                         scale: 300,
                         color: ib.Globals.PARTICLE_COLOR_DARK
                       }
                     })
                 }
               }(this)),
               this.targets.push(t),
               r = t.targets,
               s = [],
               i = 0,
               n = r.length; n > i; i++)
          e = r[i],
            s.push(this.targets.push({
              type: ParticleSaga.ModelTarget,
              url: e.url,
              options: {
                scale: 900,
                size: 3.5,
                respondsToMouse: !0,
                color: ib.Globals.PARTICLE_COLOR,
                initialMatrices: [(new THREE.Matrix4).makeTranslation(0, -.1, 0)]
              }
            }));
        return s
      }
        ,
        e.prototype.createScene = function() {
          return this.scene = new ParticleSaga.Scene(this.particleContainer[0],this.targets,{
            numParticles: 1e4,
            sort: ParticleSaga.VertexSort.frontToBack
          }),
            this.scene.load(this.onSceneLoad)
        }
        ,
        e.prototype.onSceneLoad = function() {
          return this.sceneLoaded = !0,
            this.scene.setTarget(this.index ? this.index : 0),
            this.scene.resize(),
            ib.Globals.SCENE_READY()
        }
        ,
        e.prototype.setTarget = function(t) {
          return this.index = t,
            this.scene ? (this.sceneLoaded && this.scene.resize(),
              this.scene.setTarget(this.index)) : void 0
        }
        ,
        e.prototype.reset = function() {
          var t, e, i, n;
          if (this.scene && this.scene.pool)
            return n = new THREE.Vector3(0,0,0),
              n.userData = {
                color: ib.Globals.PARTICLE_COLOR
              },
              t = new THREE.Geometry,
              t.vertices.push(n),
              e = new THREE.ParticleSystemMaterial({
                size: 3
              }),
              i = new THREE.ParticleSystem(t,e),
              this.scene.pool.setTarget(i, !1)
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.Tile = function() {
      function e(e) {
        this.context = e,
          this.stop = t(this.stop, this),
          this.animate = t(this.animate, this),
          this.addImage = t(this.addImage, this),
          this.images = [],
          this.tween,
          this.animations = [{
            left: "100%"
          }, {
            top: "100%"
          }, {
            left: "-100%"
          }, {
            top: "-100%"
          }]
      }
      return e.prototype.addImage = function(t) {
        return this.images.unshift(t),
          this.context.prepend(t)
      }
        ,
        e.prototype.animate = function() {
          var t, e, i, n, r;
          return n = this.images[this.images.length - 1],
            e = Math.floor(Math.random() * this.animations.length),
            t = this.animations[e],
            i = e + 4,
            r = $.extend({}, t, {
              delay: i,
              ease: Quad.easeInOut,
              clearProps: "top,left",
              onComplete: function(t) {
                return function() {
                  return t.context.prepend(n),
                    t.images.unshift(t.images.pop()),
                    t.animate()
                }
              }(this)
            }),
            this.tween = TweenMax.to(n, .5, r)
        }
        ,
        e.prototype.stop = function() {
          return this.tween && this.tween.kill()
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.TwitterFeed = function() {
      function e(e, i) {
        this.context = e,
          this.updatePagination = t(this.updatePagination, this),
          this.paginate = t(this.paginate, this),
          this.arrangeFeed = t(this.arrangeFeed, this),
          this.resize = t(this.resize, this),
          this.stop = t(this.stop, this),
          this.start = t(this.start, this),
          this.feed = this.context.find(".feed"),
          this.items = this.feed.find("li"),
          this.itemsPerPage = 2,
          this.leftIndex = 0,
          this.currentPage = 0,
          this.prevPage = !1,
          this.pagination = this.context.find(".common-pagination li"),
          this.win = $(window),
          this.opts = $.extend({}, i || this.context.data()),
          this.win.on("resize", this.resize),
          this.resize()
      }
      return e.prototype.start = function() {
        return this.pagination.on("click", this.paginate)
      }
        ,
        e.prototype.stop = function() {
          return this.pagination.off("click", this.paginate)
        }
        ,
        e.prototype.resize = function() {
          return this.itemsPerPage = this.win.width() < 881 ? 1 : 2,
            this.currentPage = (this.leftIndex - this.leftIndex % this.itemsPerPage) / this.itemsPerPage,
            this.arrangeFeed()
        }
        ,
        e.prototype.arrangeFeed = function() {
          var t, e, i, n, r, s, o;
          for (this.currentPage = Math.max(0, this.currentPage),
                 this.currentPage = Math.min(Math.floor((this.items.length - 1) / this.itemsPerPage), this.currentPage),
                 this.updatePagination(),
                 this.leftIndex = this.currentPage * this.itemsPerPage,
                 s = this.items,
                 o = [],
                 e = n = 0,
                 r = s.length; r > n; e = ++n)
            i = s[e],
              i = $(i),
              t = i.find("hr"),
              e >= this.leftIndex && e < this.leftIndex + this.itemsPerPage ? this.prevPage ? (e %= this.itemsPerPage,
                TweenMax.fromTo(i, .5, {
                  x: -20,
                  left: this.feed.width() / 2 * e,
                  opacity: 0
                }, {
                  x: 0,
                  opacity: 1,
                  delay: .4,
                  zIndex: 1
                }),
                o.push(TweenMax.fromTo(t, .5, {
                  scaleX: 0,
                  transformOrigin: "left center"
                }, {
                  scaleX: 1,
                  delay: .5
                }))) : (e %= this.itemsPerPage,
                TweenMax.fromTo(i, .5, {
                  x: 20,
                  left: this.feed.width() / 2 * e,
                  opacity: 0
                }, {
                  x: 0,
                  opacity: 1,
                  delay: .4,
                  zIndex: 1
                }),
                o.push(TweenMax.fromTo(t, .5, {
                  scaleX: 0,
                  transformOrigin: "right center"
                }, {
                  scaleX: 1,
                  delay: .5
                }))) : o.push(this.prevPage ? TweenMax.to(i, .3, {
                x: 40,
                opacity: 0,
                zIndex: 0
              }) : TweenMax.to(i, .3, {
                x: -40,
                opacity: 0,
                zIndex: 0
              }));
          return o
        }
        ,
        e.prototype.paginate = function(t) {
          return $(t.currentTarget).hasClass("disabled") ? void 0 : ($(t.currentTarget).index() ? (this.currentPage++,
            this.prevPage = !1) : (this.currentPage--,
            this.prevPage = !0),
            this.arrangeFeed())
        }
        ,
        e.prototype.updatePagination = function() {
          return this.pagination.removeClass("disabled"),
          0 === this.currentPage && this.pagination.eq(0).addClass("disabled"),
            this.currentPage === Math.floor((this.items.length - 1) / this.itemsPerPage) ? this.pagination.eq(1).addClass("disabled") : void 0
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  }
    , e = {}.hasOwnProperty
    , i = function(t, i) {
    function n() {
      this.constructor = t
    }
    for (var r in i)
      e.call(i, r) && (t[r] = i[r]);
    return n.prototype = i.prototype,
      t.prototype = new n,
      t.__super__ = i.prototype,
      t
  };
  null == this.ib && (this.ib = {}),
    ib.Work = function(e) {
      function n(e, i) {
        this.context = e,
          this.fetchPage = t(this.fetchPage, this),
          n.__super__.constructor.call(this, this.context),
          this.sectionController,
          this.contentType = ib.ContentTypes.CASE_STUDY,
          this.caseStudyWrapper = $("#case-study"),
          this.opts = $.extend({}, i || this.context.data())
      }
      return i(n, e),
        n.prototype.init = function() {}
        ,
        n.prototype.fetchPage = function(t, e, i) {
          return this.section ? ib.ContentCache.getPage(this.contentType, this.section, function(i) {
            return function(n, r) {
              var s;
              return n ? (s = i.caseStudyWrapper.clone(),
                s.html(n),
                i.sectionController = s.find("#compass-hunt").length ? new ib.RichCaseStudy(s,new ib.CompassHuntController) : s.find("#botched").length ? new ib.RichCaseStudy(s,new ib.BotchedController) : s.find("#falcon").length ? new ib.RichCaseStudy(s,new ib.FalconController) : s.find("#microsoft").length ? new ib.RichCaseStudy(s,new ib.MicrosoftController) : new ib.CaseStudy(s),
                t(s, r)) : e()
            }
          }(this), i) : t()
        }
        ,
        n
    }(ib.PageController),
    ib.ComponentLoader.register("ib.Work", ib.Work)
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.AnimatableItems = function() {
      function e(e) {
        this.context = e,
          this.isDesktop = t(this.isDesktop, this),
          this.triggerAnimations = t(this.triggerAnimations, this),
          this.resize = t(this.resize, this),
          this.addItems = t(this.addItems, this),
          this.win = $(window),
          this.winWidth = 0,
          this.animatableElement = this.context.find(".animatable"),
          this.animateClassName = "animate",
          this.animatableItems = []
      }
      return e.prototype.addItems = function() {
        return this.animatableElement.each(function(t) {
          return function(e, i) {
            var n, r, s, o, a, l;
            return i = $(i),
              l = null,
              n = i.find(".animatable-svg"),
              r = !1,
            n.length > 0 && (r = n.data("autostart"),
              a = "manual",
              o = Vivus.EASE_OUT,
              s = function() {}
              ,
            r && (a = "autostart"),
              i.data(!1) ? o = function(t) {
                  return t * (2 - t)
                }
                : i.data(!1) && (o = Vivus.EASE),
            n.data("callback") && (s = function() {
                return t.isDesktop() ? $(ib).trigger(ib.Events.COMPASS_HUNT_START) : void 0
              }
            ),
              l = new Vivus(n.attr("id"),{
                type: "async",
                duration: n.data("duration"),
                start: a,
                animTimingFunction: o
              },s)),
              t.animatableItems.push({
                el: i,
                svgItem: l,
                disableMobile: i.data("disable-mobile"),
                autoStart: r
              })
          }
        }(this)),
          this.resize()
      }
        ,
        e.prototype.resize = function() {
          var t, e, i, n, r, s, o, a, l;
          for (a = this.animatableItems,
                 l = [],
                 e = s = 0,
                 o = a.length; o > s; e = ++s)
            i = a[e],
              t = i.el.height(),
              n = i.el.outerHeight(!0),
              r = (n - t) / 2,
              i.offset = $(".marquee").hasClass("csspositionsticky") ? i.el.offset().top - this.win.height() : i.el.offset().top,
              i.desktopOffset = this.win.height() / 2,
              l.push(i.isCovered = n >= this.win.height());
          return l
        }
        ,
        e.prototype.triggerAnimations = function(t) {
          var e, i, n, r, s, o, a;
          for (o = this.animatableItems,
                 a = [],
                 r = 0,
                 s = o.length; s > r; r++)
            n = o[r],
              n.autoStart || n.el.hasClass(this.animateClassName) ? a.push(void 0) : (e = n.offset <= t + n.desktopOffset,
                i = n.isCovered && n.offset <= t + 108,
                e || i ? (n.el.addClass(this.animateClassName),
                  a.push(n.svgItem ? !this.isDesktop() && n.disableMobile ? n.svgItem.finish() : n.svgItem.reset().play() : void 0)) : a.push(void 0));
          return a
        }
        ,
        e.prototype.isDesktop = function() {
          return 0 === this.winWidth && (this.winWidth = this.win.width()),
          this.winWidth > ib.Globals.MOBILE_WIDTH
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.BotchedBrowser = function() {
      function e(e) {
        this.context = e,
          this.destroy = t(this.destroy, this),
          this.afterTransitions = t(this.afterTransitions, this),
          this.transitionIn = t(this.transitionIn, this),
          this.addItems = t(this.addItems, this),
          this.onResize = t(this.onResize, this),
          this.init = t(this.init, this),
          this.photoWrap = $(".browser-photos ul", this.context),
          this.photos = null,
          this.counter = $(".progress h4", this.context),
          this.progressBar = $(".progress-bar", this.context),
          this.continueOverlay = $(".continue", this.context),
          this.isAnimated = !1
      }
      return e.prototype.init = function() {
        return this.addItems()
      }
        ,
        e.prototype.onResize = function() {}
        ,
        e.prototype.addItems = function() {
          var t, e, i, n;
          for (n = [],
                 e = i = 1; 30 >= i; e = ++i)
            t = $("<li></li>"),
            (4 === e || 6 === e || 13 === e) && t.addClass("selected").append("<div></div>"),
              n.push(this.photoWrap.append(t));
          return n
        }
        ,
        e.prototype.transitionIn = function() {
          return this.isAnimated ? void 0 : (this.isAnimated = !0,
            TweenMax.to({
              counter: 0
            }, 3.2, {
              counter: 100,
              ease: Linear.easeNone,
              onUpdateParams: ["{self}"],
              delay: .4,
              onUpdate: function(t) {
                return function(e) {
                  var i;
                  return i = e.target.counter.toFixed() + "%",
                    t.counter.text(i)
                }
              }(this)
            }),
            TweenMax.to(this.progressBar, 3.2, {
              width: "100%",
              ease: Linear.easeNone,
              delay: .4
            }),
            this.photos = $("li", this.photoWrap),
            $.each(this.photos, function(t) {
              return function(e, i) {
                var n;
                return n = $(i),
                  TweenMax.to(n, .3, {
                    opacity: 1,
                    ease: Quad.easeOut,
                    delay: .1 * e + .4,
                    onComplete: function() {
                      return 29 === e ? t.afterTransitions() : void 0
                    }
                  })
              }
            }(this)))
        }
        ,
        e.prototype.afterTransitions = function() {
          var t, e;
          return t = this.counter.add(this.progressBar),
            TweenMax.to(t, .3, {
              opacity: 0,
              delay: .3,
              ease: Quad.easeOut
            }),
            e = this.photos.filter(".selected"),
            $.each(e, function() {
              return function(t, e) {
                var i;
                return i = $(e).find("div"),
                  TweenMax.to(i, .3, {
                    opacity: 1,
                    delay: .5 * t + .9,
                    ease: Quad.easeOut
                  })
              }
            }(this)),
            setTimeout(function(t) {
              return function() {
                return t.continueOverlay.addClass("active")
              }
            }(this), 1900)
        }
        ,
        e.prototype.destroy = function() {}
        ,
        e
    }()
}
  .call(this),
function() {
  var __bind = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.BotchedController = function() {
      function BotchedController() {
        this.destroy = __bind(this.destroy, this),
          this.createFallingPhotos = __bind(this.createFallingPhotos, this),
          this.resumeMarqueeAnimations = __bind(this.resumeMarqueeAnimations, this),
          this.pauseMarqueeAnimations = __bind(this.pauseMarqueeAnimations, this),
          this.onScroll = __bind(this.onScroll, this),
          this.onResize = __bind(this.onResize, this),
          this.onInjectComplete = __bind(this.onInjectComplete, this),
          this.injectSVG = __bind(this.injectSVG, this),
          this.init = __bind(this.init, this),
          this.win = $(window),
          this.animatableItems = null,
          this.bgGradient = null,
          this.fallingPhotosWrap = null,
          this.parallaxScene = null,
          this.parallaxTimeout = null,
          this.parallaxPaused = !1,
          this.modules = [],
          this.fallingPhotos = [],
          this.winWidth = 0,
          this.winHeight = 0,
          this.offset = 0
      }
      return BotchedController.prototype.init = function(t) {
        return this.context = t,
          this.injectSVG(),
          this.bgGradient = $(".background .gradient", this.context),
          this.parallaxScene = $(".marquee-scene", this.context),
          this.parallaxScene.parallax("enable"),
          this.fallingPhotosWrap = $(".falling-photos", this.context),
          this.createFallingPhotos(),
          $(ib).on(ib.Events.RESUME_MARQUEE_ANIMATIONS, this.resumeMarqueeAnimations),
          $(ib).on(ib.Events.PAUSE_MARQUEE_ANIMATIONS, this.pauseMarqueeAnimations)
      }
        ,
        BotchedController.prototype.injectSVG = function() {
          var t, e;
          return e = $(".inject-svg"),
            t = {
              evalScripts: "always"
            },
            SVGInjector(e, t, this.onInjectComplete)
        }
        ,
        BotchedController.prototype.onInjectComplete = function() {
          var moduleEl;
          return this.animatableItems = new ib.AnimatableItems(this.context),
            this.animatableItems.addItems(),
            moduleEl = $(".animatable-module"),
            $.each(moduleEl, function(_this) {
              return function(index, value) {
                var controller, item, module;
                return item = $(value),
                  module = eval(item.data("module")),
                  controller = new module(item),
                  controller.init(),
                  _this.modules.push({
                    el: item,
                    controller: controller
                  })
              }
            }(this))
        }
        ,
        BotchedController.prototype.onResize = function() {
          var t, e, i, n, r, s, o, a, l, h;
          for (this.winWidth = this.win.width(),
                 this.winHeight = this.win.height(),
               this.animatableItems && this.animatableItems.resize(),
                 l = this.modules,
                 e = r = 0,
                 o = l.length; o > r; e = ++r)
            i = l[e],
              t = this.modules[e].controller,
            t.onResize && t.onResize();
          for (h = this.fallingPhotos,
                 s = 0,
                 a = h.length; a > s; s++)
            n = h[s],
              n.photo.stop(),
              n.photo.onResize(),
              n.photo.init();
          return this.bgGradient ? this.bgGradient.height($(".top-section").height()) : void 0
        }
        ,
        BotchedController.prototype.onScroll = function(t) {
          var e, i, n, r, s, o;
          for (o = this.modules,
                 e = r = 0,
                 s = o.length; s > r; e = ++r)
            n = o[e],
              i = this.modules[e],
            i.el.hasClass("animate") && i.controller.transitionIn && i.controller.transitionIn();
          return this.animatableItems && this.animatableItems.triggerAnimations(t)
        }
        ,
        BotchedController.prototype.pauseMarqueeAnimations = function() {
          return this.parallaxPaused = !0
        }
        ,
        BotchedController.prototype.resumeMarqueeAnimations = function() {
          return this.parallaxPaused = !1,
            this.parallaxScene.parallax("enable")
        }
        ,
        BotchedController.prototype.createFallingPhotos = function() {
          var t, e, i, n, r, s, o;
          for (o = [],
                 n = s = 0; 14 > s; n = ++s)
            e = this.fallingPhotosWrap.width(),
              t = this.fallingPhotosWrap.height(),
              i = $("<div></div>"),
              r = new ib.BotchedFallingPhoto(i,e,t),
              TweenMax.set(i, {
                x: r.randomizer(0, e - 100),
                y: r.randomizer(-200, t - 200),
                rotation: r.randomizer(-55, 55)
              }),
              this.fallingPhotosWrap.append(i),
              r.init(),
              o.push(this.fallingPhotos.push({
                photo: r
              }));
          return o
        }
        ,
        BotchedController.prototype.destroy = function() {
          var t, e, i, n, r, s, o, a, l, h;
          for (l = this.modules,
                 e = r = 0,
                 o = l.length; o > r; e = ++r)
            i = l[e],
              t = this.modules[e].controller,
            t.destroy && t.destroy();
          for (h = this.fallingPhotos,
                 s = 0,
                 a = h.length; a > s; s++)
            n = h[s],
              n.photo.stop(),
              n.photo.onResize(),
              n.photo.init();
          return this.modules = [],
            this.fallingPhotos = []
        }
        ,
        BotchedController
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.BotchedDiagram = function() {
      function e(e) {
        this.context = e,
          this.transitionIn = t(this.transitionIn, this),
          this.init = t(this.init, this),
          this.redLines = null,
          this.redLinesMobile = null,
          this.isAnimated = !1
      }
      return e.prototype.init = function() {
        return this.redLines = new Vivus("red-lines",{
          type: "async",
          start: "manual",
          duration: 30,
          animTimingFunction: Vivus.EASE
        },function(t) {
          return function() {
            return t.context.addClass("transition-dots")
          }
        }(this)),
          this.redLinesMobile = new Vivus("red-lines-mobile",{
            type: "async",
            start: "manual",
            duration: 30,
            animTimingFunction: Vivus.EASE
          })
      }
        ,
        e.prototype.transitionIn = function() {
          return this.isAnimated ? void 0 : (this.isAnimated = !0,
            this.context.addClass("transition-in"),
            setTimeout(function(t) {
              return function() {
                return t.redLines.play(),
                  t.redLinesMobile.play()
              }
            }(this), 1600))
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.BotchedFacialRecognition = function() {
      function e(e) {
        this.context = e,
          this.destroy = t(this.destroy, this),
          this.transitionMapOut = t(this.transitionMapOut, this),
          this.transitionIn = t(this.transitionIn, this),
          this.pointOffHover = t(this.pointOffHover, this),
          this.pointOnHover = t(this.pointOnHover, this),
          this.activatePoint = t(this.activatePoint, this),
          this.onScroll = t(this.onScroll, this),
          this.positionCutOuts = t(this.positionCutOuts, this),
          this.createMapPoints = t(this.createMapPoints, this),
          this.prepareMap = t(this.prepareMap, this),
          this.onResize = t(this.onResize, this),
          this.init = t(this.init, this),
          this.head = $(".head", this.context),
          this.map = $(".map", this.context),
          this.mapLines = $(".map-lines", this.map),
          this.mapPointsContainer = $(".map-points", this.map),
          this.mapPoints = null,
          this.dropshadow = $(".dropshadow", this.context),
          this.eyes = $(".eyes", this.context),
          this.mouth = $(".mouth", this.context),
          this.instructions = $(".instructions", this.context),
          this.elHeight = 0,
          this.parallaxScene = null,
          this.isParallaxing = !1,
          this.canParallax = !1,
          this.mapVisible = !1,
          this.faceSvgs = []
      }
      return e.prototype.init = function() {
        return this.parallaxScene = $(".face-scene", this.context),
          this.prepareMap(),
          this.positionCutOuts()
      }
        ,
        e.prototype.onResize = function() {
          return this.elHeight = this.context.outerHeight(!0)
        }
        ,
        e.prototype.prepareMap = function() {
          var t;
          return this.createMapPoints(),
            t = $("div", this.mapLines),
            $.each(t, function(t) {
              return function(e, i) {
                var n, r;
                return n = $(i).find("svg"),
                  r = new Vivus(n.attr("id"),{
                    duration: 100,
                    dashGap: 3,
                    start: "manual",
                    animTimingFunction: Vivus.EASE
                  }),
                  t.faceSvgs.push(r)
              }
            }(this))
        }
        ,
        e.prototype.createMapPoints = function() {
          var t, e;
          for (t = e = 1; 31 >= e; t = ++e)
            this.mapPointsContainer.append($("<figure></figure>"));
          return this.mapPoints = $("figure", this.map),
            this.mapPoints.on("click", this.activatePoint),
            Modernizr.touch ? void 0 : (this.mapPoints.on("mouseenter", this.pointOnHover),
              this.mapPoints.on("mouseleave", this.pointOffHover))
        }
        ,
        e.prototype.positionCutOuts = function() {
          return TweenMax.set(this.eyes.find("img"), {
            scale: 2,
            rotation: -30
          }),
            TweenMax.set(this.mouth.find("img"), {
              scale: 2,
              rotation: 25
            })
        }
        ,
        e.prototype.onScroll = function(t) {
          var e;
          if (e = this.context.offset().top,
            t >= e && e + this.elHeight >= 0) {
            if (!this.isParallaxing && this.canParallax)
              return this.isParallaxing = !0,
                this.parallaxScene.parallax("enable")
          } else if (this.isParallaxing && this.canParallax)
            return this.isParallaxing = !1,
              this.parallaxScene.parallax("disable")
        }
        ,
        e.prototype.activatePoint = function(t) {
          var e, i;
          return i = $(t.currentTarget),
            i.hasClass("active") || (i.addClass("active"),
              TweenMax.set(i, {
                scale: 1.3
              }),
              e = this.mapPoints.filter(".active"),
            3 !== e.length) ? void 0 : this.transitionMapOut()
        }
        ,
        e.prototype.pointOnHover = function(t) {
          var e;
          return e = $(t.currentTarget),
            e.hasClass("active") ? void 0 : TweenMax.to(e, .2, {
              scale: 1.3,
              ease: Quad.easeInOut
            })
        }
        ,
        e.prototype.pointOffHover = function(t) {
          var e;
          return e = $(t.currentTarget),
            e.hasClass("active") ? void 0 : TweenMax.to(e, .2, {
              scale: 1,
              ease: Quad.easeInOut
            })
        }
        ,
        e.prototype.transitionIn = function() {
          return this.mapVisible ? void 0 : (this.mapVisible = !0,
            this.instructions.addClass("show"),
            TweenMax.to(this.head, .5, {
              opacity: 1,
              scale: 1,
              ease: Quad.easeInOut
            }),
            $.each(this.mapPoints, function() {
              return function(t, e) {
                var i, n;
                return n = $(e),
                  i = 31 * Math.random(),
                  TweenMax.fromTo(n, .4, {
                    opacity: 0,
                    scale: 0
                  }, {
                    opacity: 1,
                    scale: 1,
                    ease: Quad.easeOut,
                    delay: .04 * i + .8
                  })
              }
            }(this)),
            setTimeout(function(t) {
              return function() {
                var e, i, n, r, s;
                for (TweenMax.set(t.mapLines, {
                  opacity: 1
                }),
                       r = t.faceSvgs,
                       s = [],
                       i = 0,
                       n = r.length; n > i; i++)
                  e = r[i],
                    s.push(e.play());
                return s
              }
            }(this), 1880))
        }
        ,
        e.prototype.transitionMapOut = function() {
          var t, e, i, n, r;
          for (this.instructions.removeClass("show"),
                 t = this.eyes.add(this.mouth),
                 TweenMax.set(t, {
                   display: "block",
                   opacity: 1
                 }),
                 r = this.faceSvgs,
                 i = 0,
                 n = r.length; n > i; i++)
            e = r[i],
              e.play(-2);
          return TweenMax.to(this.mapPoints, .4, {
            display: "none",
            opacity: 0,
            scale: 0,
            delay: .75,
            ease: Quad.easeOut,
            onComplete: function(t) {
              return function() {
                return t.canParallax = !0,
                  t.isParallaxing = !0,
                  t.parallaxScene.parallax("enable")
              }
            }(this)
          }),
            TweenMax.to(this.mapLines, .2, {
              opacity: 0,
              display: "none",
              delay: .75
            }),
            TweenMax.to(this.eyes.find("img"), 1.1, {
              display: "block",
              opacity: 1,
              scale: 1,
              rotation: 0,
              delay: 1.8,
              ease: Expo.easeOut
            }),
            TweenMax.to(this.mouth.find("img"), 1.2, {
              opacity: 1,
              scale: 1,
              rotation: 0,
              delay: 1.9,
              ease: Expo.easeOut
            }),
            TweenMax.to(this.dropshadow, .7, {
              display: "block",
              opacity: 1,
              ease: Quad.easeOut,
              delay: 1.8
            }),
            setTimeout(function(t) {
              return function() {
                return t.instructions.text("You've been botched!"),
                  t.instructions.addClass("show")
              }
            }(this), 1900)
        }
        ,
        e.prototype.destroy = function() {
          return this.parallaxScene && this.parallaxScene.parallax("disable"),
            this.mapPoints ? (this.mapPoints.off("click", this.activatePoint),
              this.mapPoints.off("mouseenter", this.pointOnHover),
              this.mapPoints.off("mouseleave", this.pointOffHover)) : void 0
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.BotchedFallingPhoto = function() {
      function e(e, i, n) {
        this.context = e,
          this.width = i,
          this.height = n,
          this.stop = t(this.stop, this),
          this.randomizer = t(this.randomizer, this),
          this.animate = t(this.animate, this),
          this.onResize = t(this.onResize, this),
          this.init = t(this.init, this),
          this.drop,
          this.rotate,
          this.swing
      }
      return e.prototype.init = function() {
        var t, e;
        return this.animate(),
          this.rotate = TweenMax.to(this.context, this.randomizer(6, 12), {
            rotation: this.randomizer(-55, 55),
            repeat: -1,
            yoyo: !0,
            ease: Quad.easeInOut,
            delay: this.randomizer(0, 4)
          }),
          e = Math.min(200, this.width / 2),
          t = Math.min(600, this.width / 1.5),
          this.swing = TweenMax.to(this.context, this.randomizer(10, 16), {
            x: "+=" + this.randomizer(e, t),
            repeat: -1,
            yoyo: !0,
            ease: Cubic.easeInOut,
            delay: this.randomizer(0, 6)
          })
      }
        ,
        e.prototype.onResize = function() {
          var t, e, i, n;
          return t = $(".falling-photos"),
            n = this.context[0]._gsTransform.x,
            i = n / this.width,
            this.width = t.width(),
            this.height = t.height(),
            e = this.width * i,
            TweenMax.set(this.context, {
              x: e
            })
        }
        ,
        e.prototype.animate = function() {
          var t, e, i, n;
          return i = 200,
            n = this.context[0]._gsTransform.y,
          n >= this.height && (n = -250 - i,
            TweenMax.set(this.context, {
              y: n
            })),
            e = this.height - n,
            t = (this.height - n) / 500 * this.randomizer(6, 10),
            this.drop = TweenMax.to(this.context, t, {
              y: "+=" + e,
              ease: Linear.easeNone,
              onComplete: function(t) {
                return function() {
                  return t.animate()
                }
              }(this)
            })
        }
        ,
        e.prototype.randomizer = function(t, e) {
          return t + Math.random() * (e - t)
        }
        ,
        e.prototype.stop = function() {
          return this.drop.kill(),
            this.rotate.kill(),
            this.swing.kill()
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.BotchedGrid = function() {
      function e(e) {
        this.context = e,
          this.destroy = t(this.destroy, this),
          this.onResize = t(this.onResize, this),
          this.animateCount = t(this.animateCount, this),
          this.animatePhotos = t(this.animatePhotos, this),
          this.transitionIn = t(this.transitionIn, this),
          this.updateFillerItems = t(this.updateFillerItems, this),
          this.resizeGridContainer = t(this.resizeGridContainer, this),
          this.createBotchedGrid = t(this.createBotchedGrid, this),
          this.shuffleArray = t(this.shuffleArray, this),
          this.createBotchesArray = t(this.createBotchesArray, this),
          this.init = t(this.init, this),
          this.NUM_LG = 3,
          this.NUM_MED = 10,
          this.NUM_PRIORITY_BOTCHES = this.NUM_LG + this.NUM_MED,
          this.counter = $(".counter", this.context),
          this.grid = $(".photos-grid", this.context),
          this.botches = [],
          this.mason = null,
          this.gridVisible = !1
      }
      return e.prototype.init = function() {
        return this.createBotchedGrid()
      }
        ,
        e.prototype.createBotchesArray = function() {
          var t, e, i, n, r, s, o, a;
          for (e = s = 1; 61 >= s; e = ++s)
            r = "/assets/work/case-studies/botched/photos/botched-" + e + ".jpg",
              this.botches.push({
                url: r,
                type: ""
              });
          for (i = 0,
                 n = 0,
                 t = o = 0,
                 a = this.NUM_PRIORITY_BOTCHES - 1; a >= 0 ? a >= o : o >= a; t = a >= 0 ? ++o : --o)
            i < this.NUM_LG ? (i++,
              this.botches[t].type = "lg",
              this.botches[t].url = "/assets/work/case-studies/botched/photos/botched-lg-" + i + ".jpg") : n < this.NUM_MED && (n++,
              this.botches[t].type = "med",
              this.botches[t].url = "/assets/work/case-studies/botched/photos/botched-lg-" + n + ".jpg");
          return this.shuffleArray()
        }
        ,
        e.prototype.shuffleArray = function() {
          var t, e, i;
          for (t = this.botches.length - 1; t > 0; )
            e = Math.floor(Math.random() * (t + 1)),
              i = this.botches[t],
              this.botches[t] = this.botches[e],
              this.botches[e] = i,
              t--;
          return this.botches
        }
        ,
        e.prototype.createBotchedGrid = function() {
          var t, e, i, n, r;
          for (this.createBotchesArray(),
                 e = 0,
                 n = r = 1; 120 >= r; n = ++r)
            i = this.botches[e],
              t = $('<div class="photo ' + i.type + '"><figure style="background-image: url(' + i.url + ')"></figure></div>'),
              this.grid.append(t),
              e++,
            e === this.botches.length - 1 && (e = 0);
          return this.mason = this.grid.mason({
            itemSelector: ".photo",
            gutter: 0,
            ratio: 1,
            layout: "fluid",
            sizes: [[1, 1]],
            promoted: [["med", 2, 2], ["lg", 3, 3]],
            columns: [[0, 480, 6], [480, 640, 8], [640, 1e3, 10], [1e3, 1280, 12], [1280, 1440, 16], [1440, 1920, 18], [1920, 2560, 24]]
          }, function(t) {
            return function() {
              return t.updateFillerItems(),
                t.resizeGridContainer(),
                t.gridVisible ? t.animatePhotos() : void 0
            }
          }(this))
        }
        ,
        e.prototype.resizeGridContainer = function() {
          var t, e, i, n, r;
          return e = $(".botched-to-date"),
            i = e.height(),
            this.grid.height() > i ? (n = this.grid.find(".mason_filler").first(),
              r = n.height(),
              t = r - i % r,
              TweenMax.set(e, {
                paddingBottom: t
              })) : void 0
        }
        ,
        e.prototype.updateFillerItems = function() {
          var t, e;
          return t = this.grid.find(".mason_clear"),
            this.grid.append(t),
            $(".mason_filler").removeClass("show"),
            $(".photo.filler").removeClass("filler"),
            $(".mason_filler").each(function() {
              return function(t, e) {
                var i, n;
                return i = $(e),
                  n = Math.round(2 * Math.random()),
                  2 > n ? i.addClass("show") : void 0
              }
            }(this)),
            e = 0,
            $(".photo:not(.lg):not(.med)").each(function(t) {
              return function(i, n) {
                var r, s, o;
                return s = $(n),
                  e = s.width(),
                  r = t.grid.width() / e,
                  2 * r > i && (o = Math.round(3 * Math.random()),
                  3 > o) ? s.addClass("filler") : void 0
              }
            }(this))
        }
        ,
        e.prototype.transitionIn = function() {
          return this.gridVisible ? void 0 : (this.gridVisible = !0,
            this.animatePhotos(),
            this.animateCount())
        }
        ,
        e.prototype.animatePhotos = function() {
          var t;
          return t = $(".photo:not(.mason_filler)"),
            t = t.add(".mason_filler.show"),
            $.each(t, function() {
              return function(t, e) {
                var i, n;
                return n = $(e),
                  i = 30 * Math.random(),
                  TweenMax.to(n, .4, {
                    opacity: 1,
                    delay: .1 * i + .5,
                    ease: Quad.eaesOut
                  })
              }
            }(this))
        }
        ,
        e.prototype.animateCount = function() {
          return TweenMax.to({
            counter: 0
          }, 4.5, {
            counter: 1e3,
            ease: Cubic.easeInOut,
            onUpdateParams: ["{self}"],
            onUpdate: function(t) {
              return function(e) {
                var i;
                return i = e.target.counter.toFixed(),
                "1000" === i && (i = i.replace(/\B(?=(\d{3})+(?!\d))/g, ",") + "+"),
                  t.counter.text(i)
              }
            }(this)
          })
        }
        ,
        e.prototype.onResize = function() {
          return this.gridVisible ? TweenMax.set($(".photo"), {
            opacity: 0
          }) : void 0
        }
        ,
        e.prototype.destroy = function() {
          return this.mason.destroy()
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.CompassHuntController = function() {
      function e() {
        this.destroy = t(this.destroy, this),
          this.toggleView = t(this.toggleView, this),
          this.onScroll = t(this.onScroll, this),
          this.resizeMaps = t(this.resizeMaps, this),
          this.onResize = t(this.onResize, this),
          this.bindEvents = t(this.bindEvents, this),
          this.onInjectComplete = t(this.onInjectComplete, this),
          this.injectMapSVG = t(this.injectMapSVG, this),
          this.setup = t(this.setup, this),
          this.init = t(this.init, this),
          this.win = $(window),
          this.winWidth = 0,
          this.winHeight = 0,
          this.mapWidth = 1440,
          this.mapHeight = 931,
          this.mapScale = this.mapWidth / this.mapHeight,
          this.animatableItems = null
      }
      return e.prototype.init = function(t) {
        return this.context = t,
          this.setup(),
          this.injectMapSVG()
      }
        ,
        e.prototype.setup = function() {
          return this.caseStudy = this.context.find("#compass-hunt"),
            this.topFold = this.context.find(".top-fold"),
            this.topFoldHeight = 0,
            this.viewButton = this.topFold.find(".view-project"),
            this.mapOneEl = this.context.find(".map-one"),
            this.mapTwoEl = this.context.find(".map-two"),
            this.mapOneContainer = this.mapOneEl.find(".map-inner-container"),
            this.mapTwoContainer = this.mapTwoEl.find(".map-inner-container"),
            this.toggle = this.context.find(".toggle"),
            this.togglableItems = this.toggle.find("li"),
            this.browser = this.context.find(".browser"),
            this.marquee = new ib.CompassHuntMarquee(this.mapOneEl,this.caseStudy),
            this.marquee.init()
        }
        ,
        e.prototype.injectMapSVG = function() {
          var t, e;
          return t = $(".inject-svg"),
            e = {
              evalScripts: "always"
            },
            SVGInjector(t, e, this.onInjectComplete)
        }
        ,
        e.prototype.onInjectComplete = function() {
          return this.animatableItems = new ib.AnimatableItems(this.context),
            this.animatableItems.addItems(),
            this.bindEvents(),
            this.onResize(),
            this.marquee.reset()
        }
        ,
        e.prototype.bindEvents = function() {
          return this.togglableItems.on("click", this.toggleView),
            this.viewButton.on("click", this.viewProject)
        }
        ,
        e.prototype.onResize = function() {
          return this.winWidth = this.win.width(),
            this.winHeight = this.win.height(),
            this.mapOneEl.height(this.winHeight),
            this.resizeMaps(),
            this.animatableItems ? this.animatableItems.resize() : void 0
        }
        ,
        e.prototype.resizeMaps = function() {
          var t, e, i;
          i = this.winWidth / this.winHeight,
            e = "100%",
            t = "100%",
            i < this.mapScale ? e = Math.round(this.mapScale * this.winHeight) : t = Math.round(this.mapScale * this.winWidth),
            this.mapOneContainer.width(e),
            this.mapOneContainer.height(t),
            e = this.winWidth > this.mapWidth ? "100%" : this.mapWidth,
            t = Math.round(this.winWidth / this.mapScale),
            this.mapTwoContainer.width(e),
            this.mapTwoContainer.height(t),
          Modernizr.csspositionsticky && this.topFold.hasClass("csspositionsticky")
        }
        ,
        e.prototype.onScroll = function(t) {
          return this.animatableItems ? this.animatableItems.triggerAnimations(t) : void 0
        }
        ,
        e.prototype.toggleView = function(t) {
          var e, i, n, r;
          return n = $(t.target),
            i = "selected",
            n.hasClass(i) ? void 0 : (this.toggle.find("." + i).removeClass(i),
              n.addClass(i),
              r = n.data("browser"),
              e = this.browser.find(".users-browser"),
              this.browser.find(".animate").removeClass("animate"),
              "admin" !== r ? this.browser.removeClass("admin") : (this.browser.addClass(r),
                e = this.browser.find(".admin-browser")),
              setTimeout(function() {
                return e.addClass("animate")
              }, 50))
        }
        ,
        e.prototype.destroy = function() {
          return this.togglableItems.off("click", this.toggleView)
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.CompassHuntMarquee = function() {
      function e(e, i) {
        this.context = e,
          this.scrollEl = i,
          this.destroy = t(this.destroy, this),
          this.updateCompass = t(this.updateCompass, this),
          this.updateBackground = t(this.updateBackground, this),
          this.resume = t(this.resume, this),
          this.pause = t(this.pause, this),
          this.updateDistance = t(this.updateDistance, this),
          this.start = t(this.start, this),
          this.getScale = t(this.getScale, this),
          this.reset = t(this.reset, this),
          this.init = t(this.init, this),
          this.mapInnerContainer = this.context.find(".map-inner-container"),
          this.marker = this.mapInnerContainer.find(".top-marker"),
          this.prize = this.mapInnerContainer.find(".prize"),
          this.phone = this.context.find(".phone-desktop"),
          this.phoneBg = this.phone.find(".phone-background"),
          this.arrow = this.phone.find("svg"),
          this.distanceEl = this.phone.find(".distance h4"),
          this.markerTween = null,
          this.distanceTween = null,
          this.stickyClass = "csspositionsticky",
          this.duration = 30,
          this.easing = Quad.easeInOut,
          this.isAnimating = !1,
          this.offsetX = -167,
          this.offsetY = -126,
          this.startValue = this.distanceEl.data("distance"),
          this.warmValue = .1614 * this.startValue,
          this.hotValue = .0193 * this.startValue,
          this.colors = [{
            r: 2,
            g: 168,
            b: 243
          }, {
            r: 255,
            g: 162,
            b: 0
          }, {
            r: 245,
            g: 26,
            b: 57
          }]
      }
      return e.prototype.init = function() {
        return $(ib).on(ib.Events.COMPASS_HUNT_START, this.start),
          $(ib).on(ib.Events.PAUSE_MARQUEE_ANIMATIONS, this.pause),
          $(ib).on(ib.Events.RESUME_MARQUEE_ANIMATIONS, this.resume)
      }
        ,
        e.prototype.reset = function() {
          var t;
          return t = this.getScale(),
            TweenMax.set(this.marker, {
              x: (15 + this.offsetX) * t,
              y: (100 + this.offsetY) * t
            }),
            TweenMax.set(this.prize, {
              x: 88 * t,
              y: -130 * t
            })
        }
        ,
        e.prototype.getScale = function() {
          var t, e;
          return t = 1440,
            e = Math.max(t, this.mapInnerContainer.width()),
          e / t
        }
        ,
        e.prototype.start = function() {
          var t, e, i, n, r, s, o;
          return n = this.getScale(),
            s = (15 + this.offsetX) * n,
            o = (100 + this.offsetY) * n,
            t = (253 + this.offsetX) * n,
            e = (21 + this.offsetY) * n,
            r = Math.pow(s - t, 2) + Math.pow(o - e, 2),
            i = this.startValue / r.toFixed(2),
            this.updateDistance(),
            this.markerTween = TweenMax.to(this.marker, this.duration, {
              bezier: {
                type: "cubic",
                values: [{
                  x: s,
                  y: o
                }, {
                  x: (19 + this.offsetX) * n,
                  y: (67 + this.offsetY) * n
                }, {
                  x: (34 + this.offsetX) * n,
                  y: (60 + this.offsetY) * n
                }, {
                  x: (52 + this.offsetX) * n,
                  y: (64 + this.offsetY) * n
                }, {
                  x: (96 + this.offsetX) * n,
                  y: (75 + this.offsetY) * n
                }, {
                  x: (62 + this.offsetX) * n,
                  y: (126 + this.offsetY) * n
                }, {
                  x: (87 + this.offsetX) * n,
                  y: (131 + this.offsetY) * n
                }, {
                  x: (103 + this.offsetX) * n,
                  y: (134 + this.offsetY) * n
                }, {
                  x: (111 + this.offsetX) * n,
                  y: (90 + this.offsetY) * n
                }, {
                  x: (126 + this.offsetX) * n,
                  y: (87 + this.offsetY) * n
                }, {
                  x: (153 + this.offsetX) * n,
                  y: (81 + this.offsetY) * n
                }, {
                  x: (160 + this.offsetX) * n,
                  y: (111 + this.offsetY) * n
                }, {
                  x: (175 + this.offsetX) * n,
                  y: (109 + this.offsetY) * n
                }, {
                  x: (191 + this.offsetX) * n,
                  y: (107 + this.offsetY) * n
                }, {
                  x: (195 + this.offsetX) * n,
                  y: (90 + this.offsetY) * n
                }, {
                  x: (216 + this.offsetX) * n,
                  y: (92 + this.offsetY) * n
                }, {
                  x: (217 + this.offsetX) * n,
                  y: (92 + this.offsetY) * n
                }, {
                  x: (210 + this.offsetX) * n,
                  y: (69 + this.offsetY) * n
                }, {
                  x: (234 + this.offsetX) * n,
                  y: (45 + this.offsetY) * n
                }, {
                  x: (243 + this.offsetX) * n,
                  y: (36 + this.offsetY) * n
                }, {
                  x: (249 + this.offsetX) * n,
                  y: (27 + this.offsetY) * n
                }, {
                  x: t,
                  y: e
                }]
              },
              ease: this.easing,
              onUpdateParams: ["{self}"],
              onUpdate: function(n) {
                return function(r) {
                  var s, o, a, l, h, c, u, p;
                  if (h = Math.floor(r._targets[0]._gsTransform.x),
                      c = Math.floor(r._targets[0]._gsTransform.y),
                      s = t - h,
                      o = e - c,
                      u = Math.floor((Math.pow(s, 2) + Math.pow(o, 2)) * i),
                    u >= n.warmValue)
                    p = n.startValue - n.warmValue,
                      l = u - n.warmValue,
                      a = 1 - l / p,
                      n.updateBackground(n.colors[0], n.colors[1], a);
                  else {
                    if (!(u <= n.warmValue && u >= n.hotValue))
                      return void n.phone.addClass("hot");
                    n.phone.addClass("warm"),
                      p = n.warmValue - n.hotValue,
                      l = u - n.hotValue,
                      a = 1 - l / p,
                      n.updateBackground(n.colors[1], n.colors[2], a)
                  }
                  return n.updateCompass(s, o)
                }
              }(this)
            }),
            this.isAnimating = !0
        }
        ,
        e.prototype.updateDistance = function() {
          return this.distanceTween = TweenMax.to({
            counter: this.startValue
          }, this.duration, {
            counter: 0,
            ease: this.easing,
            onUpdateParams: ["{self}"],
            onUpdate: function(t) {
              return function(e) {
                var i;
                return i = (e.target.counter / 100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ","),
                  t.distanceEl.text(i)
              }
            }(this)
          })
        }
        ,
        e.prototype.pause = function() {
          return null != this.markerTween && this.isAnimating ? (this.isAnimating = !1,
            this.markerTween.pause(),
            this.distanceTween.pause()) : void 0
        }
        ,
        e.prototype.resume = function() {
          return null == this.markerTween || this.isAnimating ? void 0 : (this.isAnimating = !0,
            this.markerTween.resume(),
            this.distanceTween.resume())
        }
        ,
        e.prototype.updateBackground = function(t, e, i) {
          var n, r, s, o, a, l;
          return l = t.r - e.r,
            o = t.g - e.g,
            r = t.b - e.b,
            a = Math.abs(Math.round(t.r - l * i)),
            s = Math.abs(Math.round(t.g - o * i)),
            n = Math.abs(Math.round(t.b - r * i)),
            TweenMax.set(this.phoneBg, {
              backgroundColor: "rgb(" + a + ", " + s + ", " + n + ")"
            })
        }
        ,
        e.prototype.updateCompass = function(t, e) {
          var i, n, r;
          return r = Math.sqrt(Math.floor(Math.pow(t, 2) + Math.pow(e, 2))),
            n = 165,
            i = n + Math.floor(180 * Math.asin(e / r) / Math.PI),
            isNaN(i) ? void 0 : TweenMax.set(this.arrow, {
              rotation: i
            })
        }
        ,
        e.prototype.destroy = function() {
          return null != this.markerTween && this.isAnimating && (this.markerTween.kill(),
            this.distanceTween.kill()),
            $(ib).off(ib.Events.COMPASS_HUNT_START, this.start),
            $(ib).off(ib.Events.PAUSE_MARQUEE_ANIMATIONS, this.pause),
            $(ib).off(ib.Events.RESUME_MARQUEE_ANIMATIONS, this.resume)
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var __bind = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.FalconController = function() {
      function FalconController() {
        this.destroy = __bind(this.destroy, this),
          this.toggleParts = __bind(this.toggleParts, this),
          this.onScroll = __bind(this.onScroll, this),
          this.onResize = __bind(this.onResize, this),
          this.init = __bind(this.init, this),
          this.activeClassName = "active",
          this.computerParts = null,
          this.animatableItems = null,
          this.components = []
      }
      return FalconController.prototype.init = function(context) {
        var componentEl;
        return this.context = context,
          this.computerParts = $(".card-type", this.context),
          this.computerParts.on("click", this.toggleParts),
          this.animatableItems = new ib.AnimatableItems(this.context),
          this.animatableItems.addItems(),
          componentEl = $(".falcon-component"),
          $.each(componentEl, function(_this) {
            return function(index, value) {
              var component, controller, item;
              return item = $(value),
                component = eval(item.data("falcon-component")),
                controller = new component(item),
                controller.init(),
                _this.components.push({
                  el: item,
                  controller: controller
                })
            }
          }(this))
      }
        ,
        FalconController.prototype.onResize = function() {
          var t, e, i, n, r, s, o;
          for (this.animatableItems && this.animatableItems.resize(),
                 s = this.components,
                 o = [],
                 i = n = 0,
                 r = s.length; r > n; i = ++n)
            t = s[i],
              e = this.components[i].controller,
              o.push(e.onResize && e.onResize());
          return o
        }
        ,
        FalconController.prototype.onScroll = function(t) {
          var e, i, n, r, s, o;
          for (o = this.components,
                 i = r = 0,
                 s = o.length; s > r; i = ++r)
            e = o[i],
              n = this.components[i],
            n.el.hasClass("animate") && n.controller.transitionIn && n.controller.transitionIn();
          return this.animatableItems && this.animatableItems.triggerAnimations(t)
        }
        ,
        FalconController.prototype.toggleParts = function(t) {
          var e;
          return e = $(t.currentTarget),
            e.hasClass(this.activeClassName) ? void 0 : (this.computerParts.filter("." + this.activeClassName).removeClass(this.activeClassName),
              e.addClass(this.activeClassName))
        }
        ,
        FalconController.prototype.destroy = function() {
          var t, e, i, n, r, s, o;
          for (s = this.components,
                 o = [],
                 i = n = 0,
                 r = s.length; r > n; i = ++n)
            t = s[i],
              e = this.components[i].controller,
              o.push(e.destroy && e.destroy());
          return o
        }
        ,
        FalconController
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.FalconFramework = function() {
      function e(e) {
        this.context = e,
          this.destroy = t(this.destroy, this),
          this.transitionLayers = t(this.transitionLayers, this),
          this.transitionIn = t(this.transitionIn, this),
          this.resetDescription = t(this.resetDescription, this),
          this.showDescription = t(this.showDescription, this),
          this.resetLayers = t(this.resetLayers, this),
          this.leaveLayer = t(this.leaveLayer, this),
          this.enterLayer = t(this.enterLayer, this),
          this.bindEvents = t(this.bindEvents, this),
          this.init = t(this.init, this),
          this.pages = $(".pages > li", this.context),
          this.layersList = $(".layers", this.pages),
          this.hitbox = $(".hitbox", this.layersList),
          this.descriptions = $(".figure-descriptions li", this.context),
          this.isAnimated = !1,
          this.layerResetTimeout,
          this.layerEnterTimeout,
          this.descriptionTimeout
      }
      return e.prototype.init = function() {}
        ,
        e.prototype.bindEvents = function() {
          return Modernizr.touch ? void 0 : (this.hitbox.on("mouseenter", this.enterLayer),
            this.hitbox.on("mouseleave", this.leaveLayer))
        }
        ,
        e.prototype.enterLayer = function(t) {
          var e, i;
          return clearTimeout(this.layerResetTimeout),
            clearTimeout(this.layerEnterTimeout),
            clearTimeout(this.descriptionTimeout),
            i = $(t.currentTarget),
            e = i.parent().index(),
            this.layerEnterTimeout = setTimeout(function(t) {
              return function() {
                return t.layersList.attr("class", "layers show-" + e),
                  t.showDescription(e)
              }
            }(this), 200)
        }
        ,
        e.prototype.leaveLayer = function() {
          return this.layerResetTimeout = setTimeout(this.resetLayers, 400)
        }
        ,
        e.prototype.resetLayers = function() {
          return this.resetDescription(),
            this.layersList.attr("class", "layers")
        }
        ,
        e.prototype.showDescription = function(t) {
          var e;
          return e = $(this.descriptions[t]),
          e.hasClass("active") || this.resetDescription(),
            this.descriptionTimeout = setTimeout(function() {
              return function() {
                return e.addClass("active")
              }
            }(this), 200)
        }
        ,
        e.prototype.resetDescription = function() {
          return this.descriptions.filter(".active").removeClass("active")
        }
        ,
        e.prototype.transitionIn = function() {
          return this.isAnimated ? void 0 : (this.isAnimated = !0,
            TweenMax.to($(".grid", this.context), .3, {
              opacity: 1,
              ease: Quad.easeIn
            }),
            $.each(this.pages, function() {
              return function(t, e) {
                var i;
                return i = $(e),
                  TweenMax.to(i, 1, {
                    opacity: 1,
                    y: 0,
                    ease: Quint.easeInOut,
                    delay: .15 * t + .5
                  })
              }
            }(this)),
            this.transitionLayers())
        }
        ,
        e.prototype.transitionLayers = function() {
          var t, e, i, n, r, s;
          return s = $("> .content", this.pages),
            e = $(".bg", this.layersList),
            i = $(".content", this.layersList),
            t = $(i[0]),
            r = $(i[1]).add($(i[2])),
            n = $(e[1]).add($(e[2])),
            $.each(s, function() {
              return function(t, e) {
                var i;
                return i = $(e),
                  TweenMax.fromTo(i, 1, {
                    opacity: 0,
                    y: "-100%"
                  }, {
                    opacity: 1,
                    y: 0,
                    ease: Quint.easeOut,
                    delay: .3 * t + 1.25
                  })
              }
            }(this)),
            TweenMax.fromTo(t, 1, {
              opacity: 0,
              y: "-100%"
            }, {
              opacity: 1,
              y: 0,
              ease: Quint.easeOut,
              delay: 1.4
            }),
            $.each(n, function() {
              return function(t, e) {
                var i;
                return i = $(e),
                  TweenMax.fromTo(i, .8, {
                    opacity: 0,
                    y: "-100%"
                  }, {
                    opacity: 1,
                    y: 0,
                    ease: Quint.easeInOut,
                    delay: .6 * t + 1.8
                  })
              }
            }(this)),
            $.each(r, function(t) {
              return function(e, i) {
                var n;
                return n = $(i),
                  TweenMax.fromTo(n, .8, {
                    opacity: 0,
                    y: "-120%"
                  }, {
                    opacity: 1,
                    y: 0,
                    ease: Quint.easeInOut,
                    delay: .6 * e + 1.85,
                    onComplete: function() {
                      return 1 === e ? (t.bindEvents(),
                        t.context.addClass("mobile-transitions")) : void 0
                    }
                  })
              }
            }(this))
        }
        ,
        e.prototype.destroy = function() {
          return this.hitbox.off("mouseenter", this.enterLayer),
            this.hitbox.off("mouseleave", this.leaveLayer),
            this.hitbox.off("click", this.enterLayer)
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.FalconMobile = function() {
      function e(e) {
        this.context = e,
          this.destroy = t(this.destroy, this),
          this.animatePhoneScroll = t(this.animatePhoneScroll, this),
          this.scrollImg = t(this.scrollImg, this),
          this.onResize = t(this.onResize, this),
          this.endSwipe = t(this.endSwipe, this),
          this.startSwipe = t(this.startSwipe, this),
          this.init = t(this.init, this),
          this.document = $(document),
          this.imgWrap = $(".mobile-content", this.context),
          this.img = $("img", this.imgWrap),
          this.animating = !1,
          this.scrollDown = !1,
          this.slideIndex = 0,
          this.lastScroll = 0,
          this.startPoint = 0,
          this.swipeOffset = 20
      }
      return e.prototype.init = function() {
        return this.imgWrap.on("mousewheel", this.scrollImg),
          this.imgWrap.on("vmousedown", this.startSwipe)
      }
        ,
        e.prototype.startSwipe = function(t) {
          return this.document.on("vmouseup", this.endSwipe),
            this.startPoint = t.clientY,
            !1
        }
        ,
        e.prototype.endSwipe = function(t) {
          var e;
          return this.document.off("vmouseup", this.endSwipe),
            e = t.clientY,
            e < this.startPoint - this.swipeOffset && this.slideIndex < 3 ? (this.slideIndex++,
              this.animatePhoneScroll()) : e > this.startPoint + this.swipeOffset && this.slideIndex > 0 ? (this.slideIndex--,
              this.animatePhoneScroll()) : void 0
        }
        ,
        e.prototype.onResize = function() {
          return TweenMax.set(this.img, {
            y: -this.imgWrap.height() * this.slideIndex
          })
        }
        ,
        e.prototype.scrollImg = function(t, e, i, n) {
          var r;
          return t.preventDefault(),
          this.animating || (r = 0 > n,
            r ? n < this.lastScroll && this.slideIndex < 3 && (this.slideIndex++,
              this.animatePhoneScroll()) : n > this.lastScroll && this.slideIndex > 0 && (this.slideIndex--,
              this.animatePhoneScroll())),
            this.lastScroll = n
        }
        ,
        e.prototype.animatePhoneScroll = function() {
          return this.animating = !0,
            TweenMax.to(this.img, .6, {
              y: -this.imgWrap.height() * this.slideIndex,
              ease: Quad.easeInOut,
              onComplete: function(t) {
                return function() {
                  return t.animating = !1
                }
              }(this)
            })
        }
        ,
        e.prototype.destroy = function() {
          return this.imgWrap.off("mousewheel", this.scrollImg),
            this.imgWrap.off("vmousedown", this.startSwipe)
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.FalconModules = function() {
      function e(e) {
        this.context = e,
          this.destroy = t(this.destroy, this),
          this.transitionIn = t(this.transitionIn, this),
          this.goToModule = t(this.goToModule, this),
          this.stickyNav = t(this.stickyNav, this),
          this.setCurrentModule = t(this.setCurrentModule, this),
          this.onScrollUpdates = t(this.onScrollUpdates, this),
          this.startRAF = t(this.startRAF, this),
          this.onResize = t(this.onResize, this),
          this.doResize = t(this.doResize, this),
          this.setupModules = t(this.setupModules, this),
          this.init = t(this.init, this),
          this.win = $(window),
          this.winHeight = 0,
          this.contextOffset = 0,
          this.caseStudy = $("#case-study"),
          this.moduleList = $(".module-list", this.context),
          this.moduleItems = $("> li", this.moduleList),
          this.navigator = $(".navigator", this.context),
          this.navigatorItems = $("li", this.navigator),
          this.activeClassName = "active",
          this.modules = [],
          this.modulesHeight = 0,
          this.navHeight = 0,
          this.menuArea = 0,
          this.scrollPadding = 40,
          this.isAnimated = !1,
          this.tween = null,
          this.raf = null
      }
      return e.prototype.init = function() {
        return this.setupModules(),
          this.navHeight = this.navigator.height(),
          this.navigatorItems.on("click", this.goToModule),
          this.startRAF()
      }
        ,
        e.prototype.setupModules = function() {
          var t;
          return t = 0,
            $.each(this.moduleItems, function(e) {
              return function(i, n) {
                var r, s, o;
                return s = $(n),
                  r = s.height() / 2,
                  o = s.offset().top,
                  t += r,
                  e.modules.push({
                    el: s,
                    height: r,
                    offset: o
                  })
              }
            }(this)),
            this.modulesHeight = 2 * t
        }
        ,
        e.prototype.doResize = function() {
          var t, e, i, n, r, s, o;
          for (n = this.caseStudy.scrollTop(),
                 this.contextOffset = this.context.offset().top + n,
                 this.winHeight = this.win.height(),
                 this.menuArea = $("#menu-background").height() + this.scrollPadding,
                 i = 0,
                 o = this.modules,
                 t = r = 0,
                 s = o.length; s > r; t = ++r)
            e = o[t],
              e.height = e.el.height() / 2,
              e.offset = e.el.offset().top + n,
              i += e.height;
          return this.modulesHeight = 2 * i
        }
        ,
        e.prototype.onResize = function() {
          return setTimeout(this.doResize, 0)
        }
        ,
        e.prototype.startRAF = function() {
          return this.raf = requestAnimationFrame(this.onScrollUpdates)
        }
        ,
        e.prototype.onScrollUpdates = function() {
          var t, e;
          return this.raf = requestAnimationFrame(this.onScrollUpdates),
            e = this.caseStudy.scrollTop(),
            t = -1 * (e - this.contextOffset),
            t <= this.winHeight && -1 * t < this.modulesHeight ? (this.setCurrentModule(e),
              this.stickyNav(t)) : void 0
        }
        ,
        e.prototype.setCurrentModule = function(t) {
          var e, i, n, r, s, o, a, l, h;
          for (l = this.modules,
                 h = [],
                 n = o = 0,
                 a = l.length; a > o; n = ++o)
            r = l[n],
              i = this.winHeight / 2 + this.menuArea,
              t >= r.offset - i + r.height ? r.el.hasClass(this.activeClassName) ? h.push(void 0) : (e = this.moduleItems.add(this.navigatorItems),
                e.filter("." + this.activeClassName).removeClass(this.activeClassName),
                s = r.el.add($(this.navigatorItems[n])),
                h.push(s.addClass(this.activeClassName))) : h.push(void 0);
          return h
        }
        ,
        e.prototype.stickyNav = function(t) {
          var e;
          return e = t - this.menuArea <= 0 && t + this.modulesHeight >= this.navHeight + this.menuArea ? -1 * (t - this.menuArea) : t + this.modulesHeight < this.navHeight + this.menuArea ? this.modulesHeight - this.navHeight : 0,
            Modernizr.csspositionsticky ? (this.tween && this.tween.kill(),
              this.tween = TweenMax.to(this.navigator, .3, {
                y: e
              })) : TweenMax.set(this.navigator, {
              y: e
            })
        }
        ,
        e.prototype.goToModule = function(t) {
          var e, i, n;
          return e = $(t.currentTarget).index(),
            i = $(this.moduleItems[e]).offset().top,
            n = i + this.caseStudy.scrollTop() - this.menuArea,
            this.caseStudy.animate({
              scrollTop: n
            }, 450)
        }
        ,
        e.prototype.transitionIn = function() {
          return this.isAnimated ? void 0 : (this.isAnimated = !0,
            this.navigator.addClass("transition-in"))
        }
        ,
        e.prototype.destroy = function() {
          return cancelAnimationFrame(this.raf),
            this.modules = []
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.FalconSlider = function() {
      function e(e) {
        this.context = e,
          this.destroy = t(this.destroy, this),
          this.updateMarker = t(this.updateMarker, this),
          this.updateThumbnail = t(this.updateThumbnail, this),
          this.updateArrows = t(this.updateArrows, this),
          this.thumbnailHandler = t(this.thumbnailHandler, this),
          this.arrowHandler = t(this.arrowHandler, this),
          this.animateSlides = t(this.animateSlides, this),
          this.changeSlide = t(this.changeSlide, this),
          this.endSwipe = t(this.endSwipe, this),
          this.startSwipe = t(this.startSwipe, this),
          this.onResize = t(this.onResize, this),
          this.init = t(this.init, this),
          this.document = $(document),
          this.slidesWrap = $(".slides-wrap", this.context),
          this.slidesList = $(".slides", this.slidesWrap),
          this.slides = $("li", this.slidesList),
          this.thumbnails = $(".thumb-wrap li", this.context),
          this.markers = $(".markers li", this.context),
          this.nav = $(".navigation", this.context),
          this.arrow = $(".arrow", this.context),
          this.activeClass = "active",
          this.disabledClass = "disabled",
          this.animating = !1,
          this.slideWidth = 0,
          this.currentIndex = 0,
          this.startPoint = 0,
          this.swipeOffset = 20
      }
      return e.prototype.init = function() {
        return this.nav.on("vmousedown", this.startSwipe),
          this.arrow.on("click", this.arrowHandler),
          this.thumbnails.length ? this.thumbnails.on("click", this.thumbnailHandler) : void 0
      }
        ,
        e.prototype.onResize = function() {
          var t;
          return this.slideWidth = $(this.slides[0]).outerWidth(!0),
            t = this.slideWidth * this.currentIndex * -1,
            TweenMax.set(this.slidesList, {
              x: t
            })
        }
        ,
        e.prototype.startSwipe = function(t) {
          return this.document.on("vmouseup", this.endSwipe),
            this.startPoint = t.clientX
        }
        ,
        e.prototype.endSwipe = function(t) {
          var e;
          return this.document.off("vmouseup", this.endSwipe),
            e = t.clientX,
            e > this.startPoint + this.swipeOffset && this.currentIndex > 0 ? (this.currentIndex--,
              this.changeSlide()) : e < this.startPoint - this.swipeOffset && this.currentIndex < this.slides.length - 1 ? (this.currentIndex++,
              this.changeSlide()) : void 0
        }
        ,
        e.prototype.changeSlide = function() {
          return this.updateArrows(),
            this.animateSlides(),
            this.updateMarker(),
            this.thumbnails.length ? this.updateThumbnail() : void 0
        }
        ,
        e.prototype.animateSlides = function() {
          var t;
          return this.slides.filter("." + this.activeClass).removeClass(this.activeClass),
            t = this.slideWidth * this.currentIndex * -1,
            TweenMax.to(this.slidesList, .5, {
              x: t,
              ease: Quad.easeInOut,
              onComplete: function(t) {
                return function() {
                  return $(t.slides[t.currentIndex]).addClass(t.activeClass),
                    t.animating = !1
                }
              }(this)
            })
        }
        ,
        e.prototype.arrowHandler = function(t) {
          var e;
          return e = $(t.currentTarget),
            this.animating || e.hasClass(this.disabledClass) ? void 0 : (this.animating = !0,
              e.hasClass("prev") ? this.currentIndex-- : this.currentIndex++,
              this.changeSlide())
        }
        ,
        e.prototype.thumbnailHandler = function(t) {
          var e;
          return e = $(t.currentTarget),
            this.animating || e.hasClass(this.activeClass) ? void 0 : (this.animating = !0,
              this.currentIndex = e.index(),
              this.changeSlide())
        }
        ,
        e.prototype.updateArrows = function() {
          return this.arrow.filter("." + this.disabledClass).removeClass(this.disabledClass),
            this.currentIndex === this.slides.length - 1 ? this.arrow.filter(".next").addClass(this.disabledClass) : 0 === this.currentIndex ? this.arrow.filter(".prev").addClass(this.disabledClass) : void 0
        }
        ,
        e.prototype.updateThumbnail = function() {
          return this.thumbnails.filter("." + this.activeClass).removeClass(this.activeClass),
            $(this.thumbnails[this.currentIndex]).addClass(this.activeClass)
        }
        ,
        e.prototype.updateMarker = function() {
          return this.markers.filter("." + this.activeClass).removeClass(this.activeClass),
            $(this.markers[this.currentIndex]).addClass(this.activeClass)
        }
        ,
        e.prototype.destroy = function() {
          return this.currentIndex = 0,
            this.nav.off("vmousedown", this.startSwipe),
            this.arrow.off("click", this.arrowHandler),
            this.thumbnails.length ? this.thumbnails.off("click", this.thumbnailHandler) : void 0
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.FalconTronLine = function() {
      function e(e, i, n) {
        this.points = e,
          this.lineData = i,
          this.isShape = null != n ? n : !1,
          this.toDegrees = t(this.toDegrees, this),
          this.toRadians = t(this.toRadians, this),
          this.rotate = t(this.rotate, this),
          this.translate = t(this.translate, this),
          this.updateAnchor = t(this.updateAnchor, this),
          this.rotation = 0,
          this.anchor = new Math2.Point,
          this.translated = [].concat(this.points),
          this.translation = new Math2.Point,
          this.totalLines = this.points.length - 1
      }
      return e.prototype.updateAnchor = function(t, e, i) {
        return this.anchor.x = t,
          this.anchor.y = e,
          this.anchor.z = i
      }
        ,
        e.prototype.translate = function(t) {
          var e, i, n, r, s, o;
          for (this.translation = t,
                 this.translated = [],
                 s = this.points,
                 o = [],
                 n = 0,
                 r = s.length; r > n; n++)
            e = s[n],
              i = {
                x: e.x + this.translation.x,
                y: e.y + this.translation.y,
                z: e.z + this.translation.z
              },
              i = this.rotate(i),
              o.push(this.translated.push(i));
          return o
        }
        ,
        e.prototype.rotate = function(t) {
          var e, i, n, r, s;
          return e = this.anchor.x + this.translation.x,
            i = this.anchor.z + this.translation.z,
            n = this.toRadians(this.rotation),
            s = new THREE.Vector3(t.x - e,t.y,t.z - i),
            r = s.applyAxisAngle(new THREE.Vector3(0,1,0), n),
            {
              x: r.x + e,
              y: t.y,
              z: r.z + i
            }
        }
        ,
        e.prototype.toRadians = function(t) {
          return t * Math.PI / 180
        }
        ,
        e.prototype.toDegrees = function(t) {
          return 180 * t / Math.PI
        }
        ,
        e
    }(),
    ib.FalconTronLinesController = function() {
      function e(e, i) {
        this.context = e,
          this.timelineDuration = i,
          this.draw = t(this.draw, this),
          this.convertMaskCoords = t(this.convertMaskCoords, this),
          this.drawMask = t(this.drawMask, this),
          this.getDepthRatio = t(this.getDepthRatio, this),
          this.drawLine = t(this.drawLine, this),
          this.getLineProgress = t(this.getLineProgress, this),
          this.drawPoints = t(this.drawPoints, this),
          this.updateLineTranslation = t(this.updateLineTranslation, this),
          this.updateFrame = t(this.updateFrame, this),
          this.onGlowUpdate = t(this.onGlowUpdate, this),
          this.onRotationUpdate = t(this.onRotationUpdate, this),
          this.onPanUpdate = t(this.onPanUpdate, this),
          this.updateTweensProgress = t(this.updateTweensProgress, this),
          this.setupTweens = t(this.setupTweens, this),
          this.onResize = t(this.onResize, this),
          this.preparePixi = t(this.preparePixi, this),
          this.setupPoints = t(this.setupPoints, this),
          this.initialize = t(this.initialize, this),
          this.renderer = null,
          this.stage = null,
          this.depthRange = 650,
          this.translateRange = 80,
          this.rotationRange = 30,
          this.depth = this.depthRange,
          this.offsetX = 400,
          this.shapeRotation = 0,
          this.frameIndex = 0,
          this.pan = {
            x: 0,
            y: 0
          },
          this.globalTranslation = {
            x: 0,
            y: 0,
            z: 0
          },
          this.vanish = {
            x: 0,
            y: 0
          },
          this.lines = [],
          this.shapeLines = [],
          this.tweens = [],
          this.progress = 0,
          this.container = {
            top: -700,
            bottom: 700,
            left: -1e3,
            right: 1e3
          },
          this.timelines = {
            pan: 0,
            rotation: 0,
            movie: 0,
            expand: 0,
            collapse: 0,
            glow: 0,
            lineAlpha: .6
          },
          this.imageProps = {
            el: this.context.find(".image-wrap img"),
            scale: 1,
            naturalHeight: 600,
            targetHeight: 280,
            vanishY: 416,
            x: 80,
            x1: -80,
            x2: 80,
            y: 90,
            z1: -67,
            z2: -325,
            w: 0,
            h: 0
          }
      }
      return e.prototype.initialize = function() {
        return this.setupPoints(),
          this.preparePixi(),
          this.setupTweens(),
          setTimeout(function(t) {
            return function() {
              return t.onResize()
            }
          }(this), 100)
      }
        ,
        e.prototype.setupPoints = function() {
          var t, e, i, n, r;
          for (t = r = 0; 6 > r; t = ++r)
            i = [],
              i.push(new Math2.Point(this.imageProps.x1,this.imageProps.y,this.imageProps.z1)),
              i.push(new Math2.Point(this.imageProps.x1,this.imageProps.y,this.imageProps.z2)),
              i.push(new Math2.Point(this.imageProps.x2,this.imageProps.y,this.imageProps.z2)),
              i.push(new Math2.Point(this.imageProps.x2,this.imageProps.y,this.imageProps.z1)),
              i.push(new Math2.Point(this.imageProps.x1,this.imageProps.y,this.imageProps.z1)),
              e = {},
              e.startProps = {
                progress: 0,
                duration: 1.2,
                delay: 1
              },
              e.endProps = {
                progress: 0,
                duration: 1.2,
                delay: 6
              },
              e.layerPercent = t / 5,
              n = new ib.FalconTronLine(i,e,!0),
              this.shapeLines.push(n),
              this.lines.push(n);
          return i = [],
            i.push(new Math2.Point(-320,this.container.bottom,this.imageProps.z1)),
            i.push(new Math2.Point(-320,this.imageProps.y,this.imageProps.z1)),
            i.push(new Math2.Point(this.imageProps.x1,this.imageProps.y,this.imageProps.z1)),
            e = {},
            e.startProps = {
              progress: 0,
              duration: 1,
              delay: 0
            },
            e.endProps = {
              progress: 0,
              duration: 1,
              delay: .7
            },
            this.lines.push(new ib.FalconTronLine(i,e)),
            i = [],
            i.push(new Math2.Point(this.container.left,-40,this.imageProps.z1)),
            i.push(new Math2.Point(-260,-40,this.imageProps.z1)),
            i.push(new Math2.Point(-260,-220,this.imageProps.z1)),
            i.push(new Math2.Point(-260,-220,this.imageProps.z1 - 40)),
            i.push(new Math2.Point(-260,this.container.top,this.imageProps.z1 - 40)),
            e = {},
            e.startProps = {
              progress: 0,
              duration: 1.2,
              delay: 0
            },
            e.endProps = {
              progress: 0,
              duration: 1.2,
              delay: 2
            },
            this.lines.push(new ib.FalconTronLine(i,e)),
            i = [],
            i.push(new Math2.Point(this.container.left,0,this.imageProps.z1)),
            i.push(new Math2.Point(-220,0,this.imageProps.z1)),
            i.push(new Math2.Point(-220,-220,this.imageProps.z1)),
            i.push(new Math2.Point(this.container.right,-220,this.imageProps.z1)),
            e = {},
            e.startProps = {
              progress: 0,
              duration: 1.2,
              delay: .15
            },
            e.endProps = {
              progress: 0,
              duration: 1.2,
              delay: 2.15
            },
            this.lines.push(new ib.FalconTronLine(i,e)),
            i = [],
            i.push(new Math2.Point(this.container.left,-20,this.imageProps.z1)),
            i.push(new Math2.Point(-240,-20,this.imageProps.z1)),
            i.push(new Math2.Point(-240,-220,this.imageProps.z1)),
            i.push(new Math2.Point(-240,-220,this.imageProps.z1 - 40)),
            i.push(new Math2.Point(-160,-220,this.imageProps.z1 - 40)),
            i.push(new Math2.Point(-160,this.container.top,this.imageProps.z1 - 40)),
            e = {},
            e.startProps = {
              progress: 0,
              duration: 1.2,
              delay: 1
            },
            e.endProps = {
              progress: 0,
              duration: 1.2,
              delay: 3
            },
            this.lines.push(new ib.FalconTronLine(i,e)),
            i = [],
            i.push(new Math2.Point(this.container.left,this.imageProps.y,this.imageProps.z1 - 40)),
            i.push(new Math2.Point(-340,this.imageProps.y,this.imageProps.z1 - 40)),
            i.push(new Math2.Point(-340,this.imageProps.y,this.imageProps.z1)),
            i.push(new Math2.Point(-340,this.container.bottom,this.imageProps.z1)),
            e = {},
            e.startProps = {
              progress: 0,
              duration: 1.2,
              delay: .6
            },
            e.endProps = {
              progress: 0,
              duration: 1.2,
              delay: 2.2
            },
            this.lines.push(new ib.FalconTronLine(i,e))
        }
        ,
        e.prototype.preparePixi = function() {
          var t, e, i, n;
          for (this.renderer = PIXI.autoDetectRenderer(this.context.width(), this.context.height(), {
            antialias: !0,
            autoResize: !0,
            backgroundColor: 0,
            resolution: window.devicePixelRatio || 1
          }),
                 this.context.prepend(this.renderer.view),
                 this.stage = new PIXI.Container(4095,!0),
                 this.bgLinesGraphic = new PIXI.Graphics,
                 this.maskGraphic = new PIXI.Graphics,
                 this.linesGraphic = new PIXI.Graphics,
                 this.towerGlow = new PIXI.Sprite.fromImage("/assets/work/case-studies/falcon/mach-v-glow.png"),
                 this.towerGlow.anchor.set(.5),
                 t = [],
                 e = n = 0; 30 >= n; e = ++n)
            i = PIXI.Texture.fromImage("/assets/work/case-studies/falcon/mach-v-rotation/" + e + ".png"),
              t.push(i);
          return this.towerMovie = new PIXI.extras.MovieClip(t),
            this.towerMovie.anchor.set(.5),
            this.stage.addChild(this.bgLinesGraphic),
            this.stage.addChild(this.towerMovie),
            this.stage.addChild(this.maskGraphic),
            this.stage.addChild(this.towerGlow),
            this.stage.addChild(this.linesGraphic)
        }
        ,
        e.prototype.onResize = function() {
          var t, e, i, n, r, s, o, a, l, h, c, u, p, d, f, m, g, v, y, E, T, x, b;
          for (i = this.context.width(),
                 e = this.context.height(),
                 r = this.imageProps.el.height(),
                 h = r / this.imageProps.naturalHeight,
                 this.imageProps.scale = h,
                 this.imageProps.h = this.imageProps.targetHeight * h,
                 this.vanish.x = i / 2,
                 this.vanish.y = this.imageProps.vanishY * h + this.imageProps.el.position().top,
                 d = this.imageProps.x * h,
                 f = 90 * h,
                 m = this.imageProps.z1 * h,
                 g = this.imageProps.z2 * h,
                 c = .7 * -e,
                 t = .5 * e,
                 s = -(.5 * i + this.offsetX),
                 l = .5 * i,
                 x = this.lines,
                 v = 0,
                 E = x.length; E > v; v++)
            for (o = x[v],
                   o.updateAnchor(0, 0, g - m),
                   b = o.points,
                   n = y = 0,
                   T = b.length; T > y; n = ++y)
              a = b[n],
              o.isShape && (a.z = 1 === n || 2 === n ? g : m),
                a.x === this.imageProps.x1 ? a.x = -d : a.x === this.imageProps.x2 ? a.x = d : a.x === this.container.left ? a.x = s : a.x === this.container.right && (a.x = l),
                a.y === this.imageProps.y ? a.y = f : a.y === this.container.top ? a.y = c : a.y === this.container.bottom && (a.y = t);
          return this.imageProps.x1 = -d,
            this.imageProps.x2 = d,
            this.imageProps.y = f,
            this.container.top = c,
            this.container.bottom = t,
            this.container.left = s,
            this.container.right = l,
          this.renderer && (console.log("resize"),
            this.maskGraphic.x = this.vanish.x,
            this.maskGraphic.y = this.vanish.y,
            this.bgLinesGraphic.x = this.vanish.x,
            this.bgLinesGraphic.y = this.vanish.y,
            this.linesGraphic.x = this.vanish.x,
            this.linesGraphic.y = this.vanish.y,
            u = this.vanish.x - 1 * h,
            p = this.vanish.y - 72 * h,
            this.towerMovie.position.x = u,
            this.towerMovie.position.y = p,
            this.towerMovie.scale.x = h,
            this.towerMovie.scale.y = h,
            this.towerGlow.position.x = u,
            this.towerGlow.position.y = p,
            this.towerGlow.scale.x = h,
            this.towerGlow.scale.y = h,
            this.renderer.resize(i, e)),
            this.draw()
        }
        ,
        e.prototype.setupTweens = function() {
          var t, e, i, n, r, s, o, a, l, h, c, u;
          for (h = this.lines,
                 s = 0,
                 a = h.length; a > s; s++)
            i = h[s],
              t = i.lineData,
              n = t.startProps,
              this.tweens.push(TweenMax.to(n, n.duration, {
                progress: 1,
                delay: n.delay,
                ease: Linear.easeNone
              })),
              n = t.endProps,
              this.tweens.push(TweenMax.to(n, n.duration, {
                progress: 1,
                delay: n.delay,
                ease: Linear.easeNone
              }));
          for (this.tweens.push(TweenMax.to(this.timelines, 4.4, {
            pan: 1,
            ease: Sine.easeOut,
            onUpdate: this.onPanUpdate
          })),
                 this.tweens.push(TweenMax.to(this.timelines, .75, {
                   expand: 1,
                   delay: 3.8,
                   ease: Expo.easeInOut
                 })),
                 this.tweens.push(TweenMax.to(this.timelines, 1.5, {
                   rotation: 1,
                   delay: 4.55,
                   ease: Expo.easeInOut,
                   onUpdate: this.onRotationUpdate
                 })),
                 this.tweens.push(TweenMax.to(this.timelines, 1.5, {
                   movie: 1,
                   delay: 4.55,
                   ease: Quart.easeInOut,
                   onUpdate: this.onRotationUpdate
                 })),
                 this.tweens.push(TweenMax.to(this.timelines, .75, {
                   collapse: 1,
                   delay: 4.85,
                   ease: Expo.easeInOut
                 })),
                 e = new TimelineLite({
                   delay: 5.8,
                   onUpdate: this.onGlowUpdate
                 }),
                 e.add(TweenMax.fromTo(this.timelines, .8, {
                   glow: 0
                 }, {
                   glow: .25,
                   ease: Expo.easeIn
                 })),
                 e.add(TweenMax.to(this.timelines, .6, {
                   glow: 1,
                   ease: Bounce.easeOut
                 })),
                 this.tweens.push(e),
                 c = this.tweens,
                 u = [],
                 o = 0,
                 l = c.length; l > o; o++)
            r = c[o],
              u.push(r.pause(0));
          return u
        }
        ,
        e.prototype.updateTweensProgress = function() {
          var t, e, i, n, r, s, o, a;
          for (a = this.tweens,
                 s = 0,
                 o = a.length; o > s; s++)
            r = a[s],
              t = r._delay / this.timelineDuration,
              e = e = r._duration / this.timelineDuration,
              n = Math.max(Math.min((this.progress - t) / e, 1), 0),
              i = r.vars.onUpdate,
              r.seek(n * r._duration),
            i && i();
          return this.draw()
        }
        ,
        e.prototype.onPanUpdate = function() {
          var t, e, i;
          return i = this.offsetX * (1 - this.timelines.pan),
            this.globalTranslation.x = i - this.translateRange,
            this.pan.x = this.offsetX - this.timelines.pan * this.offsetX - i + this.translateRange,
            e = .6,
            t = Math.max((this.timelines.pan - e) / (1 - e), 0),
            this.shapeRotation = 30 * t
        }
        ,
        e.prototype.onRotationUpdate = function() {
          var t, e, i, n;
          return 1 === this.timelines.pan && (i = this.timelines.rotation,
            this.shapeRotation = -i * this.rotationRange * 2 + this.rotationRange,
            n = this.translateRange * this.imageProps.scale,
            this.globalTranslation.x = i * n * 2 - n,
            this.pan.x = -i * n * 2 + n,
            t = i / .5,
          t > 1 && (t = 2 - t),
            this.depth = this.depthRange + t * -this.rotationRange),
            e = Math.round(30 * this.timelines.movie),
            e !== this.frameIndex ? (this.frameIndex = e,
              this.updateFrame()) : void 0
        }
        ,
        e.prototype.onGlowUpdate = function() {
          return this.towerGlow.alpha = Math.min(this.timelines.glow, 1)
        }
        ,
        e.prototype.updateFrame = function() {
          return this.towerMovie.gotoAndStop(this.frameIndex)
        }
        ,
        e.prototype.updateLineTranslation = function(t) {
          var e;
          return e = 0,
          t.isShape && (t.rotation = this.shapeRotation,
            e = 0 === this.timelines.collapse ? -this.imageProps.h * Math.min(this.timelines.expand, t.lineData.layerPercent) : -this.imageProps.h * Math.max(this.timelines.collapse, t.lineData.layerPercent)),
            t.translate({
              x: this.globalTranslation.x,
              y: this.globalTranslation.y + e,
              z: this.globalTranslation.z
            })
        }
        ,
        e.prototype.drawPoints = function() {
          var t, e, i, n, r, s, o, a, l, h, c, u, p;
          for (u = this.lines,
                 p = [],
                 h = 0,
                 c = u.length; c > h; h++)
            n = u[h],
              this.updateLineTranslation(n),
              p.push(function() {
                var h, c, u;
                for (u = [],
                       s = h = 0,
                       c = n.totalLines - 1; c >= 0 ? c >= h : h >= c; s = c >= 0 ? ++h : --h)
                  i = this.linesGraphic,
                    l = n.lineData.startProps.progress,
                    e = n.lineData.endProps.progress,
                    a = s / n.totalLines,
                    t = (s + 1) / n.totalLines,
                    l >= a && t >= e ? (o = {
                      p1: n.translated[s],
                      p2: n.translated[s + 1]
                    },
                      r = this.getLineProgress(o, l, e, a, t),
                    n.isShape && (3 === s || 0 === s && this.shapeRotation >= 0 || 2 === s && this.shapeRotation <= 4) && (i = this.bgLinesGraphic),
                      u.push(this.drawLine(r.p1, r.p2, i))) : u.push(void 0);
                return u
              }
                .call(this));
          return p
        }
        ,
        e.prototype.getLineProgress = function(t, e, i, n, r) {
          var s, o, a, l, h;
          return s = {
            x: t.p1.x,
            y: t.p1.y,
            z: t.p1.z
          },
            o = {
              x: t.p2.x,
              y: t.p2.y,
              z: t.p2.z
            },
            l = new THREE.Vector3(t.p1.x,t.p1.y,t.p1.z),
            h = new THREE.Vector3(t.p2.x,t.p2.y,t.p2.z),
          r > e && (a = Math.min((e - n) / (r - n), 1),
            o = l.lerp(h, a)),
          i > n && (a = Math.min((i - n) / (r - n), 1),
            s = l.lerp(h, a)),
            {
              p1: s,
              p2: o
            }
        }
        ,
        e.prototype.drawLine = function(t, e, i) {
          var n, r;
          return r = this.getDepthRatio(t.z),
            i.moveTo(t.x * r + this.pan.x, t.y * r + this.pan.y),
            n = this.getDepthRatio(e.z),
            i.lineTo(e.x * n + this.pan.x, e.y * n + this.pan.y)
        }
        ,
        e.prototype.getDepthRatio = function(t) {
          var e;
          return e = this.depth * this.imageProps.scale,
          e / (e + t)
        }
        ,
        e.prototype.drawMask = function() {
          var t, e, i, n, r;
          return this.maskGraphic.clear(),
            this.maskGraphic.beginFill(),
            t = [],
          this.timelines.expand > 0 && (r = this.shapeLines[0].translated,
            e = null,
            i = null,
            n = null,
            this.shapeRotation >= 0 ? (e = this.convertMaskCoords(r[1]),
              i = this.convertMaskCoords(r[2]),
              n = this.convertMaskCoords(r[3]),
              t.push(e.x, e.y, i.x, i.y, n.x, n.y)) : (e = this.convertMaskCoords(r[0]),
              i = this.convertMaskCoords(r[1]),
              n = this.convertMaskCoords(r[2]),
              t.push(e.x, e.y, i.x, i.y, n.x, n.y)),
            t.push(n.x),
            t.push(n.y + 1e3),
            t.push(e.x),
            t.push(e.y + 1e3),
            t.push(e.x),
            t.push(e.y)),
            this.maskGraphic.drawPolygon(t),
            this.maskGraphic.endFill(),
            this.towerMovie.mask = this.maskGraphic
        }
        ,
        e.prototype.convertMaskCoords = function(t) {
          var e;
          return e = this.getDepthRatio(t.z),
            {
              x: t.x * e + this.pan.x,
              y: t.y * e
            }
        }
        ,
        e.prototype.draw = function() {
          return this.bgLinesGraphic.clear(),
            this.linesGraphic.clear(),
            this.bgLinesGraphic.lineStyle(3, 5156332, this.timelines.lineAlpha),
            this.linesGraphic.lineStyle(3, 5156332, this.timelines.lineAlpha),
            this.drawPoints(),
            this.drawMask(),
            this.renderer.render(this.stage)
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.FalconTronLinesPlayer = function() {
      function e(e) {
        this.context = e,
          this.destroy = t(this.destroy, this),
          this.seekTo = t(this.seekTo, this),
          this.seekOff = t(this.seekOff, this),
          this.seekOn = t(this.seekOn, this),
          this.updateScrubber = t(this.updateScrubber, this),
          this.updateProgress = t(this.updateProgress, this),
          this.pause = t(this.pause, this),
          this.play = t(this.play, this),
          this.playButtonHandler = t(this.playButtonHandler, this),
          this.onResize = t(this.onResize, this),
          this.init = t(this.init, this),
          this.win = $(window),
          this.playButton = $(".play-button", this.context),
          this.progressBar = $(".progress-bar", this.context),
          this.scrubber = $(".scrubber", this.context),
          this.pauseClassName = "pause",
          this.progressBarWidth = 0,
          this.progress = 0,
          this.tween = null,
          this.seeking = !1,
          this.duration = 8,
          this.tronLines = null
      }
      return e.prototype.init = function() {
        return this.playButton.on("click", this.playButtonHandler),
          this.progressBar.on("click", this.seekTo),
          this.progressBar.on("vmousedown", this.seekOn),
          setTimeout(function(t) {
            return function() {
              return t.tronLines = new ib.FalconTronLinesController(t.context,t.duration),
                t.tronLines.initialize()
            }
          }(this), 1e3)
      }
        ,
        e.prototype.onResize = function() {
          return this.progressBarWidth = this.progressBar.width() - this.scrubber.width(),
            this.updateScrubber(),
            this.tronLines ? this.tronLines.onResize() : void 0
        }
        ,
        e.prototype.playButtonHandler = function() {
          return this.playButton.hasClass(this.pauseClassName) ? this.pause() : this.play()
        }
        ,
        e.prototype.play = function() {
          var t;
          return this.playButton.addClass(this.pauseClassName),
            t = this.progress > 0 ? this.duration - this.duration * this.progress : this.duration,
            this.tween = TweenMax.to({
              counter: this.progress
            }, t, {
              counter: 1,
              ease: Linear.easeNone,
              onUpdateParams: ["{self}"],
              onUpdate: function(t) {
                return function(e) {
                  return t.progress = e.target.counter,
                    t.updateProgress()
                }
              }(this),
              onComplete: function(t) {
                return function() {
                  return t.progress = 0,
                    t.playButton.removeClass(t.pauseClassName)
                }
              }(this)
            })
        }
        ,
        e.prototype.pause = function() {
          return this.playButton.removeClass(this.pauseClassName),
          this.tween && this.tween.kill()
        }
        ,
        e.prototype.updateProgress = function() {
          return this.updateScrubber(),
            this.tronLines.progress = this.progress,
            this.tronLines.updateTweensProgress()
        }
        ,
        e.prototype.updateScrubber = function() {
          var t;
          return t = this.progress * this.progressBarWidth,
            TweenMax.set(this.scrubber, {
              x: t
            })
        }
        ,
        e.prototype.seekOn = function() {
          return this.tween && this.tween.kill(),
            this.seeking = !0,
            Modernizr.touch ? (this.progressBar.on("vmouseup", this.seekOff),
              this.progressBar.on("vmousemove", this.seekTo)) : (this.win.on("mouseup", this.seekOff),
              this.win.on("mousemove", this.seekTo))
        }
        ,
        e.prototype.seekOff = function() {
          return this.seeking = !1,
            Modernizr.touch ? (this.progressBar.off("vmouseup", this.seekOff),
              this.progressBar.off("vmousemove", this.seekTo)) : (this.win.off("mouseup", this.seekOff),
              this.win.off("mousemove", this.seekTo)),
            this.playButton.hasClass(this.pauseClassName) ? this.play() : void 0
        }
        ,
        e.prototype.seekTo = function(t) {
          var e, i, n;
          return this.tween && this.tween.kill(),
            n = t.clientX,
            i = this.progressBar.offset().left,
            e = Math.round(n - i),
            this.progress = e / this.progressBar.width(),
            this.progress < 0 ? this.progress = 0 : this.progress > 1 && (this.progress = 1),
            this.updateProgress(),
            this.playButton.hasClass(this.pauseClassName) && !this.seeking ? this.play() : void 0
        }
        ,
        e.prototype.destroy = function() {
          return this.playButton.off("click", this.playButtonHandler),
            this.progressBar.off("click", this.seekTo),
            this.progressBar.off("vmousedown", this.seekOn)
        }
        ,
        e
    }()
}
  .call(this),
function() {
  var t = function(t, e) {
    return function() {
      return t.apply(e, arguments)
    }
  };
  null == this.ib && (this.ib = {}),
    ib.MicrosoftController = function() {
      function e() {
        this.setupAppSelector = t(this.setupAppSelector, this),
          this.updateModule = t(this.updateModule, this),
          this.setupDesktopPag = t(this.setupDesktopPag, this),
          this.updateMagnoStyles = t(this.updateMagnoStyles, this),
          this.updateMagnoPos = t(this.updateMagnoPos, this),
          this.doMagnoLoop = t(this.doMagnoLoop, this),
          this.updateGridZoom = t(this.updateGridZoom, this),
          this.refreshMagno = t(this.refreshMagno, this),
          this.original = null,
          this.originalRect = null,
          this.magnoSize = null,
          this.magno = null,
          this.magnoGrid = null,
          this.magnoPos = null,
          this.magnoTargetPos = null,
          this.magnoRaf = null,
          this.gridItems = null,
          this.shortestGridItem = null,
          this.scrollItems = null,
          this.win = $(window),
          this.winHeight = this.win.height()
      }
      return e.prototype.init = function(t) {
        return this.context = t,
          this.gridItems = this.context.find(".swiper-grid .swiper-slide"),
          this.shortestGridItem = this.gridItems.filter(".shortest"),
          this.originalRect = {},
          this.magnoSize = {},
          this.magnoTargetPos = {
            x: .5,
            y: .74
          },
          this.magnoPos = {
            x: .5,
            y: .74
          },
          this.setupEffectivePixels(),
          this.setupGrid(),
          this.setupApps(),
          this.update(),
          this.magnoRaf = requestAnimationFrame(this.doMagnoLoop),
          this.scrollItems = this.context.find(".animate-scroll")
      }
        ,
        e.prototype.onResize = function() {
          return this.winHeight = this.win.height(),
            this.switchRetina(),
            this.update()
        }
        ,
        e.prototype.onScroll = function() {
          return this.scrollItems.each(function(t) {
            return function(e, i) {
              var n;
              return n = $(i),
                !n.hasClass("animate") && n.offset().top + n.height() < t.winHeight ? n.addClass("animate") : void 0
            }
          }(this))
        }
        ,
        e.prototype.switchRetina = function() {
          var t;
          return t = this.isRetina(),
            this.context.find(".retina-image").each(function(e, i) {
              var n, r, s, o, a;
              return s = $(i),
                a = s.attr("src"),
                o = a,
                n = a.indexOf("@2x") >= 0,
                t && !n ? (r = a.split(".").pop(),
                  o = "" + a.replace("." + r, "") + "@2x." + r) : !t && n && (o = a.replace("@2x", "")),
                o !== a ? s.attr("src", o) : void 0
            })
        }
        ,
        e.prototype.isRetina = function() {
          var t;
          return window.matchMedia ? (t = window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)"),
          t && t.matches || window.devicePixelRatio > 1) : window.devicePixelRatio > 1 ? !0 : !1
        }
        ,
        e.prototype.update = function() {
          return this.originalRect = {
            x: this.original.offset().left,
            y: this.original.offset().top,
            w: this.original.width(),
            h: this.original.height()
          },
            this.magnoSize = {
              w: this.magnoGrid.width(),
              h: this.magnoGrid.height()
            },
            this.refreshMagno(),
            this.gridItems.css("max-height", "none"),
            this.gridItems.css("max-height", this.shortestGridItem.height())
        }
        ,
        e.prototype.refreshMagno = function() {
          return this.updateMagno(this.magnoPos.x, this.magnoPos.y)
        }
        ,
        e.prototype.setupEffectivePixels = function() {
          return this.original = this.context.find(".effective-pixels-wrapper .original"),
            this.magno = this.original.find(".magno"),
            this.magnoGrid = this.magno.find("img"),
            this.original.on("mousemove", this.updateGridZoom),
            this.original.on("mouseenter", function(t) {
              return function() {
                return TweenMax.to(t.magno, .7, {
                  scale: 1,
                  ease: Back.easeOut
                })
              }
            }(this)),
            this.original.on("mouseleave", function(t) {
              return function() {
                return TweenMax.to(t.magno, .3, {
                  scale: .8,
                  ease: Quad.easeOut
                })
              }
            }(this))
        }
        ,
        e.prototype.updateGridZoom = function(t) {
          var e, i;
          return e = Math.max(0, (t.clientX - this.originalRect.x) / this.originalRect.w),
            i = Math.min(1, (t.clientY - this.original.offset().top) / this.originalRect.h),
            this.updateMagno(e, i)
        }
        ,
        e.prototype.updateMagno = function(t, e) {
          return this.magnoTargetPos.x = t,
            this.magnoTargetPos.y = e
        }
        ,
        e.prototype.doMagnoLoop = function() {
          return this.magnoRaf = requestAnimationFrame(this.doMagnoLoop),
            this.updateMagnoPos()
        }
        ,
        e.prototype.updateMagnoPos = function() {
          return this.magnoPos.x += .7 * (this.magnoTargetPos.x - this.magnoPos.x),
            this.magnoPos.y += .7 * (this.magnoTargetPos.y - this.magnoPos.y),
          (1e-4 > Math.abs(this.magnoPos.x - this.magnoTargetPos.x) || 1e-4 > Math.abs(this.magnoPos.y - this.magnoTargetPos.y)) && (this.magnoPos.x = this.magnoTargetPos.x,
            this.magnoPos.y = this.magnoTargetPos.y),
            this.updateMagnoStyles()
        }
        ,
        e.prototype.updateMagnoStyles = function() {
          return TweenMax.set(this.magno, {
            x: "" + this.magnoPos.x * this.originalRect.w + "px",
            y: "" + this.magnoPos.y * this.originalRect.h + "px"
          }),
            TweenMax.set(this.magnoGrid, {
              x: "" + -this.magnoPos.x * this.magnoSize.w + "%",
              y: "" + -this.magnoPos.y * this.magnoSize.h + "%"
            })
        }
        ,
        e.prototype.gatherTypes = function(t) {
          var e;
          return e = [],
            t.find(".pag-wrap").each(function(t, i) {
              return e.push($(i).data("type"))
            }),
            e
        }
        ,
        e.prototype.setupGrid = function() {
          var t, e;
          return t = this.context.find(".microsoft-grid-module .pagination"),
            e = this.gatherTypes(t.eq(0)),
            this.setupDesktopPag(e, t, this.context.find(".swiper-grid").swiper({
              grabCursor: !0,
              spaceBetween: 20,
              pagination: ".pagination-mobile-grid",
              paginationClickable: !0,
              onSlideChangeStart: function(i) {
                return function(n) {
                  return i.updateModule(e, t, n.activeIndex)
                }
              }(this)
            }))
        }
        ,
        e.prototype.setupDesktopPag = function(t, e, i) {
          return e.on("click", function(e) {
            var n;
            return n = $(e.currentTarget).find(".pag-wrap.active").data("type"),
              i.slideTo(t.indexOf(n))
          })
        }
        ,
        e.prototype.updateModule = function(t, e, i) {
          var n, r, s, o;
          return t = this.gatherTypes(e.eq(0)),
            e.find(".pag-wrap").removeClass("active"),
            n = e.filter(".pag-left"),
            r = i - 1,
            r = 0 > i ? t.length - 1 : r,
            n.find(".pag-wrap").eq(r).addClass("active"),
            s = e.filter(".pag-right"),
            o = i + 1,
            o = o >= t.length ? 0 : o,
            s.find(".pag-wrap").eq(o).addClass("active")
        }
        ,
        e.prototype.setupApps = function() {
          var t, e;
          return this.setupAppSelector(),
            t = this.context.find(".apps-wrapper .pagination"),
            e = this.gatherTypes(t.eq(0)),
            this.setupDesktopPag(e, t, this.context.find(".swiper-apps").swiper({
              slidesPerView: "auto",
              grabCursor: !0,
              pagination: ".pagination-mobile-apps",
              paginationClickable: !0,
              onSlideChangeStart: function(i) {
                return function(n) {
                  return i.updateModule(e, t, n.activeIndex)
                }
              }(this)
            }))
        }
        ,
        e.prototype.setupAppSelector = function() {
          var t, e, i;
          return this.context.find(".swiper-app-selector").swiper({
            slidesPerView: "auto",
            grabCursor: !0
          }),
            t = this.context.find(".apps-wrapper figure > img"),
            e = this.context.find(".app-selector > li figure"),
            i = this.context.find(".apps-copy li"),
            e.on("click", function(n) {
              var r;
              return r = $(n.currentTarget).parent().index(),
                i.removeClass("active"),
                i.eq(r).addClass("active"),
                e.removeClass("active"),
                e.eq(r).addClass("active"),
                t.removeClass("active"),
                t.each(function(t, i) {
                  return t % e.length === r ? $(i).addClass("active") : void 0
                })
            })
        }
        ,
        e.prototype.destroy = function() {
          var t, e, i, n, r;
          return cancelAnimationFrame(this.magnoRaf),
          this.original && this.original.off(),
            n = null,
            r = {},
            i = {},
            t = null,
            e = null
        }
        ,
        e
    }()
}
  .call(this),
$(window).ready(ib.Main.init);
